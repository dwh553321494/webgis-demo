(function(t){var e={};function r(n){if(e[n]){return e[n].exports}var i=e[n]={i:n,l:false,exports:{}};t[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=t;r.c=e;r.d=function(t,e,n){if(!r.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:n})}};r.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};r.t=function(t,e){if(e&1)t=r(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n};r.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s=285)})([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=window.Zondy=window.Zondy||{};n.Event=n.Event||{};n.Object=n.Object||{};n.Object.ContourAnalyse=n.Object.ContourAnalyse||{};n.Object.Theme=n.Object.Theme||{};n.Theme=n.Theme||{};n.Service=n.Service||{};n.Socket=n.Socket||{};n.Enum=n.Enum||{};n.Enum.Net=n.Enum.Net||{};n.Enum.Theme=n.Enum.Theme||{};n.Enum.Map=n.Enum.Map||{};n.Catalog=n.Catalog||{};n.Util=n.Util||{};n.CRS=n.CRS||{};n.Map=n.Map||{};n.xsd=n.xsd||{};n.XLink=n.XLink||{};n.extent=n.extent||{};n.xml=n.xml||{};n.array=n.array||{};n.string=n.string||{};n.LevelRenderer=n.LevelRenderer||{};n.LevelRenderer.Tool=n.LevelRenderer.Tool||{};n.LevelRenderer.Animation=n.LevelRenderer.Animation||{};n.Feature=n.Feature||{};n.Feature.ShapeParameters=n.Feature.ShapeParameters||{};n.Geometry=n.Geometry||{};n.Client=n.Client||{};n.Source=n.Source||{};n.GeomInteraction=n.GeomInteraction||{};n.Format=n.Format||{};n.Control=n.Control||{};n.OGC=n.OGC||{};n.DataStore=n.DataStore||{};n.DataStore.ElasticSearch=n.DataStore.ElasticSearch||{};n.DataStore.PostGIS=n.DataStore.PostGIS||{};n.DataStore.Hbase=n.DataStore.Hbase||{};n.DataStore.MongoDB=n.DataStore.MongoDB||{};n.CloudDisk=n.CloudDisk||{};n.CloudDisk.GisCore=n.CloudDisk.GisCore||{};n.CloudDisk.Model=n.CloudDisk.Model||{};n.IGServerX=n.IGServerX||{};n.IGServerX.Vector=n.IGServerX.Vector||{};e.Zondy=n},function(t,e,r){"use strict";e.__esModule=true;e.default=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}},function(t,e,r){t.exports={default:r(331),__esModule:true}},function(t,e,r){"use strict";e.__esModule=true;var n=r(50);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"||typeof e==="function")?e:t}},function(t,e,r){"use strict";e.__esModule=true;var n=r(333);var i=l(n);var o=r(337);var s=l(o);var a=r(50);var u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":(0,u.default)(e)))}t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)i.default?(0,i.default)(t,e):t.__proto__=e}},function(t,e,r){"use strict";e.__esModule=true;e.default=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}},function(t,e,r){"use strict";e.__esModule=true;var n=r(448);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,i.default)(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}()},function(t,e,r){(function(t,r){/*! For license information please see webclient-es6-service.min.js.LICENSE.txt */
(()=>{var n={9644:(t,e,r)=>{t.exports=r(5644)},353:(t,e,r)=>{"use strict";var n=r(3044),i=r(6955),o=r(8030),s=r(1875),a=r(842),u=r(8618);t.exports=function(t){return new Promise(function(e,l){var c=t.data,h=t.headers;n.isFormData(c)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+d)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:t,request:f};i(e,l,n),f=null}},f.onerror=function(){l(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var y=r(2233),v=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;v&&(h[t.xsrfHeaderName]=v)}if("setRequestHeader"in f&&n.forEach(h,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),l(t),f=null)}),void 0===c&&(c=null),f.send(c)})}},5644:(t,e,r)=>{"use strict";var n=r(3044),i=r(3644),o=r(7728),s=r(1439);function a(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var u=a(s);u.Axios=o,u.create=function(t){return a(n.merge(s,t))},u.Cancel=r(6714),u.CancelToken=r(4089),u.isCancel=r(8041),u.all=function(t){return Promise.all(t)},u.spread=r(783),t.exports=u,t.exports.default=u},6714:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4089:(t,e,r)=>{"use strict";var n=r(6714);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},8041:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},7728:(t,e,r)=>{"use strict";var n=r(1439),i=r(3044),o=r(946),s=r(6895);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},i.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,r){return this.request(i.merge(r||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,r,n){return this.request(i.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=a},946:(t,e,r)=>{"use strict";var n=r(3044);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},8618:(t,e,r)=>{"use strict";var n=r(1935);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},6895:(t,e,r)=>{"use strict";var n=r(3044),i=r(8556),o=r(8041),s=r(1439),a=r(9192),u=r(8762);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},1935:t=>{"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t}},6955:(t,e,r)=>{"use strict";var n=r(8618);t.exports=function(t,e,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},8556:(t,e,r)=>{"use strict";var n=r(3044);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},1439:(e,r,n)=>{"use strict";var i=n(3044),o=n(8868),s={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u,l={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof t)&&(u=n(353)),u),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(s)}),e.exports=l},3644:t=>{"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},8030:(t,e,r)=>{"use strict";var n=r(3044);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},8762:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},2233:(t,e,r)=>{"use strict";var n=r(3044);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9192:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},842:(t,e,r)=>{"use strict";var n=r(3044);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},8868:(t,e,r)=>{"use strict";var n=r(3044);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},1875:(t,e,r)=>{"use strict";var n=r(3044),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}}),s):s}},783:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},3044:(t,e,r)=>{"use strict";var n=r(3644),i=r(2744),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return e},extend:function(t,e,r){return l(e,function(e,i){t[i]=r&&"function"==typeof e?n(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},2744:t=>{t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},5470:(t,e)=>{var r="AJSAJS",n="AFAFAF",i=65,o=73,s=79,a=86,u=90;function l(t){return t*(Math.PI/180)}function c(t){return t/Math.PI*180}function h(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,u,l,f,p,d,y,v=.9996,g=6378137,m=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),x=r-5e5,b=e;n<"N"&&(b-=1e7),p=6*(i-1)-180+3,o=.006739496752268451,y=(d=b/v/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*d)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*d)+151*_*_*_/96*Math.sin(6*d),s=g/Math.sqrt(1-m*Math.sin(y)*Math.sin(y)),a=Math.tan(y)*Math.tan(y),u=o*Math.cos(y)*Math.cos(y),l=.99330562*g/Math.pow(1-m*Math.sin(y)*Math.sin(y),1.5),f=x/(s*v);var S=y-s*Math.tan(y)/l*(f*f/2-(5+3*a+10*u-4*u*u-9*o)*f*f*f*f/24+(61+90*a+298*u+45*a*a-1.6983531815716497-3*u*u)*f*f*f*f*f*f/720);S=c(S);var C,w=(f-(1+2*a+u)*f*f*f/6+(5-2*u+28*a-3*u*u+8*o+24*a*a)*f*f*f*f*f/120)/Math.cos(y);if(w=p+c(w),t.accuracy){var I=h({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:I.lat,right:I.lon,bottom:S,left:w}}else C={lat:S,lon:w};return C}function f(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function p(t){var e=t%6;return 0===e&&(e=6),e}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,l=t.length,c=null,h="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;h+=e,f++}var d=parseInt(h,10);if(0===f||f+3>l)throw"MGRSPoint bad conversion from: "+t;var v=t.charAt(f++);if(v<="A"||"B"===v||"Y"===v||v>="Z"||"I"===v||"O"===v)throw"MGRSPoint zone letter "+v+" not handled: "+t;c=t.substring(f,f+=2);for(var g=p(d),m=function(t,e){var n=r.charCodeAt(e-1),a=1e5,l=!1;for(;n!==t.charCodeAt(0);){if(++n===o&&n++,n===s&&n++,n>u){if(l)throw"Bad character: "+t;n=i,l=!0}a+=1e5}return a}(c.charAt(0),g),_=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=n.charCodeAt(e-1),u=0,l=!1;for(;r!==t.charCodeAt(0);){if(++r===o&&r++,r===s&&r++,r>a){if(l)throw"Bad character: "+t;r=i,l=!0}u+=1e5}return u}(c.charAt(1),g);_<y(v);)_+=2e6;var x=l-f;if(x%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var b,S,C,w=x/2,I=0,P=0;return w>0&&(b=1e5/Math.pow(10,w),S=t.substring(f,f+w),I=parseFloat(S)*b,C=t.substring(f+w),P=parseFloat(C)*b),{easting:I+m,northing:P+_,zoneLetter:v,zoneNumber:d,accuracy:b}}function y(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.forward=function(t,e){return e=e||5,function(t,e){var l="00000"+t.easting,c="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(b=t.easting,S=t.northing,C=t.zoneNumber,w=p(C),I=Math.floor(b/1e5),P=Math.floor(S/1e5)%20,h=I,f=P,d=w,y=d-1,v=r.charCodeAt(y),g=n.charCodeAt(y),m=v+h-1,_=g+f,x=!1,m>u&&(m=m-u+i-1,x=!0),(m===o||v<o&&m>o||(m>o||v<o)&&x)&&m++,(m===s||v<s&&m>s||(m>s||v<s)&&x)&&++m===o&&m++,m>u&&(m=m-u+i-1),_>a?(_=_-a+i-1,x=!0):x=!1,(_===o||g<o&&_>o||(_>o||g<o)&&x)&&_++,(_===s||g<s&&_>s||(_>s||g<s)&&x)&&++_===o&&_++,_>a&&(_=_-a+i-1),String.fromCharCode(m)+String.fromCharCode(_))+l.substr(l.length-5,e)+c.substr(c.length-5,e);var h,f,d,y,v,g,m,_,x;var b,S,C,w,I,P}(function(t){var e,r,n,i,o,s,a,u,c=t.lat,h=t.lon,p=6378137,d=.00669438,y=.9996,v=l(c),g=l(h);u=Math.floor((h+180)/6)+1,180===h&&(u=60);c>=56&&c<64&&h>=3&&h<12&&(u=32);c>=72&&c<84&&(h>=0&&h<9?u=31:h>=9&&h<21?u=33:h>=21&&h<33?u=35:h>=33&&h<42&&(u=37));a=l(6*(u-1)-180+3),e=d/(1-d),r=p/Math.sqrt(1-d*Math.sin(v)*Math.sin(v)),n=Math.tan(v)*Math.tan(v),i=e*Math.cos(v)*Math.cos(v),o=Math.cos(v)*(g-a),s=p*((1-d/4-3*d*d/64-5*d*d*d/256)*v-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*v)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*v)-35*d*d*d/3072*Math.sin(6*v));var m=y*r*(o+(1-n+i)*o*o*o/6+(5-18*n+n*n+72*i-58*e)*o*o*o*o*o/120)+5e5,_=y*(s+r*Math.tan(v)*(o*o/2+(5-n+9*i+4*i*i)*o*o*o*o/24+(61-58*n+n*n+600*i-330*e)*o*o*o*o*o*o/720));c<0&&(_+=1e7);return{northing:Math.round(_),easting:Math.round(m),zoneNumber:u,zoneLetter:f(c)}}({lat:t[1],lon:t[0]}),e)},e.inverse=function(t){var e=h(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},e.toPoint=function(t){var e=h(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},1559:(t,e,r)=>{var n=r(5470);function i(t,e,r){if(!(this instanceof i))return new i(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(t){return new i(n.toPoint(t))},i.prototype.toMGRS=function(t){return n.forward([this.x,this.y],t)},t.exports=i},1934:(t,e,r)=>{var n=r(2499),i=r(5248),o=r(5198),s=r(5794);function a(t,e){if(!(this instanceof a))return new a(t);e=e||function(t){if(t)throw t};var r=n(t);if("object"==typeof r){var o=s(r),u=a.projections.get(o.projName);u?(i(this,o),i(this,u),this.init(),e(null,this)):e(t)}else e(t)}a.projections=o,a.projections.start(),t.exports=a},7899:t=>{t.exports=function(t,e,r){var n,i,o,s=r.x,a=r.y,u=r.z||0;for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=s,i="x"):1===o?(n=a,i="y"):(n=u,i="z"),t.axis[o]){case"e":case"n":r[i]=n;break;case"w":case"s":r[i]=-n;break;case"u":void 0!==r[i]&&(r.z=n);break;case"d":void 0!==r[i]&&(r.z=-n);break;default:return null}return r}},1079:(t,e,r)=>{var n=Math.PI/2,i=r(7719);t.exports=function(t){return Math.abs(t)<n?t:t-i(t)*Math.PI}},8757:(t,e,r)=>{var n=2*Math.PI,i=r(7719);t.exports=function(t){return Math.abs(t)<=3.14159265359?t:t-i(t)*n}},1228:t=>{t.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},4126:t=>{t.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},144:t=>{t.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},4094:t=>{t.exports=function(t){return.05859375*t*t*(1+.75*t)}},9759:t=>{t.exports=function(t){return t*t*t*(35/3072)}},9789:t=>{t.exports=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}},8864:t=>{t.exports=function(t,e,r,n,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}},2267:t=>{var e=Math.PI/2;t.exports=function(t,r){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(r)-n)<1e-6)return r<0?-1*e:e;for(var i,o,s,a,u=Math.asin(.5*r),l=0;l<30;l++)if(o=Math.sin(u),s=Math.cos(u),a=t*o,u+=i=Math.pow(1-a*a,2)/(2*s)*(r/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return u;return NaN}},2792:t=>{t.exports=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}},1847:t=>{t.exports=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}},8255:t=>{var e=Math.PI/2;t.exports=function(t,r){for(var n,i,o=.5*t,s=e-2*Math.atan(r),a=0;a<=15;a++)if(n=t*Math.sin(s),s+=i=e-2*Math.atan(r*Math.pow((1-n)/(1+n),o))-s,Math.abs(i)<=1e-10)return s;return-9999}},7271:t=>{var e=.046875,r=.01953125,n=.01068115234375;t.exports=function(t){var i=[];i[0]=1-t*(.25+t*(e+t*(r+t*n))),i[1]=t*(.75-t*(e+t*(r+t*n)));var o=t*t;return i[2]=o*(.46875-t*(.013020833333333334+.007120768229166667*t)),o*=t,i[3]=o*(.3645833333333333-.005696614583333333*t),i[4]=o*t*.3076171875,i}},2504:(t,e,r)=>{var n=r(9156);t.exports=function(t,e,r){for(var i=1/(1-e),o=t,s=20;s;--s){var a=Math.sin(o),u=1-e*a*a;if(o-=u=(n(o,a,Math.cos(o),r)-t)*(u*Math.sqrt(u))*i,Math.abs(u)<1e-10)return o}return o}},9156:t=>{t.exports=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}},3674:t=>{t.exports=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}},7719:t=>{t.exports=function(t){return t<0?-1:1}},3405:t=>{t.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},8568:t=>{t.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},5327:t=>{var e=Math.PI/2;t.exports=function(t,r,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(e-r))/i}},7769:(t,e)=>{e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},5702:(t,e)=>{e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},5555:(t,e)=>{e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667},1813:(t,e)=>{e.ft={to_meter:.3048},e["us-ft"]={to_meter:1200/3937}},2353:(t,e,r)=>{var n=r(1934),i=r(1484),o=n("WGS84");function s(t,e,r){var n;return Array.isArray(r)?(n=i(t,e,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):i(t,e,r)}function a(t){return t instanceof n?t:t.oProj?t.oProj:n(t)}t.exports=function(t,e,r){t=a(t);var n,i=!1;return void 0===e?(e=t,t=o,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=o,i=!0),e=a(e),r?s(t,e,r):(n={forward:function(r){return s(t,e,r)},inverse:function(r){return s(e,t,r)}},i&&(n.oProj=e),n)}},7801:t=>{var e=Math.PI/2,r=484813681109536e-20,n=.3826834323650898,i=function(t){if(!(this instanceof i))return new i(t);this.datum_type=4,t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=5),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=r,this.datum_params[4]*=r,this.datum_params[5]*=r,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=t.grids?3:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,3===this.datum_type&&(this.grids=t.grids))};i.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var r,n,i,o,s,a,u,l=t.x,c=t.y,h=t.z?t.z:0;if(c<-e&&c>-1.001*e)c=-e;else if(c>e&&c<1.001*e)c=e;else if(c<-e||c>e)return null;return l>Math.PI&&(l-=2*Math.PI),s=Math.sin(c),u=Math.cos(c),a=s*s,r=((o=this.a/Math.sqrt(1-this.es*a))+h)*u*Math.cos(l),n=(o+h)*u*Math.sin(l),i=(o*(1-this.es)+h)*s,t.x=r,t.y=n,t.z=i,0},geocentric_to_geodetic:function(t){var r,n,i,o,s,a,u,l,c,h,f,p,d,y,v,g,m=1e-12,_=t.x,x=t.y,b=t.z?t.z:0;if(!1,r=Math.sqrt(_*_+x*x),n=Math.sqrt(_*_+x*x+b*b),r/this.a<m){if(!0,y=0,n/this.a<m)return v=e,void(g=-this.b)}else y=Math.atan2(x,_);i=b/n,o=r/n,s=1/Math.sqrt(1-this.es*(2-this.es)*o*o),l=o*(1-this.es)*s,c=i*s,d=0;do{d++,g=r*l+b*c-(u=this.a/Math.sqrt(1-this.es*c*c))*(1-this.es*c*c),a=this.es*u/(u+g),p=(f=i*(s=1/Math.sqrt(1-a*(2-a)*o*o)))*l-(h=o*(1-a)*s)*c,l=h,c=f}while(p*p>1e-24&&d<30);return v=Math.atan(f/Math.abs(h)),t.x=y,t.y=v,t.z=g,t},geocentric_to_geodetic_noniter:function(t){var r,i,o,s,a,u,l,c,h,f,p,d,y,v,g,m,_,x=t.x,b=t.y,S=t.z?t.z:0;if(x=parseFloat(x),b=parseFloat(b),S=parseFloat(S),_=!1,0!==x)r=Math.atan2(b,x);else if(b>0)r=e;else if(b<0)r=-e;else if(_=!0,r=0,S>0)i=e;else{if(!(S<0))return i=e,void(o=-this.b);i=-e}return a=x*x+b*b,u=1.0026*S,d=(s=Math.sqrt(a))/(c=Math.sqrt(u*u+a)),p=(f=u/c)*f*f,l=S+this.b*this.ep2*p,m=s-this.a*this.es*d*d*d,y=l/(h=Math.sqrt(l*l+m*m)),v=m/h,g=this.a/Math.sqrt(1-this.es*y*y),o=v>=n?s/v-g:v<=-n?s/-v-g:S/y+g*(this.es-1),!1===_&&(i=Math.atan(y/v)),t.x=r,t.y=i,t.z=o,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],r=this.datum_params[1],n=this.datum_params[2],i=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=a*(t.x-s*t.y+o*t.z)+e,l=a*(s*t.x+t.y-i*t.z)+r,c=a*(-o*t.x+i*t.y+t.z)+n;t.x=u,t.y=l,t.z=c}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],r=this.datum_params[1],n=this.datum_params[2],i=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=(t.x-e)/a,l=(t.y-r)/a,c=(t.z-n)/a;t.x=u+s*l-o*c,t.y=-s*u+l+i*c,t.z=o*u-i*l+c}}},t.exports=i},3478:t=>{var e=6378137,r=.006694379990141316;t.exports=function(t,n,i){var o,s,a;function u(t){return 1===t||2===t}if(t.compare_datums(n))return i;if(5===t.datum_type||5===n.datum_type)return i;var l=t.a,c=t.es,h=n.a,f=n.es,p=t.datum_type;if(3===p)if(0===this.apply_gridshift(t,0,i))t.a=e,t.es=r;else{if(!t.datum_params)return t.a=l,t.es=t.es,i;for(o=1,s=0,a=t.datum_params.length;s<a;s++)o*=t.datum_params[s];if(0===o)return t.a=l,t.es=t.es,i;p=t.datum_params.length>3?2:1}return 3===n.datum_type&&(n.a=e,n.es=r),(t.es!==n.es||t.a!==n.a||u(p)||u(n.datum_type))&&(t.geodetic_to_geocentric(i),u(t.datum_type)&&t.geocentric_to_wgs84(i),u(n.datum_type)&&n.geocentric_from_wgs84(i),n.geocentric_to_geodetic(i)),3===n.datum_type&&this.apply_gridshift(n,1,i),t.a=l,t.es=c,n.a=h,n.es=f,i}},8969:(t,e,r)=>{var n=r(6819),i=r(7369),o=r(2576);function s(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?s[t]=i(arguments[1]):s[t]=o(arguments[1]):s[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?s.apply(e,t):s(t)});if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}n(s),t.exports=s},5794:(t,e,r)=>{var n=r(7769),i=r(5702),o=r(5248),s=r(7801);t.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=n[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var r=i[t.ellps]?i[t.ellps]:i.WGS84;o(t,r)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=s(t)),t}},5248:t=>{t.exports=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}},6819:t=>{t.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},1850:(t,e,r)=>{var n=[r(9194),r(388),r(6964),r(7981),r(3231),r(3563),r(6030),r(3410),r(9443),r(8369),r(5674),r(5404),r(1453),r(1054),r(1265),r(6288),r(6874),r(1707),r(766),r(6473),r(7002),r(9746)];t.exports=function(t){n.forEach(function(e){t.Proj.projections.add(e)})}},4488:(t,e,r)=>{var n=r(2353);n.defaultDatum="WGS84",n.Proj=r(1934),n.WGS84=new n.Proj("WGS84"),n.Point=r(1559),n.toPoint=r(8568),n.defs=r(8969),n.transform=r(1484),n.mgrs=r(5470),n.version=r(2075).i8,r(1850)(n),t.exports=n},2499:(t,e,r)=>{var n=r(8969),i=r(2576),o=r(7369);t.exports=function(t){return function(t){return"string"==typeof t}(t)?function(t){return t in n}(t)?n[t]:function(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,r){return e+1+t.indexOf(r)},0)}(t)?i(t):function(t){return"+"===t[0]}(t)?o(t):void 0:t}},7369:(t,e,r)=>{var n=.017453292519943295,i=r(5555),o=r(1813);t.exports=function(t){var e,r,s,a={},u={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),u[e[0].toLowerCase()]=e[1]});var l={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*n},lat_1:function(t){a.lat1=t*n},lat_2:function(t){a.lat2=t*n},lat_ts:function(t){a.lat_ts=t*n},lon_0:function(t){a.long0=t*n},lon_1:function(t){a.long1=t*n},lon_2:function(t){a.long2=t*n},alpha:function(t){a.alpha=parseFloat(t)*n},lonc:function(t){a.longc=t*n},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(t){a.units=t,o[t]&&(a.to_meter=o[t].to_meter)},from_greenwich:function(t){a.from_greenwich=t*n},pm:function(t){a.from_greenwich=(i[t]?i[t]:parseFloat(t))*n},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(a.axis=t)}};for(e in u)r=u[e],e in l?"function"==typeof(s=l[e])?s(r):a[s]=r:a[e]=r;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},5198:(t,e,r)=>{var n=[r(6913),r(6938)],i={},o=[];function s(t,e){var r=o.length;return t.names?(o[r]=t,t.names.forEach(function(t){i[t.toLowerCase()]=r}),this):(console.log(e),!0)}e.add=s,e.get=function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==i[e]&&o[i[e]]?o[i[e]]:void 0},e.start=function(){n.forEach(s)}},5674:(t,e,r)=>{var n=1e-10,i=r(1847),o=r(3674),s=r(8757),a=r(1228);e.init=function(){Math.abs(this.lat1+this.lat2)<n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=i(this.e3,this.sin_po,this.cos_po),this.qs1=o(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=i(this.e3,this.sin_po,this.cos_po),this.qs2=o(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=o(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>n?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},e.forward=function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=o(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*s(e-this.long0),u=i*Math.sin(a)+this.x0,l=this.rh-i*Math.cos(a)+this.y0;return t.x=u,t.y=l,t},e.inverse=function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=s(i/this.ns0+this.long0),t.x=o,t.y=a,t},e.phi1z=function(t,e){var r,i,o,s,u=a(.5*e);if(t<n)return u;for(var l=t*t,c=1;c<=25;c++)if(u+=s=.5*(o=1-(i=t*(r=Math.sin(u)))*i)*o/Math.cos(u)*(e/(1-l)-r/o+.5/t*Math.log((1-i)/(1+i))),Math.abs(s)<=1e-7)return u;return null},e.names=["Albers_Conic_Equal_Area","Albers","aea"]},9746:(t,e,r)=>{var n=r(8757),i=Math.PI/2,o=1e-10,s=r(2792),a=r(4126),u=r(144),l=r(4094),c=r(9759),h=r(9789),f=r(1228),p=r(8864);e.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},e.forward=function(t){var e,r,f,p,d,y,v,g,m,_,x,b,S,C,w,I,P,E,M,L,N,T,O=t.x,R=t.y,A=Math.sin(t.y),F=Math.cos(t.y),D=n(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=o?(t.x=this.x0+this.a*(i-R)*Math.sin(D),t.y=this.y0-this.a*(i-R)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=o?(t.x=this.x0+this.a*(i+R)*Math.sin(D),t.y=this.y0+this.a*(i+R)*Math.cos(D),t):(E=this.sin_p12*A+this.cos_p12*F*Math.cos(D),P=(I=Math.acos(E))/Math.sin(I),t.x=this.x0+this.a*P*F*Math.sin(D),t.y=this.y0+this.a*P*(this.cos_p12*A-this.sin_p12*F*Math.cos(D)),t):(e=a(this.es),r=u(this.es),f=l(this.es),p=c(this.es),Math.abs(this.sin_p12-1)<=o?(d=this.a*s(e,r,f,p,i),y=this.a*s(e,r,f,p,R),t.x=this.x0+(d-y)*Math.sin(D),t.y=this.y0-(d-y)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=o?(d=this.a*s(e,r,f,p,i),y=this.a*s(e,r,f,p,R),t.x=this.x0+(d+y)*Math.sin(D),t.y=this.y0+(d+y)*Math.cos(D),t):(v=A/F,g=h(this.a,this.e,this.sin_p12),m=h(this.a,this.e,A),_=Math.atan((1-this.es)*v+this.es*g*this.sin_p12/(m*F)),M=0===(x=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(_)-this.sin_p12*Math.cos(D)))?Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.abs(Math.abs(x)-Math.PI)<=o?-Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.asin(Math.sin(D)*Math.cos(_)/Math.sin(x)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),I=g*M*(1-(L=M*M)*(w=(S=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es))*S)*(1-w)/6+(N=L*M)/8*(C=b*S)*(1-2*w)+(T=N*M)/120*(w*(4-7*w)-3*b*b*(1-7*w))-T*M/48*C),t.x=this.x0+I*Math.sin(x),t.y=this.y0+I*Math.cos(x),t))},e.inverse=function(t){var e,r,d,y,v,g,m,_,x,b,S,C,w,I,P,E,M,L,N,T,O,R;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i*this.a)return;return r=e/this.a,d=Math.sin(r),y=Math.cos(r),v=this.long0,Math.abs(e)<=o?g=this.lat0:(g=f(y*this.sin_p12+t.y*d*this.cos_p12/e),m=Math.abs(this.lat0)-i,v=Math.abs(m)<=o?this.lat0>=0?n(this.long0+Math.atan2(t.x,-t.y)):n(this.long0-Math.atan2(-t.x,t.y)):n(this.long0+Math.atan2(t.x*d,e*this.cos_p12*y-t.y*this.sin_p12*d))),t.x=v,t.y=g,t}return _=a(this.es),x=u(this.es),b=l(this.es),S=c(this.es),Math.abs(this.sin_p12-1)<=o?(C=this.a*s(_,x,b,S,i),e=Math.sqrt(t.x*t.x+t.y*t.y),g=p((C-e)/this.a,_,x,b,S),v=n(this.long0+Math.atan2(t.x,-1*t.y)),t.x=v,t.y=g,t):Math.abs(this.sin_p12+1)<=o?(C=this.a*s(_,x,b,S,i),e=Math.sqrt(t.x*t.x+t.y*t.y),g=p((e-C)/this.a,_,x,b,S),v=n(this.long0+Math.atan2(t.x,t.y)),t.x=v,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),P=Math.atan2(t.x,t.y),w=h(this.a,this.e,this.sin_p12),E=Math.cos(P),L=-(M=this.e*this.cos_p12*E)*M/(1-this.es),N=3*this.es*(1-L)*this.sin_p12*this.cos_p12*E/(1-this.es),R=1-L*(O=(T=e/w)-L*(1+L)*Math.pow(T,3)/6-N*(1+3*L)*Math.pow(T,4)/24)*O/2-T*O*O*O/6,I=Math.asin(this.sin_p12*Math.cos(O)+this.cos_p12*Math.sin(O)*E),v=n(this.long0+Math.asin(Math.sin(P)*Math.sin(O)/Math.cos(I))),g=Math.atan((1-this.es*R*this.sin_p12/Math.sin(I))*Math.tan(I)/(1-this.es)),t.x=v,t.y=g,t)},e.names=["Azimuthal_Equidistant","aeqd"]},9443:(t,e,r)=>{var n=r(2792),i=r(4126),o=r(144),s=r(4094),a=r(9759),u=r(9789),l=r(8757),c=r(1079),h=r(8864),f=Math.PI/2;e.init=function(){this.sphere||(this.e0=i(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*n(this.e0,this.e1,this.e2,this.e3,this.lat0))},e.forward=function(t){var e,r,i=t.x,o=t.y;if(i=l(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var s=Math.sin(o),a=Math.cos(o),c=u(this.a,this.e,s),h=Math.tan(o)*Math.tan(o),f=i*Math.cos(o),p=f*f,d=this.es*a*a/(1-this.es);e=c*f*(1-p*h*(1/6-(8-h+8*d)*p/120)),r=this.a*n(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*s/a*p*(.5+(5-h+6*d)*p/24)}return t.x=e+this.x0,t.y=r+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var s=this.ml0/this.a+i,a=h(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-f)<=1e-10)return t.x=this.long0,t.y=f,i<0&&(t.y*=-1),t;var p=u(this.a,this.e,Math.sin(a)),d=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(a),2),v=n*this.a/p,g=v*v;e=a-p*Math.tan(a)/d*v*v*(.5-(1+3*y)*v*v/24),r=v*(1-g*(y/3+(1+3*y)*y*g/15))/Math.cos(a)}return t.x=l(r+this.long0),t.y=c(e),t},e.names=["Cassini","Cassini_Soldner","cass"]},1453:(t,e,r)=>{var n=r(8757),i=r(3674),o=r(1847),s=r(2267);e.init=function(){this.sphere||(this.k0=o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},e.forward=function(t){var e,r,o=t.x,s=t.y,a=n(o-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var u=i(this.e,Math.sin(s));e=this.x0+this.a*this.k0*a,r=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=r,t},e.inverse=function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=n(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=s(this.e,2*t.y*this.k0/this.a),e=n(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},e.names=["cea"]},1054:(t,e,r)=>{var n=r(8757),i=r(1079);e.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},e.forward=function(t){var e=t.x,r=t.y,o=n(e-this.long0),s=i(r-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t},e.inverse=function(t){var e=t.x,r=t.y;return t.x=n(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=i(this.lat0+(r-this.y0)/this.a),t},e.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},6473:(t,e,r)=>{var n=r(4126),i=r(144),o=r(4094),s=r(9759),a=r(1847),u=r(2792),l=r(8757),c=r(1079),h=r(8864);e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a(this.e,this.sinphi,this.cosphi),this.ml1=u(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a(this.e,this.sinphi,this.cosphi),this.ml2=u(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=u(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},e.forward=function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=u(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*l(r-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},e.inverse=function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=l(this.long0+o/this.ns),n=c(this.g-r/this.a),t.x=i,t.y=n,t;var s=this.g-r/this.a;return n=h(s,this.e0,this.e1,this.e2,this.e3),i=l(this.long0+o/this.ns),t.x=i,t.y=n,t},e.names=["Equidistant_Conic","eqdc"]},9468:(t,e,r)=>{var n=Math.PI/4,i=r(3405),o=Math.PI/2;e.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+n)/(Math.pow(Math.tan(.5*this.lat0+n),this.C)*i(this.e*t,this.ratexp))},e.forward=function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+n),this.C)*i(this.e*Math.sin(r),this.ratexp))-o,t.x=this.C*e,t},e.inverse=function(t){for(var e=t.x/this.C,r=t.y,s=Math.pow(Math.tan(.5*r+n)/this.K,1/this.C),a=20;a>0&&(r=2*Math.atan(s*i(this.e*Math.sin(t.y),-.5*this.e))-o,!(Math.abs(r-t.y)<1e-14));--a)t.y=r;return a?(t.x=e,t.y=r,t):null},e.names=["gauss"]},5404:(t,e,r)=>{var n=r(8757),i=r(1228);e.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},e.forward=function(t){var e,r,i,o,s,a,u,l=t.x,c=t.y;return i=n(l-this.long0),e=Math.sin(c),r=Math.cos(c),o=Math.cos(i),1,(s=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(s)<=1e-10?(a=this.x0+1*this.a*r*Math.sin(i)/s,u=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/s):(a=this.x0+this.infinity_dist*r*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=u,t},e.inverse=function(t){var e,r,o,s,a,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),r=Math.sin(s),o=Math.cos(s),u=i(o*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.atan2(t.x*r,e*this.cos_p14*o-t.y*this.sin_p14*r),a=n(this.long0+a)):(u=this.phic0,a=0),t.x=a,t.y=u,t},e.names=["gnom"]},3410:(t,e,r)=>{var n=r(8757);e.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},e.forward=function(t){var e,r,i,o,s,a,u,l=t.x,c=t.y,h=n(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),s=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(o)),a=this.n*s,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(a)/1,t.x=u*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},e.inverse=function(t){var e,r,n,i,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,s=e,a=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,l+=1}while(0===a&&l<15);return l>=15?null:t},e.names=["Krovak","krovak"]},8369:(t,e,r)=>{var n=Math.PI/2,i=Math.PI/4,o=1e-10,s=r(3674),a=r(8757);e.S_POLE=1,e.N_POLE=2,e.EQUIT=3,e.OBLIQ=4,e.init=function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-n)<o?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<o?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=s(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=s(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},e.forward=function(t){var e,r,u,l,c,h,f,p,d,y,v=t.x,g=t.y;if(v=a(v-this.long0),this.sphere){if(c=Math.sin(g),y=Math.cos(g),u=Math.cos(v),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+y*u:1+this.sinph0*c+this.cosph0*y*u)<=o)return null;e=(r=Math.sqrt(2/r))*y*Math.sin(v),r*=this.mode===this.EQUIT?c:this.cosph0*c-this.sinph0*y*u}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),Math.abs(g+this.phi0)<o)return null;r=i-.5*g,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(v),r*=u}}else{switch(f=0,p=0,d=0,u=Math.cos(v),l=Math.sin(v),c=Math.sin(g),h=s(this.e,c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=h/this.qp,p=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:d=1+this.sinb1*f+this.cosb1*p*u;break;case this.EQUIT:d=1+p*u;break;case this.N_POLE:d=n+g,h=this.qp-h;break;case this.S_POLE:d=g-n,h=this.qp+h}if(Math.abs(d)<o)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),r=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*f-this.sinb1*p*u):(d=Math.sqrt(2/(1+p*u)))*f*this.ymf,e=this.xmf*d*p*l;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(d=Math.sqrt(h))*l,r=u*(this.mode===this.S_POLE?d:-d)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,r,i,s,u,l,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((r=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=o?0:Math.asin(f*y/p),h*=y,f=d*p;break;case this.OBLIQ:r=Math.abs(p)<=o?this.phi0:Math.asin(d*this.sinph0+f*y*this.cosph0/p),h*=y*this.cosph0,f=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:f=-f,r=n-r;break;case this.S_POLE:r-=n}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(l=Math.sqrt(h*h+f*f))<o)return t.x=0,t.y=this.phi0,t;s=2*Math.asin(.5*l/this.rq),i=Math.cos(s),h*=s=Math.sin(s),this.mode===this.OBLIQ?(c=i*this.sinb1+f*s*this.cosb1/l,u=this.qp*c,f=l*this.cosb1*i-f*this.sinb1*s):(c=f*s/l,u=this.qp*c,f=l*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(u=h*h+f*f))return t.x=0,t.y=this.phi0,t;c=1-u/this.qp,this.mode===this.S_POLE&&(c=-c)}e=Math.atan2(h,f),r=this.authlat(Math.asin(c),this.apa)}return t.x=a(this.long0+e),t.y=r,t},e.P00=.3333333333333333,e.P01=.17222222222222222,e.P02=.10257936507936508,e.P10=.06388888888888888,e.P11=.0664021164021164,e.P20=.016415012942191543,e.authset=function(t){var e,r=[];return r[0]=t*this.P00,e=t*t,r[0]+=e*this.P01,r[1]=e*this.P10,e*=t,r[0]+=e*this.P02,r[1]+=e*this.P11,r[2]=e*this.P20,r},e.authlat=function(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)},e.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},6030:(t,e,r)=>{var n=1e-10,i=r(1847),o=r(5327),s=Math.PI/2,a=r(7719),u=r(8757),l=r(8255);e.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),s=i(this.e,e,r),a=o(this.e,this.lat1,e),u=Math.sin(this.lat2),l=Math.cos(this.lat2),c=i(this.e,u,l),h=o(this.e,this.lat2,u),f=o(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>n?this.ns=Math.log(s/c)/Math.log(a/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},e.forward=function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=n&&(r=a(r)*(s-2e-10));var i,l,c=Math.abs(Math.abs(r)-s);if(c>n)i=o(this.e,r,Math.sin(r)),l=this.a*this.f0*Math.pow(i,this.ns);else{if((c=r*this.ns)<=0)return null;l=0}var h=this.ns*u(e-this.long0);return t.x=this.k0*(l*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-l*Math.cos(h))+this.y0,t},e.inverse=function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+c*c),r=1):(e=-Math.sqrt(a*a+c*c),r=-1);var h=0;if(0!==e&&(h=Math.atan2(r*a,r*c)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=l(this.e,n)))return null}else i=-s;return o=u(h/this.ns+this.long0),t.x=o,t.y=i,t},e.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},6938:(t,e)=>{function r(t){return t}e.init=function(){},e.forward=r,e.inverse=r,e.names=["longlat","identity"]},6913:(t,e,r)=>{var n=r(1847),i=Math.PI/2,o=57.29577951308232,s=r(8757),a=Math.PI/4,u=r(5327),l=r(8255);e.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},e.forward=function(t){var e,r,n=t.x,l=t.y;if(l*o>90&&l*o<-90&&n*o>180&&n*o<-180)return null;if(Math.abs(Math.abs(l)-i)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*s(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(a+.5*l));else{var c=Math.sin(l),h=u(this.e,l,c);e=this.x0+this.a*this.k0*s(n-this.long0),r=this.y0-this.a*this.k0*Math.log(h)}return t.x=e,t.y=r,t},e.inverse=function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=i-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(r=l(this.e,a)))return null}return e=s(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},e.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},6874:(t,e,r)=>{var n=r(8757);e.init=function(){},e.forward=function(t){var e=t.x,r=t.y,i=n(e-this.long0),o=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=s,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=n(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},e.names=["Miller_Cylindrical","mill"]},766:(t,e,r)=>{var n=r(8757);e.init=function(){},e.forward=function(t){for(var e=t.x,r=t.y,i=n(e-this.long0),o=r,s=Math.PI*Math.sin(r),a=0;;a++){var u=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=u,Math.abs(u)<1e-10)break}o/=2,Math.PI/2-Math.abs(r)<1e-10&&(i=0);var l=.900316316158*this.a*i*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=c,t},e.inverse=function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var i=n(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=i,t.y=o,t},e.names=["Mollweide","moll"]},6288:(t,e)=>{var r=484813681109536e-20;e.iterations=1,e.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},e.forward=function(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,s=i/r*1e-5,a=o,u=1,l=0;for(e=1;e<=10;e++)u*=s,l+=this.A[e]*u;var c,h=l,f=a,p=1,d=0,y=0,v=0;for(e=1;e<=6;e++)c=d*h+p*f,p=p*h-d*f,d=c,y=y+this.B_re[e]*p-this.B_im[e]*d,v=v+this.B_im[e]*p+this.B_re[e]*d;return t.x=v*this.a+this.x0,t.y=y*this.a+this.y0,t},e.inverse=function(t){var e,n,i=t.x,o=t.y,s=i-this.x0,a=(o-this.y0)/this.a,u=s/this.a,l=1,c=0,h=0,f=0;for(e=1;e<=6;e++)n=c*a+l*u,l=l*a-c*u,c=n,h=h+this.C_re[e]*l-this.C_im[e]*c,f=f+this.C_im[e]*l+this.C_re[e]*c;for(var p=0;p<this.iterations;p++){var d,y=h,v=f,g=a,m=u;for(e=2;e<=6;e++)d=v*h+y*f,y=y*h-v*f,v=d,g+=(e-1)*(this.B_re[e]*y-this.B_im[e]*v),m+=(e-1)*(this.B_im[e]*y+this.B_re[e]*v);y=1,v=0;var _=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)d=v*h+y*f,y=y*h-v*f,v=d,_+=e*(this.B_re[e]*y-this.B_im[e]*v),x+=e*(this.B_im[e]*y+this.B_re[e]*v);var b=_*_+x*x;h=(g*_+m*x)/b,f=(m*_-g*x)/b}var S=h,C=f,w=1,I=0;for(e=1;e<=9;e++)w*=S,I+=this.D[e]*w;var P=this.lat0+I*r*1e5,E=this.long0+C;return t.x=E,t.y=P,t},e.names=["New_Zealand_Map_Grid","nzmg"]},3563:(t,e,r)=>{var n=r(5327),i=r(8757),o=r(8255),s=Math.PI/2,a=Math.PI/4,u=1e-10;e.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),r=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var o,s,a=n(this.e,this.lat0,t),u=this.bl/e*Math.sqrt((1-this.es)/(1-r*r));if(u*u<1&&(u=1),isNaN(this.longc)){var l=n(this.e,this.lat1,Math.sin(this.lat1)),c=n(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(u+Math.sqrt(u*u-1))*Math.pow(a,this.bl):this.el=(u-Math.sqrt(u*u-1))*Math.pow(a,this.bl);var h=Math.pow(l,this.bl),f=Math.pow(c,this.bl);s=.5*((o=this.el/h)-1/o);var p=(this.el*this.el-f*h)/(this.el*this.el+f*h),d=(f-h)/(f+h),y=i(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*y)/d)/this.bl,this.long0=i(this.long0);var v=i(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*v)/s),this.alpha=Math.asin(u*Math.sin(this.gamma0))}else o=this.lat0>=0?u+Math.sqrt(u*u-1):u-Math.sqrt(u*u-1),this.el=o*Math.pow(a,this.bl),s=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/u),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha))},e.forward=function(t){var e,r,o,l=t.x,c=t.y,h=i(l-this.long0);if(Math.abs(Math.abs(c)-s)<=u)o=c>0?-1:1,r=this.al/this.bl*Math.log(Math.tan(a+o*this.gamma0*.5)),e=-1*o*s*this.al/this.bl;else{var f=n(this.e,c,Math.sin(c)),p=this.el/Math.pow(f,this.bl),d=.5*(p-1/p),y=.5*(p+1/p),v=Math.sin(this.bl*h),g=(d*Math.sin(this.gamma0)-v*Math.cos(this.gamma0))/y;r=Math.abs(Math.abs(g)-1)<=u?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*h))<=u?this.al*this.bl*h:this.al*Math.atan2(d*Math.cos(this.gamma0)+v*Math.sin(this.gamma0),Math.cos(this.bl*h))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+r):(e-=this.uc,t.x=this.x0+r*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-r*Math.sin(this.alpha)),t},e.inverse=function(t){var e,r;this.no_rot?(r=t.y-this.y0,e=t.x-this.x0):(r=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),a=.5*(n-1/n),l=.5*(n+1/n),c=Math.sin(this.bl*e/this.al),h=(c*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/l,f=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<u?(t.x=this.long0,t.y=s):Math.abs(h+1)<u?(t.x=this.long0,t.y=-1*s):(t.y=o(this.e,f),t.x=i(this.long0-Math.atan2(a*Math.cos(this.gamma0)-c*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},e.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},1265:(t,e,r)=>{var n=r(4126),i=r(144),o=r(4094),s=r(9759),a=r(8757),u=r(1079),l=r(2792),c=1e-10,h=r(9789);e.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*l(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,r,n,i=t.x,o=t.y,s=a(i-this.long0);if(n=s*Math.sin(o),this.sphere)Math.abs(o)<=c?(e=this.a*s,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(u(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=c)e=this.a*s,r=-1*this.ml0;else{var f=h(this.a,this.e,Math.sin(o))/Math.tan(o);e=f*Math.sin(n),r=this.a*l(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+f*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},e.inverse=function(t){var e,r,n,i,o,s,u,h,f;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=c)e=a(n/this.a+this.long0),r=0;else{var p;for(s=this.lat0+i/this.a,u=n*n/this.a/this.a+s*s,h=s,o=20;o;--o)if(h+=f=-1*(s*(h*(p=Math.tan(h))+1)-h-.5*(h*h+u)*p)/((h-s)/p-1),Math.abs(f)<=c){r=h;break}e=a(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=c)r=0,e=a(this.long0+n/this.a);else{var d,y,v,g,m;for(s=(this.ml0+i)/this.a,u=n*n/this.a/this.a+s*s,h=s,o=20;o;--o)if(m=this.e*Math.sin(h),d=Math.sqrt(1-m*m)*Math.tan(h),y=this.a*l(this.e0,this.e1,this.e2,this.e3,h),v=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=f=(s*(d*(g=y/this.a)+1)-g-.5*d*(g*g+u))/(this.es*Math.sin(2*h)*(g*g+u-2*s*g)/(4*d)+(s-g)*(d*v-2/Math.sin(2*h))-v),Math.abs(f)<=c){r=h;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=a(this.long0+Math.asin(n*d/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},e.names=["Polyconic","poly"]},1707:(t,e,r)=>{var n=r(8757),i=r(1079),o=r(7271),s=r(9156),a=r(2504),u=Math.PI/2,l=r(1228);e.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=o(this.es)},e.forward=function(t){var e,r,i=t.x,o=t.y;if(i=n(i-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(o),u=20;u;--u){var l=(this.m*o+Math.sin(o)-a)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<1e-10)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var c=Math.sin(o),h=Math.cos(o);r=this.a*s(o,c,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=r,t},e.inverse=function(t){var e,r,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=l((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=l(Math.sin(e)/this.n)),o=n(o+this.long0),e=i(e)):(e=a(t.y/this.a,this.es,this.en),(s=Math.abs(e))<u?(s=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=n(r)):s-1e-10<u&&(o=this.long0)),t.x=o,t.y=e,t},e.names=["Sinusoidal","sinu"]},3231:(t,e)=>{e.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},e.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},e.inverse=function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=l,t},e.names=["somerc"]},7981:(t,e,r)=>{var n=Math.PI/2,i=1e-10,o=r(7719),s=r(1847),a=r(5327),u=r(8255),l=r(8757);e.ssfn_=function(t,e,r){return e*=r,Math.tan(.5*(n+t))*Math.pow((1-e)/(1+e),.5*r)},e.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i&&(this.k0=.5*(1+o(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i&&(this.k0=.5*this.cons*s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=s(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},e.forward=function(t){var e,r,o,s,u,c,h=t.x,f=t.y,p=Math.sin(f),d=Math.cos(f),y=l(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=i&&Math.abs(f+this.lat0)<=i?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*p+this.coslat0*d*Math.cos(y)),t.x=this.a*e*d*Math.sin(y)+this.x0,t.y=this.a*e*(this.coslat0*p-this.sinlat0*d*Math.cos(y))+this.y0,t):(r=2*Math.atan(this.ssfn_(f,p,this.e))-n,s=Math.cos(r),o=Math.sin(r),Math.abs(this.coslat0)<=i?(u=a(this.e,f*this.con,this.con*p),c=2*this.a*this.k0*u/this.cons,t.x=this.x0+c*Math.sin(h-this.long0),t.y=this.y0-this.con*c*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<i?(e=2*this.a*this.k0/(1+s*Math.cos(y)),t.y=e*o):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*s*Math.cos(y))),t.y=e*(this.cosX0*o-this.sinX0*s*Math.cos(y))+this.y0),t.x=e*s*Math.sin(y)+this.x0,t))},e.inverse=function(t){var e,r,o,s,a;t.x-=this.x0,t.y-=this.y0;var c=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var h=2*Math.atan(c/(.5*this.a*this.k0));return e=this.long0,r=this.lat0,c<=i?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(h)*this.sinlat0+t.y*Math.sin(h)*this.coslat0/c),e=Math.abs(this.coslat0)<i?this.lat0>0?l(this.long0+Math.atan2(t.x,-1*t.y)):l(this.long0+Math.atan2(t.x,t.y)):l(this.long0+Math.atan2(t.x*Math.sin(h),c*this.coslat0*Math.cos(h)-t.y*this.sinlat0*Math.sin(h))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=i){if(c<=i)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,o=c*this.cons/(2*this.a*this.k0),r=this.con*u(this.e,o),e=this.con*l(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,c<=i?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/c),e=l(this.long0+Math.atan2(t.x*Math.sin(s),c*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),r=-1*u(this.e,Math.tan(.5*(n+a)));return t.x=e,t.y=r,t},e.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},6964:(t,e,r)=>{var n=r(9468),i=r(8757);e.init=function(){n.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},e.forward=function(t){var e,r,o,s;return t.x=i(t.x-this.long0),n.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*o),t.x=s*r*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*r*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},e.inverse=function(t){var e,r,o,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var u=2*Math.atan2(a,this.R2);e=Math.sin(u),r=Math.cos(u),s=Math.asin(r*this.sinc0+t.y*e*this.cosc0/a),o=Math.atan2(t.x*e,a*this.cosc0*r-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,n.inverse.apply(this,[t]),t.x=i(t.x+this.long0),t},e.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},9194:(t,e,r)=>{var n=r(4126),i=r(144),o=r(4094),s=r(9759),a=r(2792),u=r(8757),l=Math.PI/2,c=r(7719),h=r(1228);e.init=function(){this.e0=n(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,r,n,i=t.x,o=t.y,s=u(i-this.long0),l=Math.sin(o),c=Math.cos(o);if(this.sphere){var h=c*Math.sin(s);if(Math.abs(Math.abs(h)-1)<1e-10)return 93;r=.5*this.a*this.k0*Math.log((1+h)/(1-h)),e=Math.acos(c*Math.cos(s)/Math.sqrt(1-h*h)),o<0&&(e=-e),n=this.a*this.k0*(e-this.lat0)}else{var f=c*s,p=Math.pow(f,2),d=this.ep2*Math.pow(c,2),y=Math.tan(o),v=Math.pow(y,2);e=1-this.es*Math.pow(l,2);var g=this.a/Math.sqrt(e),m=this.a*a(this.e0,this.e1,this.e2,this.e3,o);r=this.k0*g*f*(1+p/6*(1-v+d+p/20*(5-18*v+Math.pow(v,2)+72*d-58*this.ep2)))+this.x0,n=this.k0*(m-this.ml0+g*y*(p*(.5+p/24*(5-v+9*d+4*Math.pow(d,2)+p/30*(61-58*v+Math.pow(v,2)+600*d-330*this.ep2)))))+this.y0}return t.x=r,t.y=n,t},e.inverse=function(t){var e,r,n,i,o,s;if(this.sphere){var a=Math.exp(t.x/(this.a*this.k0)),f=.5*(a-1/a),p=this.lat0+t.y/(this.a*this.k0),d=Math.cos(p);e=Math.sqrt((1-d*d)/(1+f*f)),o=h(e),p<0&&(o=-o),s=0===f&&0===d?this.long0:u(Math.atan2(f,d)+this.long0)}else{var y=t.x-this.x0,v=t.y-this.y0;for(r=e=(this.ml0+v/this.k0)/this.a,i=0;r+=n=(e+this.e1*Math.sin(2*r)-this.e2*Math.sin(4*r)+this.e3*Math.sin(6*r))/this.e0-r,!(Math.abs(n)<=1e-10);i++)if(i>=6)return 95;if(Math.abs(r)<l){var g=Math.sin(r),m=Math.cos(r),_=Math.tan(r),x=this.ep2*Math.pow(m,2),b=Math.pow(x,2),S=Math.pow(_,2),C=Math.pow(S,2);e=1-this.es*Math.pow(g,2);var w=this.a/Math.sqrt(e),I=w*(1-this.es)/e,P=y/(w*this.k0),E=Math.pow(P,2);o=r-w*_*E/I*(.5-E/24*(5+3*S+10*x-4*b-9*this.ep2-E/30*(61+90*S+298*x+45*C-252*this.ep2-3*b))),s=u(this.long0+P*(1-E/6*(1+2*S+x-E/20*(5-2*x+28*S-3*b+8*this.ep2+24*C)))/m)}else o=l*c(v),s=this.long0}return t.x=s,t.y=o,t},e.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},388:(t,e,r)=>{var n=r(9194);e.dependsOn="tmerc",e.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,n.init.apply(this),this.forward=n.forward,this.inverse=n.inverse)},e.names=["Universal Transverse Mercator System","utm"]},7002:(t,e,r)=>{var n=r(8757),i=Math.PI/2,o=1e-10,s=r(1228);e.init=function(){this.R=this.a},e.forward=function(t){var e,r,a=t.x,u=t.y,l=n(a-this.long0);Math.abs(u)<=o&&(e=this.x0+this.R*l,r=this.y0);var c=s(2*Math.abs(u/Math.PI));(Math.abs(l)<=o||Math.abs(Math.abs(u)-i)<=o)&&(e=this.x0,r=u>=0?this.y0+Math.PI*this.R*Math.tan(.5*c):this.y0+Math.PI*this.R*-Math.tan(.5*c));var h=.5*Math.abs(Math.PI/l-l/Math.PI),f=h*h,p=Math.sin(c),d=Math.cos(c),y=d/(p+d-1),v=y*y,g=y*(2/p-1),m=g*g,_=Math.PI*this.R*(h*(y-m)+Math.sqrt(f*(y-m)*(y-m)-(m+f)*(v-m)))/(m+f);l<0&&(_=-_),e=this.x0+_;var x=f+y;return _=Math.PI*this.R*(g*x-h*Math.sqrt((m+f)*(f+1)-x*x))/(m+f),r=u>=0?this.y0+_:this.y0-_,t.x=e,t.y=r,t},e.inverse=function(t){var e,r,i,s,a,u,l,c,h,f,p,d;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,a=(i=t.x/p)*i+(s=t.y/p)*s,p=3*(s*s/(c=-2*(u=-Math.abs(s)*(1+a))+1+2*s*s+a*a)+(2*(l=u-2*s*s+i*i)*l*l/c/c/c-9*u*l/c/c)/27)/(h=(u-l*l/3/c)/c)/(f=2*Math.sqrt(-h/3)),Math.abs(p)>1&&(p=p>=0?1:-1),d=Math.acos(p)/3,r=t.y>=0?(-f*Math.cos(d+Math.PI/3)-l/3/c)*Math.PI:-(-f*Math.cos(d+Math.PI/3)-l/3/c)*Math.PI,e=Math.abs(i)<o?this.long0:n(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-s*s)+a*a))/2/i),t.x=e,t.y=r,t},e.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},1484:(t,e,r)=>{var n=.017453292519943295,i=57.29577951308232,o=r(3478),s=r(7899),a=r(1934),u=r(8568);t.exports=function t(e,r,l){var c;function h(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}return Array.isArray(l)&&(l=u(l)),e.datum&&r.datum&&(h(e,r)||h(r,e))&&(t(e,c=new a("WGS84"),l),e=c),"enu"!==e.axis&&s(e,!1,l),"longlat"===e.projName?(l.x*=n,l.y*=n):(e.to_meter&&(l.x*=e.to_meter,l.y*=e.to_meter),e.inverse(l)),e.from_greenwich&&(l.x+=e.from_greenwich),l=o(e.datum,r.datum,l),r.from_greenwich&&(l.x-=r.from_greenwich),"longlat"===r.projName?(l.x*=i,l.y*=i):(r.forward(l),r.to_meter&&(l.x/=r.to_meter,l.y/=r.to_meter)),"enu"!==r.axis&&s(r,!0,l),l}},2576:(t,e,r)=>{var n=r(5248);function i(t,e,r){t[e]=r.map(function(t){var e={};return o(t,e),e}).reduce(function(t,e){return n(t,e)},{})}function o(t,e){var r;Array.isArray(t)?("PARAMETER"===(r=t.shift())&&(r=t.shift()),1===t.length?Array.isArray(t[0])?(e[r]={},o(t[0],e[r])):e[r]=t[0]:t.length?"TOWGS84"===r?e[r]=t:(e[r]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(r)>-1?(e[r]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[r].auth=t[2])):"SPHEROID"===r?(e[r]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[r].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(r)>-1?(t[0]=["name",t[0]],i(e,r,t)):t.every(function(t){return Array.isArray(t)})?i(e,r,t):o(t,e[r])):e[r]=!0):e[t]=!0}function s(t){return.017453292519943295*t}t.exports=function(t,e){var r=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=r.shift(),a=r.shift();r.unshift(["name",a]),r.unshift(["type",i]),r.unshift("output");var u={};return o(r,u),function(t){function e(e){var r=t.to_meter||1;return parseFloat(e,10)*r}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]].forEach(function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(u.output),n(e,u.output)}},7757:(t,e,r)=>{t.exports=r(5666)},9705:(t,e,r)=>{"use strict";var n=r(1540);function i(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}i.default=i,e.Z=i},4102:(t,e)=>{"use strict";function r(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function c(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return n(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return n(t,e)}),r)},e.polygon=i,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return i(t,e)}),r)},e.lineString=o,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return o(t,e)}),r)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[r];if(!i)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},1540:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4102);function i(t,e,r){if(null!==t)for(var n,o,s,a,u,l,c,h,f=0,p=0,d=t.type,y="FeatureCollection"===d,v="Feature"===d,g=y?t.features.length:1,m=0;m<g;m++){u=(h=!!(c=y?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<u;_++){var x=0,b=0;if(null!==(a=h?c.geometries[_]:c)){l=a.coordinates;var S=a.type;switch(f=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(l,p,m,x,b))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,m,x,b))return!1;p++,"MultiPoint"===S&&x++}"LineString"===S&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-f;o++){if(!1===e(l[n][o],p,m,x,b))return!1;p++}"MultiLineString"===S&&x++,"Polygon"===S&&b++}"Polygon"===S&&x++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(b=0,o=0;o<l[n].length;o++){for(s=0;s<l[n][o].length-f;s++){if(!1===e(l[n][o][s],p,m,x,b))return!1;p++}b++}x++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===i(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function a(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function u(t,e){a(t,function(t,r,i,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,i,{bbox:o,id:s}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:a,coordinates:t.coordinates[l]};if(!1===e(n.feature(c,i),r,l))return!1}})}function l(t,e){u(t,function(t,r,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,l=0,c=0,h=0;return!1!==i(t,function(i,a,f,p,d){if(void 0===u||r>l||p>c||d>h)return u=i,l=r,c=p,h=d,void(s=0);var y=n.lineString([u,i],t.properties);if(!1===e(y,r,o,d,s))return!1;s++,u=i})&&void 0}}})}function c(t,e){if(!t)throw new Error("geojson is required");u(t,function(t,r,i){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,r,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(n.lineString(s[a],t.properties),r,i,a))return!1}}})}e.coordAll=function(t){var e=[];return i(t,function(t){e.push(t)}),e},e.coordEach=i,e.coordReduce=function(t,e,r,n){var o=r;return i(t,function(t,n,i,s,a){o=0===n&&void 0===r?t:e(o,t,n,i,s,a)},n),o},e.featureEach=s,e.featureReduce=function(t,e,r){var n=r;return s(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),n.point(l[o],u,e);case"LineString":return a<0&&(a=l.length+a),n.point(l[a],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),n.point(l[s][a],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),n.point(l[o][a],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),n.point(l[o][s][a],u,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),n.lineString([l[a],l[a+1]],u,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),n.lineString([l[s][a],l[s][a+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),n.lineString([l[o][a],l[o][a+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),n.lineString([l[o][s][a],l[o][s][a+1]],u,e)}throw new Error("geojson is invalid")},e.flattenEach=u,e.flattenReduce=function(t,e,r){var n=r;return u(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n},e.geomEach=a,e.geomReduce=function(t,e,r){var n=r;return a(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n},e.lineEach=c,e.lineReduce=function(t,e,r){var n=r;return c(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n},e.propEach=o,e.propReduce=function(t,e,r){var n=r;return o(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},e.segmentEach=l,e.segmentReduce=function(t,e,r){var n=r,i=!1;return l(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n}},1924:(t,e,r)=>{"use strict";var n=r(210),i=r(5559),o=i(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&o(t,".prototype.")>-1?i(r):r}},5559:(t,e,r)=>{"use strict";var n=r(8612),i=r(210),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(s,o),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=a(n,s,arguments);if(u&&l){var r=u(e,"length");r.configurable&&l(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var h=function(){return a(n,o,arguments)};l?l(t.exports,"apply",{value:h}):t.exports.apply=h},2273:(t,e,r)=>{"use strict";var n=r(1662),i=r(3842),o=r(6960),s=r(8639).orient2d;function a(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;var i=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>i[1]&&(i=a)}var u=[e,r,n,i],l=u.slice();for(s=0;s<t.length;s++)o(t[s],u)||l.push(t[s]);return function(t){t.sort(_);for(var e=[],r=0;r<t.length;r++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[r])<=0;)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i--){for(;n.length>=2&&p(n[n.length-2],n[n.length-1],t[i])<=0;)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)}(l)}(t),s=new n(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,l=[],c=0;c<i.length;c++){var h=i[c];s.remove(h),a=y(h,a),l.push(a)}var f=new n(16);for(c=0;c<l.length;c++)f.insert(d(l[c]));for(var g=e*e,m=r*r;l.length;){var x=l.shift(),b=x.p,S=x.next.p,C=v(b,S);if(!(C<m)){var w=C/g;(h=u(s,x.prev.p,b,S,x.next.next.p,w,f))&&Math.min(v(h,b),v(h,S))<=w&&(l.push(x),l.push(y(h,x)),s.remove(h),f.remove(x),f.insert(d(x)),f.insert(d(x.next)))}}x=a;var I=[];do{I.push(x.p),x=x.next}while(x!==a);return I.push(x.p),I}function u(t,e,r,n,o,s,a){for(var u=new i([],l),h=t.data;h;){for(var p=0;p<h.children.length;p++){var d=h.children[p],y=h.leaf?g(d,r,n):c(r,n,d);y>s||u.push({node:d,dist:y})}for(;u.length&&!u.peek().node.children;){var v=u.pop(),m=v.node,_=g(m,e,r),x=g(m,n,o);if(v.dist<_&&v.dist<x&&f(r,m,a)&&f(n,m,a))return m}(h=u.pop())&&(h=h.node)}return null}function l(t,e){return t.dist-e.dist}function c(t,e,r){if(h(t,r)||h(e,r))return 0;var n=m(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=m(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=m(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=m(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,i,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,r){for(var n,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(n=h[f].p,i=h[f].next.p,o=t,n!==(s=e)&&i!==o&&p(n,i,o)>0!=p(n,i,s)>0&&p(o,s,n)>0!=p(o,s,i)>0)return!1;return!0}function p(t,e,r){return s(t[0],t[1],e[0],e[1],r[0],r[1])}function d(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function y(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function v(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function g(t,e,r){var n=e[0],i=e[1],o=r[0]-n,s=r[1]-i;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return(o=t[0]-n)*o+(s=t[1]-i)*s}function m(t,e,r,n,i,o,s,a){var u,l,c,h,f=r-t,p=n-e,d=s-i,y=a-o,v=t-i,g=e-o,m=f*f+p*p,_=f*d+p*y,x=d*d+y*y,b=f*v+p*g,S=d*v+y*g,C=m*x-_*_,w=C,I=C;0===C?(l=0,w=1,h=S,I=x):(h=m*S-_*b,(l=_*S-x*b)<0?(l=0,h=S,I=x):l>w&&(l=w,h=S+_,I=x)),h<0?(h=0,-b<0?l=0:-b>m?l=w:(l=-b,w=m)):h>I&&(h=I,-b+_<0?l=0:-b+_>m?l=w:(l=-b+_,w=m));var P=(1-(c=0===h?0:h/I))*i+c*s-((1-(u=0===l?0:l/w))*t+u*r),E=(1-c)*o+c*a-((1-u)*e+u*n);return P*P+E*E}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=a,t.exports.default=a},1662:function(t){t.exports=function(){"use strict";function t(t,n,i,o,s){!function t(r,n,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*c/a+h)),Math.min(o,Math.floor(n+(a-u)*c/a+h)),s)}var f=r[n],p=i,d=o;for(e(r,i,n),s(r[o],f)>0&&e(r,i,o);p<d;){for(e(r,p,d),p++,d--;s(r[p],f)<0;)p++;for(;s(r[d],f)>0;)d--}0===s(r[i],f)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,s||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var s=t.children[o];a(i,t.leaf?n(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,r,n,i,o){for(var s=[r,n];s.length;)if(!((n=s.pop())-(r=s.pop())<=i)){var a=r+Math.ceil((n-r)/i/2)*i;t(e,a,r,n,o),s.push(r,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;p(t,a)&&(e.leaf?r.push(s):f(t,a)?this._all(s,r):i.push(s))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),s.leaf){var c=i(t,s.children,e);if(-1!==c)return s.children.splice(c,1),u.push(s),this._condense(u),this}o||s.leaf||!f(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,s=r-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(s/a),l=u*Math.ceil(Math.sqrt(a));y(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);y(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,s=u):h===o&&l<i&&(i=l,s=u)}e=s||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),a(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var s=this._chooseSplitIndex(r,i,n),a=d(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,o(r,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,a,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var y=s(t,0,d,this.toBBox),v=s(t,d,r,this.toBBox),g=(i=y,o=v,a=void 0,u=void 0,l=void 0,h=void 0,a=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,h-u)),m=c(y)+c(v);g<f?(f=g,n=d,p=m<p?m:p):g===f&&m<p&&(p=m,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=s(t,0,e,i),u=s(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];a(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];a(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},251:(t,e,r)=>{var n=r(2215),i=r(2584),o=r(609),s=r(8420),a=r(2847),u=r(8923),l=Date.prototype.getTime;function c(t,e,r){var p=r||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?p.strict?o(t,e):t==e:function(t,e,r){var o,p;if(typeof t!=typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=s(t),y=s(e);if(d!==y)return!1;if(d||y)return t.source===e.source&&a(t)===a(e);if(u(t)&&u(e))return l.call(t)===l.call(e);var v=f(t),g=f(e);if(v!==g)return!1;if(v||g){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!=typeof e)return!1;try{var m=n(t),_=n(e)}catch(t){return!1}if(m.length!==_.length)return!1;for(m.sort(),_.sort(),o=m.length-1;o>=0;o--)if(m[o]!=_[o])return!1;for(o=m.length-1;o>=0;o--)if(!c(t[p=m[o]],e[p],r))return!1;return!0}(t,e,p))}function h(t){return null==t}function f(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=c},4289:(t,e,r)=>{"use strict";var n=r(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),l=function(t,e,r,n){var i;(!(e in t)||"function"==typeof(i=n)&&"[object Function]"===o.call(i)&&n())&&(u?a(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},c=function(t,e){var r=arguments.length>2?arguments[2]:{},o=n(e);i&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],r[o[a]])};c.supportsDescriptors=!!u,t.exports=c},8317:t=>{function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r)}return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)},3781:t=>{function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<r;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)},3763:(t,e,r)=>{if(t.exports)var n=r(7985);function i(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}i.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},i.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},i.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}})},i.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++){if(this._regionQuery(t,r).length>=this.minPts)return r}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},i.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=i)},7985:t=>{function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)},2606:(t,e,r)=>{t.exports&&(t.exports={DBSCAN:r(8317),KMEANS:r(3781),OPTICS:r(3763),PriorityQueue:r(7985)})},9187:t=>{"use strict";function e(t,e,o){o=o||2;var s,a,u,h,f,d,y,v=e&&e.length,g=v?e[0]*o:t.length,m=r(t,0,g,o,!0),_=[];if(!m||m.next===m.prev)return _;if(v&&(m=function(t,e,i,o){var s,a,u,h=[];for(s=0,a=e.length;s<a;s++)(u=r(t,e[s]*o,s<a-1?e[s+1]*o:t.length,o,!1))===u.next&&(u.steiner=!0),h.push(p(u));for(h.sort(l),s=0;s<h.length;s++)i=n(i=c(h[s],i),i.next);return i}(t,e,m,o)),t.length>80*o){s=u=t[0],a=h=t[1];for(var x=o;x<g;x+=o)(f=t[x])<s&&(s=f),(d=t[x+1])<a&&(a=d),f>u&&(u=f),d>h&&(h=d);y=0!==(y=Math.max(u-s,h-a))?1/y:0}return i(m,_,o,s,a,y),_}function r(t,e,r,n,i){var o,s;if(i===P(t,e,r,n)>0)for(o=e;o<r;o+=n)s=C(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=C(o,t[o],t[o+1],s);return s&&g(s,s.next)&&(w(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{if(w(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function i(t,e,r,l,c,h,p){if(t){!p&&h&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(u=l;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1)}(i)}(t,l,c,h);for(var d,y,v=t;t.prev!==t.next;)if(d=t.prev,y=t.next,h?s(t,l,c,h):o(t))e.push(d.i/r),e.push(t.i/r),e.push(y.i/r),w(t),t=y.next,v=y.next;else if((t=y)===v){p?1===p?i(t=a(n(t),e,r),e,r,l,c,h,2):2===p&&u(t,e,r,l,c,h):i(n(t),e,r,l,c,h,1);break}}}function o(t){var e=t.prev,r=t,n=t.next;if(v(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(d(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&v(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,r,n){var i=t.prev,o=t,s=t.next;if(v(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=f(a,u,e,r,n),p=f(l,c,e,r,n),y=t.prevZ,g=t.nextZ;y&&y.z>=h&&g&&g.z<=p;){if(y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,g!==t.prev&&g!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;y&&y.z>=h;){if(y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function a(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!g(o,s)&&m(o,i,i.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/r),e.push(i.i/r),e.push(s.i/r),w(i),w(i.next),i=t=s),i=i.next}while(i!==t);return n(i)}function u(t,e,r,o,s,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&y(u,l)){var c=S(u,l);return u=n(u,u.next),c=n(c,c.next),i(u,e,r,o,s,a),void i(c,e,r,o,s,a)}l=l.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function c(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r;var u,l=r,c=r.x,f=r.y,p=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&d(o<f?i:s,o,c,f,o<f?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),b(n,t)&&(u<p||u===p&&(n.x>r.x||n.x===r.x&&h(r,n)))&&(r=n,p=u)),n=n.next}while(n!==l);return r}(t,e);if(!r)return e;var i=S(r,t),o=n(r,r.next);return n(i,i.next),e===r?o:e}function h(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function f(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function d(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&m(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||g(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,r,n){var i=x(v(t,e,r)),o=x(v(t,e,n)),s=x(v(r,n,t)),a=x(v(r,n,e));return i!==o&&s!==a||(!(0!==i||!_(t,r,e))||(!(0!==o||!_(t,n,e))||(!(0!==s||!_(r,t,n))||!(0!==a||!_(r,e,n)))))}function _(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function S(t,e){var r=new I(t.i,t.x,t.y),n=new I(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function C(t,e,r,n){var i=new I(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(P(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(P(t,l,c,r))}var h=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},259:(t,e,r)=>{"use strict";const n=r(7849).buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function s(t){this.options=n(t,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=y),this.options.cdataTagName?this.isCDATA=v:this.isCDATA=function(){return!1},this.replaceCDATAstr=u,this.replaceCDATAarr=l,this.processTextOrObjNode=a,this.options.format?(this.indentate=d,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=p,this.buildObjNode=h):(this.buildTextNode=f,this.buildObjNode=c),this.buildTextValNode=f,this.buildObjectNode=c}function a(t,e,r){const n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextNode(n.val,e,n.attrStr,r):this.buildObjNode(n.val,e,n.attrStr,r)}function u(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function l(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function c(t,e,r,n){return r&&-1===t.indexOf("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function h(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function f(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function p(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function d(t){return this.options.indentBy.repeat(t)}function y(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function v(t){return t===this.options.cdataTagName}s.prototype.parse=function(t){return Array.isArray(t)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(t={[this.options.rootNodeName]:t}),this.j2x(t,0).val},s.prototype.j2x=function(t,e){let r="",n="";for(let i in t)if(void 0===t[i]);else if(null===t[i])n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)n+=this.buildTextNode(t[i],i,"",e);else if("object"!=typeof t[i]){const o=this.isAttribute(i);o?r+=" "+o+'="'+this.options.attrValueProcessor(""+t[i])+'"':this.isCDATA(i)?t[this.options.textNodeName]?n+=this.replaceCDATAstr(t[this.options.textNodeName],t[i]):n+=this.replaceCDATAstr("",t[i]):i===this.options.textNodeName?t[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+t[i])):n+=this.buildTextNode(t[i],i,"",e)}else if(Array.isArray(t[i]))if(this.isCDATA(i))n+=this.indentate(e),t[this.options.textNodeName]?n+=this.replaceCDATAarr(t[this.options.textNodeName],t[i]):n+=this.replaceCDATAarr("",t[i]);else{const r=t[i].length;for(let o=0;o<r;o++){const r=t[i][o];void 0===r||(n+=null===r?this.indentate(e)+"<"+i+"/"+this.tagEndChar:"object"==typeof r?this.processTextOrObjNode(r,i,e):this.buildTextNode(r,i,"",e))}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const e=Object.keys(t[i]),n=e.length;for(let o=0;o<n;o++)r+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[i][e[o]])+'"'}else n+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:n}},t.exports=s},8398:(t,e,r)=>{"use strict";const n=function(t){return String.fromCharCode(t)},i={nilChar:n(176),missingChar:n(201),nilPremitive:n(175),missingPremitive:n(200),emptyChar:n(178),emptyValue:n(177),boundryChar:n(179),objStart:n(198),arrStart:n(204),arrayEnd:n(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(t,e,r){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?a(t[0].val,e):a(t,e);{const o=void 0===(n=t)?i.missingChar:null===n?i.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||i.emptyChar;if(!0===o){let n="";if(Array.isArray(e)){n+=i.arrStart;const o=e[0],l=t.length;if("string"==typeof o)for(let e=0;e<l;e++){const r=a(t[e].val,o);n=u(n,r)}else for(let e=0;e<l;e++){const i=s(t[e],o,r);n=u(n,i)}n+=i.arrayEnd}else{n+=i.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in o){const a=o[i];let l;l=!r.ignoreAttributes&&t.attrsMap&&t.attrsMap[a]?s(t.attrsMap[a],e[a],r):a===r.textNodeName?s(t.val,e[a],r):s(t.child[a],e[a],r),n=u(n,l)}}return n}return o}var n},a=function(t){switch(t){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}},u=function(t,e){return l(e[0])||l(t[t.length-1])||(t+=i.boundryChar),t+e},l=function(t){return-1!==o.indexOf(t)};const c=r(3543),h=r(7849).buildOptions;e.convert2nimn=function(t,e,r){return r=h(r,c.defaultOptions,c.props),s(t,e,r)}},284:(t,e,r)=>{"use strict";const n=r(7849),i=function(t,e,r){const o={};if(!e.alwaysCreateTextNode&&(!t.child||n.isEmptyObject(t.child))&&(!t.attrsMap||n.isEmptyObject(t.attrsMap)))return n.isExist(t.val)?t.val:"";if(n.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)){const i=n.isTagNameInArrayMode(t.tagname,e.arrayMode,r);o[e.textNodeName]=i?[t.val]:t.val}n.merge(o,t.attrsMap,e.arrayMode);const s=Object.keys(t.child);for(let a=0;a<s.length;a++){const u=s[a];if(t.child[u]&&t.child[u].length>1){o[u]=[];for(let r in t.child[u])t.child[u].hasOwnProperty(r)&&o[u].push(i(t.child[u][r],e,u))}else{const s=i(t.child[u][0],e,u),a=!0===e.arrayMode&&"object"==typeof s||n.isTagNameInArrayMode(u,e.arrayMode,r);o[u]=a?[s]:s}}return o};e.convertToJson=i},7702:(t,e,r)=>{"use strict";const n=r(7849),i=r(7849).buildOptions,o=r(3543),s=function(t,e,r){let i="{";const o=Object.keys(t.child);for(let r=0;r<o.length;r++){const n=o[r];if(t.child[n]&&t.child[n].length>1){i+='"'+n+'" : [ ';for(let r in t.child[n])i+=s(t.child[n][r],e)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+n+'" : '+s(t.child[n][0],e)+" ,"}return n.merge(i,t.attrsMap),n.isEmptyObject(i)?n.isExist(t.val)?t.val:"":(n.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(i+='"'+e.textNodeName+'" : '+(!0!==(a=t.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var a};e.convertToJsonString=function(t,e){return(e=i(e,o.defaultOptions,o.props)).indentBy=e.indentBy||"",s(t,e,0)}},6965:(t,e,r)=>{"use strict";const n=r(284),i=r(3543),o=r(3543),s=r(7849).buildOptions,a=r(8501);e.parse=function(t,e={},r){if(r){!0===r&&(r={});const e=a.validate(t,r);if(!0!==e)throw Error(e.err.msg)}e.parseTrueNumberOnly&&!1!==e.parseNodeValue&&!e.numParseOptions&&(e.numParseOptions={leadingZeros:!1});let u=s(e,o.defaultOptions,o.props);const l=i.getTraversalObj(t,u);return n.convertToJson(l,u)},e.convertTonimn=r(8398).convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=n.convertToJson,e.convertToJsonString=r(7702).convertToJsonString,e.validate=a.validate,e.j2xParser=r(259),e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}},7849:(t,e)=>{"use strict";const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e){const n=Object.keys(e),i=n.length;for(let o=0;o<i;o++)t[n[o]]="strict"===r?[e[n[o]]]:e[n[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,r){let n={};if(!t)return e;for(let i=0;i<r.length;i++)void 0!==t[r[i]]?n[r[i]]=t[r[i]]:n[r[i]]=e[r[i]];return n},e.isTagNameInArrayMode=function(t,e,r){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,r):"strict"===e)},e.isName=function(t){const e=i.exec(t);return!(null==e)},e.getAllMatches=function(t,e){const r=[];let n=e.exec(t);for(;n;){const i=[];i.startIndex=e.lastIndex-n[0].length;const o=n.length;for(let t=0;t<o;t++)i.push(n[t]);r.push(i),n=e.exec(t)}return r},e.nameRegexp=n},8501:(t,e,r)=>{"use strict";const n=r(7849),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(t,e){const r=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const n=t.substr(r,e-r);if(e>5&&"xml"===n)return f("InvalidXml","XML declaration allowed only at the start of the document.",d(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&(r--,0===r))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=n.buildOptions(e,i,o);const r=[];let l=!1,p=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let i=0;i<t.length;i++)if("<"===t[i]&&"?"===t[i+1]){if(i+=2,i=s(t,i),i.err)return i}else{if("<"!==t[i]){if(" "===t[i]||"\t"===t[i]||"\n"===t[i]||"\r"===t[i])continue;return f("InvalidChar","char '"+t[i]+"' is not expected.",d(t,i))}{let o=i;if(i++,"!"===t[i]){i=a(t,i);continue}{let v=!1;"/"===t[i]&&(v=!0,i++);let g="";for(;i<t.length&&">"!==t[i]&&" "!==t[i]&&"\t"!==t[i]&&"\n"!==t[i]&&"\r"!==t[i];i++)g+=t[i];if(g=g.trim(),"/"===g[g.length-1]&&(g=g.substring(0,g.length-1),i--),y=g,!n.isName(y)){let e;return e=0===g.trim().length?"Invalid space after '<'.":"Tag '"+g+"' is an invalid name.",f("InvalidTag",e,d(t,i))}const m=u(t,i);if(!1===m)return f("InvalidAttr","Attributes for '"+g+"' have open quote.",d(t,i));let _=m.value;if(i=m.index,"/"===_[_.length-1]){const r=i-_.length;_=_.substring(0,_.length-1);const n=c(_,e);if(!0!==n)return f(n.err.code,n.err.msg,d(t,r+n.err.line));l=!0}else if(v){if(!m.tagClosed)return f("InvalidTag","Closing tag '"+g+"' doesn't have proper closing.",d(t,i));if(_.trim().length>0)return f("InvalidTag","Closing tag '"+g+"' can't have attributes or invalid starting.",d(t,o));{const e=r.pop();if(g!==e.tagName){let r=d(t,e.tagStartPos);return f("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+g+"'.",d(t,o))}0==r.length&&(p=!0)}}else{const n=c(_,e);if(!0!==n)return f(n.err.code,n.err.msg,d(t,i-_.length+n.err.line));if(!0===p)return f("InvalidXml","Multiple possible root nodes found.",d(t,i));r.push({tagName:g,tagStartPos:o}),l=!0}for(i++;i<t.length;i++)if("<"===t[i]){if("!"===t[i+1]){i++,i=a(t,i);continue}if("?"!==t[i+1])break;if(i=s(t,++i),i.err)return i}else if("&"===t[i]){const e=h(t,i);if(-1==e)return f("InvalidChar","char '&' is not expected.",d(t,i));i=e}"<"===t[i]&&i--}}}var y;return l?1==r.length?f("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",d(t,r[0].tagStartPos)):!(r.length>0)||f("InvalidXml","Invalid '"+JSON.stringify(r.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):f("InvalidXml","Start tag expected.",1)};function u(t,e){let r="",n="",i=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){i=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:i}}const l=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function c(t,e){const r=n.getAllMatches(t,l),i={};for(let t=0;t<r.length;t++){if(0===r[t][1].length)return f("InvalidAttr","Attribute '"+r[t][2]+"' has no space in starting.",y(r[t]));if(void 0===r[t][3]&&!e.allowBooleanAttributes)return f("InvalidAttr","boolean attribute '"+r[t][2]+"' is not allowed.",y(r[t]));const n=r[t][2];if(!p(n))return f("InvalidAttr","Attribute '"+n+"' is an invalid name.",y(r[t]));if(i.hasOwnProperty(n))return f("InvalidAttr","Attribute '"+n+"' is repeated.",y(r[t]));i[n]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function f(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function p(t){return n.isName(t)}function d(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function y(t){return t.startIndex+t[1].length}},6468:t=>{"use strict";t.exports=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},3543:(t,e,r)=>{"use strict";const n=r(7849),i=r(7849).buildOptions,o=r(6468),s=r(4153);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[],alwaysCreateTextNode:!1};e.defaultOptions=a;const u=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];function l(t,e,r){return e&&(r.trimValues&&(e=e.trim()),e=h(e=r.tagValueProcessor(e,t),r.parseNodeValue,r.numParseOptions)),e}function c(t,e){if(e.ignoreNameSpace){const e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}function h(t,e,r){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&s(t,r)}return n.isExist(t)?t:""}e.props=u;const f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function p(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const r=n.getAllMatches(t,f),i=r.length,o={};for(let t=0;t<i;t++){const n=c(r[t][1],e);n.length&&(void 0!==r[t][4]?(e.trimValues&&(r[t][4]=r[t][4].trim()),r[t][4]=e.attrValueProcessor(r[t][4],n),o[e.attributeNamePrefix+n]=h(r[t][4],e.parseAttributeValue,e.numParseOptions)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+n]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=o,t}return o}}function d(t,e){let r,n="";for(let i=e;i<t.length;i++){let e=t[i];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else{if(">"===e)return{data:n,index:i};"\t"===e&&(e=" ")}n+=e}}function y(t,e,r,n){const i=t.indexOf(e,r);if(-1===i)throw new Error(n);return i+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/\r\n?/g,"\n"),e=i(e,a,u);const r=new o("!xml");let s=r,c="";for(let r=0;r<t.length;r++){if("<"===t[r])if("/"===t[r+1]){const i=y(t,">",r,"Closing Tag is not closed.");let o=t.substring(r+2,i).trim();if(e.ignoreNameSpace){const t=o.indexOf(":");-1!==t&&(o=o.substr(t+1))}s&&(s.val?s.val=n.getValue(s.val)+""+l(o,c,e):s.val=l(o,c,e)),e.stopNodes.length&&e.stopNodes.includes(s.tagname)&&(s.child=[],null==s.attrsMap&&(s.attrsMap={}),s.val=t.substr(s.startIndex+1,r-s.startIndex-1)),s=s.parent,c="",r=i}else if("?"===t[r+1])r=y(t,"?>",r,"Pi Tag is not closed.");else if("!--"===t.substr(r+1,3))r=y(t,"--\x3e",r,"Comment is not closed.");else if("!D"===t.substr(r+1,2)){const e=y(t,">",r,"DOCTYPE is not closed.");r=t.substring(r,e).indexOf("[")>=0?t.indexOf("]>",r)+1:e}else if("!["===t.substr(r+1,2)){const i=y(t,"]]>",r,"CDATA is not closed.")-2,a=t.substring(r+9,i);if(c&&(s.val=n.getValue(s.val)+""+l(s.tagname,c,e),c=""),e.cdataTagName){const t=new o(e.cdataTagName,s,a);s.addChild(t),s.val=n.getValue(s.val)+e.cdataPositionChar,a&&(t.val=a)}else s.val=(s.val||"")+(a||"");r=i+2}else{const i=d(t,r+1);let a=i.data;const u=i.index,h=a.indexOf(" ");let f=a,y=!0;if(-1!==h&&(f=a.substr(0,h).replace(/\s\s*$/,""),a=a.substr(h+1)),e.ignoreNameSpace){const t=f.indexOf(":");-1!==t&&(f=f.substr(t+1),y=f!==i.data.substr(t+1))}if(s&&c&&"!xml"!==s.tagname&&(s.val=n.getValue(s.val)+""+l(s.tagname,c,e)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===f[f.length-1]?(f=f.substr(0,f.length-1),a=f):a=a.substr(0,a.length-1);const t=new o(f,s,"");f!==a&&(t.attrsMap=p(a,e)),s.addChild(t)}else{const t=new o(f,s);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=u),f!==a&&y&&(t.attrsMap=p(a,e)),s.addChild(t),s=t}c="",r=u}else c+=t[r]}return r}},2693:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){l.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){var e=this.map[a(t)];return e?e[0]:null},l.prototype.getAll=function(t){return this.map[a(t)]||[]},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,e){this.map[a(t)]=[u(e)]},l.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),n="FormData"in e,i="ArrayBuffer"in e,o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},p.call(d.prototype),p.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];g.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},e.Headers=l,e.Request=d,e.Response=g,e.fetch=function(t,e){return new Promise(function(n,i){var o;o=d.prototype.isPrototypeOf(t)&&!e?t:new d(t,e);var s=new XMLHttpRequest;var a=!1;function u(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599){if(a)return;return a=!0,void i(new TypeError("Network request failed"))}var e={status:t,statusText:s.statusText,headers:v(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},r="response"in s?s.response:s.responseText;a||(a=!0,n(new g(r,e)))}}s.onreadystatechange=u,s.onload=u,s.onerror=function(){a||(a=!0,i(new TypeError("Network request failed")))},s.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in s&&r&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function p(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(n&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!i||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var t,e,r,n,i,o,s,a=c(this);if(a)return a;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(i)||n.match(i),s=[t],o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,s),h(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=c(this);return t||Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t,e){var r,n,i=(e=e||{}).body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),o.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function v(t){var e=new l;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),i=r.join(":").trim();e.append(n,i)}),e}function g(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof l?e.headers:new l(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},7648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";t.exports=function(t){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(e+o);for(var s,a=r.call(arguments,1),u=function(){if(this instanceof s){var e=o.apply(this,a.concat(r.call(arguments)));return Object(e)===e?e:this}return o.apply(t,a.concat(r.call(arguments)))},l=Math.max(0,o.length-a.length),c=[],h=0;h<l;h++)c.push("$"+h);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),o.prototype){var f=function(){};f.prototype=o.prototype,s.prototype=new f,f.prototype=null}return s}},8612:(t,e,r)=>{"use strict";var n=r(7648);t.exports=Function.prototype.bind||n},9657:(t,e,r)=>{var n=r(251),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return n(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,n=o(t),i=o(e);return n.every(function(t){return this.some(function(e){return r.compare(t,e)})},i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,r,n){if(!s(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[r],o[r]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var r,n=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){n=i;break}return n>=0&&(r=[].concat(t.slice(n,t.length),t.slice(1,n+1))),r},i.prototype.comparePath=function(t,e){var r=this;return t.every(function(t,e){return r.compareCoord(t,this[e])},e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),i=this;return r.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},n)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},1787:(t,e,r)=>{var n=r(4056),i=r(4102),o=r(1540),s=r(9705).Z,a=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function l(t){var e=new n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)}):a(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)}),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return u(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},4056:function(t){t.exports=function(){"use strict";function t(t,n,i,o,s){!function t(r,n,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*c/a+h)),Math.min(o,Math.floor(n+(a-u)*c/a+h)),s)}var f=r[n],p=i,d=o;for(e(r,i,n),s(r[o],f)>0&&e(r,i,o);p<d;){for(e(r,p,d),p++,d--;s(r[p],f)<0;)p++;for(;s(r[d],f)>0;)d--}0===s(r[i],f)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,s||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var s=t.children[o];a(i,t.leaf?n(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,r,n,i,o){for(var s=[r,n];s.length;)if(!((n=s.pop())-(r=s.pop())<=i)){var a=r+Math.ceil((n-r)/i/2)*i;t(e,a,r,n,o),s.push(r,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;p(t,a)&&(e.leaf?r.push(s):f(t,a)?this._all(s,r):i.push(s))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),s.leaf){var c=i(t,s.children,e);if(-1!==c)return s.children.splice(c,1),u.push(s),this._condense(u),this}o||s.leaf||!f(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,s=r-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(s/a),l=u*Math.ceil(Math.sqrt(a));y(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);y(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,s=u):h===o&&l<i&&(i=l,s=u)}e=s||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),a(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var s=this._chooseSplitIndex(r,i,n),a=d(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,o(r,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,a,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var y=s(t,0,d,this.toBBox),v=s(t,d,r,this.toBBox),g=(i=y,o=v,a=void 0,u=void 0,l=void 0,h=void 0,a=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,h-u)),m=c(y)+c(v);g<f?(f=g,n=d,p=m<p?m:p):g===f&&m<p&&(p=m,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=s(t,0,e,i),u=s(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];a(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];a(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},210:(t,e,r)=>{"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var l=function(){throw new s},c=u?function(){try{return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l,h=r(1405)(),f=Object.getPrototypeOf||function(t){return t.__proto__},p={},d="undefined"==typeof Uint8Array?n:f(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},v=function t(e){var r;if("%AsyncFunction%"===e)r=a("async function () {}");else if("%GeneratorFunction%"===e)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=a("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(r=f(i.prototype))}return y[e]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=r(8612),_=r(7642),x=m.call(Function.call,Array.prototype.concat),b=m.call(Function.apply,Array.prototype.splice),S=m.call(Function.call,String.prototype.replace),C=m.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,P=function(t){var e=C(t,0,1),r=C(t,-1);if("%"===e&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return S(t,w,function(t,e,r,i){n[n.length]=r?S(i,I,"$1"):e||t}),n},E=function(t,e){var r,n=t;if(_(g,n)&&(n="%"+(r=g[n])[0]+"%"),_(y,n)){var o=y[n];if(o===p&&(o=v(n)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');var r=P(t),n=r.length>0?r[0]:"",o=E("%"+n+"%",e),a=o.name,l=o.value,c=!1,h=o.alias;h&&(n=h[0],b(r,x([0,1],h)));for(var f=1,p=!0;f<r.length;f+=1){var d=r[f],v=C(d,0,1),g=C(d,-1);if(('"'===v||"'"===v||"`"===v||'"'===g||"'"===g||"`"===g)&&v!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&p||(c=!0),_(y,a="%"+(n+="."+d)+"%"))l=y[a];else if(null!=l){if(!(d in l)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&f+1>=r.length){var m=u(l,d);l=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:l[d]}else p=_(l,d),l=l[d];p&&!c&&(y[a]=l)}}return l}},1405:(t,e,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5419);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(t,e,r)=>{"use strict";var n=r(5419);t.exports=function(){return n()&&!!Symbol.toStringTag}},7642:(t,e,r)=>{"use strict";var n=r(8612);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},2584:(t,e,r)=>{"use strict";var n=r(6410)(),i=r(1924)("Object.prototype.toString"),o=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},8923:(t,e,r)=>{"use strict";var n=Date.prototype.getDay,i=Object.prototype.toString,o=r(6410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},8420:(t,e,r)=>{"use strict";var n,i,o,s,a=r(1924),u=r(6410)();if(u){n=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),o={};var l=function(){throw o};s={toString:l,valueOf:l},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=l)}var c=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=u?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&n(e,"value")))return!1;try{i(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===c(t)}},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var s,a,u=i(t),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))r.call(s,c)&&(u[c]=s[c]);if(e){a=e(s);for(var h=0;h<a.length;h++)n.call(s,a[h])&&(u[a[h]]=s[a[h]])}}return u}},631:(t,e,r)=>{var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,s=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&u&&"function"==typeof u.get?u.get:null,c=a&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,y=Object.prototype.toString,v=Function.prototype.toString,g=String.prototype.match,m="function"==typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,b="function"==typeof Symbol&&"object"==typeof Symbol.iterator,S="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===b||"symbol")?Symbol.toStringTag:null,C=Object.prototype.propertyIsEnumerable,w=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),I=r(4654).custom,P=I&&N(I)?I:null;function E(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function M(t){return String(t).replace(/"/g,"&quot;")}function L(t){return!("[object Array]"!==R(t)||S&&"object"==typeof t&&S in t)}function N(t){if(b)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!x)return!1;try{return x.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,n,i){var a=r||{};if(O(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(O(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!O(a,"customInspect")||a.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(O(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return F(e,a);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var y=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=y&&y>0&&"object"==typeof e)return L(e)?"[Array]":"[Object]";var _=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(a,n);if(void 0===i)i=[];else if(A(i,e)>=0)return"[Circular]";function C(e,r,o){if(r&&(i=i.slice()).push(r),o){var s={depth:a.depth};return O(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),t(e,s,n+1,i)}return t(e,a,n+1,i)}if("function"==typeof e){var I=function(t){if(t.name)return t.name;var e=g.call(v.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),T=U(e,C);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(T.length>0?" { "+T.join(", ")+" }":"")}if(N(e)){var D=b?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):x.call(e);return"object"!=typeof e||b?D:k(D)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var q="<"+String(e.nodeName).toLowerCase(),z=e.attributes||[],V=0;V<z.length;V++)q+=" "+z[V].name+"="+E(M(z[V].value),"double",a);return q+=">",e.childNodes&&e.childNodes.length&&(q+="..."),q+="</"+String(e.nodeName).toLowerCase()+">"}if(L(e)){if(0===e.length)return"[]";var W=U(e,C);return _&&!function(t){for(var e=0;e<t.length;e++)if(A(t[e],"\n")>=0)return!1;return!0}(W)?"["+G(W,_)+"]":"[ "+W.join(", ")+" ]"}if(function(t){return!("[object Error]"!==R(t)||S&&"object"==typeof t&&S in t)}(e)){var X=U(e,C);return 0===X.length?"["+String(e)+"]":"{ ["+String(e)+"] "+X.join(", ")+" }"}if("object"==typeof e&&u){if(P&&"function"==typeof e[P])return e[P]();if("symbol"!==u&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!o||!t||"object"!=typeof t)return!1;try{o.call(t);try{l.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var H=[];return s.call(e,function(t,r){H.push(C(r,e,!0)+" => "+C(t,e))}),B("Map",o.call(e),H,_)}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t);try{o.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var Y=[];return c.call(e,function(t){Y.push(C(t,e))}),B("Set",l.call(e),Y,_)}if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t,h);try{f.call(t,f)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return j("WeakMap");if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{f.call(t,f);try{h.call(t,h)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return j("WeakSet");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{return p.call(t),!0}catch(t){}return!1}(e))return j("WeakRef");if(function(t){return!("[object Number]"!==R(t)||S&&"object"==typeof t&&S in t)}(e))return k(C(Number(e)));if(function(t){if(!t||"object"!=typeof t||!m)return!1;try{return m.call(t),!0}catch(t){}return!1}(e))return k(C(m.call(e)));if(function(t){return!("[object Boolean]"!==R(t)||S&&"object"==typeof t&&S in t)}(e))return k(d.call(e));if(function(t){return!("[object String]"!==R(t)||S&&"object"==typeof t&&S in t)}(e))return k(C(String(e)));if(!function(t){return!("[object Date]"!==R(t)||S&&"object"==typeof t&&S in t)}(e)&&!function(t){return!("[object RegExp]"!==R(t)||S&&"object"==typeof t&&S in t)}(e)){var Z=U(e,C),Q=w?w(e)===Object.prototype:e instanceof Object||e.constructor===Object,J=e instanceof Object?"":"null prototype",K=!Q&&S&&Object(e)===e&&S in e?R(e).slice(8,-1):J?"Object":"",$=(Q||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(K||J?"["+[].concat(K||[],J||[]).join(": ")+"] ":"");return 0===Z.length?$+"{}":_?$+"{"+G(Z,_)+"}":$+"{ "+Z.join(", ")+" }"}return String(e)};var T=Object.prototype.hasOwnProperty||function(t){return t in this};function O(t,e){return T.call(t,e)}function R(t){return y.call(t)}function A(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function F(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return F(t.slice(0,e.maxStringLength),e)+n}return E(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,D),"single",e)}function D(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function k(t){return"Object("+t+")"}function j(t){return t+" { ? }"}function B(t,e,r,n){return t+" ("+e+") {"+(n?G(r,n):r.join(", "))+"}"}function G(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function U(t,e){var r=L(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=O(t,i)?e(t[i],t):""}var o,s="function"==typeof _?_(t):[];if(b){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)O(t,u)&&(r&&String(Number(u))===u&&u<t.length||b&&o["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof _)for(var l=0;l<s.length;l++)C.call(t,s[l])&&n.push("["+e(s[l])+"]: "+e(t[s[l]],t));return n}},4244:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,r){return 0===t&&0===r?1/t==1/r:t===r||!(!e(t)||!e(r))}},609:(t,e,r)=>{"use strict";var n=r(4289),i=r(5559),o=r(4244),s=r(5624),a=r(2281),u=i(s(),Object);n(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},5624:(t,e,r)=>{"use strict";var n=r(4244);t.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(t,e,r)=>{"use strict";var n=r(5624),i=r(4289);t.exports=function(){var t=n();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},8987:(t,e,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=r(1414),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===o.call(t),n=s(t),a=e&&"[object String]"===o.call(t),f=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var d=l&&r;if(a&&t.length>0&&!i.call(t,0))for(var y=0;y<t.length;++y)f.push(String(y));if(n&&t.length>0)for(var v=0;v<t.length;++v)f.push(String(v));else for(var g in t)d&&"prototype"===g||!i.call(t,g)||f.push(String(g));if(u)for(var m=function(t){if("undefined"==typeof window||!p)return h(t);try{return h(t)}catch(t){return!1}}(t),_=0;_<c.length;++_)m&&"constructor"===c[_]||!i.call(t,c[_])||f.push(c[_]);return f}}t.exports=n},2215:(t,e,r)=>{"use strict";var n=Array.prototype.slice,i=r(1414),o=Object.keys,s=o?function(t){return o(t)}:r(8987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(n.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},1414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var r=e.call(t),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},1895:t=>{t.exports=function(t,e,r,n){var i=t[0],o=t[1],s=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var a=(n-r)/2,u=0,l=a-1;u<a;l=u++){var c=e[r+2*u+0],h=e[r+2*u+1],f=e[r+2*l+0],p=e[r+2*l+1];h>o!=p>o&&i<(f-c)*(o-h)/(p-h)+c&&(s=!s)}return s}},6960:(t,e,r)=>{var n=r(1895),i=r(8139);t.exports=function(t,e,r,o){return e.length>0&&Array.isArray(e[0])?i(t,e,r,o):n(t,e,r,o)},t.exports.nested=i,t.exports.flat=n},8139:t=>{t.exports=function(t,e,r,n){var i=t[0],o=t[1],s=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var a=n-r,u=0,l=a-1;u<a;l=u++){var c=e[u+r][0],h=e[u+r][1],f=e[l+r][0],p=e[l+r][1];h>o!=p>o&&i<(f-c)*(o-h)/(p-h)+c&&(s=!s)}return s}},2676:function(e){e.exports=function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,r){for(var n=new i(null,null),o=n,s=n;;){var a=r(t,e.key);if(a<0){if(null===e.left)break;if(r(t,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,null===(e=u).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(r(t,e.right.key)>0&&(u=e.right,e.right=u.left,u.left=e,null===(e=u).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=n.right,e.right=n.left,e}function a(t,e,r,n){var o=new i(t,e);if(null===r)return o.left=o.right=null,o;var a=n(t,(r=s(t,r,n)).key);return a<0?(o.left=r.left,o.right=r,r.left=null):a>=0&&(o.right=r.right,o.left=r,r.right=null),o}function u(t,e,r){var n=null,i=null;if(e){var o=r((e=s(t,e,r)).key,t);0===o?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function l(t,e,r){return null===e?t:(null===t||((e=s(t.key,e,r)).left=t),e)}function c(t,e,r,n,i){if(t){n(e+(r?"└── ":"├── ")+i(t)+"\n");var o=e+(r?"    ":"│   ");t.left&&c(t.left,o,!1,n,i),t.right&&c(t.right,o,!0,n,i)}}var h=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var r=new i(t,e);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var n=this._comparator,o=s(t,this._root,n),a=n(t,o.key);return 0===a?this._root=o:(a<0?(r.left=o.left,r.right=o,o.left=null):a>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,r){var n;return null===e?null:0===r(t,(e=s(t,e,r)).key)?(null===e.left?n=e.right:(n=s(t,e.left,r)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):i=!0;return this},t.prototype.range=function(t,e,r,n){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,r=!1,n=0,i=[];!r;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},t.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?(r=e,e=e.left):e=e.right}return r},t.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?e=e.left:(r=e,e=e.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var n=t.length,i=this._comparator;if(r&&g(t,e,0,n-1,i),null===this._root)this._root=f(t,e,0,n),this._size=n;else{var o=v(this.toList(),p(t,e),i);n=this._size+n,this._root=y({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return c(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,r){var n=this._comparator,i=u(t,this._root,n),o=i.left,s=i.right;n(t,e)<0?s=a(e,r,s,n):o=a(e,r,o,n),this._root=l(o,s,n)},t.prototype.split=function(t){return u(t,this._root,this._comparator)},t}();function f(t,e,r,n){var o=n-r;if(o>0){var s=r+Math.floor(o/2),a=t[s],u=e[s],l=new i(a,u);return l.left=f(t,e,r,s),l.right=f(t,e,s+1,n),l}return null}function p(t,e){for(var r=new i(null,null),n=r,o=0;o<t.length;o++)n=n.next=new i(t[o],e[o]);return n.next=null,r.next}function d(t){for(var e=t,r=[],n=!1,o=new i(null,null),s=o;!n;)e?(r.push(e),e=e.left):r.length>0?e=(e=s=s.next=r.pop()).right:n=!0;return s.next=null,o.next}function y(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),o=y(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=y(t,i+1,r),s}return null}function v(t,e,r){for(var n=new i(null,null),o=n,s=t,a=e;null!==s&&null!==a;)r(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),n.next}function g(t,e,r,n,i){if(!(r>=n)){for(var o=t[r+n>>1],s=r-1,a=n+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}g(t,e,r,a,i),g(t,e,a+1,n,i)}}var m=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},x=Number.EPSILON;void 0===x&&(x=Math.pow(2,-52));var b=x*x,S=function(t,e){if(-x<t&&t<x&&-x<e&&e<x)return 0;var r=t-e;return r*r<b*t*e?0:t<e?-1:1},C=function(){function t(){e(this,t),this.reset()}return n(t,[{key:"reset",value:function(){this.xRounder=new w,this.yRounder=new w}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),w=function(){function t(){e(this,t),this.tree=new h,this.round(0)}return n(t,[{key:"round",value:function(t){var e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===S(e.key,r.key))return this.tree.remove(t),r.key;var n=this.tree.next(e);return null!==n&&0===S(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),t}(),I=new C,P=function(t,e){return t.x*e.y-t.y*e.x},E=function(t,e){return t.x*e.x+t.y*e.y},M=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=P(n,i);return S(o,0)},L=function(t){return Math.sqrt(E(t,t))},N=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return P(i,n)/L(i)/L(n)},T=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return E(i,n)/L(i)/L(n)},O=function(t,e,r){return 0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},R=function(t,e,r){return 0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},A=function(t,e,r,n){if(0===e.x)return R(r,n,t.x);if(0===n.x)return R(t,e,r.x);if(0===e.y)return O(r,n,t.y);if(0===n.y)return O(t,e,r.y);var i=P(e,n);if(0==i)return null;var o={x:r.x-t.x,y:r.y-t.y},s=P(o,e)/i,a=P(o,n)/i;return{x:(t.x+a*e.x+(r.x+s*n.x))/2,y:(t.y+a*e.y+(r.y+s*n.y))/2}},F=function(){function t(r,n){e(this,t),void 0===r.events?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=n}return n(t,null,[{key:"compare",value:function(e,r){var n=t.comparePoints(e.point,r.point);return 0!==n?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:k.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,r=0,n=e.length;r<n;r++){var i=e[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var r=this.point.events[e];if(void 0===r.segment.consumedBy)for(var n=e+1;n<t;n++){var i=this.point.events[n];void 0===i.consumedBy&&r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,r=this.point.events.length;e<r;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,r=new Map,n=function(n){var i=n.otherSE;r.set(n,{sine:N(e.point,t.point,i.point),cosine:T(e.point,t.point,i.point)})};return function(t,e){r.has(t)||n(t),r.has(e)||n(e);var i=r.get(t),o=i.sine,s=i.cosine,a=r.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),D=0,k=function(){function t(r,n,i,o){e(this,t),this.id=++D,this.leftSE=r,r.segment=this,r.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=r,this.rings=i,this.windings=o}return n(t,null,[{key:"compare",value:function(t,e){var r=t.leftSE.point.x,n=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(r<n){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(r>n){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(i!==o){var v=u-s,g=i-r,m=l-a,_=o-n;if(v>g&&m<_)return 1;if(v<g&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/n.y,o=e.x+i*n.x;if(t.x===o)return 0;var s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),r=t.bbox(),n=_(e,r);if(null===n)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=m(e,s)&&0===this.comparePoint(s),l=m(r,i)&&0===t.comparePoint(i),c=m(e,a)&&0===this.comparePoint(a),h=m(r,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=A(i,this.vector(),s,t.vector());return null===f?null:m(n,f)?I.round(f.x,f.y):null}},{key:"split",value:function(e){var r=[],n=void 0!==e.events,i=new F(e,!0),o=new F(e,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return F.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),F.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,r=this.windings.length;e<r;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=t.compare(r,n);if(0!==i){if(i>0){var o=r;r=n,n=o}if(r.prev===n){var s=r;r=n,n=s}for(var a=0,u=n.rings.length;a<u;a++){var l=n.rings[a],c=n.windings[a],h=r.rings.indexOf(l);-1===h?(r.rings.push(l),r.windings.push(c)):r.windings[h]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),r.push(a)):r[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==r[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var v=0,g=l.length;v<g;v++){var m=l[v].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Y.type){case"union":var r=0===t.length,n=0===e.length;this._isInResult=r!==n;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Y.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var i,o,s,a=F.comparePoints(e,r);if(a<0)i=e,o=r,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=r,o=e,s=-1}return new t(new F(i,!0),new F(o,!1),[n],[s])}}]),t}(),j=function(){function t(r,n,i){if(e(this,t),!Array.isArray(r)||0===r.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof r[0][0]||"number"!=typeof r[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=I.round(r[0][0],r[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,u=r.length;a<u;a++){if("number"!=typeof r[a][0]||"number"!=typeof r[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=I.round(r[a][0],r[a][1]);l.x===s.x&&l.y===s.y||(this.segments.push(k.fromRing(s,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),s=l)}o.x===s.x&&o.y===s.y||this.segments.push(k.fromRing(s,o,this))}return n(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.segments.length;e<r;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),t}(),B=function(){function t(r,n){if(e(this,t),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new j(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=r.length;i<o;i++){var s=new j(r[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}return n(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,r=this.interiorRings.length;e<r;e++)for(var n=this.interiorRings[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),G=function(){function t(r,n){if(e(this,t),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof r[0][0][0]&&(r=[r])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=r.length;i<o;i++){var s=new B(r[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}return n(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++)for(var n=this.polys[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),U=function(){function t(r){e(this,t),this.events=r;for(var n=0,i=r.length;n<i;n++)r[n].segment.ringOut=this;this.poly=null}return n(t,null,[{key:"factory",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,v=0,g=h.length;v<g;v++)if(h[v].point===a.point){y=v;break}if(null===y){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(y)[0],x=l.splice(_.index);x.unshift(x[0].otherSE),r.push(new t(x.reverse()))}r.push(new t(l))}}return r}}]),n(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],r=1,n=this.events.length-1;r<n;r++){var i=this.events[r].point,o=this.events[r+1].point;0!==M(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===M(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,r=this.events.length;e<r;e++){var n=this.events[e];F.compare(t,n)>0&&(t=n)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),q=function(){function t(r){e(this,t),this.exteriorRing=r,r.poly=this,this.interiorRings=[]}return n(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,r=this.interiorRings.length;e<r;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),t}(),z=function(){function t(r){e(this,t),this.rings=r,this.polys=this._composePolys(r)}return n(t,[{key:"getGeom",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(!i.poly)if(i.isExteriorRing())e.push(new q(i));else{var o=i.enclosingRing();o.poly||e.push(new q(o)),o.poly.addInterior(i)}}return e}}]),t}(),V=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.compare;e(this,t),this.queue=r,this.tree=new h(n),this.segments=[]}return n(t,[{key:"process",value:function(t){var e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=n,o=n,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)r.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),v=0,g=y.length;v<g;v++)r.push(y[v])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p||F.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),r.push(e.rightSE);for(var _=e.split(m),x=0,b=_.length;x<b;x++)r.push(_[x])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var S=s.getIntersection(a);if(null!==S){if(!s.isAnEndpoint(S))for(var C=this._splitSafely(s,S),w=0,I=C.length;w<I;w++)r.push(C[w]);if(!a.isAnEndpoint(S))for(var P=this._splitSafely(a,S),E=0,M=P.length;E<M;E++)r.push(P[E])}}this.tree.remove(e)}return r}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.insert(t),n}}]),t}(),W="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,X="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=function(){function t(){e(this,t)}return n(t,[{key:"run",value:function(t,e,r){Y.type=t,I.reset();for(var n=[new G(e,!0)],i=0,o=r.length;i<o;i++)n.push(new G(r[i],!1));if(Y.numMultiPolys=n.length,"difference"===Y.type)for(var s=n[0],a=1;a<n.length;)null!==_(n[a].bbox,s.bbox)?a++:n.splice(a,1);if("intersection"===Y.type)for(var u=0,l=n.length;u<l;u++)for(var c=n[u],f=u+1,p=n.length;f<p;f++)if(null===_(c.bbox,n[f].bbox))return[];for(var d=new h(F.compare),y=0,v=n.length;y<v;y++)for(var g=n[y].getSweepEvents(),m=0,x=g.length;m<x;m++)if(d.insert(g[m]),d.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new V(d),S=d.size,C=d.pop();C;){var w=C.key;if(d.size===S){var P=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(P.id," ")+"[".concat(P.leftSE.point.x,", ").concat(P.leftSE.point.y,"] -> ")+"[".concat(P.rightSE.point.x,", ").concat(P.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>X)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var E=b.process(w),M=0,L=E.length;M<L;M++){var N=E[M];void 0===N.consumedBy&&d.insert(N)}S=d.size,C=d.pop()}I.reset();var T=U.factory(b.segments);return new z(T).getGeom()}}]),t}(),Y=new H,Z=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Y.run("union",t,r)},Q=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Y.run("intersection",t,r)},J=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Y.run("xor",t,r)},K=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Y.run("difference",t,r)};return{union:Z,intersection:Q,xor:J,difference:K}}()},1107:function(t,e,n){!function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,r){if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){o(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--i&&e(n)})}n[t]={status:"fulfilled",value:r},0==--i&&e(n)}for(var s=0;s<n.length;s++)o(s,n[s])})}var i=setTimeout,o="undefined"!=typeof r?r:null;function s(t){return Boolean(t&&void 0!==t.length)}function a(){}function u(t,e){return function(){t.apply(e,arguments)}}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(t,this)}function c(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void f(e.promise,t)}h(e.promise,n)}else(1===t._state?h:f)(e.promise,t._value)})):t._deferreds.push(e)}function h(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof l)return t._state=3,t._value=e,void p(t);if("function"==typeof r)return void y(u(r,e),t)}t._state=1,t._value=e,p(t)}catch(e){f(t,e)}}function f(t,e){t._state=2,t._value=e,p(t)}function p(t){2===t._state&&0===t._deferreds.length&&l._immediateFn(function(){t._handled||l._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)c(t,t._deferreds[e]);t._deferreds=null}function d(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function y(t,e){var r=!1;try{t(function(t){r||(r=!0,h(e,t))},function(t){r||(r=!0,f(e,t))})}catch(t){if(r)return;r=!0,f(e,t)}}l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){var r=new this.constructor(a);return c(this,new d(t,e,r)),r},l.prototype.finally=t,l.all=function(t){return new l(function(e,r){if(!s(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(t,e)},r)}n[t]=s,0==--i&&e(n)}catch(t){r(t)}}for(var a=0;a<n.length;a++)o(a,n[a])})},l.allSettled=e,l.resolve=function(t){return t&&"object"==typeof t&&t.constructor===l?t:new l(function(e){e(t)})},l.reject=function(t){return new l(function(e,r){r(t)})},l.race=function(t){return new l(function(e,r){if(!s(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)l.resolve(t[n]).then(e,r)})},l._immediateFn="function"==typeof o&&function(t){o(t)}||function(t){i(t,0)},l._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var v=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof v.Promise?v.Promise=l:(v.Promise.prototype.finally||(v.Promise.prototype.finally=t),v.Promise.allSettled||(v.Promise.allSettled=e))}()},5798:t=>{"use strict";var e=String.prototype.replace,r=/%20/g,n="RFC1738",i="RFC3986";t.exports={default:i,formatters:{RFC1738:function(t){return e.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:n,RFC3986:i}},129:(t,e,r)=>{"use strict";var n=r(8261),i=r(5235),o=r(5798);t.exports={formats:o,parse:i,stringify:n}},5235:(t,e,r)=>{"use strict";var n=r(2769),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},u=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},l=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),l=a?o.slice(0,a.index):o,c=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;c.push(l)}for(var h=0;r.depth>0&&null!==(a=s.exec(o))&&h<r.depth;){if(h+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+o.slice(a.index)+"]"),function(t,e,r,n){for(var i=n?e:u(e,r),o=t.length-1;o>=0;--o){var s,a=t[o];if("[]"===a&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(l,10);r.parseArrays||""!==l?!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=i:s[l]=i:s={0:i}}i=s}return i}(c,e,r,n)}};t.exports=function(t,e){var r=function(t){if(!t)return s;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?s.charset:t.charset;return{allowDots:void 0===t.allowDots?s.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:s.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:s.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:s.comma,decoder:"function"==typeof t.decoder?t.decoder:s.decoder,delimiter:"string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:s.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:s.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:s.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){var r,l={},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,f=c.split(e.delimiter,h),p=-1,d=e.charset;if(e.charsetSentinel)for(r=0;r<f.length;++r)0===f[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[r]?d="utf-8":"utf8=%26%2310003%3B"===f[r]&&(d="iso-8859-1"),p=r,r=f.length);for(r=0;r<f.length;++r)if(r!==p){var y,v,g=f[r],m=g.indexOf("]="),_=-1===m?g.indexOf("="):m+1;-1===_?(y=e.decoder(g,s.decoder,d,"key"),v=e.strictNullHandling?null:""):(y=e.decoder(g.slice(0,_),s.decoder,d,"key"),v=n.maybeMap(u(g.slice(_+1),e),function(t){return e.decoder(t,s.decoder,d,"value")})),v&&e.interpretNumericEntities&&"iso-8859-1"===d&&(v=a(v)),g.indexOf("[]=")>-1&&(v=o(v)?[v]:v),i.call(l,y)?l[y]=n.combine(l[y],v):l[y]=v}return l}(t,r):t,h=r.plainObjects?Object.create(null):{},f=Object.keys(c),p=0;p<f.length;++p){var d=f[p],y=l(d,c[d],r,"string"==typeof t);h=n.merge(h,y,r)}return!0===r.allowSparse?h:n.compact(h)}},8261:(t,e,r)=>{"use strict";var n=r(7478),i=r(2769),o=r(5798),s=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,l=String.prototype.split,c=Array.prototype.push,h=function(t,e){c.apply(t,u(e)?e:[e])},f=Date.prototype.toISOString,p=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(t){return f.call(t)},skipNulls:!1,strictNullHandling:!1},y={},v=function t(e,r,o,s,a,c,f,p,v,g,m,_,x,b,S){for(var C,w=e,I=S,P=0,E=!1;void 0!==(I=I.get(y))&&!E;){var M=I.get(e);if(P+=1,void 0!==M){if(M===P)throw new RangeError("Cyclic object value");E=!0}void 0===I.get(y)&&(P=0)}if("function"==typeof f?w=f(r,w):w instanceof Date?w=g(w):"comma"===o&&u(w)&&(w=i.maybeMap(w,function(t){return t instanceof Date?g(t):t})),null===w){if(s)return c&&!x?c(r,d.encoder,b,"key",m):r;w=""}if("string"==typeof(C=w)||"number"==typeof C||"boolean"==typeof C||"symbol"==typeof C||"bigint"==typeof C||i.isBuffer(w)){if(c){var L=x?r:c(r,d.encoder,b,"key",m);if("comma"===o&&x){for(var N=l.call(String(w),","),T="",O=0;O<N.length;++O)T+=(0===O?"":",")+_(c(N[O],d.encoder,b,"value",m));return[_(L)+"="+T]}return[_(L)+"="+_(c(w,d.encoder,b,"value",m))]}return[_(r)+"="+_(String(w))]}var R,A=[];if(void 0===w)return A;if("comma"===o&&u(w))R=[{value:w.length>0?w.join(",")||null:void 0}];else if(u(f))R=f;else{var F=Object.keys(w);R=p?F.sort(p):F}for(var D=0;D<R.length;++D){var k=R[D],j="object"==typeof k&&void 0!==k.value?k.value:w[k];if(!a||null!==j){var B=u(w)?"function"==typeof o?o(r,k):r:r+(v?"."+k:"["+k+"]");S.set(e,P);var G=n();G.set(y,S),h(A,t(j,B,o,s,a,c,f,p,v,g,m,_,x,b,G))}}return A};t.exports=function(t,e){var r,i=t,l=function(t){if(!t)return d;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||d.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==t.format){if(!s.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=o.formatters[r],i=d.filter;return("function"==typeof t.filter||u(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===t.allowDots?d.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:d.charsetSentinel,delimiter:void 0===t.delimiter?d.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:d.encode,encoder:"function"==typeof t.encoder?t.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:d.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:d.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:d.strictNullHandling}}(e);"function"==typeof l.filter?i=(0,l.filter)("",i):u(l.filter)&&(r=l.filter);var c,f=[];if("object"!=typeof i||null===i)return"";c=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var p=a[c];r||(r=Object.keys(i)),l.sort&&r.sort(l.sort);for(var y=n(),g=0;g<r.length;++g){var m=r[g];l.skipNulls&&null===i[m]||h(f,v(i[m],m,p,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,y))}var _=f.join(l.delimiter),x=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),_.length>0?x+_:""}},2769:(t,e,r)=>{"use strict";var n=r(5798),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],s=i.obj[i.prop],a=Object.keys(s),u=0;u<a.length;++u){var l=a[u],c=s[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(e.push({obj:s,prop:l}),r.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,i,o){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var u="",l=0;l<a.length;++l){var c=a.charCodeAt(l);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===n.RFC1738&&(40===c||41===c)?u+=a.charAt(l):c<128?u+=s[c]:c<2048?u+=s[192|c>>6]+s[128|63&c]:c<55296||c>=57344?u+=s[224|c>>12]+s[128|c>>6&63]+s[128|63&c]:(l+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(l)),u+=s[240|c>>18]+s[128|c>>12&63]+s[128|c>>6&63]+s[128|63&c])}return u},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(o(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(o(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var s=e;return o(e)&&!o(r)&&(s=a(e,n)),o(e)&&o(r)?(r.forEach(function(r,o){if(i.call(e,o)){var s=e[o];s&&"object"==typeof s&&r&&"object"==typeof r?e[o]=t(s,r,n):e.push(r)}else e[o]=r}),e):Object.keys(r).reduce(function(e,o){var s=r[o];return i.call(e,o)?e[o]=t(e[o],s,n):e[o]=s,e},s)}}},8166:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){e(t,r,i||0,o||t.length-1,s||n)}function e(t,n,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1);e(t,n,Math.max(i,Math.floor(n-u*c/a+h)),Math.min(o,Math.floor(n+(a-u)*c/a+h)),s)}var f=t[n],p=i,d=o;for(r(t,i,n),s(t[o],f)>0&&r(t,i,o);p<d;){for(r(t,p,d),p++,d--;s(t[p],f)<0;)p++;for(;s(t[d],f)>0;)d--}0===s(t[i],f)?r(t,i,d):r(t,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}function r(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function n(t,e){return t<e?-1:t>e?1:0}return t}()},5510:(t,e,r)=>{"use strict";t.exports=i,t.exports.default=i;var n=r(8166);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],u(i,t.leaf?n(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,r,i,o){for(var s,a=[e,r];a.length;)(r=a.pop())-(e=a.pop())<=i||(s=e+Math.ceil((r-e)/i/2)*i,n(t,s,e,r,o),a.push(e,s,s,r))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!d(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],d(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):p(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!d(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],d(t,s=e.leaf?r(o):o)){if(e.leaf||p(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,s,a=this.data,u=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],r=c.pop(),s=!0),a.leaf&&-1!==(i=o(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;s||a.leaf||!p(a,u)?n?(r++,a=n.children[r],s=!1):a=null:(l.push(a),c.push(r),r=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,a=this._maxEntries;if(o<=a)return s(i=y(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(i=y([])).leaf=!1,i.height=n;var u,l,c,h,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a));for(v(t,e,r,p,this.compareMinX),u=e;u<=r;u+=p)for(v(t,u,c=Math.min(u+p-1,r),f,this.compareMinY),l=u;l<=c;l+=f)h=Math.min(l+f-1,c),i.children.push(this._build(t,l,h,n-1));return s(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,l,c,f,p,d;n.push(e),!e.leaf&&n.length-1!==r;){for(c=f=1/0,i=0,o=e.children.length;i<o;i++)u=h(s=e.children[i]),p=t,d=s,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<f?(f=l,c=u<c?u:c,a=s):l===f&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),u(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),a=y(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,s(r,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,u,l,c,f,p,d,y,v,g,m;for(l=c=1/0,n=e;n<=r-e;n++)i=a(t,0,n,this.toBBox),o=a(t,n,r,this.toBBox),p=i,d=o,y=void 0,v=void 0,g=void 0,m=void 0,y=Math.max(p.minX,d.minX),v=Math.max(p.minY,d.minY),g=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),s=Math.max(0,g-y)*Math.max(0,m-v),u=h(i)+h(o),s<l?(l=s,f=n,c=u<c?u:c):s===l&&u<c&&(c=u,f=n);return f},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,l=a(t,0,e,s),c=a(t,r-e,r,s),h=f(l)+f(c);for(i=e;i<r-e;i++)o=t.children[i],u(l,t.leaf?s(o):o),h+=f(l);for(i=r-e-1;i>=e;i--)o=t.children[i],u(c,t.leaf?s(o):o),h+=f(c);return h},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)u(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():s(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new M(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=I(s,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?d:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",y={};function v(){}function g(){}function m(){}var _={};u(_,o,function(){return this});var x=Object.getPrototypeOf,b=x&&x(x(L([])));b&&b!==r&&n.call(b,o)&&(_=b);var S=m.prototype=v.prototype=Object.create(_);function C(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function r(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,s,a)},function(t){r("throw",t,s,a)}):e.resolve(h).then(function(t){l.value=t,s(l)},function(t){return r("throw",t,s,a)})}a(u.arg)}var i;this._invoke=function(t,n){function o(){return new e(function(e,i){r(t,n,e,i)})}return i=i?i.then(o,o):o()}}function I(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:N}}function N(){return{value:e,done:!0}}return g.prototype=m,u(S,"constructor",m),u(m,"constructor",g),g.displayName=u(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},C(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then(function(t){return t.done?t.value:s.next()})},C(S),u(S,a,"Generator"),u(S,o,function(){return this}),u(S,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=L,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},3697:t=>{"use strict";var e=Object,r=TypeError;t.exports=function(){if(null!=this&&this!==e(this))throw new r("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},2847:(t,e,r)=>{"use strict";var n=r(4289),i=r(5559),o=r(3697),s=r(1721),a=r(2753),u=i(o);n(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},1721:(t,e,r)=>{"use strict";var n=r(3697),i=r(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor,s=TypeError;t.exports=function(){if(!i)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return n}},2753:(t,e,r)=>{"use strict";var n=r(4289).supportsDescriptors,i=r(1721),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,u=Object.getPrototypeOf,l=/a/;t.exports=function(){if(!n||!u)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=u(l),r=o(e,"flags");return r&&r.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},8639:function(t,e){!function(t){"use strict";const e=134217729,r=3.3306690738754706e-16;function n(t,e,r,n,i){let o,s,a,u,l=e[0],c=n[0],h=0,f=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=n[++f]);let p=0;if(h<t&&f<r)for(c>l==c>-l?(a=o-((s=l+o)-l),l=e[++h]):(a=o-((s=c+o)-c),c=n[++f]),o=s,0!==a&&(i[p++]=a);h<t&&f<r;)c>l==c>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h]):(a=o-((s=o+c)-(u=s-o))+(c-u),c=n[++f]),o=s,0!==a&&(i[p++]=a);for(;h<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++h],o=s,0!==a&&(i[p++]=a);for(;f<r;)a=o-((s=o+c)-(u=s-o))+(c-u),c=n[++f],o=s,0!==a&&(i[p++]=a);return 0===o&&0!==p||(i[p++]=o),p}function i(t){return new Float64Array(t)}const o=3.3306690738754716e-16,s=2.2204460492503146e-16,a=1.1093356479670487e-31,u=i(4),l=i(8),c=i(12),h=i(16),f=i(4);t.orient2d=function(t,i,p,d,y,v){const g=(i-v)*(p-y),m=(t-y)*(d-v),_=g-m;if(0===g||0===m||g>0!=m>0)return _;const x=Math.abs(g+m);return Math.abs(_)>=o*x?_:-function(t,i,o,p,d,y,v){let g,m,_,x,b,S,C,w,I,P,E,M,L,N,T,O,R,A;const F=t-d,D=o-d,k=i-y,j=p-y;b=(T=(w=F-(C=(S=e*F)-(S-F)))*(P=j-(I=(S=e*j)-(S-j)))-((N=F*j)-C*I-w*I-C*P))-(E=T-(R=(w=k-(C=(S=e*k)-(S-k)))*(P=D-(I=(S=e*D)-(S-D)))-((O=k*D)-C*I-w*I-C*P))),u[0]=T-(E+b)+(b-R),b=(L=N-((M=N+E)-(b=M-N))+(E-b))-(E=L-O),u[1]=L-(E+b)+(b-O),b=(A=M+E)-M,u[2]=M-(A-b)+(E-b),u[3]=A;let B=function(t,e){let r=e[0];for(let n=1;n<t;n++)r+=e[n];return r}(4,u),G=s*v;if(B>=G||-B>=G)return B;if(g=t-(F+(b=t-F))+(b-d),_=o-(D+(b=o-D))+(b-d),m=i-(k+(b=i-k))+(b-y),x=p-(j+(b=p-j))+(b-y),0===g&&0===m&&0===_&&0===x)return B;if(G=a*v+r*Math.abs(B),(B+=F*x+j*g-(k*_+D*m))>=G||-B>=G)return B;b=(T=(w=g-(C=(S=e*g)-(S-g)))*(P=j-(I=(S=e*j)-(S-j)))-((N=g*j)-C*I-w*I-C*P))-(E=T-(R=(w=m-(C=(S=e*m)-(S-m)))*(P=D-(I=(S=e*D)-(S-D)))-((O=m*D)-C*I-w*I-C*P))),f[0]=T-(E+b)+(b-R),b=(L=N-((M=N+E)-(b=M-N))+(E-b))-(E=L-O),f[1]=L-(E+b)+(b-O),b=(A=M+E)-M,f[2]=M-(A-b)+(E-b),f[3]=A;const U=n(4,u,4,f,l);b=(T=(w=F-(C=(S=e*F)-(S-F)))*(P=x-(I=(S=e*x)-(S-x)))-((N=F*x)-C*I-w*I-C*P))-(E=T-(R=(w=k-(C=(S=e*k)-(S-k)))*(P=_-(I=(S=e*_)-(S-_)))-((O=k*_)-C*I-w*I-C*P))),f[0]=T-(E+b)+(b-R),b=(L=N-((M=N+E)-(b=M-N))+(E-b))-(E=L-O),f[1]=L-(E+b)+(b-O),b=(A=M+E)-M,f[2]=M-(A-b)+(E-b),f[3]=A;const q=n(U,l,4,f,c);b=(T=(w=g-(C=(S=e*g)-(S-g)))*(P=x-(I=(S=e*x)-(S-x)))-((N=g*x)-C*I-w*I-C*P))-(E=T-(R=(w=m-(C=(S=e*m)-(S-m)))*(P=_-(I=(S=e*_)-(S-_)))-((O=m*_)-C*I-w*I-C*P))),f[0]=T-(E+b)+(b-R),b=(L=N-((M=N+E)-(b=M-N))+(E-b))-(E=L-O),f[1]=L-(E+b)+(b-O),b=(A=M+E)-M,f[2]=M-(A-b)+(E-b),f[3]=A;const z=n(q,c,4,f,h);return h[z-1]}(t,i,p,d,y,v,x)},t.orient2dfast=function(t,e,r,n,i,o){return(e-o)*(r-i)-(t-i)*(n-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},7478:(t,e,r)=>{"use strict";var n=r(210),i=r(1924),o=r(631),s=n("%TypeError%"),a=n("%WeakMap%",!0),u=n("%Map%",!0),l=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),f=i("Map.prototype.get",!0),p=i("Map.prototype.set",!0),d=i("Map.prototype.has",!0),y=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new s("Side channel does not contain "+o(t))},get:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(t)return l(t,n)}else if(u){if(e)return f(e,n)}else if(r)return function(t,e){var r=y(t,e);return r&&r.value}(r,n)},has:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(t)return h(t,n)}else if(u){if(e)return d(e,n)}else if(r)return function(t,e){return!!y(t,e)}(r,n);return!1},set:function(n,i){a&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new a),c(t,n,i)):u?(e||(e=new u),p(e,n,i)):(r||(r={key:{},next:null}),function(t,e,r){var n=y(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,i))}};return n}},5697:t=>{"use strict";t.exports={eudist:function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i},mandist:function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return r?Math.sqrt(i):i},dist:function(t,e,r){var n=Math.abs(t-e);return r?n:n*n}}},7035:(t,e,r)=>{"use strict";var n=r(5697),i=n.eudist,o=n.dist;t.exports={kmrand:function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n},kmpp:function(t,e){var r=t[0].length?i:o,n=[],s=t.length,a=t[0].length>0,u=t[Math.floor(Math.random()*s)];a&&u.join("_");for(n.push(u);n.length<e;){for(var l=[],c=n.length,h=0,f=[],p=0;p<s;p++){for(var d=1/0,y=0;y<c;y++){var v=r(t[p],n[y]);v<=d&&(d=v)}l[p]=d}for(var g=0;g<s;g++)h+=l[g];for(var m=0;m<s;m++)f[m]={i:m,v:t[m],pr:l[m]/h,cs:0};f.sort(function(t,e){return t.pr-e.pr}),f[0].cs=f[0].pr;for(var _=1;_<s;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var x=Math.random(),b=0;b<s-1&&f[b++].cs<x;);n.push(f[b-1].v)}return n}}},1160:(t,e,r)=>{"use strict";var n=r(5697),i=r(7035),o=n.eudist,s=(n.mandist,n.dist,i.kmrand),a=i.kmpp;function u(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}t.exports=function(t,e,r,n){var i=[],l=[],c=[],h=[],f=!1,p=n||1e4,d=t.length,y=t[0].length,v=y>0,g=[];if(r)i="kmrand"==r?s(t,e):"kmpp"==r?a(t,e):r;else for(var m={};i.length<e;){var _=Math.floor(Math.random()*d);m[_]||(m[_]=!0,i.push(t[_]))}do{u(e,0,g);for(var x=0;x<d;x++){for(var b=1/0,S=0,C=0;C<e;C++){(h=v?o(t[x],i[C]):Math.abs(t[x]-i[C]))<=b&&(b=h,S=C)}c[x]=S,g[S]++}for(var w=[],I=(l=[],0);I<e;I++)w[I]=v?u(y,0,w[I]):0,l[I]=i[I];if(v){for(var P=0;P<e;P++)i[P]=[];for(var E=0;E<d;E++)for(var M=w[c[E]],L=t[E],N=0;N<y;N++)M[N]+=L[N];f=!0;for(var T=0;T<e;T++){for(var O=i[T],R=w[T],A=l[T],F=g[T],D=0;D<y;D++)O[D]=R[D]/F||0;if(f)for(var k=0;k<y;k++)if(A[k]!=O[k]){f=!1;break}}}else{for(var j=0;j<d;j++){w[c[j]]+=t[j]}for(var B=0;B<e;B++)i[B]=w[B]/g[B]||0;f=!0;for(var G=0;G<e;G++)if(l[G]!=i[G]){f=!1;break}}f=f||--p<=0}while(!f);return{it:1e4-p,k:e,idxs:c,centroids:i}}},4153:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t,i={}){if(i=Object.assign({},n,i),!t||"string"!=typeof t)return t;let o=t.trim();if(void 0!==i.skipLike&&i.skipLike.test(o))return t;if(i.hex&&e.test(o))return Number.parseInt(o,16);{const e=r.exec(o);if(e){const r=e[1],n=e[2];let s=function(t){if(t&&-1!==t.indexOf("."))return"."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t;return t}(e[3]);const a=e[4]||e[6];if(!i.leadingZeros&&n.length>0&&r&&"."!==o[2])return t;if(!i.leadingZeros&&n.length>0&&!r&&"."!==o[1])return t;{const e=Number(o),u=""+e;return-1!==u.search(/[eE]/)||a?i.eNotation?e:t:-1!==o.indexOf(".")?"0"===u&&""===s||u===s||r&&u==="-"+s?e:t:n?s===u||r+s===u?e:t:o===u||o===r+u?e:t}}return t}}},3842:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});class n{constructor(t=[],e=i){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1),o=e[n];const s=n+1;if(s<this.length&&r(e[s],o)<0&&(n=s,o=e[s]),r(o,i)>=0)break;e[t]=o,t=n}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},675:function(t,e){!function(t){"use strict";function e(){}function r(t){this.message=t||""}function n(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?At:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function y(t){this.message=t||""}function v(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var g=function(){};g.prototype.interfaces_=function(){return[]},g.prototype.getClass=function(){return g},g.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},x={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,x);var b=function(){},S=function(){},C=function(){},w=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},I={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};w.prototype.setOrdinate=function(t,e){switch(t){case w.X:this.x=e;break;case w.Y:this.y=e;break;case w.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},w.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!g.equalsWithTolerance(this.x,e.x,r)&&!!g.equalsWithTolerance(this.y,e.y,r)}},w.prototype.getOrdinate=function(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.z}throw new m("Invalid ordinate index: "+t)},w.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},w.prototype.equals=function(t){return t instanceof w&&this.equals2D(t)},w.prototype.equalInZ=function(t,e){return g.equalsWithTolerance(this.z,t.z,e)},w.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},w.prototype.clone=function(){},w.prototype.copy=function(){return new w(this)},w.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},w.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},w.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},w.prototype.hashCode=function(){var t=17;return 37*(t=37*t+w.hashCode(this.x))+w.hashCode(this.y)},w.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},w.prototype.interfaces_=function(){return[b,S,e]},w.prototype.getClass=function(){return w},w.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},I.DimensionalComparator.get=function(){return P},I.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},I.NULL_ORDINATE.get=function(){return _.NaN},I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},Object.defineProperties(w,I);var P=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};P.prototype.compare=function(t,e){var r=t,n=e,i=P.compare(r.x,n.x);if(0!==i)return i;var o=P.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:P.compare(r.z,n.z)},P.prototype.interfaces_=function(){return[C]},P.prototype.getClass=function(){return P},P.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var E=function(){};E.prototype.create=function(){},E.prototype.interfaces_=function(){return[]},E.prototype.getClass=function(){return E};var M=function(){},L={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.toLocationSymbol=function(t){switch(t){case M.EXTERIOR:return"e";case M.BOUNDARY:return"b";case M.INTERIOR:return"i";case M.NONE:return"-"}throw new m("Unknown location value: "+t)},L.INTERIOR.get=function(){return 0},L.BOUNDARY.get=function(){return 1},L.EXTERIOR.get=function(){return 2},L.NONE.get=function(){return-1},Object.defineProperties(M,L);var N=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},T=function(){},O={LOG_10:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],r=arguments[0];return t>r&&(r=t),e>r&&(r=e),r}if(4===arguments.length){var n=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return n>s&&(s=n),i>s&&(s=i),o>s&&(s=o),s}},T.average=function(t,e){return(t+e)/2},O.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(T,O);var R=function(t){this.str=t};R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};var A=function(t){this.value=t};A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=function(t){return Number.isNaN(t)};var F=function(){};F.isWhitespace=function(t){return t<=32&&t>=0||127===t},F.toUpperCase=function(t){return t.toUpperCase()};var D=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n,i)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},D.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=D.magnitude(r._hi),i=D.TEN.pow(n);(r=r.divide(i)).gt(D.TEN)?(r=r.divide(D.TEN),n+=1):r.lt(D.ONE)&&(r=r.multiply(D.TEN),n-=1);for(var o=n+1,s=new R,a=D.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),r=r.subtract(D.valueOf(l)).multiply(D.TEN),c&&r.selfAdd(D.TEN);var f=!0,p=D.magnitude(r._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=n,s.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},D.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(t){return this.le(t)?this:t},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/r,h=(i=(l=D.SPLIT*u)-(i=l-u))*(s=(h=D.SPLIT*r)-(s=h-r))-(c=u*r)+i*(a=r-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*n)/r),this._hi=h,this._lo=u-h+l,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;return r=(o=this._hi/t._hi)-(e=(s=D.SPLIT*o)-(e=s-o)),u=e*(n=(u=D.SPLIT*t._hi)-(n=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-n)+r*n+r*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new D(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return _.isNaN(l)?D.createNaN():D.copy(this).selfDivide(l,0)}},D.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},D.prototype.pow=function(t){if(0===t)return D.valueOf(1);var e=new D(this),r=D.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new D(t,e)},D.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},D.prototype.max=function(t){return this.ge(t)?this:t},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=D.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(r=i+a)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,y=null,v=null;p=this._hi+u,h=this._lo+l,d=p-(y=p-this._hi),f=h-(v=h-this._lo);var g=(c=p+(y=(d=u-y+(this._hi-d))+h))+(y=(f=l-v+(this._lo-f))+(y+(p-c))),m=y+(c-g);return this._hi=g,this._lo=m,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=D.SPLIT*this._hi)-this._hi,l=D.SPLIT*r,i=u-i,o=this._hi-i,s=l-r;var c=(u=this._hi*r)+(l=i*(s=l-s)-u+i*(a=r-s)+o*s+o*a+(this._hi*n+this._lo*r)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new D(t,e)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var t=arguments[0];return t.isNaN()?D.createNaN():D.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?D.createNaN():D.copy(this).selfMultiply(e,0)}},D.prototype.isNaN=function(){return _.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var t=D.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+D.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+D.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},D.prototype.reciprocal=function(){var t=null,e=null,r=null,n=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=D.SPLIT*i)-(t=o-i)),r=(a=D.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(s=i*this._hi)-(a=t*(r=a-r)-s+t*(n=this._hi-r)+e*r+e*n)-i*this._lo)/this._hi);return new D(u,i-u+o)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=D.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},D.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var t=arguments[0];return D.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return D.copy(this).selfAdd(e)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof D){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},D.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[e,b,S]},D.prototype.getClass=function(){return D},D.sqr=function(t){return D.valueOf(t).selfMultiply(t)},D.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return D.parse(t)}if("number"==typeof arguments[0])return new D(arguments[0])},D.sqrt=function(t){return D.valueOf(t).sqrt()},D.parse=function(t){for(var e=0,r=t.length;F.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new D,s=0,a=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,F.isDigit(l)){var c=l-"0";o.selfMultiply(D.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=A.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=D.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=D.TEN.pow(-p);f=o.multiply(y)}return n?f.negate():f},D.createNaN=function(){return new D(_.NaN,_.NaN)},D.copy=function(t){return new D(t)},D.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},D.stringOfChar=function(t,e){for(var r=new R,n=0;n<e;n++)r.append(t);return r.toString()},k.PI.get=function(){return new D(3.141592653589793,1.2246467991473532e-16)},k.TWO_PI.get=function(){return new D(6.283185307179586,2.4492935982947064e-16)},k.PI_2.get=function(){return new D(1.5707963267948966,6.123233995736766e-17)},k.E.get=function(){return new D(2.718281828459045,1.4456468917292502e-16)},k.NaN.get=function(){return new D(_.NaN,_.NaN)},k.EPS.get=function(){return 1.23259516440783e-32},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return D.valueOf(10)},k.ONE.get=function(){return D.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,k);var j=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,r){var n=j.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=D.valueOf(e.x).selfAdd(-t.x),o=D.valueOf(e.y).selfAdd(-t.y),s=D.valueOf(r.x).selfAdd(-e.x),a=D.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},j.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},j.intersection=function(t,e,r,n){var i=D.valueOf(n.y).selfSubtract(r.y).selfMultiply(D.valueOf(e.x).selfSubtract(t.x)),o=D.valueOf(n.x).selfSubtract(r.x).selfMultiply(D.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=D.valueOf(n.x).selfSubtract(r.x).selfMultiply(D.valueOf(t.y).selfSubtract(r.y)),u=D.valueOf(n.y).selfSubtract(r.y).selfMultiply(D.valueOf(t.x).selfSubtract(r.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=D.valueOf(t.x).selfAdd(D.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=D.valueOf(e.x).selfSubtract(t.x).selfMultiply(D.valueOf(t.y).selfSubtract(r.y)),f=D.valueOf(e.y).selfSubtract(t.y).selfMultiply(D.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=D.valueOf(r.y).selfAdd(D.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new w(c,d)},j.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=i-o;if(i>0){if(o<=0)return j.signum(s);n=i+o}else{if(!(i<0))return j.signum(s);if(o>=0)return j.signum(s);n=-i-o}var a=j.DP_SAFE_EPSILON*n;return s>=a||-s>=a?j.signum(s):2},j.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,B);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,r){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[S]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var q=function(){},z=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(q),V=function(){};V.arraycopy=function(t,e,r,n,i){for(var o=0,s=e;s<e+i;s++)r[n+o]=t[s],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var W=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof w&&arguments[1]instanceof w){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=h.y-f.y,v=f.x-h.x,g=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=v*x-_*g,this.y=m*g-y*x,this.w=y*_-m*v}};W.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new z;return t},W.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new z;return t},W.prototype.getCoordinate=function(){var t=new w;return t.x=this.getX(),t.y=this.getY(),t},W.prototype.interfaces_=function(){return[]},W.prototype.getClass=function(){return W},W.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(f)||_.isInfinite(f))throw new z;return new w(h,f)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof w){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},H={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,n,r,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof w){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof w){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},X.prototype.centre=function(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+w.hashCode(this._minx))+w.hashCode(this._maxx))+w.hashCode(this._miny))+w.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[b,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(n.x,i.x),c=Math.max(n.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(n.y,i.y),c=Math.max(n.y,i.y),l>u||c<a))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,H);var Y={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Z=function(t){this.geometryFactory=t||new ge};Z.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=Y.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Y.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],J[r]&&(e=J[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Z.prototype.write=function(t){return this.extractGeometry(t)},Z.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Q[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Q[e].apply(this,[t])+")"};var Q={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Q.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Q.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Q.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Q.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Q.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Q.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Q.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Q.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Y.spaces);return this.geometryFactory.createPoint(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Y.trimParens,"$1"),n.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Y.spaces),n.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Y.spaces),n.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,r=t.trim().split(Y.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Y.trimParens,"$1"),n.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,r,n,i,o=t.trim().split(Y.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Y.trimParens,"$1"),r=J.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===a?i=n:s.push(n);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,r=t.trim().split(Y.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Y.trimParens,"$1"),n.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},K=function(t){this.parser=new Z(t)};K.prototype.write=function(t){return this.parser.write(t)},K.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,r;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],r=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var rt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};rt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},rt.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},rt.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},rt.prototype.getIntersectionNum=function(){return this._result},rt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},rt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},rt.prototype.setPrecisionModel=function(t){this._precisionModel=t},rt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},rt.prototype.getIntersection=function(t){return this._intPt[t]},rt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},rt.prototype.hasIntersection=function(){return this._result!==rt.NO_INTERSECTION},rt.prototype.getEdgeDistance=function(t,e){return rt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},rt.prototype.isCollinear=function(){return this._result===rt.COLLINEAR_INTERSECTION},rt.prototype.toString=function(){return K.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+K.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},rt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},rt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},rt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},rt.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nt.DONT_INTERSECT.get=function(){return 0},nt.DO_INTERSECT.get=function(){return 1},nt.COLLINEAR.get=function(){return 2},nt.NO_INTERSECTION.get=function(){return 0},nt.POINT_INTERSECTION.get=function(){return 1},nt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(rt,nt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),r=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,X.intersects(r,n,e)&&0===at.orientationIndex(r,n,e)&&0===at.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=W.intersection(t,r,n,i)}catch(s){if(!(s instanceof z))throw s;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new w(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=j.intersection(t,e,r,n),s=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new w(t),o=new w(e),s=new w(r),a=new w(n),u=new w;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=X.intersects(e,r,n),s=X.intersects(e,r,i),a=X.intersects(n,i,e),u=X.intersects(n,i,r);return o&&s?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!X.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=at.orientationIndex(e,r,n),s=at.orientationIndex(e,r,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(n,i,e),u=at.orientationIndex(n,i,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new w(n):0===s?this._intPt[0]=new w(i):0===a?this._intPt[0]=new w(e):0===u&&(this._intPt[0]=new w(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=at.distancePointLine(t,r,n),s=at.distancePointLine(e,r,n);return s<o&&(o=s,i=e),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),i},e}(rt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return ot.signOfDet2x2(n,i,o,s)},ot.signOfDet2x2=function(t,e,r,n){var i=null,o=null,s=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(s=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=s*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(s=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=s*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ot.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==M.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?M.BOUNDARY:this._crossingCount%2==1?M.INTERIOR:M.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof w&&N(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),r=new w,n=new w,i=1;i<t.size();i++)if(t.getCoordinate(i,r),t.getCoordinate(i-1,n),e.countSegment(r,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var u=o[a],l=o[a-1];if(s.countSegment(u,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,r){return j.orientationIndex(t,e,r)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y;e+=i*(t[n-1].y-o)}return e/2}if(N(arguments[0],G)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new w,l=new w,c=new w;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,p=1;p<a-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(p+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}},at.distanceLineLine=function(t,e,r,n){if(t.equals(e))return at.distancePointLine(t,r,n);if(r.equals(n))return at.distancePointLine(n,t,e);var i=!1;if(X.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?T.min(at.distancePointLine(t,r,n),at.distancePointLine(e,r,n),at.distancePointLine(r,t,e),at.distancePointLine(n,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==M.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new w;t.getCoordinate(0,n);for(var i=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,u=n.y,l=a-i,c=u-o;r+=Math.sqrt(l*l+c*c),i=a,o=u}return r},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==n);var u=t[s],l=t[a];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=at.computeOrientation(u,r,l);return 0===c?u.x>l.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},at.computeOrientation=function(t,e,r){return at.orientationIndex(t,e,r)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=at.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var r=new it,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var r=e;return this.equalsExact(r)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),s=i.compareTo(o);if(0!==s)return s}return r.hasNext()?1:n.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[S,b,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,ht);var ft=function(){};ft.interfaces_=function(){return[lt]},ft.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},yt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},yt.Mod2BoundaryNodeRule.get=function(){return vt},yt.EndPointBoundaryNodeRule.get=function(){return gt},yt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},yt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},yt.MOD2_BOUNDARY_RULE.get=function(){return new vt},yt.ENDPOINT_BOUNDARY_RULE.get=function(){return new gt},yt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},yt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},yt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,yt);var vt=function(){};vt.prototype.isInBoundary=function(t){return t%2==1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var gt=function(){};gt.prototype.isInBoundary=function(t){return t>0},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var xt=function(){};xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(r.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(n.prototype=new Error).name="NoSuchElementException";var Ct=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new wt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new r;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(St),wt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),It=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],r=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),e),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],n=arguments[1];return this.add(r,n,!0),!0}if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],u);else for(var c=a.length-1;c>=0;c--)this.add(a[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=arguments[3],m=1;v>g&&(m=-1);for(var _=v;_!==g;_+=m)this.add(d[_],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new w(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(Ct),Pt=function(){},Et={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Et.ForwardComparator.get=function(){return Mt},Et.BidirectionalComparator.get=function(){return Lt},Et.coordArrayType.get=function(){return new Array(0).fill(null)},Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt},Pt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Pt.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(Pt.indexOf(n,e)<0)return n}return null},Pt.scroll=function(t,e){var r=Pt.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);V.arraycopy(t,r,n,0,t.length-r),V.arraycopy(t,0,n,t.length-r,r),V.arraycopy(n,0,t,0,t.length)},Pt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],i[s]))return!1;return!0}},Pt.intersection=function(t,e){for(var r=new It,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},Pt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Pt.removeRepeatedPoints=function(t){return Pt.hasRepeatedPoints(t)?new It(t,!1).toCoordinateArray():t},Pt.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},Pt.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},Pt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new w(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new w(n[i+u])},Pt.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},Pt.envelope=function(t){for(var e=new X,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},Pt.toCoordinateArray=function(t){return t.toArray(Pt.coordArrayType)},Pt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Pt.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},Pt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},Pt.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},Pt.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},Pt.extract=function(t,e,r){e=T.clamp(e,0,t.length);var n=(r=T.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,s=e;s<=r;s++)i[o++]=t[s];return i},Object.defineProperties(Pt,Et);var Mt=function(){};Mt.prototype.compare=function(t,e){return Pt.compare(t,e)},Mt.prototype.interfaces_=function(){return[C]},Mt.prototype.getClass=function(){return Mt};var Lt=function(){};Lt.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=Pt.compare(r,n);return Pt.isEqualReversed(r,n)?0:i},Lt.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=Pt.increasingDirection(r),o=Pt.increasingDirection(n),s=i>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[s].compareTo(n[a]);if(0!==l)return l;s+=i,a+=o}return 0},Lt.prototype.interfaces_=function(){return[C]},Lt.prototype.getClass=function(){return Lt};var Nt=function(){};Nt.prototype.get=function(){},Nt.prototype.put=function(){},Nt.prototype.size=function(){},Nt.prototype.values=function(){},Nt.prototype.entrySet=function(){};var Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){};var Ot=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Rt(this)},e}(o),Rt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),At=0;(h.prototype=new Tt).get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:At,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:r,color:At,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=c(a(a(t)));1===s(e)?(u(a(t),At),u(e,At),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),At),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var r=l(a(a(t)));1===s(r)?(u(a(t),At),u(r,At),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),At),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=At},h.prototype.values=function(){var t=new Ct,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Ot,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},h.prototype.size=function(){return this.size_};var Ft=function(){};Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},f.prototype=new o,(p.prototype=new f).contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Dt(this)};var Dt=function(t){this.treeSet_=t,this.position_=0};Dt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n;return this.treeSet_.array_[this.position_++]},Dt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Dt.prototype.remove=function(){throw new i};var kt=function(){};kt.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},kt.asList=function(t){for(var e=new Ct,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var jt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new m("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(F.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(jt,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var qt=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(kt.asList(this._geometries)),r=new p(kt.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){for(var n=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=i.getGeometryN(a),c=u.compareToSameClass(l,n);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(N(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(N(arguments[0],Ut)){var r=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(r),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(N(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(ct),zt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ft]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(qt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Zt?this.boundaryLineString(this._geom):this._geom instanceof zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new Ct;this._endpointMap=new h;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Pt.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Wt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0};var Wt=function(){this.count=null};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Xt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},r=new function(){}(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Xt.getStackTrace(n))),a=0;a<i;a++)try{o+=s.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var r=e.length,n=new Ct,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);n.add(s),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var a=new Array(n.size()).fill(null),u=0;u<a.length;u++)a[u]=n.get(u);return a},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Ht.NEWLINE.get=function(){return V.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Ht);var Yt=function(){};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Yt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Yt.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(s)&&_.isNaN(a)))return!1}return!0},Yt.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Yt.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Yt.copy(e,i-1,n,o,1);return n},Yt.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Yt.swap(t,n,e-n)},Yt.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Yt.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Yt.copyCoord(t,e+o,r,n+o)},Yt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new R;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Xt.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Yt.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Yt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(r-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(r-1,G.Y)?e:Yt.createClosedRing(t,e,r+1)},Yt.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Yt.copy(e,0,n,0,i);for(var o=i;o<r;o++)Yt.copy(e,0,n,o,1);return n};var Zt=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Yt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Yt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(N(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(N(arguments[0],Ut)){var r=arguments[0];if(0===this._points.size())return null;for(var n=0;n<this._points.size()&&(r.filter(this._points,n),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],Gt)||N(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ft]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(ct),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var Jt=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(N(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],Gt)||N(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var $t=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new m("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,i=this._shell,o=n._shell;if(!i.equalsExact(o,r))return!1;if(this._holes.length!==n._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(n._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,n,0,n.length);var i=Pt.minCoordinate(e.getCoordinates());Pt.scroll(n,i),V.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],at.isCCW(e.getCoordinates())===r&&Pt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){var n=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,n);if(0!==a)return a;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var h=this.getInteriorRingN(c),f=i.getInteriorRingN(c),p=h.compareToSameClass(f,n);if(0!==p)return p;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(N(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(N(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(N(t,Gt))t.filter(this);else if(N(t,lt)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(qt),ee=function(t){function e(e,r){e instanceof w&&r instanceof ge&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Yt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Zt),re=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ct,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(qt),ne=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ne.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ne.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},ne.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Jt||t instanceof Zt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ne.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new Ct,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===te?this._factory.createMultiPoint(n.toArray([])):r.getClass()===zt?this._factory.createMultiLineString(n.toArray([])):r.getClass()===re?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},ne.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new Ct,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(n,i.toArray([]))},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ne,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof ee?e.createLinearRing(r):t instanceof Zt?e.createLineString(r):t instanceof Jt?r.length>0?e.createPoint(r[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new w}else if(N(arguments[0],G)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=r.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new w}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,r){switch(e){case G.X:this._coordinates[t].x=r;break;case G.Y:this._coordinates[t].y=r;break;case G.Z:this._coordinates[t].z=r;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new w(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(N(arguments[0],G))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},ce.prototype.interfaces_=function(){return[E,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ct,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new Ot;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Nt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ye){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new A(r).compareTo(new A(n))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof w){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,b]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var ye=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ve={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ye.prototype.readResolve=function(){return ye.nameToTypeMap.get(this._name)},ye.prototype.toString=function(){return this._name},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ve.serialVersionUID.get=function(){return-552860263173159e4},ve.nameToTypeMap.get=function(){return new fe},Object.defineProperties(ye,ve),pe.Type=ye,pe.FIXED=new ye("FIXED"),pe.FLOATING=new ye("FLOATING"),pe.FLOATING_SINGLE=new ye("FLOATING SINGLE");var ge=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?N(arguments[0],E)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ge.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new w(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new w(t.getMinX(),t.getMinY()),new w(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new w(t.getMinX(),t.getMinY()),new w(t.getMinX(),t.getMaxY()),new w(t.getMaxX(),t.getMaxY()),new w(t.getMaxX(),t.getMinY()),new w(t.getMinX(),t.getMinY())]),null)},ge.prototype.createLineString=function(t){return t?t instanceof Array?new Zt(this.getCoordinateSequenceFactory().create(t),this):N(t,G)?new Zt(t,this):void 0:new Zt(this.getCoordinateSequenceFactory().create([]),this)},ge.prototype.createMultiLineString=function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0},ge.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(ge.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $t)return this.createMultiPolygon(ge.toPolygonArray(t));if(a instanceof Zt)return this.createMultiLineString(ge.toLineStringArray(t));if(a instanceof Jt)return this.createMultiPoint(ge.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},ge.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ge.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],G))return new Jt(arguments[0],this)}},ge.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ge.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(N(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},ge.prototype.getSRID=function(){return this._SRID},ge.prototype.createGeometryCollection=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ge.prototype.createGeometry=function(t){return new ne(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ge.prototype.getPrecisionModel=function(){return this._precisionModel},ge.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],G))return new ee(arguments[0],this)}},ge.prototype.createMultiPolygon=function(){return 0===arguments.length?new re(null,this):1===arguments.length?new re(arguments[0],this):void 0},ge.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(e.size()).fill(null),n=0;n<e.size();n++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Yt.copy(e,n,i,0,1),r[n]=this.createPoint(i)}return this.createMultiPoint(r)}}},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ge.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ge.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ge.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ge,me);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new ge};xe.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(r)?be[r].apply(this,[e.coordinates]):"GeometryCollection"===r?be[r].apply(this,[e.geometries]):be[r].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!Se[e])throw new Error("Geometry is not supported");return Se[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!be[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new w(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new w(t[0],t[1]),new w(t[2],t[1]),new w(t[2],t[3]),new w(t[0],t[3]),new w(t[0],t[1])])},Point:function(t){var e=new w(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(be.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(be.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],s=be.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(be.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Se={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Se.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(Se.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=Se.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=Se.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(Se[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Ce=function(t){this.geometryFactory=t||new ge,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};Ce.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},Ce.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var we=function(){this.parser=new xe(this.geometryFactory)};we.prototype.write=function(t){return this.parser.write(t)};var Ie=function(){},Pe={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.opposite=function(t){return t===Ie.LEFT?Ie.RIGHT:t===Ie.RIGHT?Ie.LEFT:t},Pe.ON.get=function(){return 0},Pe.LEFT.get=function(){return 1},Pe.RIGHT.get=function(){return 2},Object.defineProperties(Ie,Pe),(y.prototype=new Error).name="EmptyStackException",(v.prototype=new St).add=function(t){return this.array_.push(t),!0},v.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},v.prototype.push=function(t){return this.array_.push(t),t},v.prototype.pop=function(t){if(0===this.array_.length)throw new y;return this.array_.pop()},v.prototype.peek=function(){if(0===this.array_.length)throw new y;return this.array_[this.array_.length-1]},v.prototype.empty=function(){return 0===this.array_.length},v.prototype.isEmpty=function(){return this.empty()},v.prototype.search=function(t){return this.array_.indexOf(t)},v.prototype.size=function(){return this.array_.length},v.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var Ee=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ee.prototype.getCoordinate=function(){return this._minCoord},Ee.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},Ee.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=at.computeOrientation(this._minCoord,r,e),i=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===at.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ee.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=Ie.LEFT;return r[e].y<r[e+1].y&&(n=Ie.RIGHT),n},Ee.prototype.getEdge=function(){return this._orientedDe},Ee.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),r=0;r<e.length-1;r++)(null===this._minCoord||e[r].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=r,this._minCoord=e[r])},Ee.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ee.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ie.LEFT&&(this._orientedDe=this._minDe.getSym())},Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee};var Me=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new w(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Le=function(){this.array_=[]};Le.prototype.addLast=function(t){this.array_.push(t)},Le.prototype.removeFirst=function(){return this.array_.shift()},Le.prototype.isEmpty=function(){return 0===this.array_.length};var Ne=function(){this._finder=null,this._dirEdgeList=new Ct,this._nodes=new Ct,this._rightMostCoord=null,this._env=null,this._finder=new Ee};Ne.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ne.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ne.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Me("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ne.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ie.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ne.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ne.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ie.RIGHT)>=1&&e.getDepth(Ie.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ne.prototype.computeDepths=function(t){var e=new Ot,r=new Le,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},Ne.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ne.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},Ne.prototype.addReachable=function(t){var e=new v;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},Ne.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ie.LEFT,t.getDepth(Ie.RIGHT)),e.setDepth(Ie.RIGHT,t.getDepth(Ie.LEFT))},Ne.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},Ne.prototype.getNodes=function(){return this._nodes},Ne.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ne.prototype.interfaces_=function(){return[b]},Ne.prototype.getClass=function(){return Ne};var Te=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Ie.ON]=r}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Ie.ON]=o,this.location[Ie.LEFT]=s,this.location[Ie.RIGHT]=a}};Te.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Te.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==M.NONE)return!1;return!0},Te.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===M.NONE&&(this.location[e]=t)},Te.prototype.isLine=function(){return 1===this.location.length},Te.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ie.ON]=this.location[Ie.ON],e[Ie.LEFT]=M.NONE,e[Ie.RIGHT]=M.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===M.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Te.prototype.getLocations=function(){return this.location},Te.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ie.LEFT];this.location[Ie.LEFT]=this.location[Ie.RIGHT],this.location[Ie.RIGHT]=t},Te.prototype.toString=function(){var t=new R;return this.location.length>1&&t.append(M.toLocationSymbol(this.location[Ie.LEFT])),t.append(M.toLocationSymbol(this.location[Ie.ON])),this.location.length>1&&t.append(M.toLocationSymbol(this.location[Ie.RIGHT])),t.toString()},Te.prototype.setLocations=function(t,e,r){this.location[Ie.ON]=t,this.location[Ie.LEFT]=e,this.location[Ie.RIGHT]=r},Te.prototype.get=function(t){return t<this.location.length?this.location[t]:M.NONE},Te.prototype.isArea=function(){return this.location.length>1},Te.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===M.NONE)return!0;return!1},Te.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ie.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Te.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(M.NONE)},Te.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Te.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Oe=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Te(e),this.elt[1]=new Te(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Te(r.elt[0]),this.elt[1]=new Te(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Te(M.NONE),this.elt[1]=new Te(M.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Te(o,s,a),this.elt[1]=new Te(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Te(M.NONE,M.NONE,M.NONE),this.elt[1]=new Te(M.NONE,M.NONE,M.NONE),this.elt[u].setLocations(l,c,h)}};Oe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Oe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Oe.prototype.isNull=function(t){return this.elt[t].isNull()},Oe.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Oe.prototype.isLine=function(t){return this.elt[t].isLine()},Oe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Te(t.elt[e]):this.elt[e].merge(t.elt[e])},Oe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Oe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ie.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Oe.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Oe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Oe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Oe.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ie.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Oe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Oe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Oe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Te(this.elt[t].location[0]))},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.toLineLabel=function(t){for(var e=new Oe(M.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var Re=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ct,this._pts=new Ct,this._label=new Oe(M.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ct,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Re.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Re.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Re.prototype.computePoints=function(t){this._startDe=t;var e=t,r=!0;do{if(null===e)throw new Me("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Me("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();et.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),r),r=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Re.prototype.getLinearRing=function(){return this._ring},Re.prototype.getCoordinate=function(t){return this._pts.get(t)},Re.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Re.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;r&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},Re.prototype.isHole=function(){return this._isHole},Re.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Re.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(t))return!1;return!0},Re.prototype.addHole=function(t){this._holes.add(t)},Re.prototype.isShell=function(){return null===this._shell},Re.prototype.getLabel=function(){return this._label},Re.prototype.getEdges=function(){return this._edges},Re.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Re.prototype.getShell=function(){return this._shell},Re.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],r=arguments[0].getLocation(e,Ie.RIGHT);if(r===M.NONE)return null;if(this._label.getLocation(e)===M.NONE)return this._label.setLocation(e,r),null}},Re.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Re.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ae=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Fe=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ct,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new Ae(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),De=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};De.prototype.setVisited=function(t){this._isVisited=t},De.prototype.setInResult=function(t){this._isInResult=t},De.prototype.isCovered=function(){return this._isCovered},De.prototype.isCoveredSet=function(){return this._isCoveredSet},De.prototype.setLabel=function(t){this._label=t},De.prototype.getLabel=function(){return this._label},De.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},De.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},De.prototype.isInResult=function(){return this._isInResult},De.prototype.isVisited=function(){return this._isVisited},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Oe(0,M.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=M.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==M.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Oe(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Oe)for(var r=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(r,n);this._label.getLocation(n)===M.NONE&&this._label.setLocation(n,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=M.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case M.BOUNDARY:r=M.INTERIOR;break;case M.INTERIOR:default:r=M.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),je=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof w){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Ct,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===M.BOUNDARY&&e.add(n)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new m("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?Be.NE:Be.SE:n.y>=r.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];this._edge=e,this.init(r,n),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[b]},Ue.prototype.getClass=function(){return Ue};var qe=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Oe(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Me("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ie.LEFT)===M.INTERIOR&&this._label.getLocation(e,Ie.RIGHT)===M.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ie.LEFT]+"/"+this._depth[Ie.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,M.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,M.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===Ie.LEFT&&(n=-1);var i=Ie.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===M.EXTERIOR&&e===M.INTERIOR?1:t===M.INTERIOR&&e===M.EXTERIOR?-1:0},e}(Ue),ze=function(){};ze.prototype.createNode=function(t){return new ke(t,null)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Ve=function(){if(this._edges=new Ct,this._nodes=null,this._edgeEndList=new Ct,0===arguments.length)this._nodes=new je(new ze);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof w){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===M.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&at.computeOrientation(t,e,n)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(r,n)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new qe(r,!0),i=new qe(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var We=function(){this._geometryFactory=null,this._shellList=new Ct;var t=arguments[0];this._geometryFactory=t};We.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},We.prototype.computePolygons=function(t){for(var e=new Ct,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},We.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Me("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},We.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new Ct,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else n.add(o)}return n},We.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},We.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ct,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Fe(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},We.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},We.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},We.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(n)&&at.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},We.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},We.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];Ve.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new Ct,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[Xe,e]},He.prototype.getClass=function(){return He};var Ye=function(){this._size=null,this._items=null,this._size=0,this._items=new Ct,this._items.add(null)};Ye.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ye.prototype.size=function(){return this._size},Ye.prototype.reorder=function(t){for(var e=null,r=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(r)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,r)},Ye.prototype.clear=function(){this._size=0,this._items.clear()},Ye.prototype.isEmpty=function(){return 0===this._size},Ye.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ze=function(){};Ze.prototype.visitItem=function(t){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Qe=function(){};Qe.prototype.insert=function(t,e){},Qe.prototype.remove=function(t,e){},Qe.prototype.query=function(){},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe};var Je=function(){if(this._childBoundables=new Ct,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ke={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[Xe,e]},Je.prototype.getClass=function(){return Je},Ke.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Ke);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var r=t.toArray();e?kt.sort(r,e):kt.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},$e.singletonList=function(t){var e=new Ct;return e.add(t),e};var tr=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};tr.prototype.expandToQueue=function(t,e){var r=tr.isComposite(this._boundable1),n=tr.isComposite(this._boundable2);if(r&&n)return tr.area(this._boundable1)>tr.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tr.prototype.isLeaves=function(){return!(tr.isComposite(this._boundable1)||tr.isComposite(this._boundable2))},tr.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tr.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tr(o,e,this._itemDistance);s.getDistance()<n&&r.add(s)}},tr.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tr.prototype.getDistance=function(){return this._distance},tr.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tr.prototype.interfaces_=function(){return[b]},tr.prototype.getClass=function(){return tr},tr.area=function(t){return t.getBounds().getArea()},tr.isComposite=function(t){return t instanceof Je};var er=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ct,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];et.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},rr={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};er.prototype.getNodeCapacity=function(){return this._nodeCapacity},er.prototype.lastNode=function(t){return t.get(t.size()-1)},er.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof Je?t+=this.size(r):r instanceof He&&(t+=1)}return t}},er.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof He&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},er.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ct:t}if(1===arguments.length){for(var e=arguments[0],r=new Ct,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Je){var o=this.itemsTree(i);null!==o&&r.add(o)}else i instanceof He?r.add(i.getItem()):et.shouldNeverReachHere()}return r.size()<=0?null:r}},er.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},er.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ct;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];if(et.isTrue(r>-2),n.getLevel()===r)return i.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Je?this.boundablesAtLevel(r,s,i):(et.isTrue(s instanceof He),-1===r&&i.add(s))}return null}},er.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Ct;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var r=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,n)}else if(3===arguments.length)if(N(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var u=s.get(a);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Je?this.query(i,u,o):u instanceof He?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(N(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var l=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),f=0;f<h.size();f++){var p=h.get(f);this.getIntersectsOp().intersects(p.getBounds(),l)&&(p instanceof Je?this.query(l,p,c):p instanceof He?c.add(p.getItem()):et.shouldNeverReachHere())}},er.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},er.prototype.getRoot=function(){return this.build(),this._root},er.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=this.removeItem(n,i);if(o)return!0;for(var s=null,a=n.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof Je&&(o=this.remove(r,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(s),o}},er.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},er.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof Je){var n=this.depth(r);n>t&&(t=n)}}return t+1}},er.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=new Ct;r.add(this.createNode(e));var n=new Ct(t);$e.sort(n,this.getComparator());for(var i=n.iterator();i.hasNext();){var o=i.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(o)}return r},er.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},er.prototype.interfaces_=function(){return[e]},er.prototype.getClass=function(){return er},er.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},rr.IntersectsOp.get=function(){return nr},rr.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},rr.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(er,rr);var nr=function(){},ir=function(){};ir.prototype.distance=function(t,e){},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir};var or=function(t){function r(e){e=e||r.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return r.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var r=new Ct,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},r.prototype.createNode=function(t){return new sr(t)},r.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},r.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},r.prototype.getIntersectsOp=function(){return r.intersectsOp},r.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new Ct;for(var s=0;i.hasNext()&&s<r;){var a=i.next();n[o].add(a),s++}}return n},r.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(N(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(N(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},r.prototype.getComparator=function(){return r.yComparator},r.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},r.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},r.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},r.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Ct(t);$e.sort(i,r.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,e)},r.prototype.nearestNeighbour=function(){if(1===arguments.length){if(N(arguments[0],ir)){var t=arguments[0],e=new tr(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tr){var n=arguments[0];return this.nearestNeighbour(n,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof r&&N(arguments[1],ir)){var i=arguments[0],o=arguments[1],s=new tr(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tr&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new Ye;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new He(arguments[0],arguments[1]),y=new tr(this.getRoot(),d,p);return this.nearestNeighbour(y)[0]}},r.prototype.interfaces_=function(){return[Qe,e]},r.prototype.getClass=function(){return r},r.centreX=function(t){return r.avg(t.getMinX(),t.getMaxX())},r.avg=function(t,e){return(t+e)/2},r.centreY=function(t){return r.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return sr},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[C]},compare:function(e,n){return t.compareDoubles(r.centreX(e.getBounds()),r.centreX(n.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[C]},compare:function(e,n){return t.compareDoubles(r.centreY(e.getBounds()),r.centreY(n.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(r,n),r}(er),sr=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new X(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),ar=function(){};ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ar.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=ar.relativeSign(e.x,r.x),i=ar.relativeSign(e.y,r.y);switch(t){case 0:return ar.compareValue(n,i);case 1:return ar.compareValue(i,n);case 2:return ar.compareValue(i,-n);case 3:return ar.compareValue(-n,i);case 4:return ar.compareValue(-n,-i);case 5:return ar.compareValue(-i,-n);case 6:return ar.compareValue(-i,n);case 7:return ar.compareValue(n,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ar.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ur=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new w(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};ur.prototype.getCoordinate=function(){return this.coord},ur.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ur.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ar.compare(this._segmentOctant,this.coord,e.coord)},ur.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ur.prototype.isInterior=function(){return this._isInterior},ur.prototype.interfaces_=function(){return[b]},ur.prototype.getClass=function(){return ur};var lr=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};lr.prototype.getSplitCoordinates=function(){var t=new It;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},lr.prototype.addCollapsedNodes=function(){var t=new Ct;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},lr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},lr.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new A(e+1))}},lr.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new w(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new w(e.coord))},lr.prototype.iterator=function(){return this._nodeMap.values().iterator()},lr.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},lr.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},lr.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new A(e[0])),n=i}},lr.prototype.getEdge=function(){return this._edge},lr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},lr.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new w(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new w(e.coord)),new pr(o,this._edge.getData())},lr.prototype.add=function(t,e){var r=new ur(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(et.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},lr.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new $("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){};cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof w&&arguments[1]instanceof w){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new m("Cannot compute the octant for two identical points "+i);return cr.octant(s,a)}};var hr=function(){};hr.prototype.getCoordinates=function(){},hr.prototype.size=function(){},hr.prototype.getCoordinate=function(t){},hr.prototype.isClosed=function(){},hr.prototype.setData=function(t){},hr.prototype.getData=function(){},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var fr=function(){};fr.prototype.addIntersection=function(t,e){},fr.prototype.interfaces_=function(){return[hr]},fr.prototype.getClass=function(){return fr};var pr=function(){this._nodeList=new lr(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};pr.prototype.getCoordinates=function(){return this._pts},pr.prototype.size=function(){return this._pts.length},pr.prototype.getCoordinate=function(t){return this._pts[t]},pr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},pr.prototype.setData=function(t){this._data=t},pr.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:cr.octant(t,e)},pr.prototype.getData=function(){return this._data},pr.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[1],n=arguments[3],i=new w(arguments[0].getIntersection(n));this.addIntersection(i,r)}},pr.prototype.toString=function(){return K.toLineString(new ue(this._pts))},pr.prototype.getNodeList=function(){return this._nodeList},pr.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},pr.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},pr.prototype.interfaces_=function(){return[fr]},pr.prototype.getClass=function(){return pr},pr.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ct;return pr.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[1],n=arguments[0].iterator();n.hasNext();)n.next().getNodeList().addSplitEdges(r)};var dr=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new w,this.p1=new w;else if(1===arguments.length){var t=arguments[0];this.p0=new w(t.p0),this.p1=new w(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new w(e,r),this.p1=new w(n,i)}},yr={serialVersionUID:{configurable:!0}};dr.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dr.prototype.orientationIndex=function(){if(arguments[0]instanceof dr){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),r=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof w){var n=arguments[0];return at.orientationIndex(this.p0,this.p1,n)}},dr.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},dr.prototype.isVertical=function(){return this.p0.x===this.p1.x},dr.prototype.equals=function(t){if(!(t instanceof dr))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},dr.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},dr.prototype.project=function(){if(arguments[0]instanceof w){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new w(t);var e=this.projectionFactor(t),r=new w;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof dr){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(n.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new dr(s,a)}},dr.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dr.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dr.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},dr.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},dr.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dr.prototype.midPoint=function(){return dr.midPoint(this.p0,this.p1)},dr.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},dr.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<n&&(n=i,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},dr.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},dr.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dr.prototype.getLength=function(){return this.p0.distance(this.p1)},dr.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},dr.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},dr.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},dr.prototype.lineIntersection=function(t){try{return W.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof z))throw t}return null},dr.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dr.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new w(r-u,n+a)},dr.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},dr.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},dr.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},dr.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dr.prototype.distance=function(){if(arguments[0]instanceof dr){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof w){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},dr.prototype.pointAlong=function(t){var e=new w;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},dr.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=_.doubleToLongBits(this.p1.x);return r^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(r)^Math.trunc(r>>32)},dr.prototype.interfaces_=function(){return[b,e]},dr.prototype.getClass=function(){return dr},dr.midPoint=function(t,e){return new w((t.x+e.x)/2,(t.y+e.y)/2)},yr.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dr,yr);var vr=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new dr,this._overlapSeg2=new dr};vr.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],r=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var gr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};gr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},gr.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,n),s<r&&this.computeSelect(t,s,r,n)},gr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},gr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},gr.prototype.setId=function(t){this._id=t},gr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},gr.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},gr.prototype.getEndIndex=function(){return this._end},gr.prototype.getStartIndex=function(){return this._start},gr.prototype.getContext=function(){return this._context},gr.prototype.getId=function(){return this._id},gr.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var s=this._pts[t],a=this._pts[e],u=r._pts[n],l=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((n+i)/2);t<c&&(n<h&&this.computeOverlapsInternal(t,c,r,n,h,o),h<i&&this.computeOverlapsInternal(t,c,r,h,i,o)),c<e&&(n<h&&this.computeOverlapsInternal(c,e,r,n,h,o),h<i&&this.computeOverlapsInternal(c,e,r,h,i,o))},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.getChainStartIndices=function(t){var e=0,r=new Ct;r.add(new A(e));do{var n=mr.findChainEnd(t,e);r.add(new A(n)),e=n}while(e<t.length-1);return mr.toIntArray(r)},mr.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=Be.quadrant(t[r],t[r+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===n);)i++;return i-1},mr.getChains=function(){if(1===arguments.length){var t=arguments[0];return mr.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new Ct,i=mr.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new gr(e,i[o],i[o+1],r);n.add(s)}return n}},mr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var _r=function(){};_r.prototype.computeNodes=function(t){},_r.prototype.getNodedSubstrings=function(){},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var xr=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xr.prototype.setSegmentIntersector=function(t){this._segInt=t},xr.prototype.interfaces_=function(){return[_r]},xr.prototype.getClass=function(){return xr};var br=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ct,this._index=new or,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return pr.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=mr.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var r=e.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sr(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var r=e.next(),n=this._index.query(r.getEnvelope()).iterator();n.hasNext();){var i=n.next();if(i.getId()>r.getId()&&(r.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Sr},Object.defineProperties(e,r),e}(xr),Sr=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[0].getContext(),o=r.getContext();this._si.processIntersections(i,e,o,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vr),Cr=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},wr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cr.prototype.getEndCapStyle=function(){return this._endCapStyle},Cr.prototype.isSingleSided=function(){return this._isSingleSided},Cr.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cr.JOIN_ROUND&&(this._quadrantSegments=Cr.DEFAULT_QUADRANT_SEGMENTS)},Cr.prototype.getJoinStyle=function(){return this._joinStyle},Cr.prototype.setJoinStyle=function(t){this._joinStyle=t},Cr.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cr.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cr.prototype.getMitreLimit=function(){return this._mitreLimit},Cr.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cr.prototype.setSingleSided=function(t){this._isSingleSided=t},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},wr.CAP_ROUND.get=function(){return 1},wr.CAP_FLAT.get=function(){return 2},wr.CAP_SQUARE.get=function(){return 3},wr.JOIN_ROUND.get=function(){return 1},wr.JOIN_MITRE.get=function(){return 2},wr.JOIN_BEVEL.get=function(){return 3},wr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},wr.DEFAULT_MITRE_LIMIT.get=function(){return 5},wr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cr,wr);var Ir=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Pr={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ir.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,n)&&this.isShallowSampled(i,o,t,r,n)},Ir.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e),n=!1;r<this._inputLine.length;){var i=!1;this.isDeletable(t,e,r,this._distanceTol)&&(this._isDeleted[e]=Ir.DELETE,i=!0,n=!0),t=i?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return n},Ir.prototype.isShallowConcavity=function(t,e,r,n){return at.computeOrientation(t,e,r)===this._angleOrientation&&at.distancePointLine(e,t,r)<n},Ir.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/Ir.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Ir.prototype.isConcave=function(t,e,r){return at.computeOrientation(t,e,r)===this._angleOrientation},Ir.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Ir.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Ir.DELETE;)e++;return e},Ir.prototype.isShallow=function(t,e,r,n){return at.distancePointLine(e,t,r)<n},Ir.prototype.collapseLine=function(){for(var t=new It,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Ir.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.simplify=function(t,e){return new Ir(t).simplify(e)},Pr.INIT.get=function(){return 0},Pr.DELETE.get=function(){return 1},Pr.KEEP.get=function(){return 1},Pr.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ir,Pr);var Er=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ct},Mr={COORDINATE_ARRAY_TYPE:{configurable:!0}};Er.prototype.getCoordinates=function(){return this._ptList.toArray(Er.COORDINATE_ARRAY_TYPE)},Er.prototype.setPrecisionModel=function(t){this._precisionModel=t},Er.prototype.addPt=function(t){var e=new w(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Er.prototype.revere=function(){},Er.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Er.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Er.prototype.toString=function(){return(new ge).createLineString(this.getCoordinates()).toString()},Er.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new w(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Er.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er},Mr.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Er,Mr);var Lr=function(){},Nr={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.toDegrees=function(t){return 180*t/Math.PI},Lr.normalize=function(t){for(;t>Math.PI;)t-=Lr.PI_TIMES_2;for(;t<=-Math.PI;)t+=Lr.PI_TIMES_2;return t},Lr.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},Lr.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},Lr.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},Lr.interiorAngle=function(t,e,r){var n=Lr.angle(e,t),i=Lr.angle(e,r);return Math.abs(i-n)},Lr.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Lr.PI_TIMES_2;t>=Lr.PI_TIMES_2&&(t=0)}else{for(;t>=Lr.PI_TIMES_2;)t-=Lr.PI_TIMES_2;t<0&&(t=0)}return t},Lr.angleBetween=function(t,e,r){var n=Lr.angle(e,t),i=Lr.angle(e,r);return Lr.diff(n,i)},Lr.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},Lr.toRadians=function(t){return t*Math.PI/180},Lr.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?Lr.COUNTERCLOCKWISE:r<0?Lr.CLOCKWISE:Lr.NONE},Lr.angleBetweenOriented=function(t,e,r){var n=Lr.angle(e,t),i=Lr.angle(e,r)-n;return i<=-Math.PI?i+Lr.PI_TIMES_2:i>Math.PI?i-Lr.PI_TIMES_2:i},Nr.PI_TIMES_2.get=function(){return 2*Math.PI},Nr.PI_OVER_2.get=function(){return Math.PI/2},Nr.PI_OVER_4.get=function(){return Math.PI/4},Nr.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Nr.CLOCKWISE.get=function(){return at.CLOCKWISE},Nr.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Lr,Nr);var Tr=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dr,this._seg1=new dr,this._offset0=new dr,this._offset1=new dr,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new it,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Cr.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Or={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Tr.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=at.computeOrientation(this._s0,this._s1,this._s2),n=r===at.CLOCKWISE&&this._side===Ie.LEFT||r===at.COUNTERCLOCKWISE&&this._side===Ie.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Tr.prototype.addLineEndCap=function(t,e){var r=new dr(t,e),n=new dr;this.computeOffsetSegment(r,Ie.LEFT,this._distance,n);var i=new dr;this.computeOffsetSegment(r,Ie.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cr.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cr.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Cr.CAP_SQUARE:var u=new w;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new w(n.p1.x+u.x,n.p1.y+u.y),c=new w(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Tr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Tr.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=W.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof z))throw t;o=new w(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},Tr.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,l=r.y-t.y,c=Math.atan2(l,u);n===at.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,n,i),this._segList.addPt(r)},Tr.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Tr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Tr.prototype.createSquare=function(t){this._segList.addPt(new w(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new w(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Tr.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Tr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Tr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Tr.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Tr.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=Lr.angle(i,this._seg0.p0),s=Lr.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Lr.normalize(o+s),u=Lr.normalize(a+Math.PI),l=n*r,c=r-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new w(h,f),d=new dr(i,p),y=d.pointAlongOffset(1,c),v=d.pointAlongOffset(1,-c);this._side===Ie.LEFT?(this._segList.addPt(y),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(y))},Tr.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===Ie.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*r*o/a,l=i*r*s/a;n.p0.x=t.p0.x-l,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-l,n.p1.y=t.p1.y+u},Tr.prototype.addFilletArc=function(t,e,r,n,i){var o=n===at.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new w;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Tr.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Tr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new w((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new w((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Tr.prototype.createCircle=function(t){var e=new w(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Tr.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Tr.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Er,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Tr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Tr.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cr.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Tr.prototype.closeRing=function(){this._segList.closeRing()},Tr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Or.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Or.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Or.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Or.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Tr,Or);var Rr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rr.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&Pt.reverse(o),o},Rr.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Ir.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ie.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{r.addSegments(t,!1);var a=Ir.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ie.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment(),r.closeRing()},Rr.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===Ie.RIGHT&&(n=-n);var i=Ir.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(i[s],a)}r.closeRing()},Rr.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=Ir.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],Ie.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var s=Ir.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ie.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Rr.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cr.CAP_ROUND:e.createCircle(t);break;case Cr.CAP_SQUARE:e.createSquare(t)}},Rr.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},Rr.prototype.getBufferParameters=function(){return this._bufParams},Rr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rr.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return Rr.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},Rr.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Ir.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Ie.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{var a=Ir.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Ie.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment()},Rr.prototype.getSegGen=function(t){return new Tr(this._precisionModel,this._bufParams,t)},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new w(t[r]);return e};var Ar=function(){this._subgraphs=null,this._seg=new dr,this._cga=new at;var t=arguments[0];this._subgraphs=t},Fr={DepthSegment:{configurable:!0}};Ar.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Ct,r=this._subgraphs.iterator();r.hasNext();){var n=r.next(),i=n.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],St)&&arguments[0]instanceof w&&arguments[1]instanceof qe){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(Ie.LEFT);this._seg.p0.equals(u[l])||(c=s.getDepth(Ie.RIGHT));var h=new Dr(this._seg,c);a.add(h)}}else if(N(arguments[2],St)&&arguments[0]instanceof w&&N(arguments[1],St))for(var f=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(f,y,p)}},Ar.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Fr.DepthSegment.get=function(){return Dr},Object.defineProperties(Ar,Fr);var Dr=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new dr(t),this._leftDepth=e};Dr.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!=(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Dr.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Dr.prototype.toString=function(){return this._upwardSeg.toString()},Dr.prototype.interfaces_=function(){return[b]},Dr.prototype.getClass=function(){return Dr};var kr=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};kr.prototype.area=function(){return kr.area(this.p0,this.p1,this.p2)},kr.prototype.signedArea=function(){return kr.signedArea(this.p0,this.p1,this.p2)},kr.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return kr.interpolateZ(t,this.p0,this.p1,this.p2)},kr.prototype.longestSideLength=function(){return kr.longestSideLength(this.p0,this.p1,this.p2)},kr.prototype.isAcute=function(){return kr.isAcute(this.p0,this.p1,this.p2)},kr.prototype.circumcentre=function(){return kr.circumcentre(this.p0,this.p1,this.p2)},kr.prototype.area3D=function(){return kr.area3D(this.p0,this.p1,this.p2)},kr.prototype.centroid=function(){return kr.centroid(this.p0,this.p1,this.p2)},kr.prototype.inCentre=function(){return kr.inCentre(this.p0,this.p1,this.p2)},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},kr.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},kr.det=function(t,e,r,n){return t*n-e*r},kr.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,s=r.x-i,a=n.x-i,u=r.y-o,l=n.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(r.z-e.z)+d*(n.z-e.z)},kr.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),s=n;return i>s&&(s=i),o>s&&(s=o),s},kr.isAcute=function(t,e,r){return!!Lr.isAcute(t,e,r)&&!!Lr.isAcute(e,r,t)&&!!Lr.isAcute(r,t,e)},kr.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,s=t.y-i,a=e.x-n,u=e.y-i,l=2*kr.det(o,s,a,u),c=kr.det(s,o*o+s*s,u,a*a+u*u),h=kr.det(o,o*o+s*s,a,a*a+u*u);return new w(n-c/l,i+h/l)},kr.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new W(t.x+r/2,t.y+n/2,1),o=new W(t.x-n+r/2,t.y+r+n/2,1);return new W(i,o)},kr.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new w(t.x+i*o,t.y+i*s)},kr.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,l=i*u-o*a,c=o*s-n*u,h=n*a-i*s,f=l*l+c*c+h*h;return Math.sqrt(f)/2},kr.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new w(n,i)},kr.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),s=n+i+o,a=(n*t.x+i*e.x+o*r.x)/s,u=(n*t.y+i*e.y+o*r.y)/s;return new w(a,u)};var jr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ct;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};jr.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,M.EXTERIOR,M.INTERIOR)},jr.prototype.addPolygon=function(t){var e=this._distance,r=Ie.LEFT;this._distance<0&&(e=-this._distance,r=Ie.RIGHT);var n=t.getExteriorRing(),i=Pt.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,r,M.EXTERIOR,M.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Pt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ie.opposite(r),M.INTERIOR,M.EXTERIOR)}},jr.prototype.isTriangleErodedCompletely=function(t,e){var r=new kr(t[0],t[1],t[2]),n=r.inCentre();return at.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},jr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Pt.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,M.EXTERIOR,M.INTERIOR)},jr.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new pr(t,new Oe(0,M.BOUNDARY,e,r));this._curveList.add(n)},jr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},jr.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=n,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=n,r=Ie.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},jr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Zt?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof te||t instanceof zt||t instanceof re||t instanceof qt)&&this.addCollection(t)},jr.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},jr.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};var Br=function(){};Br.prototype.locate=function(t){},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var Gr=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Gr.prototype.next=function(){if(this._atStart)return this._atStart=!1,Gr.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new n;var t=this._parent.getGeometryN(this._index++);return t instanceof qt?(this._subcollectionIterator=new Gr(t),this._subcollectionIterator.next()):t},Gr.prototype.remove=function(){throw new Error(this.getClass().getName())},Gr.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Gr.prototype.interfaces_=function(){return[bt]},Gr.prototype.getClass=function(){return Gr},Gr.isAtomic=function(t){return!(t instanceof qt)};var Ur=function(){this._geom=null;var t=arguments[0];this._geom=t};Ur.prototype.locate=function(t){return Ur.locate(t,this._geom)},Ur.prototype.interfaces_=function(){return[Br]},Ur.prototype.getClass=function(){return Ur},Ur.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Ur.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Ur.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(Ur.isPointInRing(t,i))return!1}return!0},Ur.containsPoint=function(t,e){if(e instanceof $t)return Ur.containsPointInPolygon(t,e);if(e instanceof qt)for(var r=new Gr(e);r.hasNext();){var n=r.next();if(n!==e&&Ur.containsPoint(t,n))return!0}return!1},Ur.locate=function(t,e){return e.isEmpty()?M.EXTERIOR:Ur.containsPoint(t,e)?M.INTERIOR:M.EXTERIOR};var qr=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[M.NONE,M.NONE]};qr.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},qr.prototype.propagateSideLabels=function(t){for(var e=M.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,Ie.LEFT)!==M.NONE&&(e=n.getLocation(t,Ie.LEFT))}if(e===M.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ie.ON)===M.NONE&&a.setLocation(t,Ie.ON,i),a.isArea(t)){var u=a.getLocation(t,Ie.LEFT),l=a.getLocation(t,Ie.RIGHT);if(l!==M.NONE){if(l!==i)throw new Me("side location conflict",s.getCoordinate());u===M.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else et.isTrue(a.getLocation(t,Ie.LEFT)===M.NONE,"found single null side"),a.setLocation(t,Ie.RIGHT,i),a.setLocation(t,Ie.LEFT,i)}}},qr.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qr.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qr.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,Ie.LEFT);et.isTrue(n!==M.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ie.LEFT),u=s.getLocation(t,Ie.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},qr.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qr.prototype.iterator=function(){return this.getEdges().iterator()},qr.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ct(this._edgeMap.values())),this._edgeList},qr.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===M.NONE&&(this._ptInAreaLocation[t]=Ur.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},qr.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},qr.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qr.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===M.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=M.NONE;if(e[u])l=M.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},qr.prototype.getDegree=function(){return this._edgeMap.size()},qr.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr};var zr=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,r=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var i=this._resultAreaEdgeList.get(n),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),r){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===t)throw new Me("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?r:Be.isNorthern(i)||Be.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ct;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),r=t.getDepth(Ie.LEFT),n=t.getDepth(Ie.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),r);if(this.computeDepths(0,e,i)!==n)throw new Me("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(Ie.RIGHT,s),s=u.getDepth(Ie.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;r.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var r=arguments[0],n=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===r&&n++;return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=M.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=M.INTERIOR;break}if(n.isInResult()){t=M.EXTERIOR;break}}}if(t===M.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===M.INTERIOR):(s.isInResult()&&(i=M.EXTERIOR),a.isInResult()&&(i=M.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Oe(M.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==M.INTERIOR&&o!==M.BOUNDARY||this._label.setLocation(i,M.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new zr)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Wr=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wr.prototype.compareTo=function(t){var e=t;return Wr.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wr.prototype.interfaces_=function(){return[b]},Wr.prototype.getClass=function(){return Wr},Wr.orientation=function(t){return 1===Pt.increasingDirection(t)},Wr.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?r.length:-1,u=e?0:t.length-1,l=n?0:r.length-1;;){var c=t[u].compareTo(r[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Xr=function(){this._edges=new Ct,this._ocaMap=new h};Xr.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},Xr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xr.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xr.prototype.iterator=function(){return this._edges.iterator()},Xr.prototype.getEdges=function(){return this._edges},Xr.prototype.get=function(t){return this._edges.get(t)},Xr.prototype.findEqualEdge=function(t){var e=new Wr(t.getCoordinates());return this._ocaMap.get(e)},Xr.prototype.add=function(t){this._edges.add(t);var e=new Wr(t.getCoordinates());this._ocaMap.put(e,t)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Hr=function(){};Hr.prototype.processIntersections=function(t,e,r,n){},Hr.prototype.isDone=function(){},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Yr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yr.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(Yr.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},Yr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yr.prototype.getLineIntersector=function(){return this._li},Yr.prototype.hasProperIntersection=function(){return this._hasProper},Yr.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yr.prototype.hasIntersection=function(){return this._hasIntersection},Yr.prototype.isDone=function(){return!1},Yr.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yr.prototype.interfaces_=function(){return[Hr]},Yr.prototype.getClass=function(){return Yr},Yr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zr=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new w(t),this.segmentIndex=e,this.dist=r};Zr.prototype.getSegmentIndex=function(){return this.segmentIndex},Zr.prototype.getCoordinate=function(){return this.coord},Zr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zr.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zr.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zr.prototype.getDistance=function(){return this.dist},Zr.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zr.prototype.interfaces_=function(){return[b]},Zr.prototype.getClass=function(){return Zr};var Qr=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Qr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qr.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qr.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},Qr.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Qr.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new w(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new en(o,new Oe(this.edge._label))},Qr.prototype.add=function(t,e,r){var n=new Zr(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},Qr.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};var Jr=function(){};Jr.prototype.getChainStartIndices=function(t){var e=0,r=new Ct;r.add(new A(e));do{var n=this.findChainEnd(t,e);r.add(new A(n)),e=n}while(e<t.length-1);return Jr.toIntArray(r)},Jr.prototype.findChainEnd=function(t,e){for(var r=Be.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&Be.quadrant(t[n-1],t[n])===r;)n++;return n-1},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Kr=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jr;this.startIndex=e.getChainStartIndices(this.pts)};Kr.prototype.getCoordinates=function(){return this.pts},Kr.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},Kr.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},Kr.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((a+u)/2);i<d&&(a<y&&this.computeIntersectsForChain(i,d,s,a,y,l),y<u&&this.computeIntersectsForChain(i,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},Kr.prototype.getStartIndexes=function(){return this.startIndex},Kr.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};var $r=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},tn={NULL_VALUE:{configurable:!0}};$r.prototype.getDepth=function(t,e){return this._depth[t][e]},$r.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},$r.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==$r.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===$r.NULL_VALUE}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._depth[n][i]===$r.NULL_VALUE}},$r.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}},$r.prototype.getDelta=function(t){return this._depth[t][Ie.RIGHT]-this._depth[t][Ie.LEFT]},$r.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?M.EXTERIOR:M.INTERIOR},$r.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$r.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var r=1;r<3;r++){var n=t.getLocation(e,r);n!==M.EXTERIOR&&n!==M.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=$r.depthAtLocation(n):this._depth[e][r]+=$r.depthAtLocation(n))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===M.INTERIOR&&this._depth[i][o]++}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.depthAtLocation=function(t){return t===M.EXTERIOR?0:t===M.INTERIOR?1:$r.NULL_VALUE},tn.NULL_VALUE.get=function(){return-1},Object.defineProperties($r,tn);var en=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Qr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $r,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Oe.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(n=!1),this.pts[s].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Kr(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new w(t.getIntersection(n)),o=e,s=t.getEdgeDistance(r,n),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Ie.ON),e.getLocation(1,Ie.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Ie.LEFT),e.getLocation(1,Ie.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Ie.RIGHT),e.getLocation(1,Ie.RIGHT),2))},e}(De),rn=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xr,this._bufParams=t||null};rn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Oe(t.getLabel())).flip(),r.merge(n);var i=rn.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rn.depthDelta(t.getLabel()))},rn.prototype.buildSubgraphs=function(t,e){for(var r=new Ct,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),s=new Ar(r).getDepth(o);i.computeDepth(s),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rn.prototype.createSubgraphs=function(t){for(var e=new Ct,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new Ne;i.create(n),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new br,r=new it;return r.setPrecisionModel(t),e.setSegmentIntersector(new Yr(r)),e},rn.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new Rr(r,this._bufParams),i=new jr(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Ve(new Vr),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new We(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rn.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new en(i.getCoordinates(),new Oe(s));this.insertUniqueEdge(a)}}},rn.prototype.setNoder=function(t){this._workingNoder=t},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.depthDelta=function(t){var e=t.getLocation(0,Ie.LEFT),r=t.getLocation(0,Ie.RIGHT);return e===M.INTERIOR&&r===M.EXTERIOR?1:e===M.EXTERIOR&&r===M.INTERIOR?-1:0},rn.convertSegStrings=function(t){for(var e=new ge,r=new Ct;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var nn=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};nn.prototype.rescale=function(){if(N(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],n=0;n<r.length;n++)r[n].x=r[n].x/this._scaleFactor+this._offsetX,r[n].y=r[n].y/this._scaleFactor+this._offsetY;2===r.length&&r[0].equals2D(r[1])&&V.out.println(r)}},nn.prototype.scale=function(){if(N(arguments[0],xt)){for(var t=arguments[0],e=new Ct,r=t.iterator();r.hasNext();){var n=r.next();e.add(new pr(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new w(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Pt.removeRepeatedPoints(o)}},nn.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},nn.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},nn.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},nn.prototype.interfaces_=function(){return[_r]},nn.prototype.getClass=function(){return nn};var on=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sn={fact:{configurable:!0}};on.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var r=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var i=n.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(r))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+r)},on.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var n=r.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],y=c.getCoordinates()[h+1],v=f.getCoordinates()[p],g=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,y,v,g),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,v,g)))throw new $("found non-noded intersection at "+d+"-"+y+" and "+v+"-"+g)}},on.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},on.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),n=0;n<r.length-2;n++)this.checkCollapse(r[n],r[n+1],r[n+2])},on.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},on.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new $("found non-noded collapse at "+on.fact.createLineString([t,e,r]))},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},sn.fact.get=function(){return new ge},Object.defineProperties(on,sn);var an=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new w(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new w,this._p1Scaled=new w),this.initCorners(this._pt)},un={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};an.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},an.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new w(this._maxx,this._maxy),this._corner[1]=new w(this._minx,this._maxy),this._corner[2]=new w(this._minx,this._miny),this._corner[3]=new w(this._maxx,this._miny)},an.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},an.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},an.prototype.getCoordinate=function(){return this._originalPt},an.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},an.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=an.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},an.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},an.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||r&&n||t.equals(this._pt)||e.equals(this._pt)))))},an.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},un.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(an,un);var ln=function(){this.tempEnv1=new X,this.selectedSegment=new dr};ln.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var cn=function(){this._index=null;var t=arguments[0];this._index=t},hn={HotPixelSnapAction:{configurable:!0}};cn.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new fn(e,r,n);return this._index.query(i,{interfaces_:function(){return[Ze]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},hn.HotPixelSnapAction.get=function(){return fn},Object.defineProperties(cn,hn);var fn=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],r=arguments[0].getContext();if(null!==this._parentEdge&&r===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ln),pn=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ct};pn.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},pn.prototype.isDone=function(){return!1},pn.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pn.prototype.interfaces_=function(){return[Hr]},pn.prototype.getClass=function(){return pn};var dn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dn.prototype.checkCorrectness=function(t){var e=pr.getNodedSubstrings(t),r=new on(e);try{r.checkValid()}catch(t){if(!(t instanceof q))throw t;t.printStackTrace()}},dn.prototype.getNodedSubstrings=function(){return pr.getNodedSubstrings(this._nodedSegStrings)},dn.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},dn.prototype.findInteriorIntersections=function(t,e){var r=new pn(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},dn.prototype.computeVertexSnaps=function(){if(N(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof pr)for(var r=arguments[0],n=r.getCoordinates(),i=0;i<n.length;i++){var o=new an(n[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,r,i)&&r.addIntersection(n[i],i)}},dn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new br,this._pointSnapper=new cn(this._noder.getIndex()),this.snapRound(t,this._li)},dn.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=new an(r,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},dn.prototype.interfaces_=function(){return[_r]},dn.prototype.getClass=function(){return dn};var yn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cr,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},vn={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};yn.prototype.bufferFixedPrecision=function(t){var e=new nn(new dn(new pe(1)),t.getScale()),r=new rn(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},yn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=yn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Me))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=yn.precisionScaleFactor(this._argGeom,this._distance,r),i=new pe(n);this.bufferFixedPrecision(i)}},yn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},yn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},yn.prototype.bufferOriginalPrecision=function(){try{var t=new rn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},yn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},yn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new yn(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],r=arguments[2],n=new yn(arguments[0]);return n.setQuadrantSegments(r),n.getResultGeometry(e)}if(arguments[2]instanceof Cr&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new yn(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new yn(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}},yn.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=T.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},vn.CAP_ROUND.get=function(){return Cr.CAP_ROUND},vn.CAP_BUTT.get=function(){return Cr.CAP_FLAT},vn.CAP_FLAT.get=function(){return Cr.CAP_FLAT},vn.CAP_SQUARE.get=function(){return Cr.CAP_SQUARE},vn.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(yn,vn);var gn=function(){this._pt=[new w,new w],this._distance=_.NaN,this._isNull=!0};gn.prototype.getCoordinates=function(){return this._pt},gn.prototype.getCoordinate=function(t){return this._pt[t]},gn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},gn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},gn.prototype.getDistance=function(){return this._distance},gn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn};var mn=function(){};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.computeDistance=function(){if(arguments[2]instanceof gn&&arguments[0]instanceof Zt&&arguments[1]instanceof w)for(var t=arguments[1],e=arguments[2],r=arguments[0].getCoordinates(),n=new dr,i=0;i<r.length-1;i++){n.setCoordinates(r[i],r[i+1]);var o=n.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof gn&&arguments[0]instanceof $t&&arguments[1]instanceof w){var s=arguments[0],a=arguments[1],u=arguments[2];mn.computeDistance(s.getExteriorRing(),a,u);for(var l=0;l<s.getNumInteriorRing();l++)mn.computeDistance(s.getInteriorRingN(l),a,u)}else if(arguments[2]instanceof gn&&arguments[0]instanceof ct&&arguments[1]instanceof w){var c=arguments[0],h=arguments[1],f=arguments[2];if(c instanceof Zt)mn.computeDistance(c,h,f);else if(c instanceof $t)mn.computeDistance(c,h,f);else if(c instanceof qt)for(var p=c,d=0;d<p.getNumGeometries();d++){var y=p.getGeometryN(d);mn.computeDistance(y,h,f)}else f.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof gn&&arguments[0]instanceof dr&&arguments[1]instanceof w){var v=arguments[1],g=arguments[2],m=arguments[0].closestPoint(v);g.setMinimum(m,v)}};var _n=function(t){this._maxPtDist=new gn,this._inputGeom=t||null},xn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_n.prototype.computeMaxMidpointDistance=function(t){var e=new Sn(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_n.prototype.computeMaxVertexDistance=function(t){var e=new bn(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_n.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_n.prototype.getDistancePoints=function(){return this._maxPtDist},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},xn.MaxPointDistanceFilter.get=function(){return bn},xn.MaxMidpointDistanceFilter.get=function(){return Sn},Object.defineProperties(_n,xn);var bn=function(t){this._maxPtDist=new gn,this._minPtDist=new gn,this._geom=t||null};bn.prototype.filter=function(t){this._minPtDist.initialize(),mn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bn.prototype.getMaxPointDistance=function(){return this._maxPtDist},bn.prototype.interfaces_=function(){return[pt]},bn.prototype.getClass=function(){return bn};var Sn=function(t){this._maxPtDist=new gn,this._minPtDist=new gn,this._geom=t||null};Sn.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new w((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),mn.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sn.prototype.isDone=function(){return!1},Sn.prototype.isGeometryChanged=function(){return!1},Sn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sn.prototype.interfaces_=function(){return[Ut]},Sn.prototype.getClass=function(){return Sn};var Cn=function(t){this._comps=t||null};Cn.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Cn.prototype.interfaces_=function(){return[Gt]},Cn.prototype.getClass=function(){return Cn},Cn.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Cn.getPolygons(t,new Ct)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof $t?r.add(e):e instanceof qt&&e.apply(new Cn(r)),r}};var wn=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};wn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zt&&this._lines.add(t)},wn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},wn.prototype.interfaces_=function(){return[lt]},wn.prototype.getClass=function(){return wn},wn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wn.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(wn.getLines(e,r))}},wn.getLines=function(){if(1===arguments.length){var t=arguments[0];return wn.getLines(t,!1)}if(2===arguments.length){if(N(arguments[0],xt)&&N(arguments[1],xt)){for(var e=arguments[1],r=arguments[0].iterator();r.hasNext();){var n=r.next();wn.getLines(n,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new Ct;return i.apply(new wn(s,o)),s}if(arguments[0]instanceof ct&&N(arguments[1],xt)){var a=arguments[0],u=arguments[1];return a instanceof Zt?u.add(a):a.apply(new wn(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],xt)&&N(arguments[1],xt)){for(var l=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();wn.getLines(f,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&N(arguments[1],xt)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new wn(p,d)),p}}};var In=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};In.prototype.locateInternal=function(){if(arguments[0]instanceof w&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return M.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===M.EXTERIOR)return M.EXTERIOR;if(n===M.BOUNDARY)return M.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===M.INTERIOR)return M.EXTERIOR;if(s===M.BOUNDARY)return M.BOUNDARY}return M.INTERIOR}if(arguments[0]instanceof w&&arguments[1]instanceof Zt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return M.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?M.INTERIOR:M.EXTERIOR:M.BOUNDARY}if(arguments[0]instanceof w&&arguments[1]instanceof Jt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?M.INTERIOR:M.EXTERIOR}},In.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):M.EXTERIOR},In.prototype.intersects=function(t,e){return this.locate(t,e)!==M.EXTERIOR},In.prototype.updateLocationInfo=function(t){t===M.INTERIOR&&(this._isIn=!0),t===M.BOUNDARY&&this._numBoundaries++},In.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof zt)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof re)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof qt)for(var u=new Gr(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},In.prototype.locate=function(t,e){return e.isEmpty()?M.EXTERIOR:e instanceof Zt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?M.BOUNDARY:this._numBoundaries>0||this._isIn?M.INTERIOR:M.EXTERIOR)},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var Pn=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];this._component=e,this._segIndex=r,this._pt=n}},En={INSIDE_AREA:{configurable:!0}};Pn.prototype.isInsideArea=function(){return this._segIndex===Pn.INSIDE_AREA},Pn.prototype.getCoordinate=function(){return this._pt},Pn.prototype.getGeometryComponent=function(){return this._component},Pn.prototype.getSegmentIndex=function(){return this._segIndex},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},En.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Pn,En);var Mn=function(t){this._pts=t||null};Mn.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Mn.prototype.interfaces_=function(){return[Gt]},Mn.prototype.getClass=function(){return Mn},Mn.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?$e.singletonList(t):Mn.getPoints(t,new Ct)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof Jt?r.add(e):e instanceof qt&&e.apply(new Mn(r)),r}};var Ln=function(){this._locations=null;var t=arguments[0];this._locations=t};Ln.prototype.filter=function(t){(t instanceof Jt||t instanceof Zt||t instanceof $t)&&this._locations.add(new Pn(t,0,t.getCoordinate()))},Ln.prototype.interfaces_=function(){return[Gt]},Ln.prototype.getClass=function(){return Ln},Ln.getLocations=function(t){var e=new Ct;return t.apply(new Ln(e)),e};var Nn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new In,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};Nn.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=1-e,i=Cn.getPolygons(this._geom[e]);if(i.size()>0){var o=Ln.getLocations(this._geom[n]);if(this.computeContainmentDistance(o,i,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=r[0],this._minDistanceLocation[e]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],St)&&N(arguments[1],St)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Pn&&arguments[1]instanceof $t){var f=arguments[0],p=arguments[1],d=arguments[2],y=f.getCoordinate();if(M.EXTERIOR!==this._ptLocator.locate(y,p))return this._minDistance=0,d[0]=f,d[1]=new Pn(p,y),null}},Nn.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,r),this._minDistance<=this._terminateDistance)return null}},Nn.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=wn.getLines(this._geom[0]),r=wn.getLines(this._geom[1]),n=Mn.getPoints(this._geom[0]),i=Mn.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},Nn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Nn.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Nn.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Nn.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var n=t.getCoordinates(),i=e.getCoordinate(),o=0;o<n.length-1;o++){var s=at.distancePointLine(i,n[o],n[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new dr(n[o],n[o+1]).closestPoint(i);r[0]=new Pn(t,o,a),r[1]=new Pn(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=l.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var y=at.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(y<this._minDistance){this._minDistance=y;var v=new dr(h[p],h[p+1]),g=new dr(f[d],f[d+1]),m=v.closestPoints(g);c[0]=new Pn(u,p,m[0]),c[1]=new Pn(l,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Nn.prototype.computeMinDistancePoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,r[0]=new Pn(i,0,i.getCoordinate()),r[1]=new Pn(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Nn.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Nn.prototype.computeMinDistanceLines=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,r),this._minDistance<=this._terminateDistance)return null}},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.distance=function(t,e){return new Nn(t,e).distance()},Nn.isWithinDistance=function(t,e,r){return new Nn(t,e,r).distance()<=r},Nn.nearestPoints=function(t,e){return new Nn(t,e).nearestPoints()};var Tn=function(){this._pt=[new w,new w],this._distance=_.NaN,this._isNull=!0};Tn.prototype.getCoordinates=function(){return this._pt},Tn.prototype.getCoordinate=function(t){return this._pt[t]},Tn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Tn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Tn.prototype.toString=function(){return K.toLineString(this._pt[0],this._pt[1])},Tn.prototype.getDistance=function(){return this._distance},Tn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn};var On=function(){};On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.computeDistance=function(){if(arguments[2]instanceof Tn&&arguments[0]instanceof Zt&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new dr,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Tn&&arguments[0]instanceof $t&&arguments[1]instanceof w){var a=arguments[0],u=arguments[1],l=arguments[2];On.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)On.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Tn&&arguments[0]instanceof ct&&arguments[1]instanceof w){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Zt)On.computeDistance(h,f,p);else if(h instanceof $t)On.computeDistance(h,f,p);else if(h instanceof qt)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);On.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Tn&&arguments[0]instanceof dr&&arguments[1]instanceof w){var g=arguments[1],m=arguments[2],_=arguments[0].closestPoint(g);m.setMinimum(_,g)}};var Rn=function(){this._g0=null,this._g1=null,this._ptDist=new Tn,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},An={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rn.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Rn.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rn.prototype.computeOrientedDistance=function(t,e,r){var n=new Fn(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Dn(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},Rn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.distance=function(){if(2===arguments.length)return new Rn(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Rn(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},An.MaxPointDistanceFilter.get=function(){return Fn},An.MaxDensifiedByFractionDistanceFilter.get=function(){return Dn},Object.defineProperties(Rn,An);var Fn=function(){this._maxPtDist=new Tn,this._minPtDist=new Tn,this._euclideanDist=new On,this._geom=null;var t=arguments[0];this._geom=t};Fn.prototype.filter=function(t){this._minPtDist.initialize(),On.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Fn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fn.prototype.interfaces_=function(){return[pt]},Fn.prototype.getClass=function(){return Fn};var Dn=function(){this._maxPtDist=new Tn,this._minPtDist=new Tn,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dn.prototype.filter=function(t,e){if(0===e)return null;for(var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=(n.x-r.x)/this._numSubSegs,o=(n.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=r.x+s*i,u=r.y+s*o,l=new w(a,u);this._minPtDist.initialize(),On.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dn.prototype.isDone=function(){return!1},Dn.prototype.isGeometryChanged=function(){return!1},Dn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dn.prototype.interfaces_=function(){return[Ut]},Dn.prototype.getClass=function(){return Dn};var kn=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},jn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};kn.prototype.checkMaximumDistance=function(t,e,r){var n=new Rn(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+K.toLineString(i[0],i[1])+")"}},kn.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=kn.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),kn.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},kn.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof re||this._input instanceof qt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},kn.prototype.getErrorIndicator=function(){return this._errorIndicator},kn.prototype.checkMinimumDistance=function(t,e,r){var n=new Nn(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+K.toLineString(i[0],i[1])+" )"}},kn.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},kn.prototype.getErrorLocation=function(){return this._errorLocation},kn.prototype.getPolygonLines=function(t){for(var e=new Ct,r=new wn(e),n=Cn.getPolygons(t).iterator();n.hasNext();)n.next().apply(r);return t.getFactory().buildGeometry(e)},kn.prototype.getErrorMessage=function(){return this._errMsg},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},jn.VERBOSE.get=function(){return!1},jn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kn,jn);var Bn=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},Gn={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bn.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new X(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},Bn.prototype.checkDistance=function(){var t=new kn(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bn.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bn.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof re||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bn.prototype.getErrorIndicator=function(){return this._errorIndicator},Bn.prototype.getErrorLocation=function(){return this._errorLocation},Bn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bn.prototype.report=function(t){if(!Bn.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bn.prototype.getErrorMessage=function(){return this._errorMsg},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.isValidMsg=function(t,e,r){var n=new Bn(t,e,r);return n.isValid()?null:n.getErrorMessage()},Bn.isValid=function(t,e,r){return!!new Bn(t,e,r).isValid()},Gn.VERBOSE.get=function(){return!1},Gn.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bn,Gn);var Un=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Un.prototype.getCoordinates=function(){return this._pts},Un.prototype.size=function(){return this._pts.length},Un.prototype.getCoordinate=function(t){return this._pts[t]},Un.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Un.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:cr.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Un.prototype.setData=function(t){this._data=t},Un.prototype.getData=function(){return this._data},Un.prototype.toString=function(){return K.toLineString(new ue(this._pts))},Un.prototype.interfaces_=function(){return[hr]},Un.prototype.getClass=function(){return Un};var qn=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ct,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};qn.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qn.prototype.getIntersectionSegments=function(){return this._intSegments},qn.prototype.count=function(){return this._intersectionCount},qn.prototype.getIntersections=function(){return this._intersections},qn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qn.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qn.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(r,n))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qn.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qn.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qn.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qn.prototype.interfaces_=function(){return[Hr]},qn.prototype.getClass=function(){return qn},qn.createAllIntersectionsFinder=function(t){var e=new qn(t);return e.setFindAllIntersections(!0),e},qn.createAnyIntersectionFinder=function(t){return new qn(t)},qn.createIntersectionCounter=function(t){var e=new qn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var zn=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};zn.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},zn.prototype.getIntersections=function(){return this._segInt.getIntersections()},zn.prototype.isValid=function(){return this.execute(),this._isValid},zn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new br;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},zn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Me(this.getErrorMessage(),this._segInt.getInteriorIntersection())},zn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+K.toLineString(t[0],t[1])+" and "+K.toLineString(t[2],t[3])},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.computeIntersections=function(t){var e=new zn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vn=function t(){this._nv=null;var e=arguments[0];this._nv=new zn(t.toSegmentStrings(e))};Vn.prototype.checkValid=function(){this._nv.checkValid()},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.toSegmentStrings=function(t){for(var e=new Ct,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Un(n.getCoordinates(),n))}return e},Vn.checkValid=function(t){new Vn(t).checkValid()};var Wn=function(t){this._mapOp=t};Wn.prototype.map=function(t){for(var e=new Ct,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(ge.toGeometryArray(e))},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.map=function(t,e){return new Wn(e).map(t)};var Xn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ct,this._resultLineList=new Ct;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};Xn.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next();this.collectLineEdge(r,t,this._lineEdgesList),this.collectBoundaryTouchEdge(r,t,this._lineEdgesList)}},Xn.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},Xn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xn.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Pi.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},Xn.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Xn.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Xn.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Xn.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Pi.isResultOfOp(n,e)&&e===Pi.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Hn=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ct;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hn.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Hn.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==Pi.INTERSECTION)){var n=r.getLabel();Pi.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Hn.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Yn=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Yn.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof ee&&!n.isEmpty()||(r=!1);for(var i=new Ct,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(r=!1),i.add(s))}if(r)return this._factory.createPolygon(n,i.toArray([]));var a=new Ct;return null!==n&&a.add(n),a.addAll(i),this._factory.buildGeometry(a)},Yn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Yn.prototype.getInputGeometry=function(){return this._inputGeom},Yn.prototype.transformMultiLineString=function(t,e){for(var r=new Ct,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Yn.prototype.transformCoordinates=function(t,e){return this.copy(t)},Yn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Yn.prototype.transformMultiPoint=function(t,e){for(var r=new Ct,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Yn.prototype.transformMultiPolygon=function(t,e){for(var r=new Ct,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Yn.prototype.copy=function(t){return t.copy()},Yn.prototype.transformGeometryCollection=function(t,e){for(var r=new Ct,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ge.toGeometryArray(r)):this._factory.buildGeometry(r)},Yn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Zt)return this.transformLineString(t,null);if(t instanceof zt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof re)return this.transformMultiPolygon(t,null);if(t instanceof qt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Yn.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Zn=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dr,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=n}};Zn.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new w(o)),0===n&&this._isClosed&&t.set(t.size()-1,new w(o)))}},Zn.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},Zn.prototype.snapTo=function(t){var e=new It(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zn.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new w(i),!1)}},Zn.prototype.findSegmentIndexToSnap=function(t,e){for(var r=_.MAX_VALUE,n=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<r&&(r=o,n=i)}return n},Zn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Qn=function(t){this._srcGeom=t||null},Jn={SNAP_PRECISION_FACTOR:{configurable:!0}};Qn.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new Kn(e,r).transform(this._srcGeom)},Qn.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new Kn(t,r,!0).transform(this._srcGeom),i=n;return e&&N(i,Kt)&&(i=n.buffer(0)),i},Qn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Qn.prototype.extractTargetCoordinates=function(t){for(var e=new p,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},Qn.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.snap=function(t,e,r){var n=new Array(2).fill(null),i=new Qn(t);n[0]=i.snapTo(e,r);var o=new Qn(e);return n[1]=o.snapTo(n[0],r),n},Qn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Qn.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===pe.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Qn.computeOverlaySnapTolerance(i),Qn.computeOverlaySnapTolerance(o))}},Qn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Qn.SNAP_PRECISION_FACTOR},Qn.snapToSelf=function(t,e,r){return new Qn(t).snapToSelf(e,r)},Jn.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Qn,Jn);var Kn=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new Zn(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yn),$n=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$n.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},$n.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$n.signExpBits(this._commonBits),this._isFirst=!1,null):$n.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$n.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$n.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$n.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),n=r.substring(r.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$n.signExpBits=function(t){return t>>52},$n.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$n.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if($n.getBit(t,n)!==$n.getBit(e,n))return r;r++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ri},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ni(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new w(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new ni(e);return t.apply(r),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ri},ei.Translater.get=function(){return ni},Object.defineProperties(ti,ei);var ri=function(){this._commonBitsX=new $n,this._commonBitsY=new $n};ri.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ri.prototype.getCommonCoordinate=function(){return new w(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ri.prototype.interfaces_=function(){return[pt]},ri.prototype.getClass=function(){return ri};var ni=function(){this.trans=null;var t=arguments[0];this.trans=t};ni.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},ni.prototype.isDone=function(){return!1},ni.prototype.isGeometryChanged=function(){return!0},ni.prototype.interfaces_=function(){return[Ut]},ni.prototype.getClass=function(){return ni};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Qn(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Pi.overlayOp(e[0],e[1],t);return this.prepareResult(r)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Qn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Qn.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,r){return new ii(t,e).getResultGeometry(r)},ii.union=function(t,e){return ii.overlayOp(t,e,Pi.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Pi.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Pi.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Pi.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=Pi.overlayOp(this._geom[0],this._geom[1],t),r=!0}catch(t){if(!(t instanceof $))throw t;n=t}if(!r)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?n:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,r){return new oi(t,e).getResultGeometry(r)},oi.union=function(t,e){return oi.overlayOp(t,e,Pi.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Pi.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Pi.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Pi.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[b]},ai.prototype.getClass=function(){return ai},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(ai,ui);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};ci.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new Ct,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&N(arguments[0],St)&&N(arguments[1],St)){var n=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&N(arguments[0],St)&&arguments[1]instanceof ci){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new si(r,i),s=new ai(e,r.getMinX(i),o);this.events.add(s),this.events.add(new ai(r.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(i.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var r=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();this.addEdge(i,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),fi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return K.toLineString(new w(this._min,0),new w(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},pi.NodeComparator.get=function(){return di},Object.defineProperties(fi,pi);var di=function(){};di.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[C]},di.prototype.getClass=function(){return di};var yi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),vi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),gi=function(){this._leaves=new Ct,this._root=null,this._level=0};gi.prototype.buildTree=function(){$e.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,r=new Ct;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},gi.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new yi(t,e,r))},gi.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},gi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},gi.prototype.printNode=function(t){V.out.println(K.toLineString(new w(t._min,this._level),new w(t._max,this._level)))},gi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},gi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new vi(t.get(r),t.get(r+1));e.add(i)}}},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var mi=function(){this._items=new Ct};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Ze]},mi.prototype.getClass=function(){return mi};var _i=function(){this._index=null;var t=arguments[0];if(!N(t,Kt))throw new m("Argument must be Polygonal");this._index=new Si(t)},xi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new st(t),r=new bi(e);return this._index.query(t.y,t.y,r),e.getLocation()},_i.prototype.interfaces_=function(){return[Br]},_i.prototype.getClass=function(){return _i},xi.SegmentVisitor.get=function(){return bi},xi.IntervalIndexedGeometry.get=function(){return Si},Object.defineProperties(_i,xi);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[Ze]},bi.prototype.getClass=function(){return bi};var Si=function(){this._index=new gi;var t=arguments[0];this.init(t)};Si.prototype.init=function(t){for(var e=wn.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Si.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new dr(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Si.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new mi;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ci=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new In,2===arguments.length){var e=arguments[0],r=arguments[1],n=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;M.NONE,n.getLocation(t,Ie.ON)===M.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[1],n=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(n);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof re,a=r||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new ci(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,M.INTERIOR)}else if(arguments[0]instanceof w){var e=arguments[0];this.insertPoint(this._argIndex,e,M.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),M.EXTERIOR,M.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,M.INTERIOR,M.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],M.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],M.BOUNDARY)},e.prototype.addLineString=function(t){var e=Pt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new en(e,new Oe(this._argIndex,M.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===M.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=Pt.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;at.isCCW(n)&&(i=r,o=e);var s=new en(n,new Oe(this._argIndex,M.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],M.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Oe(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof re&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Zt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof zt)this.addCollection(e);else if(e instanceof re)this.addCollection(e);else{if(!(e instanceof qt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return N(this._parentGeom,Kt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?M.BOUNDARY:M.INTERIOR},e}(Ve),wi=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ci(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ci(0,e,n),this._arg[1]=new Ci(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ci(0,i,s),this._arg[1]=new Ci(1,o,s)}};wi.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},wi.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.map=function(){if(arguments[0]instanceof ct&&N(arguments[1],Ii.MapOp)){for(var t=arguments[0],e=arguments[1],r=new Ct,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(N(arguments[0],xt)&&N(arguments[1],Ii.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Ct,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Ii.MapOp=function(){};var Pi=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new In,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xr,this._resultPolyList=new Ct,this._resultLineList=new Ct,this._resultPointList=new Ct,this._graph=new Ve(new Vr),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Oe(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new Ct;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==M.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ct,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ct;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new We(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Xn(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Hn(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ie.RIGHT),i.getLocation(1,Ie.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(et.isTrue(!n.isNull(i,Ie.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Ie.LEFT,n.getLocation(i,Ie.LEFT)),et.isTrue(!n.isNull(i,Ie.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Ie.RIGHT,n.getLocation(i,Ie.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wi);Pi.overlayOp=function(t,e,r){return new Pi(t,e).getResultGeometry(r)},Pi.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Pi.createEmptyResult(Pi.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Wn.map(t,{interfaces_:function(){return[Ii.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Pi.INTERSECTION)},Pi.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pi.createEmptyResult(Pi.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Pi.SYMDIFFERENCE)},Pi.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case Pi.INTERSECTION:o=Math.min(n,i);break;case Pi.UNION:o=Math.max(n,i);break;case Pi.DIFFERENCE:o=n;break;case Pi.SYMDIFFERENCE:o=Math.max(n,i)}return o},Pi.createEmptyResult=function(t,e,r,n){var i=null;switch(Pi.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Pi.difference=function(t,e){return t.isEmpty()?Pi.createEmptyResult(Pi.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Pi.DIFFERENCE))},Pi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return Pi.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===M.BOUNDARY&&(i=M.INTERIOR),o===M.BOUNDARY&&(o=M.INTERIOR),s){case Pi.INTERSECTION:return i===M.INTERIOR&&o===M.INTERIOR;case Pi.UNION:return i===M.INTERIOR||o===M.INTERIOR;case Pi.DIFFERENCE:return i===M.INTERIOR&&o!==M.INTERIOR;case Pi.SYMDIFFERENCE:return i===M.INTERIOR&&o!==M.INTERIOR||i!==M.INTERIOR&&o===M.INTERIOR}return!1}},Pi.INTERSECTION=1,Pi.UNION=2,Pi.DIFFERENCE=3,Pi.SYMDIFFERENCE=4;var Ei=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new In,this._seg=new dr;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ei.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var r=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<r.size()-1;n++)if(r.getCoordinate(n,this._seg.p0),r.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ei.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?M.BOUNDARY:this._ptLocator.locate(t,this._g)},Ei.prototype.extractLinework=function(t){var e=new Mi;t.apply(e);var r=e.getLinework(),n=ge.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Mi=function(){this._linework=null,this._linework=new Ct};Mi.prototype.getLinework=function(){return this._linework},Mi.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Mi.prototype.interfaces_=function(){return[Gt]},Mi.prototype.getClass=function(){return Mi};var Li=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Li.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},Li.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Li.prototype.getPoints=function(t){for(var e=new Ct,r=wn.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},Li.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=r*i/s,u=r*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new w(l-u,c+a);n.add(h)}if(this._doRight){var f=new w(l+u,c-a);n.add(f)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var Ni=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ct;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new Ei(this._geom[0],this._boundaryDistanceTolerance),new Ei(this._geom[1],this._boundaryDistanceTolerance),new Ei(this._geom[2],this._boundaryDistanceTolerance)]},Ti={TOLERANCE:{configurable:!0}};Ni.prototype.reportResult=function(t,e,r){V.out.println("Overlay result invalid - A:"+M.toLocationSymbol(e[0])+" B:"+M.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+M.toLocationSymbol(e[2]))},Ni.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ni.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var r=this._testCoords.get(e);if(!this.checkValid(t,r))return this._invalidLocation=r,!1}return!0}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ni.hasLocation(this._location,M.BOUNDARY)||this.isValidResult(n,this._location)}},Ni.prototype.addTestPts=function(t){var e=new Li(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ni.prototype.isValidResult=function(t,e){var r=Pi.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===M.INTERIOR);return n||this.reportResult(t,e,r),n},Ni.prototype.getInvalidLocation=function(){return this._invalidLocation},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},Ni.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Qn.computeSizeBasedSnapTolerance(t),Qn.computeSizeBasedSnapTolerance(e))},Ni.isValid=function(t,e,r,n){return new Ni(t,e,n).isValid(r)},Ti.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ni,Ti);var Oi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Oi.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},Oi.prototype.combine=function(){for(var t=new Ct,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.combine=function(){if(1===arguments.length)return new Oi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Oi(Oi.createList(t,e)).combine()}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];return new Oi(Oi.createList(r,n,i)).combine()}},Oi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Oi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Ct;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new Ct;return s.add(n),s.add(i),s.add(o),s}};var Ri=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ct)},Ai={STRTREE_NODE_CAPACITY:{configurable:!0}};Ri.prototype.reduceToGeometries=function(t){for(var e=new Ct,r=t.iterator();r.hasNext();){var n=r.next(),i=null;N(n,St)?i=this.unionTree(n):n instanceof ct&&(i=n),e.add(i)}return e},Ri.prototype.extractByEnvelope=function(t,e,r){for(var n=new Ct,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},Ri.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Oi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},Ri.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new or(Ri.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},Ri.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=Ri.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(Ri.getGeometry(e,r),Ri.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},Ri.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},Ri.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ri.prototype.unionActual=function(t,e){return Ri.restrictToPolygons(t.union(e))},Ri.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ri.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new Ct,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),s=this.unionActual(i,o);return n.add(s),Oi.combine(n)},Ri.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().createGeometryCollection([e,r]).buffer(0)}},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.restrictToPolygons=function(t){if(N(t,Kt))return t;var e=Cn.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ge.toPolygonArray(e))},Ri.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ri.union=function(t){return new Ri(t).union()},Ai.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ri,Ai);var Fi=function(){};Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Fi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pi.createEmptyResult(Pi.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Pi.UNION)},t.GeoJSONReader=Ce,t.GeoJSONWriter=we,t.OverlayOp=Pi,t.UnionOp=Fi,t.BufferOp=yn,Object.defineProperty(t,"__esModule",{value:!0})}(e)},4654:()=>{},2075:t=>{"use strict";t.exports={i8:"2.3.15"}}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return n[t].call(r.exports,r,r.exports,o),r.exports}o.n=(t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e}),o.d=((t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=((t,e)=>Object.prototype.hasOwnProperty.call(t,e)),o.r=(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})});var s={};(()=>{"use strict";o.r(s),o.d(s,{ArcGis:()=>Zp,BaseServer:()=>on,CloudDisk:()=>dp,Common:()=>i,Crs:()=>n,ElasticSearch:()=>Hf,Extend:()=>a,G3D:()=>u,Info:()=>d,MRCS:()=>l,MRFS:()=>c,MRFWS:()=>h,MRGS:()=>f,MRMS:()=>p,OGC:()=>Qp,PostGIS:()=>ip,Style:()=>e,Util:()=>t,default:()=>Jp,geoJSON:()=>r});var t={};o.r(t),o.d(t,{TileInfo:()=>G,TileResolution:()=>k});var e={};o.r(e),o.d(e,{Align:()=>q,Anchor:()=>U,ExtrudeStyle:()=>ve,FillStyle:()=>de,FontStyle:()=>ge,LineCap:()=>W,LineJoin:()=>X,LineStyle:()=>fe,MarkerStyle:()=>ie,ModelStyle:()=>se,PointStyle:()=>re,Shadow:()=>Yt,Symbol:()=>Ht,TextPlacement:()=>H,TextStyle:()=>_e,TrackStyle:()=>ce,VectorStyle:()=>Zt});var r={};o.r(r),o.d(r,{decodeGeoHash:()=>Pe,decodeGeoHashToPolygon:()=>Me,encodeGeoHash:()=>Ee});var n={};o.r(n),o.d(n,{EPSG:()=>Le,ProjectTool:()=>De});var i={};o.r(i),o.d(i,{AnyLine:()=>ke,Arc:()=>je,Browser:()=>vt,CAttDataRow:()=>Ue,CAttStruct:()=>Be,CDisplayStyle:()=>_r,CDisplayStyleExtend:()=>xr,CDynNoteInfo:()=>dr,CGDBInfo:()=>br,CItemType:()=>ar,CLinAdjustType:()=>nr,CLinHeadType:()=>ir,CLinJointType:()=>or,CLinStyleMakeType:()=>sr,CLineInfo:()=>yr,CPointInfo:()=>vr,CRegionInfo:()=>gr,ChineseToUtf8:()=>Nt,Circle:()=>Pr,DeepMerge:()=>Dt,DynNoteLableType:()=>pr,DynShowStyle:()=>mr,EightDirType:()=>$e,Feature:()=>jr,FeatureGeometry:()=>Dr,FeatureGraphicBase:()=>Lr,FeatureSet:()=>Br,FeatureType:()=>We,FontShape:()=>Xe,GLine:()=>Rr,GPoint:()=>Tr,GRegion:()=>Fr,ISShowArc:()=>tr,IS_GECKO:()=>yt,LabelLinInfo:()=>hr,LabelLinType:()=>He,LabelPntType:()=>Ze,LabelRegInfo:()=>fr,LabelRegType:()=>Ye,LabelSpreadType:()=>Je,LablePntInfo:()=>cr,LayerStatusType:()=>lr,LineConstrain:()=>Ke,MapType:()=>ur,MultiPolygon:()=>zr,NetAnalyType:()=>er,NetElemType:()=>rr,Point2D:()=>wr,PolyLine:()=>Wr,Polygon:()=>Ur,Rectangle:()=>Mr,RepeatType:()=>Qe,Tangram:()=>Sr,VectCls:()=>Xr,VectClsType:()=>Ve,WebGraphicsInfo:()=>kr,XClsType:()=>ze,Zondy:()=>Z,applyDefaults:()=>ct,bind:()=>Et,bindAsEventListener:()=>Mt,cloneObject:()=>It,copy:()=>rt,copyAttributes:()=>Ct,copyAttributesWithClip:()=>wt,copyExcluce:()=>nt,createCanvasContext2D:()=>Gt,extend:()=>$,extendDeep:()=>et,formatEdits:()=>qt,formatPoints:()=>Vt,formatQuery:()=>Ut,getBrowser:()=>gt,getElement:()=>ot,getParameterString:()=>ht,getParameters:()=>dt,getTopAnalysisResult:()=>Lt,getWFParameterString:()=>ft,indexOf:()=>ut,isArray:()=>tt,isElement:()=>st,isInTheSameDomain:()=>xt,isSupportCanvas:()=>mt,merge:()=>jt,mixin:()=>Bt,modifyDOMElement:()=>lt,newGuid:()=>Pt,notNULL:()=>Wt,removeItem:()=>at,reset:()=>it,returnPoint:()=>zt,supportCanvas:()=>_t,toJSON:()=>bt,transformResult:()=>St,urlAppend:()=>pt});var a={};o.r(a),o.d(a,{ContourNoteParam:()=>sn,ContourParam:()=>cn,ContourRegionInfo:()=>un,ContourZValue:()=>ln,MeshingParam:()=>hn,NetAnalyse:()=>fn,NetAnalysisExtent:()=>yn,SlopLineParam:()=>an});var u={};o.r(u),o.d(u,{G3DLayerType:()=>vn,G3DMapDoc:()=>bn,G3DService:()=>_n,M3DTileDataInfo:()=>gn});var l={};o.r(l),o.d(l,{CatalogService:()=>Cn,ColorInfo:()=>In,GDBInfo:()=>En,MapDoc:()=>Ln,SystomInfo:()=>Fn,TileLayer:()=>Tn,VectorLayer:()=>Rn});var c={};o.r(c),o.d(c,{BaseParameter:()=>pi,EditDocFeature:()=>Bn,EditLayerFeature:()=>Un,EditServiceBase:()=>kn,FeatureService:()=>di,GeometryParameter:()=>$a,MultiGeoQuery:()=>Jn,MultiGeoQueryParameter:()=>Zn,ObjClsQuery:()=>ti,ObjClsQueryParameter:()=>Kn,ObjectIdsParameter:()=>nu,QueryByLayerParameter:()=>ri,QueryDocFeature:()=>ii,QueryFeatureRule:()=>zn,QueryFeatureStruct:()=>qn,QueryLayerFeature:()=>si,QueryParameter:()=>Xn,QueryParameterBase:()=>Vn,QueryServiceBase:()=>Yn,QueryUnifyParameter:()=>fi,RectangleParameter:()=>eu,SQLParameter:()=>vi,VFeature:()=>iu,VPoint:()=>Ha,VPolygon:()=>Ja,VPolyline:()=>Za});var h={};o.r(h),o.d(h,{AnalysisBase:()=>su,ClassBufferBase:()=>uu,ClassBufferByMultiplyRing:()=>cu,ClassBufferBySingleRing:()=>fu,ClipBase:()=>du,ClipByCircle:()=>vu,ClipByLayer:()=>mu,ClipByPolygon:()=>xu,ContourAnalyse:()=>Su,FeatureBuffBase:()=>wu,FeatureBuffByMultiplyRing:()=>Pu,FeatureBuffBySingleRing:()=>Mu,FunctionWareService:()=>Vu,NetAnalysis:()=>Nu,OverlayBase:()=>Ou,OverlayByLayer:()=>Au,OverlayByPolygon:()=>Du,ProjectBase:()=>ju,ProjectByLayer:()=>Gu,ProjectBySRID:()=>qu});var f={};o.r(f),o.d(f,{CProjectBySRSID:()=>Yu,CProjectParam:()=>Hu,CalArea:()=>Ku,CalPolyLineLength:()=>tl,CalServiceBase:()=>Qu,CoordinateElpTrans:()=>hl,GeometryAnalysisBase:()=>Xu,ProjectDots:()=>rl,ProjectRang:()=>il,Smooth:()=>al,TopAnalysis:()=>ll});var p={};o.r(p),o.d(p,{GetDocImageService:()=>yl,GetLayerImageService:()=>gl,GetMapImageService:()=>_l,GetMapInfoService:()=>bl,GetTileImageService:()=>Cl,MapServiceBase:()=>pl});var d={};function y(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function v(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(t){y(o,n,i,s,a,"next",t)}function a(t){y(o,n,i,s,a,"throw",t)}s(void 0)})}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}o.r(d),o.d(d,{CAllOtherDataItemInfoSource:()=>wl,CAnnInfo:()=>Il,CChartLabelFormat:()=>Pl,CChartTheme:()=>kl,CChartThemeInfo:()=>Al,CChartThemeRepresentInfo:()=>Fl,CChartType:()=>Ml,CDotDensityTheme:()=>Bl,CFourColorTheme:()=>Ul,CGraduatedSymbolTheme:()=>zl,CLinInfo:()=>Nl,CMultiClassTheme:()=>Xl,CPntInfo:()=>Ll,CRandomTheme:()=>Yl,CRangeTheme:()=>Kl,CRangeThemeInfo:()=>Ql,CRegInfo:()=>Tl,CSimpleTheme:()=>tc,CTheme:()=>El,CThemeInfo:()=>Ol,CUniqueTheme:()=>ic,CUniqueThemeInfo:()=>rc,ExpInfo:()=>Vl,FolderInfo:()=>sc,FolderInfoAttribute:()=>oc,ItemValue:()=>ac,ThemeOper:()=>cc,ThemesInfo:()=>uc});var x=o(7757),b=o.n(x),S=o(6965),C="WMS",w="WFS",I="WMTS",P="WCS",E=[{type:"IGSRestMap2D",id:1,title:"IGServer二维地图服务",description:"IGServer自定义二维文档REST，包括地图服务、要素服务、目录服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/docs/{serverName}/0/layers?f=json",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/docs/{serverName}/0/layers?f=json",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSRestMap3D",id:2,title:"IGServer三维地图服务",description:"IGServer自定义三维文档REST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetDocInfo",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:"",GetCovering:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetCovering?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetLabels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetLabels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetModels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetModels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetTerrain:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetTerrain?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}"},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:"",GetCovering:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetCovering?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetLabels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetLabels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetModels:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetModels?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}",GetTerrain:"http://{ip}:{port}/igs/rest/g3d/{serverName}/GetTerrain?sceneIndex={sceneIndex}&layerIndex={layerIndex}&level={level}&row={row}&col={col}&xDensity={xDensity}&yDensity={yDensity}"}},{type:"IGSRestTile",id:3,title:"IGServer瓦片服务",description:"IGServer自定义瓦片REST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"ArcGISRestMapServer",id:4,title:"ArcGIS Rest地图服务",description:"ArcGIS Rest地图服务协议",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"ArcGISRestFeatureServer",id:5,title:"ArcGIS Rest要素服务",description:"ArcGIS Rest要素服务协议",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DCache",id:6,title:"IGServer三维缓存服务",description:"IGServer三维缓存服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DModel",id:7,title:"IGServer三维模型服务",description:"IGServer三维模型服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"IGSRestMap3DTerrain",id:8,title:"IGServer三维地形服务",description:"IGServer三维地形服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"WMS",id:17,title:"OGC-WMS",description:"OGC-WMS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WFS",id:18,title:"OGC WFS",description:"OGC WFS服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"WMTS",id:19,title:"OGC WMTS",description:"OGC WMTS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}},{type:"WCS",id:20,title:"OGC WCS",description:"OGC WCS服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}},{type:"ArcGISRestVectorTileServer",id:32,title:"ArcGIS Rest矢量瓦片服务",description:"ArcGIS Rest矢量瓦片服务",url:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"",GetFeatureInfo:""}}];const M=E;var L="WMS",N="WMTS",T=[{type:"DynamicTile",id:2,title:"动态裁图",description:"动态裁图为IGSMap2D的额外特性，为服务的功能",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"IGSMap2D",id:3,title:"二维文档服务",description:"IGServer自定义的二维文档REST服务",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSTile",id:5,title:"瓦片服务",description:"IGServer自定义的瓦片REST服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"WMS",id:8,title:"WMS",description:"OGC-WMS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WMTS",id:10,title:"WMTS",description:"OGC-WMTS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}}];const O=T;var R=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}],A=function(){function t(){g(this,t)}return _(t,[{key:"get",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GetMap",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"mapboxgl",a=void 0;if("number"==typeof t?a=M.find(function(e){return e.id===t}):"string"==typeof t&&(a=M.find(function(e){return e.id==t||e.title==t||e.type==t})),a){var u,l=a[i][o];for(l=(l=l.replace("{ip}",e)).replace("{port}",r);l.indexOf("{serverName}")>=0;)l=l.replace("{serverName}",n);switch(s){case"mapboxgl":u=R.filter(function(t){return"mapboxgl"===t.type}),l=(l=(l=l.replace("{level}/{row}/{col}",u[0].rule)).replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}")).replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":u=R.filter(function(t){return"cesium"===t.type}),l=l.replace("{level}/{row}/{col}",u[0].rule)}return l}}},{key:"GetCapabilities",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,n,i,"GetCapabilities")}},{key:"GetMap",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mapboxgl";return this.get(t,e,r,n,i,"GetMap",o)}},{key:"GetFeatureInfo",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,n,i,"GetFeatureInfo")}}]),t}();var F=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}],D=function(){function t(){g(this,t)}return _(t,[{key:"get",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GetMap",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"mapboxgl",a=void 0;if("number"==typeof t?a=O.find(function(e){return e.id===t}):"string"==typeof t&&(a=O.find(function(e){return e.title==t})),a){var u,l=a[i][o];for(l=(l=l.replace("{ip}",e)).replace("{port}",r);l.indexOf("{serverName}")>=0;)l=l.replace("{serverName}",n);switch(s){case"mapboxgl":u=F.filter(function(t){return"mapboxgl"===t.type}),l=(l=(l=l.replace("{level}/{row}/{col}",u[0].rule)).replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}")).replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":u=F.filter(function(t){return"cesium"===t.type}),l=l.replace("{level}/{row}/{col}",u[0].rule)}return l}}},{key:"GetCapabilities",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,n,i,"GetCapabilities")}},{key:"GetMap",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mapboxgl";return this.get(t,e,r,n,i,"GetMap",o)}},{key:"GetFeatureInfo",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,n,i,"GetFeatureInfo")}}]),t}();var k=function(){function t(){g(this,t),this.levelResolutionToTileSizes={}}return _(t,[{key:"getLevelResolutionByTileSize",value:function(e){if(!this.levelResolutionToTileSizes[e]){for(var r=[],n=0;n<=24;n++){t.EQUATOR_PERIMTER;var i=360/(e*Math.pow(2,n));r.push({level:n,resolution:i})}this.levelResolutionToTileSizes[e]=r}return this.levelResolutionToTileSizes[e]}},{key:"getLevelResolutionCesium",value:function(){return this.getLevelResolutionByTileSize(512)}},{key:"getNearLevel",value:function(t,e){return JSON.parse(JSON.stringify(e)).sort(function(e,r){return Math.abs(e.resolution-t)-Math.abs(r.resolution-t)})[0].level}},{key:"getZoomOffsetByResolution",value:function(t){var e=t.resolution,r=t.levelResolutions;return t.levelValue-this.getNearLevel(e,r)}},{key:"getZoomOffsetByTileInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,n=[],i=t.lods[0];e?n=this.getLevelResolutionCesium():(r=r||256,t.size&&t.size.length>0&&(r=t.size[0]),n=this.getLevelResolutionByTileSize(r));var o=this.getZoomOffsetByResolution({resolution:i.resolution,levelResolutions:n,levelValue:i.level});return o}}],[{key:"EQUATOR_PERIMTER",get:function(){return 6378137}}]),t}();var j=function(){function t(){g(this,t),this.levelScales={}}return _(t,[{key:"getLevelScale",value:function(e){if(!this.levelScales[e]){for(var r=[],n=0;n<=24;n++){var i=t.ZERO_SCALE/Math.pow(2,n);r.push({level:n,resolution:i})}this.levelScales[e]=r}return this.levelScales[e]}},{key:"getLevelScaleCesium",value:function(){return this.getLevelScale(512)}},{key:"getNearLevel",value:function(t,e){return JSON.parse(JSON.stringify(e)).sort(function(e,r){return Math.abs(e.resolution-t)-Math.abs(r.resolution-t)})[0].level}},{key:"getZoomOffsetByScale",value:function(t){var e=t.resolution,r=t.levelResolutions;return t.levelValue-this.getNearLevel(e,r)}},{key:"getZoomOffsetByTileInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,n=[],i=t.lods[0];e?n=this.getLevelScaleCesium():(r=r||256,t.size&&t.size.length>0&&(r=t.size[0]),n=this.getLevelScale(r));var o=this.getZoomOffsetByScale({resolution:i.resolution,levelResolutions:n,levelValue:i.level});return o}}],[{key:"ZERO_SCALE",get:function(){return 591658710.9}}]),t}();var B=[C,I,w,P,N,L],G=function(){function t(e){g(this,t);var r=e||{},n=r.ip,i=r.port,o=r.serverName;this.ip=n,this.port=i,this.serverName=o}var e;return _(t,[{key:"getZoomOffset",value:(e=v(b().mark(function t(e,r,n,i){var o,s,a,u,l,c,h,f,p,d,y,v,g,m,_,x,C,w,I;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=0,r=r||this.ip,n=n||this.port,i=i||this.serverName,s=!1,a=!1,u=!0,E.forEach(function(t){t.type===e&&(a=!0,B.indexOf(e)>=0&&(u=!1))}),T.forEach(function(t){t.type===e&&(s=!0,B.indexOf(e)>=0&&(u=!1))}),s?this.parse=new D:a&&(this.parse=new A),!this.parse){t.next=44;break}if(l=this.parse.GetCapabilities(e,r,n,i),!u){t.next=30;break}return t.prev=13,t.next=16,fetch(l);case 16:return c=t.sent,t.next=19,c.json();case 19:h=t.sent,f=new k,p=h.TileInfo2,d=p.tileInfo,o=f.getZoomOffsetByTileInfo(d),t.next=28;break;case 26:t.prev=26,t.t0=t.catch(13);case 28:t.next=44;break;case 30:return t.next=32,fetch(l);case 32:return y=t.sent,t.next=35,y.text();case 35:v=t.sent,g=S.getTraversalObj(v,{}),m=S.convertToJson(g,{}),_=m.Capabilities.Contents.TileMatrixSet,x=_[_.length-1],C=x.TileMatrix[0].ScaleDenominator,w={lods:[{resolution:C,level:0}]},I=new j,o=I.getZoomOffsetByTileInfo(w);case 44:return t.abrupt("return",o);case 45:case"end":return t.stop()}},t,this,[[13,26]])})),function(t,r,n,i){return e.apply(this,arguments)})}]),t}();var U={center:"center",left:"left",right:"right",top:"top",bottom:"bottom","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right"},q={left:"left",center:"center",right:"right"},z="center",V="baseline",W={butt:"butt",round:"round",square:"square"},X={bevel:"bevel",round:"round",miter:"miter"},H={point:"point",line:"line"};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}var Z=window.Zondy=window.Zondy||{};Z.Event=Z.Event||{},Z.Object=Z.Object||{},Z.Object.ContourAnalyse=Z.Object.ContourAnalyse||{},Z.Object.Theme=Z.Object.Theme||{},Z.Theme=Z.Theme||{},Z.Service=Z.Service||{},Z.Socket=Z.Socket||{},Z.Enum=Z.Enum||{},Z.Enum.Net=Z.Enum.Net||{},Z.Enum.Theme=Z.Enum.Theme||{},Z.Enum.Map=Z.Enum.Map||{},Z.Catalog=Z.Catalog||{},Z.Util=Z.Util||{},Z.CRS=Z.CRS||{},Z.Map=Z.Map||{},Z.xsd=Z.xsd||{},Z.XLink=Z.XLink||{},Z.extent=Z.extent||{},Z.xml=Z.xml||{},Z.array=Z.array||{},Z.string=Z.string||{},Z.LevelRenderer=Z.LevelRenderer||{},Z.LevelRenderer.Tool=Z.LevelRenderer.Tool||{},Z.LevelRenderer.Animation=Z.LevelRenderer.Animation||{},Z.Feature=Z.Feature||{},Z.Feature.ShapeParameters=Z.Feature.ShapeParameters||{},Z.Geometry=Z.Geometry||{},Z.Client=Z.Client||{},Z.Source=Z.Source||{},Z.GeomInteraction=Z.GeomInteraction||{},Z.Format=Z.Format||{},Z.Control=Z.Control||{},Z.OGC=Z.OGC||{},Z.DataStore=Z.DataStore||{},Z.DataStore.ElasticSearch=Z.DataStore.ElasticSearch||{},Z.DataStore.PostGIS=Z.DataStore.PostGIS||{},Z.DataStore.Hbase=Z.DataStore.Hbase||{},Z.DataStore.MongoDB=Z.DataStore.MongoDB||{},Z.CloudDisk=Z.CloudDisk||{},Z.CloudDisk.GisCore=Z.CloudDisk.GisCore||{},Z.CloudDisk.Model=Z.CloudDisk.Model||{},Z.IGServerX=Z.IGServerX||{},Z.IGServerX.Vector=Z.IGServerX.Vector||{};var Q,J,K,$=function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},tt=function(t){return"[object Array]"===Object.prototype.toString.call(t)},et=function t(e,r){var n,i=Object.prototype.toString;for(n in e=e||{},r)r.hasOwnProperty(n)&&("object"===Y(r[n])?("[object Null]"!==i.call(e[n])&&"[object Undefined]"!==i.call(e[n])||(e[n]="[object Array]"===i.call(r[n])?[]:{}),t(e[n],r[n])):e[n]=r[n],""!==r[n]&&null!==r[n]||(e[n]=r[n]));return e},rt=function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},nt=function(t,e,r){var n;if(t=t||{},e)for(var i in e)void 0!==(n=e[i])&&"function"!=typeof n&&r.indexOf(i)<0&&(t[i]=n)},it=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===Y(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===Y(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},ot=function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},st=function(t){return!(!t||1!==t.nodeType)},at=function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},ut=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},lt=function(t,e,r,n,i,o,s,a){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),i&&(t.style.position=i),o&&(t.style.border=o),s&&(t.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},ct=function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},ht=function(t){var e=[];for(var r in t){var n=t[r];if(null!=n&&"function"!=typeof n){var i;if("object"===Y(n)&&n.constructor===Array){for(var o,s=[],a=0,u=n.length;a<u;a++)o=n[a],s.push(encodeURIComponent(null==o?"":o));i=s.join(",")}else i=encodeURIComponent(n);e.push(encodeURIComponent(r)+"="+i)}}return e.join("&")},ft=function(t){var e=[];for(var r in t){var n=t[r];if(null!=n&&"function"!=typeof n){var i;if("object"===Y(n)&&n.constructor===Array){for(var o,s=[],a=0,u=n.length;a<u;a++)o=n[a],s.push(encodeURIComponent(null==o?"":o));i=s.join(",")}else i=encodeURIComponent(n);e.push(encodeURIComponent(r)+":"+i)}}return e.join(";")},pt=function(t,e){var r=t;if(e){var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},dt=function(t){var e="";if((t=null==t?window.location.href:t).indexOf("?")>-1){var r=t.indexOf("?")+1;t.indexOf("#");var n=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var i={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var u=o[s].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),i[l]=c}}return i},yt=-1===(Q=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==Q.indexOf("gecko"),vt=function(){var t,e="",r="",n="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(e="msie",t=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(e="chrome",t=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(e="firefox",t=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(e="opera",t=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(e="safari",t=i.match(/version\/([\d.]+)/)),r=t?t[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?n="apple":i.indexOf("android")>-1&&(r=(t=i.match(/version\/([\d.]+)/))?t[1]:"",n="android"),{name:e,version:r,device:n}}(),gt=function(){return vt},mt=(J=!0,K=gt(),document.createElement("canvas").getContext?("firefox"===K.name&&parseFloat(K.version)<5&&(J=!1),"safari"===K.name&&parseFloat(K.version)<4&&(J=!1),"opera"===K.name&&parseFloat(K.version)<10&&(J=!1),"msie"===K.name&&parseFloat(K.version)<9&&(J=!1)):J=!1,J),_t=function(){return mt},xt=function(t){if(!t)return!0;var e=t.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===e)return!0;var i,o=i=t.substring(0,e),s=r.substring(n+2);n=s.indexOf("/");var a=s.indexOf(":"),u=s.substring(0,n),l=document.location.protocol;if(-1!==a||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,f=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),f+=":"+("http:"===i.toLowerCase()?80:443)),h===document.domain&&f===u},bt=function t(e){var r=e;if(null==r)return null;switch(r.constructor){case String:return r=(r=(r=(r=(r=(r=(r='"'+r.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],i=0,o=r.length;i<o;i++)n.push(t(r[i]));return"["+n.join(",")+"]";case Number:return isFinite(r)?String(r):null;case Boolean:return String(r);case Date:return"{'__type':\"System.DateTime\",'Year':"+r.getFullYear()+",'Month':"+(r.getMonth()+1)+",'Day':"+r.getDate()+",'Hour':"+r.getHours()+",'Minute':"+r.getMinutes()+",'Second':"+r.getSeconds()+",'Millisecond':"+r.getMilliseconds()+",'TimezoneOffset':"+r.getTimezoneOffset()+"}";default:if("object"===Y(r)){if(r.length){for(n=[],i=0,o=r.length;i<o;i++)n.push(t(r[i]));return"["+n.join(",")+"]"}var s=[];for(var a in r)"function"!=typeof r[a]&&"CLASS_NAME"!==a&&s.push("'"+a+"':"+t(r[a]));return s.length>0?"{"+s.join(",")+"}":"{}"}return r.toString()}},St=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},Ct=function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},wt=function(t,e,r){if(t=t||{},e)for(var n in e){var i=!1;if(r&&r.length)for(var o=0,s=r.length;o<s;o++)if(n===r[o]){i=!0;break}if(!0!==i){var a=e[n];void 0!==a&&"CLASS_NAME"!==n&&"function"!=typeof a&&(t[n]=a)}}return t},It=function t(e){if(null===e||"object"!==Y(e))return e;if(e instanceof Date)return(r=new Date).setTime(e.getTime()),r;if(e instanceof Array)return r=e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},Pt=function(){for(var t="",e=1;e<=32;e++){t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-")}return t},Et=function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},Mt=function(t,e){return function(r){return t.call(e,r||window.event)}},Lt=function(t){switch(t.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},Nt=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return Tt(t)})},Tt=function(t){var e=escape(t).split("%"),r="";""!=e[0]&&(r=e[0]);for(var n=1;n<e.length;n++)"u"==e[n].substring(0,1)?r+=Rt(Ot(e[n].substring(1,5))):r+="%"+e[n];return r},Ot=function(t){for(var e,r="",n="",i=0;i<t.length;i++)r=t.charAt(i),e="0123456789ABCDEF".indexOf(r),n+=Ft(e);return n},Rt=function(t){var e="",r="",n="";if(16==t.length){r="1110"+t.substring(0,4),r+="10"+t.substring(4,10),r+="10"+t.substring(10,16);for(var i="0123456789ABCDEF",o=0;o<3;o++)e+="%",n=r.substring(8*o,8*(o+1)),e+=i.charAt(At(n.substring(0,4))),e+=i.charAt(At(n.substring(4,8)));return e}return""},At=function(t){var e=0;if(4==t.length){for(var r=0;r<4;r++)e+=t.charAt(r)*Math.pow(2,3-r);return e}return-1},Ft=function(t){for(var e="",r=0,n=0;n<4;n++)t>=(r=Math.pow(2,3-n))?(e+="1",t-=r):e+="0";return e},Dt=function t(e,r){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(r))for(var n in r)e[n]?e[n]=t(e[n],r[n]):e[n]=r[n];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(r)?e.concat(r):r;return e},kt=function(t,e,r,n){e.hasOwnProperty(r)&&("object"!=Y(t[r])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):jt(t[r],e[r],n))},jt=function(t,e,r){for(var n in e)kt(t,e,n,r);return t},Bt=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=_(function t(r){g(this,t);for(var n=0;n<e.length;n++)s(this,new e[n](r))}),i=0;i<e.length;i++){var o=e[i];s(n,o),s(n.prototype,o.prototype),s(n.prototype,new o)}return n;function s(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var i=r[n];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var o=Object.getOwnPropertyDescriptor(e,i);window.ActiveXObject?Object.defineProperty(t,i,o||{}):Object.defineProperty(t,i,o)}}}},Gt=function(t,e){var r=document.createElement("CANVAS");return t&&(r.width=t),e&&(r.height=e),r.getContext("2d")},Ut=function(t,e,r,n){return Object.keys(t).forEach(function(i){var o=t[i],s=i;if(Wt(o)&&"function"!=typeof o){if(r&&r.indexOf(i)>-1){var a={};"geometry"===i?("polygon"===o.type&&(a.rings=t[i].rings),"multipoint"===o.type&&(a.points=t[i].points),"point"===o.type&&t[i].x&&t[i].y&&(a.y=t[i].y,a.x=t[i].x),"polyline"===o.type&&(a.paths=t[i].paths),"circle"===o.type&&(o.type="polygon",a.rings=t[i].rings),a.spatialReference=t[i].spatialReference,o=a,e+="&geometryType=esriGeometry"+t[i].type.charAt(0).toUpperCase()+t[i].type.slice(1),o=encodeURI(JSON.stringify(o))):o=JSON.stringify(o)}n&&n.hasOwnProperty(i)&&(s=n[i]),e+="&"+s+"="+o}}),e},qt=function(t,e,r){return Object.keys(e).forEach(function(n){if(r&&r.indexOf(n)>-1){var i=n;i=n.substring(0,i.length-"Features".length)+"s",t+=i+"="+encodeURIComponent(e[n]instanceof Object?JSON.stringify(e[n]):e[n])+"&"}else t+=n+"="+e[n]+"&"}),t},zt=function(t,e,r){return new t({longitude:r[0],latitude:r[1],z:r[2],spatialReference:It(e.spatialReference)})},Vt=function t(e){for(var r=0;r<e.length;r++)e[r]instanceof Array?t(e[r]):e[r]instanceof Object&&(e[r]=e[r].toArray());return e},Wt=function(t){return""!==t&&null!=t};Z.Util.extend=$,Z.Util.isArray=tt,Z.Util.extendDeep=et,Z.Util.copy=rt,Z.Util.copyExcluce=nt,Z.Util.reset=it,Z.Util.getElement=ot,Z.Util.isElement=st,Z.Util.removeItem=at,Z.Util.indexOf=ut,Z.Util.modifyDOMElement=lt,Z.Util.applyDefaults=ct,Z.Util.getParameterString=ht,Z.Util.getWFParameterString=ft,Z.Util.urlAppend=pt,Z.Util.getParameters=dt,Z.IS_GECKO=yt,Z.Browser=vt,Z.Util.getBrowser=gt,Z.Util.isSupportCanvas=mt,Z.Util.supportCanvas=_t,Z.Util.isInTheSameDomain=xt,Z.Util.toJSON=bt,Z.Util.transformResult=St,Z.Util.copyAttributes=Ct,Z.Util.copyAttributesWithClip=wt,Z.Util.cloneObject=It,Z.Util.newGuid=Pt,Z.Util.bind=Et,Z.Util.bindAsEventListener=Mt,Z.Util.getTopAnalysisResult=Lt,Z.Util.ChineseToUtf8=Nt,Z.Util.DeepMerge=Dt,Z.Util.merge=jt,Z.Util.mixin=Bt,Z.Util.createCanvasContext2D=Gt,Z.Util.formatQuery=Ut,Z.Util.formatEdits=qt,Z.Util.returnPoint=zt,Z.Util.returnPoint=Vt,Z.Util.returnPoint=Wt;var Xt=window.mapgis=window.mapgis||{};Xt.style=Xt.style||{};var Ht=_(function t(e){g(this,t);var r=e||{},n=r.pattern,i=void 0===n?void 0:n,o=r.opacity,s=void 0===o?1:o,a=r.allowOverlap,u=void 0!==a&&a,l=r.color,c=void 0===l?"#FFFFFF":l,h=r.size,f=void 0===h?1:h,p=r.rotate,d=void 0===p?0:p,y=r.xoffset,v=void 0===y?0:y,m=r.yoffset,_=void 0===m?0:m;this.allowOverlap=u,this.pattern=i,this.opacity=s,this.color=c,this.size=f,this.rotate=d,this.xoffset=v,this.yoffset=_,this.anchor=U.center,$(this,r)});Xt.style.SymbolStyle=Ht;var Yt=_(function t(e){g(this,t);var r=e||{},n=r.blur,i=void 0===n?0:n,o=r.color,s=void 0===o?"#000000":o,a=r.offsetX,u=void 0===a?0:a,l=r.offsetY,c=void 0===l?0:l;this.blur=i,this.color=s,this.offsetX=u,this.offsetY=c,$(this,r)});Xt.style.Shadow=Yt;var Zt=_(function t(e){g(this,t);var r=e||{},n=r.opacity,i=void 0===n?1:n,o=r.color,s=void 0===o?"#FFFFFF":o;this.type=void 0,this.opacity=i,this.color=s,$(this,r)});function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jt(t,e){return Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jt(t,e)}function Kt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jt(t,e)}function $t(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qt(t)}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.VectorStyle=Zt;var re=function(t){Kt(r,t);var e=ee(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.radius,s=void 0===o?5:o,a=i.opacity,u=void 0===a?1:a,l=i.outlineColor,c=void 0===l?"#FFFFFF":l,h=i.outlineWidth,f=void 0===h?0:h,p=i.anchor,d=void 0===p?U.center:p,y=i.outlineOpacity,v=void 0===y?1:y,m=i.show,_=void 0===m||m;return n.type="point",n.radius=s,n.opacity=u,n.outlineColor=c,n.outlineWidth=f,n.outlineOpacity=v,n.anchor=d,n.show=_,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){var e=(t=t||{}).highlight,r=void 0!==e&&e,n=this.color,i=this.opacity,o=this.radius,s=this.outlineColor,a=this.outlineWidth,u={filter:["==","$type","Point"],paint:{"circle-radius":o,"circle-color":n,"circle-opacity":i,"circle-stroke-width":a,"circle-stroke-color":s}};return r&&(u.paint["circle-color"]=["case",["boolean",["feature-state","hover"],!1],n,"rgba(0, 0, 0, 0)"],u.paint["circle-stroke-width"]=["case",["boolean",["feature-state","hover"],!1],a,0]),u}},{key:"toCesiumStyle",value:function(t){var e=this.color,r=void 0===e?"#FFFFFF":e,n=this.opacity,i=void 0===n?1:n,o=this.radius,s=this.outlineColor,a=void 0===s?"#000000":s,u=this.outlineWidth,l=void 0===u?1:u,c=this.outlineOpacity,h=void 0===c?1:c,f=this.show;return{show:void 0===f||f,pixelSize:o,color:t.Color.fromCssColorString(r).withAlpha(i),outlineWidth:l,outlineColor:t.Color.fromCssColorString(a).withAlpha(h)}}}]),r}(Zt);function ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.PointStyle=re;var ie=function(t){Kt(r,t);var e=ne(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.symbol,s=i.size,a=void 0===s?1:s,u=i.show,l=void 0===u||u;return n.type="marker",n.show=l,n.size=a,n.symbol=o||new Ht({symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAuCAYAAABEbmvDAAAAAXNSR0IB2cksfwAAAAlwSFlzAAASdAAAEnQB3mYfeAAABjNJREFUeJztWF1MFFcUnsSY8NjEmJj0xRfTJk19sEkfffGpsWn9Q5HFYX9nd9lZVkgb2/ovC11cRRRYQLYIrAK2WrUNVK3SqtFapU1t0xrTRK1UrEbEv/fT75thXWphf2DAh/YmX2Zn5t5zv3vOd86du4ryf5um9uTJkwWPHj3SHj58uHl4eLg5Cd7z+ePHj99++vTpnGkhw4k46YMHD768OXBb4ke/kffrD0tReL8s/iBuXEtqDsru7pNy5ervMjQ01E+iXMSUkSIhTvTpyQuyqLxZZi6pFmVprSjL6kRZ1STKymZcgZUxPNstyrvbZb6vXiIdPXL33j0hQUs9SGMM0ZnLv8jCtY2iLNlhEihoFcXWIUpRAtdRMO7x3NaGfi0G+bnqTsO79LQl3qMRGosdOiV5y6pNz3BCTl7cOYKuMTDyjv2K2kVZDYLvRKW4KiGDd/4S6m9SniKp8rrPjLAYxlV4ovhAipC9e3zwvaMrRbDgEyPEb5bsket/DEycHMMXSfQiFAidDUbtMO7oNCdzdo/gYBqM9GF/jlPpPXg7v04WlsUM3eUcVgr1SN9FmbEkIkrhKE/9g1QOMDx3wFycCnJLd4nj44ShuaxJcRXUwVw7PQVNqdCIYz8m6DLh7s4dybEuksMi18SRRBH54ttLwmzP2ltMcWVFDUjtA6mEadCFcLi6JoFOE1wkvVYQk/neWqPWZSwj7MDYzy5EBhahJNhhwAVD7k4LQUnQa9AtamFHz9nMXmOH/b1nRVmOLFQx0NFuGiI8ndYgScyOaBTWy1vrmjJrjZlYHMGgAlRuJwa68NsDQ95O60B7bsqjzYhKXn6lkaFpw0nmbwRBytaQIqYxlFYDxDyIhh1JsDwifd//NHZdI1uCQpxlQ4lQkY1ObDkaiSVMclbCzUi0mcRWRiV+7PTYOhshJvfv35eZS7eh5kD4rlZzsDdhPbhgFyJiR41cFZWart60xAyP5eVvxQBs1k6sRiOxDuuhIYweLNyxFx6rlr1HT6XPTGpsfgCFVcWnjKvFHOwluXaLAZseZL2bn0qVcvx8f/q9k1mp10IDRTsxEKvRMNgPI/52CwF7GmWChTtj8tKacOaspDt7zl3CKsIYiATQEE4fjPihB59FMGxhwR54a02NrKhoyVzHyBoJMDjXWQWdoWxo8JqfXgO5kn2TB+0QGmUCHReE5XDfhez2S4ZzW/sR1DKUDW9jilyg1Rr4Wsxo2GvlVV81K8FgVp/cFOHNgT9lVnEFsgZe88KID+QCIKe3ThwcT3gRQi/OBYWV0nD4hHEWyEhqtNc+iuPL1YaQerEL+GHMj5UG4hMHx/uxQB9LUY28pm/P/WORXrs9eEde1irhdpyESppMcjqM6/EJgIvaa9rRUIpWb5VDfedz89ZorzV8fhyZg5CW1ANYqQ5ypZgkFM8e7K9TClwcQuiMyqINddlr6/lGF3Pw6yEkgQd1LQCjOowHMUmoJXsER5HSamVm4Sa5eOXX7L9cx2p09bEz38kMdQu0hpDqSXLN2YP9Oc63BztKWEINB3L71h+rJfdPdTtC4oDecPQyJglhslIg1Dw+jPfsBwkEkUDaDplXUinU7qTOlclGl9+4NSBz3FsM40oQetMxUajRnDgtGs3+vhqZYdsoX124PDHBj9eYCG29p5EIm+C1XfACJgvFzInLmv4Ng3TM7BeABBwV4q9rz+7gkUtLJsLirUh1e9ic7Bk5oKwxheQzvtcRencEIaywLoTPN4b02vUbMtu9GYmAU1QpJg2RHMK6NpYC7/mc7/1RyVPXy7kff7Y2hM83hrT7a5yi1A3GpEoptqwykFjbkALv+dzH77qNUnuoZ/JZmKk9y9Id3IhReAOob6E9JpnyEVK853NXhSyvajAK6ZT+cZds1MnA7UGZF8AnuIa9VMeJvRSaC+02r7zHc75nNk+qkObaqJezP1yRvOIPkaXYGUpBJrjLvOKez/l+SnU1Vkv+dxY9eAwnqvUIHU7uwah5xT2f8/20/Tk8ulE31NuyKujKhfrmrTSuqyIxo15Ni67Ga9TbLejtFR0lRF0nC8rDcufu3ampV7k2eqb/t2syz/WeXL1+M/1p50W0oeHh/hfN4b/d/gYnm2n24iputAAAAABJRU5ErkJggg=="}),$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){(t=t||{}).highlight;var e=this.symbol,r=e.allowOverlap,n=e.color,i=e.pattern,o=e.opacity,s=e.size,a=e.rotate,u={paint:{"icon-color":n,"icon-opacity":o},layout:{"icon-allow-overlap":r,"icon-offset":[e.xoffset,e.yoffset],"icon-size":s,"icon-rotate":a}};return i&&(u.layout["icon-image"]=i),u}},{key:"toCesiumStyle",value:function(t,e,r){var n,i=t.field,o=void 0===i?"":i,s=t.scale,a=void 0===s?1:s,u=t.backgroundColor,l=void 0===u?"#FFFFFF":u,c=t.backgroundOpacity,h=void 0===c?0:c,f=t.color,p=void 0===f?"#FFFFFF":f,d=t.opacity,y=void 0===d?1:d,v=t.outlineColor,g=void 0===v?"#FFFFFF":v,m=t.outlineOpacity,_=void 0===m?1:m,x=t.outlineWidth,b=void 0===x?0:x,S=t.xOffset,C=void 0===S?0:S,w=t.yOffset,I=void 0===w?0:w,P=t.text,E=t.show,M=void 0===E||E,L=t.url,N=void 0===L?"":L,T=t.rotation,O=void 0===T?0:T,R=t.imageScale,A=void 0===R?1:R,F=t.width,D=t.height;o&&e.properties&&e.properties[o]&&(n=e.properties[o]),P&&(n=P);var k={show:M,image:N,rotation:O,scale:A};return F&&(k.width=F),D&&(k.height=D),{label:{show:M,text:n,scale:a,showBackground:!0,fillColor:r.Color.fromCssColorString(p).withAlpha(y),outlineColor:r.Color.fromCssColorString(g).withAlpha(_),outlineWidth:b,backgroundColor:r.Color.fromCssColorString(l).withAlpha(h),pixelOffset:new r.Cartesian2(C,-1*I)},billboard:k}}}]),r}(Zt);function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.MarkerStyle=ie;var se=function(t){Kt(r,t);var e=oe(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.scale,s=void 0===o?1:o,a=i.url,u=i.show,l=void 0===u||u;return n.type="model",n.url=a,n.scale=s,n.show=l,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(){}},{key:"toCesiumStyle",value:function(t){var e=this.url,r=this.scale,n=this.show;return{uri:e,show:void 0===n||n,scale:r}}}]),r}(Zt);function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}function ue(t){for(var e,r=t.length,n=new Array(r),i=0;i<r;i++)48<=(e=t.charCodeAt(i))&&e<58?e-=48:e=(223&e)-65+10,n[i]=e;return n.reduce(function(t,e){return t=16*t+e},0)}function le(t,e){var r;if("string"==typeof t)if(7!==t.length&&4!==t.length||0!==t.indexOf("#")){if(0===t.indexOf("rgba")){var n=t.split("rgba(")[1];n=n.split(")")[0],r=[Number(n.split(",")[0]),Number(n.split(",")[1]),Number(n.split(",")[2]),Math.floor(Number(n.split(",")[3])/1*255)]}else if(0===t.indexOf("rgb")){var i=t.split("rgb(")[1];i=i.split(")")[0],r=[Number(i.split(",")[0]),Number(i.split(",")[1]),Number(i.split(",")[2]),Math.floor(e/1*255)]}}else{var o=t.split("#")[0].substr(0,2);o=ue(o);var s=t.split("#")[0].substr(2,2);s=ue(s);var a=t.split("#")[0].substr(4,2);r=[o,s,a=ue(a),Math.floor(e/1*255)]}else t instanceof Array&&4===t.length&&(r=t);return r}Xt.style.ModelStyle=se;var ce=function(t){Kt(r,t);var e=ae(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.show,s=i.width,a=i.color,u=i.opacity,l=i.outlineColor,c=i.outlineOpacity,h=i.outlineWidth;return n.type="track",n.show=o,n.width=s,n.color=a,n.opacity=u,n.outlineColor=l,n.outlineWidth=h,n.outlineOpacity=c,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(){}},{key:"toCesiumStyle",value:function(t){var e,r,n=this.show,i=void 0===n||n,o=this.width,s=void 0===o?8:o,a=this.color,u=void 0===a?[255,0,255]:a,l=this.opacity,c=void 0===l?1:l,h=this.outlineColor,f=void 0===h?[0,255,255]:h,p=this.outlineWidth,d=void 0===p?5:p,y=this.outlineOpacity,v=void 0===y?1:y;return(e=le(u,c))||(e=[255,0,255,255]),(r=le(f,v))||(r=[0,255,255,255]),{show:i,material:{polylineOutline:{color:{rgba:e},outlineColor:{rgba:r},outlineWidth:d}},width:s,leadTime:0,trailTime:1e3,resolution:5}}}]),r}(Zt);function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.TrackStyle=ce;var fe=function(t){Kt(r,t);var e=he(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.width,s=void 0===o?1:o,a=i.dashArray,u=i.cap,l=void 0===u?W.butt:u,c=i.join,h=void 0===c?X.miter:c,f=i.shadow,p=i.symbol;return n.type="line",n.width=s,n.dashArray=a,n.cap=l,n.join=h,n.shadowStyle=f||new Yt,n.symbolStyle=p||new Ht,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){var e=(t=t||{}).highlight,r=void 0!==e&&e,n=this.color,i=this.opacity,o=this.width,s=this.cap,a=this.join,u=this.blur,l=this.dashArray,c=this.shadowStyle,h=this.symbolStyle;c&&(o+=u=c.blur);var f={filter:["==","$type","LineString"],layout:{"line-cap":s,"line-join":a},paint:{"line-width":o,"line-color":n,"line-opacity":i,"line-blur":u}};return h&&h.symbol&&(f.paint["line-pattern"]=h.symbol),l&&(f.paint["line-dasharray"]=l),r&&(f.paint["line-width"]=["case",["boolean",["feature-state","hover"],!1],o,0]),f}},{key:"toCesiumStyle",value:function(t){var e,r=this.dashArray,n=this.shadowStyle,i=this.color,o=this.opacity,s=this.width;return r?e=new t.PolylineDashMaterialProperty({color:t.Color.fromCssColorString(i)}):n&&n.blur>0?(s+=n.blur,e=new t.PolylineGlowMaterialProperty({glowPower:.2,taperPower:.5,color:t.Color.fromCssColorString(n.color)})):e=new t.ColorMaterialProperty(t.Color.fromCssColorString(i).withAlpha(o)),{material:e,width:s}}}]),r}(Zt);function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.LineStyle=fe;var de=function(t){Kt(r,t);var e=pe(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.outlineWidth,s=void 0===o?1:o,a=i.outlineColor,u=void 0===a?"#FFFFFF":a,l=i.outlineDashArray,c=void 0===l?"line":l,h=i.offsetX,f=void 0===h?0:h,p=i.offsetY,d=void 0===p?0:p,y=i.shadow,v=i.symbol,m=i.outlineSymbolStyle;return n.type="fill",n.outlineWidth=s,n.outlineColor=u,n.outlineDashArray=c,n.offsetX=f,n.offsetY=d,n.shadowStyle=y||new Yt,n.symbolStyle=v||new Ht,n.outlineSymbolStyle=m||new Ht,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){var e=(t=t||{}).highlight,r=void 0!==e&&e,n=this.color,i=this.opacity,o=this.outlineColor,s=this.symbolStyle,a=this.offsetX,u=this.offsetY,l={filter:["==","$type","Polygon"],paint:{"fill-antialias":!0,"fill-color":n,"fill-opacity":i,"fill-outline-color":o}};return s&&s.symbol&&(l.paint["fill-pattern"]=s.symbol),(a||u)&&(l.paint["fill-translate"]=[a,u]),r&&(l.paint["fill-color"]=["case",["boolean",["feature-state","hover"],!1],n,"rgba(0,0,0,0)"],l.paint["fill-outline-color"]=["case",["boolean",["feature-state","hover"],!1],o,"rgba(0,0,0,0)"]),l}},{key:"toCesiumStyle",value:function(t){var e=this.color,r=this.opacity,n=this.outlineColor;return{material:new t.ColorMaterialProperty(t.Color.fromCssColorString(e).withAlpha(r)),outlineColor:new t.Color.fromCssColorString(n)}}}]),r}(Zt);function ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.FillStyle=de;var ve=function(t){Kt(r,t);var e=ye(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.color,s=void 0===o?"#FFFFFF":o,a=i.opacity,u=void 0===a?1:a,l=i.symbol,c=i.castShadows,h=void 0===c||c,f=i.edges,p=i.size,d=void 0===p?1:p,y=i.material;return n.type="extrude",n.color=s,n.opacity=u,n.symbolStyle=l||new Ht,n.castShadows=h,n.edges=f,n.material=y||s,n.size=d,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){var e=(t=t||{}).highlight,r=void 0!==e&&e,n=this.material,i=this.size,o=this.opacity,s=this.symbolStyle,a=s.pattern,u={filter:["==","$type","Polygon"],paint:{"fill-extrusion-base":0,"fill-extrusion-color":n,"fill-extrusion-height":i,"fill-extrusion-opacity":o,"fill-extrusion-translate":[s.xoffset,s.yoffset],"fill-extrusion-translate-anchor":"map","fill-extrusion-vertical-gradient":!0}};return s&&a&&(u.paint["fill-extrusion-pattern"]=a),r&&(u.paint["fill-extrusion-color"]=["case",["boolean",["feature-state","hover"],!1],n,"rgba(0,0,0,0)"],u.paint["fill-extrusion-base"]=["case",["boolean",["feature-state","hover"],!1],100,0]),u}}]),r}(Zt);Xt.style.ExtrudeStyle=ve;var ge=_(function t(e){g(this,t);var r=e||{},n=r.family,i=void 0===n?"黑体":n,o=r.size,s=void 0===o?12:o,a=r.style,u=void 0===a?"normal":a,l=r.weight,c=void 0===l?"normal":l;this.family=i,this.size=s,this.style=u,this.weight=c,$(this,r)});function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Xt.style.FontStyle=ge;var _e=function(t){Kt(r,t);var e=me(r);function r(t){var n;g(this,r),n=e.call(this);var i=t||{},o=i.angle,s=void 0===o?0:o,a=i.allowOverlap,u=void 0!==a&&a,l=i.backgroundColor,c=i.borderLineColor,h=i.borderLineSize,f=i.color,p=void 0===f?"#000000":f,d=i.font,y=i.haloColor,v=void 0===y?"#000000":y,m=i.haloSize,_=void 0===m?0:m,x=i.horizontalAlignment,b=void 0===x?z:x,S=i.kerning,C=void 0===S||S,w=i.lineHeight,I=void 0===w?1:w,P=i.lineWidth,E=void 0===P?192:P,M=i.rotated,L=void 0!==M&&M,N=i.text,T=void 0===N?"":N,O=(i.type,i.verticalAlignment),R=void 0===O?V:O,A=i.xoffset,F=void 0===A?0:A,D=i.yoffset,k=void 0===D?0:D;return n.allowOverlap=u,n.angle=s,n.backgroundColor=l,n.borderLineColor=c,n.borderLineSize=h,n.color=p,n.font=d||new ge,n.haloColor=v,n.haloSize=_,n.horizontalAlignment=b,n.kerning=C,n.lineHeight=I,n.lineWidth=E,n.rotated=L,n.text=T,n.type="text",n.verticalAlignment=R,n.xoffset=F,n.yoffset=k,$(Qt(n),i),n}return _(r,[{key:"toMapboxStyle",value:function(t){var e=(t=t||{}).highlight,r=void 0!==e&&e,n=this.angle,i=this.allowOverlap,o=this.color,s=this.font,a=s.family,u=s.size,l=(s.style,s.weight,this.backgroundColor,this.borderLineColor,this.borderLineSize,this.haloColor),c=this.haloSize,h=(this.horizontalAlignment,this.kerning,this.lineHeight),f=this.lineWidth,p=(this.rotated,this.text),d=(this.type,this.verticalAlignment,{paint:{"text-color":o,"text-halo-color":l,"text-halo-width":c},layout:{"text-rotate":n,"text-font":[a,a],"text-line-height":h,"text-max-width":f,"text-field":p,"text-offset":[this.xoffset,this.yoffset],"text-size":u,"text-allow-overlap":i}});if(r){d.paint["text-color"]=["case",["boolean",["feature-state","hover"],!1],o,"rgba(0, 0, 0, 0)"]}return d}},{key:"toCesiumStyle",value:function(t){var e=this.color,r=void 0===e?"#FFFFFF":e,n=this.opacity,i=void 0===n?1:n,o=this.radius,s=this.outlineColor,a=void 0===s?"#000000":s,u=this.outlineWidth,l=void 0===u?1:u,c=this.outlineOpacity,h=void 0===c?1:c,f=this.show;return{show:void 0===f||f,pixelSize:o,color:t.Color.fromCssColorString(r).withAlpha(i),outlineWidth:l,outlineColor:t.Color.fromCssColorString(a).withAlpha(h)}}}]),r}(Zt);Xt.style.TextStyle=_e;var xe,be=[16,8,4,2,1],Se="0123456789bcdefghjkmnpqrstuvwxyz",Ce={right:{even:"bc01fg45238967deuvhjyznpkmstqrwx"},left:{even:"238967debc01fg45kmstqrwxuvhjyznp"},top:{even:"p0r21436x8zb9dcf5h7kjnmqesgutwvy"},bottom:{even:"14365h7k9dcfesgujnmqp0r2twvyx8zb"}},we={right:{even:"bcfguvyz"},left:{even:"0145hjnp"},top:{even:"prxz"},bottom:{even:"028b"}};function Ie(t,e,r){e&r?t[0]=(t[0]+t[1])/2:t[1]=(t[0]+t[1])/2}function Pe(t){var e=1,r=[],n=[];r[0]=-90,r[1]=90,n[0]=-180,n[1]=180,90,180;for(var i=0;i<t.length;i++)for(var o=t[i],s=Se.indexOf(o),a=0;a<5;a++){var u=be[a];e?(2,Ie(n,s,u)):(2,Ie(r,s,u)),e=!e}return r[2]=(r[0]+r[1])/2,n[2]=(n[0]+n[1])/2,{latitude:r,longitude:n}}function Ee(t,e){var r=1,n=[],i=[],o=0,s=0;for(xe="",n[0]=-90,n[1]=90,i[0]=-180,i[1]=180;xe.length<12;){if(r){var a=(i[0]+i[1])/2;e>a?(s|=be[o],i[0]=a):i[1]=a}else{var u=(n[0]+n[1])/2;t>u?(s|=be[o],n[0]=u):n[1]=u}r=!r,o<4?o++:(xe+=Se[s],o=0,s=0)}return xe}function Me(t){var e=1,r=[],n=[];r[0]=-90,r[1]=90,n[0]=-180,n[1]=180,90,180;for(var i=0;i<t.length;i++)for(var o=t[i],s=Se.indexOf(o),a=0;a<5;a++){var u=be[a];e?(2,Ie(n,s,u)):(2,Ie(r,s,u)),e=!e}r[2]=(r[0]+r[1])/2,n[2]=(n[0]+n[1])/2;var l=[n[0],r[1]];return[[l,[n[1],r[1]],[n[1],r[0]],[n[0],r[0]],l]]}Ce.bottom.odd=Ce.left.even,Ce.top.odd=Ce.right.even,Ce.left.odd=Ce.bottom.even,Ce.right.odd=Ce.top.even,we.bottom.odd=we.left.even,we.top.odd=we.right.even,we.left.odd=we.bottom.even,we.right.odd=we.top.even;var Le={WGS84:[{id:4326,name:"WGS1984_度",type:0,strProject:"+proj=longlat +datum=WGS84 +no_defs"}],"Web墨卡托":[{id:3857,name:"Web墨卡托_WGS1984",type:1,strProject:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"}],"经纬度西安80":[{id:4610,name:"地理坐标系(西安)_度",type:0,strProject:"+proj=longlat +a=6378140 +b=6356755.288157528 +units=degrees +no_defs"}],"经纬度北京54":[{id:4214,name:"地理坐标系(北京)_度",type:0,strProject:"+proj=longlat +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +no_defs"}],"经纬度中国2000":[{id:4490,name:"中国2000国家大地坐标系_度",type:0,strProject:"+proj=longlat +ellps=GRS80 +units=degrees +no_defs"}],"高斯西安80":[{id:2348,name:"高斯大地坐标系_西安80_23带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2347,name:"高斯大地坐标系_西安80_22带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2346,name:"高斯大地坐标系_西安80_21带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2345,name:"高斯大地坐标系_西安80_20带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2344,name:"高斯大地坐标系_西安80_19带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2343,name:"高斯大地坐标系_西安80_18带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2342,name:"高斯大地坐标系_西安80_17带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2341,name:"高斯大地坐标系_西安80_16带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2340,name:"高斯大地坐标系_西安80_15带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2339,name:"高斯大地坐标系_西安80_14带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2338,name:"高斯大地坐标系_西安80_13带6_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2390,name:"高斯大地坐标系_西安80_45带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2389,name:"高斯大地坐标系_西安80_44带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2388,name:"高斯大地坐标系_西安80_43带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2387,name:"高斯大地坐标系_西安80_42带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2386,name:"高斯大地坐标系_西安80_41带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2385,name:"高斯大地坐标系_西安80_40带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2384,name:"高斯大地坐标系_西安80_39带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2383,name:"高斯大地坐标系_西安80_38带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2382,name:"高斯大地坐标系_西安80_37带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2381,name:"高斯大地坐标系_西安80_36带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2380,name:"高斯大地坐标系_西安80_35带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2379,name:"高斯大地坐标系_西安80_34带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2378,name:"高斯大地坐标系_西安80_33带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2377,name:"高斯大地坐标系_西安80_32带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2376,name:"高斯大地坐标系_西安80_31带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2375,name:"高斯大地坐标系_西安80_30带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2374,name:"高斯大地坐标系_西安80_29带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2373,name:"高斯大地坐标系_西安80_28带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2372,name:"高斯大地坐标系_西安80_27带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2371,name:"高斯大地坐标系_西安80_26带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2370,name:"高斯大地坐标系_西安80_25带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2327,name:"高斯大地坐标系_西安80_13带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2328,name:"高斯大地坐标系_西安80_14带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2329,name:"高斯大地坐标系_西安80_15带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2330,name:"高斯大地坐标系_西安80_16带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2331,name:"高斯大地坐标系_西安80_17带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2332,name:"高斯大地坐标系_西安80_18带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2333,name:"高斯大地坐标系_西安80_19带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2334,name:"高斯大地坐标系_西安80_20带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2335,name:"高斯大地坐标系_西安80_21带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2336,name:"高斯大地坐标系_西安80_22带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2337,name:"高斯大地坐标系_西安80_23带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2403,name:"高斯大地坐标系_西安80_27带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2404,name:"高斯大地坐标系_西安80_28带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2405,name:"高斯大地坐标系_西安80_29带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2406,name:"高斯大地坐标系_西安80_30带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2407,name:"高斯大地坐标系_西安80_31带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2408,name:"高斯大地坐标系_西安80_32带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2409,name:"高斯大地坐标系_西安80_33带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2410,name:"高斯大地坐标系_西安80_34带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2411,name:"高斯大地坐标系_西安80_35带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2412,name:"高斯大地坐标系_西安80_36带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2413,name:"高斯大地坐标系_西安80_37带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2414,name:"高斯大地坐标系_西安80_38带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2415,name:"高斯大地坐标系_西安80_39带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2416,name:"高斯大地坐标系_西安80_40带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2417,name:"高斯大地坐标系_西安80_41带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2418,name:"高斯大地坐标系_西安80_42带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2419,name:"高斯大地坐标系_西安80_43带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2420,name:"高斯大地坐标系_西安80_44带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2421,name:"高斯大地坐标系_西安80_45带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2349,name:"高斯大地坐标系_西安80_25带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2350,name:"高斯大地坐标系_西安80_26带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2351,name:"高斯大地坐标系_西安80_27带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2352,name:"高斯大地坐标系_西安80_28带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2353,name:"高斯大地坐标系_西安80_29带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2354,name:"高斯大地坐标系_西安80_30带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2355,name:"高斯大地坐标系_西安80_31带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2356,name:"高斯大地坐标系_西安80_32带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2357,name:"高斯大地坐标系_西安80_33带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2358,name:"高斯大地坐标系_西安80_34带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2359,name:"高斯大地坐标系_西安80_35带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2360,name:"高斯大地坐标系_西安80_36带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2361,name:"高斯大地坐标系_西安80_37带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2362,name:"高斯大地坐标系_西安80_38带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2363,name:"高斯大地坐标系_西安80_39带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2364,name:"高斯大地坐标系_西安80_40带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2365,name:"高斯大地坐标系_西安80_41带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2366,name:"高斯大地坐标系_西安80_42带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2367,name:"高斯大地坐标系_西安80_43带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2368,name:"高斯大地坐标系_西安80_44带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"},{id:2369,name:"高斯大地坐标系_西安80_45带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"}],"高斯北京54":[{id:21413,name:"高斯大地坐标系_北京54_13带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21414,name:"高斯大地坐标系_北京54_14带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21415,name:"高斯大地坐标系_北京54_15带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21416,name:"高斯大地坐标系_北京54_16带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21417,name:"高斯大地坐标系_北京54_17带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21418,name:"高斯大地坐标系_北京54_18带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21419,name:"高斯大地坐标系_北京54_19带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21420,name:"高斯大地坐标系_北京54_20带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21421,name:"高斯大地坐标系_北京54_21带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21422,name:"高斯大地坐标系_北京54_22带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:21423,name:"高斯大地坐标系_北京54_23带6_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2431,name:"高斯大地坐标系_北京54_34带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2401,name:"高斯大地坐标系_北京54_25带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:2402,name:"高斯大地坐标系_北京54_26带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +units=m +no_defs"},{id:32646,name:"Beijing 1954 / 3-degree Gauss-Kruger CM 102E",type:1,strProject:"+proj=utm +zone=46 +datum=WGS84 +units=m +no_defs"}],"高斯中国2000":[{id:4502,name:"高斯大地坐标系_中国2000_13带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4503,name:"高斯大地坐标系_中国2000_14带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4504,name:"高斯大地坐标系_中国2000_15带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4505,name:"高斯大地坐标系_中国2000_16带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4506,name:"高斯大地坐标系_中国2000_17带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4507,name:"高斯大地坐标系_中国2000_18带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4508,name:"高斯大地坐标系_中国2000_19带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4509,name:"高斯大地坐标系_中国2000_20带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4510,name:"高斯大地坐标系_中国2000_21带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4511,name:"高斯大地坐标系_中国2000_22带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4512,name:"高斯大地坐标系_中国2000_23带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4513,name:"高斯大地坐标系_中国2000_25带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4514,name:"高斯大地坐标系_中国2000_26带6_北",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4515,name:"高斯大地坐标系_中国2000_27带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4516,name:"高斯大地坐标系_中国2000_28带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4517,name:"高斯大地坐标系_中国2000_29带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4518,name:"高斯大地坐标系_中国2000_30带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4519,name:"高斯大地坐标系_中国2000_31带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4520,name:"高斯大地坐标系_中国2000_32带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4521,name:"高斯大地坐标系_中国2000_33带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4522,name:"高斯大地坐标系_中国2000_34带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4523,name:"高斯大地坐标系_中国2000_35带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4524,name:"高斯大地坐标系_中国2000_36带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4525,name:"高斯大地坐标系_中国2000_37带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4526,name:"高斯大地坐标系_中国2000_38带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4527,name:"高斯大地坐标系_中国2000_39带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4528,name:"高斯大地坐标系_中国2000_40带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4529,name:"高斯大地坐标系_中国2000_41带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4530,name:"高斯大地坐标系_中国2000_42带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4531,name:"高斯大地坐标系_中国2000_43带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4532,name:"高斯大地坐标系_中国2000_44带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4533,name:"高斯大地坐标系_中国2000_45带3_北2",type:0,strProject:"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4546,name:"高斯大地坐标系_中国2000_37带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4547,name:"高斯大地坐标系_中国2000_38带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"},{id:4545,name:"高斯大地坐标系_中国2000_36带3_北",type:1,strProject:"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"}]};function Ne(t){if("string"==typeof t){var e,r=t.toUpperCase();if(r.indexOf("EPSG:")>=0)e=r.split("EPSG:");else if(r.indexOf("EPSG_")>=0)e=r.split("EPSG_");else{if(!(r.indexOf("EPSG")>=0))return parseInt(t,10);e=r.split("EPSG")}return e.length>=2?parseInt(e[1],10):4326}return t}var Te=o(4488),Oe=o.n(Te);function Re(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fe=Oe(),De=function(){function t(){g(this,t)}return _(t,null,[{key:"getProj4sCascader",value:function(){return Object.keys(Le).map(function(t){var e={value:t,label:t,children:[]};return e.children=Le[t].map(function(t){return{value:t.id,label:t.name}}),e})}},{key:"getProj4sDetail",value:function(t){for(var e="",r=0,n=Object.keys(Le);r<n.length;r++){var i,o=n[r],s=Re(Le[o]);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(a.id===t){e=a.strProject;break}}}catch(t){s.e(t)}finally{s.f()}if(""!==e)break}return e}},{key:"proj4TransformByEpsg",value:function(e,r,n){var i=Ne(e),o=Ne(r),s=t.getProj4sDetail(i),a=t.getProj4sDetail(o);return Fe(s,a).forward(n)}},{key:"proj4Transform",value:function(t,e,r){return Fe(t,e).forward(r)}}]),t}();var ke=function(t,e){$(this,void 0!==e?e:{}),this.Arcs=null!=t?t:null};Z.Object.AnyLine=ke;var je=function(t,e){this.ArcID=0,$(this,void 0!==e?e:{}),this.Dots=null!=t?t:null};Z.Object.Arc=je;var Be=function(t){var e=void 0!==t?t:{};$(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};Z.Object.CAttStruct=Be;var Ge,Ue=function(t,e,r){$(this,void 0!==r?r:{}),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};function qe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Z.Object.CAttDataRow=Ue;var ze={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};Z.Enum.XClsType=ze;var Ve={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};Z.Enum.VectClsType=Ve;var We={Unknown:0,Pnt:1,Lin:2,Reg:3};Z.Enum.FeatureType=We;var Xe={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};Z.Enum.FontShape=Xe;var He={Curved:0,Forward:1,Horizontal:2,Tangent:3};Z.Enum.LabelLinType=He;var Ye={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};Z.Enum.LabelRegType=Ye;var Ze={PntAnyDir:0,PntEightDir:1,PntOnFea:2};Z.Enum.LabelPntType=Ze;var Qe={Auto:0,NoRep:1,OnStep:2};Z.Enum.RepeatType=Qe;var Je={AutoSpread:0,Centralization:1,Decentralization:2};Z.Enum.LabelSpreadType=Je;var Ke={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};Z.Enum.LineConstrain=Ke;var $e={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};Z.Enum.EightDirType=$e;var tr={Reg:0,Arc:1,All:2};Z.Enum.ISShowArc=tr;var er=(qe(Ge={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},"SysModeMinDis","SysModeMinDis"),qe(Ge,"SysModeSysRecommend","SysModeSysRecommend"),Ge);Z.Enum.Net.NetAnalyType=er;var rr={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};Z.Enum.Net.NetElemType=rr;var nr={Adjust:0,NoAdjust:1};Z.Enum.Theme.CLinAdjustType=nr;var ir={Round:0,Square:1,Butt:2};Z.Enum.Theme.CLinHeadType=ir;var or={Round:0,Square:1,Butt:2};Z.Enum.Theme.CLinJointType=or;var sr={Byrule:0,Bypoint:1};Z.Enum.Theme.CLinStyleMakeType=sr;var ar={Unknown:0,UniqueTheme:1,RangeTheme:2};Z.Enum.Theme.CItemType=ar;var ur={Doc:"mapType",Tile:"tileType"};Z.Enum.Map.MapType=ur;var lr={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};Z.Enum.Map.LayerStatusType=lr;var cr=function(t){var e=void 0!==t?t:{};$(this,e),this.Ang=void 0!==e.Ang&&null!==e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!==e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!==e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!==e.PntType?e.PntType:0};Z.Object.LablePntInfo=cr;var hr=function(t){var e=void 0!==t?t:{};$(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!==e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!==e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!==e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!==e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!==e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!==e.SpreadType?e.SpreadType:null};Z.Object.LabelLinInfo=hr;var fr=function(t){var e=void 0!==t?t:{};$(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!==e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!==e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!==e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!==e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!==e.RegType?e.RegType:0};Z.Object.LabelRegInfo=fr;var pr=function(t){var e=void 0!==t?t:{};$(this,e),this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null};Z.Object.DynNoteLableType=pr;var dr=function(t){var e=void 0!==t?t:{};$(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:Xe.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0};Z.Object.CDynNoteInfo=dr;var yr=function(t){var e=void 0!==t?t:{};$(this,e),this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!==e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!==e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!==e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!==e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!==e.Yscale?e.Yscale:1};Z.Object.CLineInfo=yr;var vr=function(t){var e=void 0!==t?t:{};$(this,e),this.Angle=void 0!==e.Angle&&null!==e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!==e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!==e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!==e.SymWidth?e.SymWidth:1};Z.Object.CPointInfo=vr;var gr=function(t){var e=void 0!==t?t:{};$(this,e),this.EndColor=void 0!==e.EndColor&&null!==e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!==e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!==e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!==e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!==e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!==e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!==e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!==e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!==e.PatWidth?e.PatWidth:1};Z.Object.CRegionInfo=gr;var mr=function(t){var e=void 0!==t?t:{};$(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0};Z.Object.DynShowStyle=mr;var _r=function(t){var e=void 0!==t?t:{};$(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow};Z.Object.CDisplayStyle=_r;var xr=function(t){var e=void 0!==t?t:{};$(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};Z.Object.CDisplayStyleExtend=xr;var br=function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null};Z.Object.CGDBInfo=br;var Sr=function(){function t(e){g(this,t),$(this,e||{})}return _(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var r;return r=t.replace(/(^\s+)|(\s+$)/g,""),"g"===e.toLowerCase()&&(r=r.replace(/\s/g,"")),r}}]),t}();function Cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Tangram=Sr;var wr=function(t){Kt(r,t);var e=Cr(r);function r(t,n,i){var o;g(this,r);var s=i||{};return(o=e.call(this,s)).x=void 0!==t?t:null,o.y=void 0!==n?n:null,o.nearDis=void 0!==s.nearDis?parseFloat(s.nearDis):null,o.CLASS_NAME="Zondy.Object.Point2D",o}return _(r,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null===this.x||null===this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),r}(Sr);function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Object.Point2D=wr;var Pr=function(t){Kt(r,t);var e=Ir(r);function r(t,n,i){var o;g(this,r);var s=i||{};return(o=e.call(this,s)).point=null!=t?t:null,o.radious=null!=n?n:null,o}return _(r,[{key:"setByOL",value:function(t){if(null!=t){var e=t.getCenter(),r=t.getRadius();this.point=new Z.Object.Point2D(e[0],e[1]),this.radious=r}}},{key:"toString",value:function(){return null===this.point||0===this.point.length||null===this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),r}(Sr);function Er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Circle=Pr;var Mr=function(t){Kt(r,t);var e=Er(r);function r(t,n,i,o,s){var a;g(this,r);var u=s||{};return(a=e.call(this,u)).xmin=t,a.xmax=i,a.ymin=n,a.ymax=o,a}return _(r,[{key:"setByOL",value:function(t){null!=t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null===(e=e||{}).inclusive&&(e.inclusive=!0);var r=this,n=!1,i=r.xmin===t.xmax||r.xmax===t.xmin||r.ymax===t.ymin||r.ymin===t.ymax;if(e.inclusive||!i){var o=t.ymin>=r.ymin&&t.ymin<=r.ymax||r.ymin>=t.ymin&&r.ymin<=t.ymax,s=t.ymax>=r.ymin&&t.ymax<=r.ymax||r.ymax>t.ymin&&r.ymax<t.ymax,a=t.xmin>=r.xmin&&t.xmin<=r.xmax||r.xmin>=t.xmin&&r.xmin<=t.xmax,u=t.xmax>=r.xmin&&t.xmax<=r.xmax||r.xmax>=t.xmin&&r.xmax<=t.xmax;n=(o||s)&&(a||u)}return n}}]),r}(Sr);Zondy.Object.Rectangle=Mr;var Lr=function(){function t(e){g(this,t);var r=void 0!==e?e:{};$(this,r),this.GID=void 0!==r.GID&&null!==r.GID?r.GID:0}return _(t,[{key:"setGID",value:function(t){null!=t&&(this.GID=t)}}]),t}();function Nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.FeatureGraphicBase=Lr;var Tr=function(t){Kt(r,t);var e=Nr(r);function r(t,n,i){var o;g(this,r);var s=i||{};return o=e.call(this,s),null!=t&&null!=n&&(o.Dot=new wr(t,n)),o}return _(r,[{key:"setDot",value:function(t){this.Dot=null!=t?t:null}}]),r}(Lr);function Or(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.GPoint=Tr;var Rr=function(t){Kt(r,t);var e=Or(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).Line=null!=t?t:null,i}return _(r,[{key:"setLine",value:function(t){this.Line=null!=t?t:null}}]),r}(Lr);function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.GLine=Rr;var Fr=function(t){Kt(r,t);var e=Ar(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).Rings=null!=t&&Array.isArray(t)?t:null,i}return _(r,[{key:"setRings",value:function(t){this.Rings=null!=t?t:null}}]),r}(Lr);Z.Object.GRegion=Fr;var Dr=function(t){var e=void 0!==t?t:{};$(this,e),this.PntGeom=void 0!==e.PntGeom&&null!==e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!==e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!==e.RegGeom?e.RegGeom:null};Dr.prototype.setPntGeom=function(t){this.PntGeom=null!=t&&Array.isArray(t)?t:null},Dr.prototype.setLine=function(t){this.LinGeom=null!=t&&Array.isArray(t)?t:null},Dr.prototype.setRegGeom=function(t){this.RegGeom=null!=t&&Array.isArray(t)?t:null},Z.Object.FeatureGeometry=Dr;var kr=function(t){var e=void 0!==t?t:{};$(this,e),this.InfoType=void 0!==e.InfoType&&null!==e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null};Z.Object.WebGraphicsInfo=kr;var jr=function(t){var e=void 0!==t?t:{};$(this,e),this.AttValue=void 0!==e.AttValue&&null!==e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!==e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!==e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!==e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!==e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!==e.GraphicInfo?e.GraphicInfo:null};jr.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},jr.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new kr(this.GraphicInfo)},jr.prototype.getAttValueArray=function(){return this.AttValue},jr.prototype.getRectBound=function(){var t=this.bound;return null!==t?new Mr(t):t},jr.prototype.getGeometry=function(){return this.fGeom},jr.prototype.getFID=function(){return this.FID},jr.prototype.setAttValues=function(t){this.AttValue=t},jr.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new Mr(t)),t instanceof String&&(e=new Mr(t)),t instanceof Mr&&(e=t),t instanceof ol.extent&&(e=new Mr).setByOL(t),this.bound=e},jr.prototype.setFID=function(t){this.FID=t},jr.prototype.setFType=function(t){this.ftype=t},jr.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},Z.Object.Feature=jr;var Br=function(t){var e=void 0!==t?t:{};$(this,e),this.TotalCount=void 0!==e.TotalCount&&null!==e.TotalCount?e.TotalCount:0,this.AttStruct=void 0!==e.AttStruct&&null!==e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!==e.SFEleArray?e.SFEleArray:new Array};function Gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Br.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},Br.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},Br.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},Br.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof jr?e:new jr(this.SFEleArray[t])},Br.prototype.getAttType=function(t){var e;return null==this.AttStruct||null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},Br.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,r=0;r<e;r++)if(this.AttStruct.FldName[r]==t)return r;return null},Br.prototype.getAttNameByIndex=function(t){return null==this.AttStruct||null==this.AttStruct.FldName||this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},Z.Object.FeatureSet=Br;var Ur=function(t){Kt(r,t);var e=Gr(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).pointArr=null!=t&&Array.isArray(t)?t:new Array,i}return _(r,[{key:"setByOL",value:function(t){if(null!=t)for(var e=t.getLinearRing(0).getCoordinates(),r=e.length,n=0;n<r;n++)this.pointArr[n]=new wr(e[n][0],e[n][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),r}(Sr);function qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Object.Polygon=Ur;var zr=function(t){Kt(r,t);var e=qr(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).polygonArr=null!=t&&Array.isArray(t)?t:new Array,i}return _(r,[{key:"setByOL",value:function(t){if(null!=t){this.polygonArr=[];for(var e=t.getLinearRingCount(),r=t.getLinearRings(),n=0;n<e;n++){for(var i=r[n].getCoordinates(),o=i.length,s=[],a=0;a<o;a++)s[a]=new wr(i[a][0],i[a][1]);this.polygonArr[n]=new Ur(s)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null===this.polygonArr||0===this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),r}(Sr);function Vr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Object.MultiPolygon=zr;var Wr=function(t){Kt(r,t);var e=Vr(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).nearDis=void 0!==o.nearDis&&null!==o.nearDis?parseFloat(o.nearDis):null,i.pointArr=null!=t&&Array.isArray(t)?t:new Array,i}return _(r,[{key:"setByOL",value:function(t){if(null!=t)for(var e=t.getCoordinates(),r=e.length,n=0;n<r;n++)this.pointArr[n]=new wr(e[n][0],e[n][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!==this.nearDis&&(t+=";"+this.nearDis),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),r}(Sr);Zondy.Object.PolyLine=Wr;var Xr=function(t){var e=void 0!==t?t:{};$(this,e),this.clsType=void 0!==e.clsType?e.clsType:Ve.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null};Z.Object.VectCls=Xr;var Hr=function(t,e,r,n){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},$(this,n),null!=r)for(var i=0,o=r.length;i<o;i++)this.addEventType(r[i])};Hr.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},Hr.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},Hr.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},Hr.prototype.register=function(t,e,r,n){if(t in Hr&&!this.extensions[t]&&(this.extensions[t]=new Hr[t](this)),null!=r&&-1!==ut(this.eventTypes,t)){null==e&&(e=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var o={obj:e,func:r};n?(i.splice(this.extensionCount[t],0,o),"object"===Y(n)&&n.extension&&this.extensionCount[t]++):i.push(o)}},Hr.prototype.registerPriority=function(t,e,r){this.register(t,e,r,!0)},Hr.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},Hr.prototype.unregister=function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var i=0,o=n.length;i<o;i++)if(n[i].obj===e&&n[i].func===r){n.splice(i,1);break}},Hr.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},Hr.prototype.triggerEvent=function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var i=0,o=(r=r.slice()).length;i<o;i++){var s=r[i];if(null!=(n=s.func.apply(s.obj,[e.result]))&&0==n)break}return n}};var Yr=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),$(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,i=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),o=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,i=t.length;n<i;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};Yr.prototype.read=function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=r),r},Yr.prototype.write=function(t,e){this.pretty=!!e;var r=null,n=Y(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return r},Yr.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},Yr.prototype.writeNewline=function(){return this.pretty?this.newline:""},Yr.prototype.writeSpace=function(){return this.pretty?this.space:""},Zondy.Service.JSONFormat=Yr;o(1107),o(2693);var Zr=window.fetch,Qr=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,Jr=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,Kr=Zondy.FetchRequest={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":default:return this._get(e,r,n);case"POST":return this._post(e,r,n);case"PUT":return this._put(e,r,n);case"DELETE":return this._delete(e,r,n)}},_get:function(t,e,r){r=r||{};return t=this._processUrl(t,r),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,r):this._fetch(t,e,r,"GET")},_delete:function(t,e,r){r=r||{};var n="DELETE";return t=this._processUrl(t,r),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&Qr?this._fetch(t,e,r,n):this._postSimulatie(n,t.substring(0,t.indexOf("?")-1),e,r)},_post:function(t,e,r){return r=r||{},this._fetch(this._processUrl(t,r),e,r,"POST")},_put:function(t,e,r){return r=r||{},this._fetch(this._processUrl(t,r),e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,i=t.length;n<i;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){var i=e.indexOf("?")>-1?"&":"?";return e+=i+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this._post(e,r,n)},_processUrl:function(t,e){return this._isMVTRequest(t)||e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,Zr(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:Jr}).then(function(t){return t})):Zr(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:Jr}).then(function(t){return t}).catch(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n=t[r];if(null!=n&&"function"!=typeof n){var i;if("object"===Y(n)&&n.constructor===Array){for(var o,s=[],a=0,u=n.length;a<u;a++)o=n[a],s.push(encodeURIComponent(null==o?"":o));i="["+s.join(",")+"]"}else i=encodeURIComponent(n);e.push(encodeURIComponent(r)+"="+i)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};Zondy.Service.FetchRequest=Kr,Zondy.Service.CORS=Qr,Zondy.Service.RequestTimeout=Jr;var $r=function(){function t(e,r){g(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,tt(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),(r=r||{})&&$(this,r),n.isInTheSameDomain=xt(n.url),n.events=new Hr(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners)}return _(t,[{key:"destroy",value:function(){var t=this;tt(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){var e=this;e.totalTimes>0?(e.totalTimes--,e.ajaxPolling()):e._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(r,r.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=xt(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=St(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=t=St(t);this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=pt(t.url,ht(t.params||{}))),t.params=t.data),Kr.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(e){var r;return r=e.text?function(){return e.text()}:function(){return e.json()},200==e.status?new Promise(function(n){r().then(function(e){if(e){var r=null;if("string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(r=(new Yr).read(e)):(r={},"true"===e.toLowerCase()?r.succeed=!0:(r.succeed=!1,r.error=!0)),(!r&&isNaN(r)||r.error)&&(r=r&&r.error?{error:r.error}:{error:!0}),r.error)(t.scope?Et(t.failure,t.scope):t.failure)(r);else isNaN(r)||(r={value:r}),"string"==typeof r&&(r={value:r}),"[object Array]"!==Object.prototype.toString.call(r)?r.succeed=void 0===r.succeed||r.succeed:r={value:r,succeed:!0},(t.scope?Et(t.success,t.scope):t.success)(r)}}),n(e.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)}):new Promise(function(n){r().then(function(e){if(e){var r=null;"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(r=(new Yr).read(e)):(r={}).succeed=!1,(!r&&isNaN(r)||!r.success)&&(r={succeed:!1}),(t.scope?Et(t.failure,t.scope):t.failure)(r)}}),n(e.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}).catch(function(e){(t.scope?Et(t.failure,t.scope):t.failure)({error:!0,value:{}})}).then(function(t,e){})}}]),t}();function tn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}function en(){return en="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=tn(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},en.apply(this,arguments)}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CommonServiceBase=$r;var nn=function(t){Kt(r,t);var e=rn(r);function r(t,n){var i;return g(this,r),n=n||{},(i=e.call(this,t,n)).CLASS_NAME="Zondy.IgsServiceBase",i}return _(r,[{key:"destroy",value:function(){en(te(r.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){var e=this;e.request({method:t&&t.method?t.method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){var e=this;(t=St(t)).succeed?e.events&&e.events.triggerEvent("processCompleted",{result:t}):e.events&&e.events.triggerEvent("processFailed",{result:t})}}]),r}($r);Zondy.Service.IgsServiceBase=nn;const on={Events:Hr,CommonServiceBase:$r,CORS:Qr,RequestTimeout:Jr,FetchRequest:Kr,IgsServiceBase:nn,JSONFormat:Yr};var sn=function(t){var e=null!=t?t:{};this.IsClipLine=null==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=null!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=null!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=null!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=null!=e.MaxAngle?e.MaxAngle:90,this.MinDist=null!=e.MinDist?e.MinDist:10,this.IsAbs=null!=e.IsAbs&&e.IsAbs,this.IsComma=null!=e.IsComma&&e.IsComma,this.DigitNum=null!=e.DigitNum?e.DigitNum:0,this.FormatNo=null!=e.FormatNo?e.FormatNo:0,this.LogFlag=null!=e.LogFlag?e.LogFlag:0,this.Prefix=null!=e.Prefix?e.Prefix:"",this.Suffix=null!=e.Suffix?e.Suffix:"",this.ColorNo=null!=e.ColorNo?e.ColorNo:0,this.FixSize=null!=e.FixSize?e.FixSize:.01,this.FontNo=null!=e.FontNo?e.FontNo:0};Z.Object.ContourAnalyse.ContourNoteParam=sn;var an=function(t){var e=void 0!==t?t:{};this.XScale=void 0!==e.XScale?e.XScale:2,this.YScale=void 0!==e.YScale?e.YScale:10,this.LineType=void 0!==e.LineType?e.LineType:0,this.SubLineType=void 0!==e.SubLineType?e.SubLineType:0};Z.Object.ContourAnalyse.SlopLineParam=an;var un=function(t){var e=null!=t?t:{};this.PatID=null!=e.PatID?e.PatID:0,this.FillMode=null!=e.FillMode?e.FillMode:0,this.FillColor=null!=e.FillColor?e.FillColor:1,this.PatHeight=null!=e.PatHeight?e.PatHeight:1,this.PatWidth=null!=e.PatWidth?e.PatWidth:1,this.PatAngle=null!=e.PatAngle?e.PatAngle:1,this.PatColor=null!=e.PatColor?e.PatColor:1,this.OutPenWidth=null!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=null!=e.OverMethod?e.OverMethod:0};Z.Object.ContourAnalyse.ContourRegionInfo=un;var ln=function(t){var e=null!=t?t:{};this.ZValue=null!=e.ZValue?e.ZValue:1,this.LineInfo=null!=e.LineInfo?e.LineInfo:null,this.RegInfo=null!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=null!=e.IsOutputNote&&e.IsOutputNote};Z.Object.ContourAnalyse.ContourZValue=ln;var cn=function(t){var e=null!=t?t:{};this.IsSmoothLine=void 0!==e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!==e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!==e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!==e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!==e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!==e.MapWay?e.MapWay:1,this.FrameWidth=void 0!==e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!==e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!==e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!==e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!==e.NoteParam?e.NoteParam:new Z.Object.ContourAnalyse.ContourNoteParam,this.SlopLineParam=void 0!==e.SlopLineParam?e.SlopLineParam:new Z.Object.ContourAnalyse.SlopLineParam,this.ZValues=void 0!==e.ZValues?e.ZValues:new Z.Object.ContourAnalyse.ContourZValue};Z.Object.ContourAnalyse.ContourParam=cn;var hn=function(t){var e=void 0!==t?t:{};this.SfClsURL=void 0!==e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.XCellNum=void 0!==e.XCellNum?e.XCellNum:200,this.Bound=void 0!==e.Bound?e.Bound:null,this.CalN=void 0!==e.CalN?e.CalN:null,this.CalM=void 0!==e.CalM?e.CalM:null,this.bIsCalInValidCtrlPnt=void 0!==e.bIsCalInValidCtrlPnt&&e.bIsCalInValidCtrlPnt,this.nYCtrlNum=void 0!==e.nYCtrlNum?e.nYCtrlNum:null,this.nXCtrlNum=void 0!==e.nXCtrlNum?e.nXCtrlNum:null,this.nLayerNum=void 0!==e.nLayerNum?e.nLayerNum:null};Z.Object.ContourAnalyse.MeshingParam=hn;var fn=function(t){var e=void 0!==t?t:{};$(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};Z.Object.NetAnalyse=fn;var pn=function(){function t(e){g(this,t),$(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null,this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:""}return _(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(Z.Util.isArray(t.ip))for(var r=0;r<t.ip.length;r++){e=new Array;var n=null;n=tt(t.port)?void 0!==t.port[r]?t.port[r]:"6163":void 0!==t.port?t.port:"6163";var i=null;i=tt(t.partUrl)?void 0!==t.partUrl[r]?t.partUrl[r]:null:void 0!==t.partUrl?t.partUrl:null,""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip[r]+":"+n:t.domainStr=t.domain,e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+i).trim()))}else""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port:t.domainStr=t.domain,e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();function dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ServiceBase=pn;var yn=function(t){Kt(r,t);var e=dn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,n.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,n.analyTp=void 0!==i.analyTp?i.analyTp:"UserMode",n.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",n.outFormat=void 0!==i.outFormat?i.outFormat:"JSON",n.elementType=void 0!==i.elementType?i.elementType:2,n.nearDis=void 0!==i.nearDis?i.nearDis:.001,n.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,n.roadName=void 0!==i.roadName?i.roadName:"name",n.baseUrl="igs/rest/netAnaly",n}return _(r,[{key:"getNetInfo",value:function(t,e,r,n){null!=t&&null!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"addNetFlag",value:function(t,e,r,n,i){var o={};null!=n&&"POST"==n.toUpperCase()?(o.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var s=this.getFullUrl(),a=new nn(s,{eventListeners:{scope:this,processCompleted:e,processFailed:r}});null!=n&&"POST"==n.toUpperCase()?a.processAsync({method:"POST",data:JSON.stringify(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):a.processAsync()}},{key:"netAnalyse",value:function(t,e,r,n){this.partUrl="netAnalyse";var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,r,n){this.partUrl="comNetAnalyse";var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,r,n){this.partUrl="pluNetAnalyse";var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(pn);Z.Service.NetAnalysisExtent=yn;var vn={g3dNone:0,g3dVectorLayer:1,g3dModelLayer:2,g3dTerrainLayer:3,g3dLabelLayer:4,g3dCloudLayer:5,g3dPanoramaLayer:6,type2DMapRefLayer:7,g3dServerLayer:8,g3dGroupLayer:9,g3dCacheLayer:10,g3dPointCloudLayer:11,g3dGridModelLayer:12},gn={UnKnow:"UnKnow",Vector:"Vector",TiltPhotography:"TiltPhotography",Model:"Model",BIM:"BIM",PointCloud:"PointCloud",PipeLine:"PipeLine",GeoModel:"GeoModel",GeoGrid:"GeoGrid",GeoDrill:"GeoDrill",GeoSection:"GeoSection"};function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var _n=function(t){Kt(r,t);var e=mn(r);function r(t){g(this,r);var n=t||{};return n.baseUrl="igs/rest/g3d",e.call(this,n)}return _(r)}(pn);function xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Catalog.G3DService=_n;var bn=function(t){Kt(r,t);var e=xn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).docName=i.docName||null,n.gdbp=i.gdbp||null,n.proj=i.proj||null,n.f=i.f||"json",n.guid=void 0!==i.guid?i.guid:Pt(),n.encryptPassword=i.encryptPassword||null,n.layerindex=i.layerindex||0,n.geometryType=i.geometryType||null,n.geometry=i.geometry||null,n.where=i.where||null,n.structs=i.structs||{IncludeAttribute:!0,IncludeGeometry:!1,IncludeWebGraphic:!1},n.page=i.page||0,n.pageCount=i.pageCount||20,n.objectIds=i.objectIds||null,n.orderField=i.orderField||null,n.rtnLabel=void 0!==i.rtnLabel&&i.rtnLabel,n.isAsc=void 0!==i.isAsc&&i.isAsc,n.format=i.format||"json",n.systemLib=i.systemLib||null,n.layerRenderIndex=i.layerRenderIndex||0,n.extendedKeys=t.extendedPropKeys||null,n}return _(r,[{key:"GetDocList",value:function(t,e){var r=this;r.partUrl="GetDocList";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetDocInfo",value:function(t,e){var r=this;r.partUrl=r.docName+"/GetDocInfo?&f=json",r.extendedKeys&&(r.partUrl+="&extendedKeys="+r.extendedKeys);var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetLayerInfo",value:function(t,e){var r=this,n="layerinfo?gdbp="+this.gdbp;r.proj&&(n+="&proj="+r.proj),r.f&&(n+="&f="+r.f),r.guid&&(n+="&guid="+r.guid),r.encryptPassword&&(n+="&encryptPassword="+r.encryptPassword),r.partUrl=n;var i=r.getFullUrl();new nn(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetFeature",value:function(t,e){var r=this,n="getFeature?";r.gdbp&&""!==r.gdbp?n+="gdbp="+r.gdbp:r.docName&&(n+="docName="+r.docName+"&layerindex="+r.layerindex),r.geometryType&&(n+="&geometryType="+r.geometryType),r.geometry&&(n+="&geometry="+r.geometry),r.where&&(n+="&where="+r.where),r.structs&&(n+="&structs="+JSON.stringify(r.structs)),r.page&&(n+="&page="+r.page),r.pageCount&&(n+="&pageCount="+r.pageCount),r.objectIds&&(n+="&objectIds="+r.objectIds),r.orderField&&(n+="&orderField="+r.orderField),r.rtnLabel&&(n+="&rtnLabel="+r.rtnLabel),r.isAsc&&(n+="&isAsc="+r.isAsc),r.guid&&(n+="&guid="+r.guid),r.format&&(n+="&format="+r.format),r.f&&(n+="&f="+r.f),r.partUrl=n;var i=r.getFullUrl();new nn(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"SetSystemLibraryByDoc",value:function(t,e){var r=this,n=r.docName+"/setSystemLibrary?systemLib="+r.systemLib+"&layerRenderIndex="+r.layerRenderIndex;r.f&&(n+="&f="+r.f),r.guid&&(n+="&guid="+r.guid),r.partUrl=n;var i=r.getFullUrl();new nn(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}]),r}(_n);function Sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Catalog.G3DMapDoc=bn;var Cn=function(t){Kt(r,t);var e=Sn(r);function r(t){g(this,r);var n=t||{};return n.baseUrl="igs/rest/mrcs",e.call(this,n)}return _(r)}(pn);function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Catalog.CatalogService=Cn;var In=function(t){Kt(r,t);var e=wn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).SystemLibID=void 0!==i.SystemLibID?i.SystemLibID:0,n.ColorNO=void 0!==i.ColorNO?i.ColorNO:6,n.Red=void 0!==i.Red?i.Red:0,n.Green=void 0!==i.Green?i.Green:0,n.Blue=void 0!==i.Blue?i.Blue:0,n.addNew=void 0!==i.addNew&&i.addNew,n}return _(r,[{key:"getColorNO",value:function(t,e,r){var n=this;null!=t&&(void 0!==t.SystemLibID&&(n.SystemLibID=t.SystemLibID),void 0!==t.Red&&(n.Red=t.Red),void 0!==t.Green&&(n.Green=t.Green),void 0!==t.Blue&&(n.Blue=t.Blue),void 0!==t.addNew&&(n.addNew=t.addNew)),n.partUrl="ColorLib/getColorNO?f=json&libID="+n.SystemLibID+"&r="+n.Red+"&g="+n.Green+"&b="+n.Blue+"&addNew="+n.addNew;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getColorRGB",value:function(t,e,r){var n=this;null!=t&&(void 0!==t.SystemLibID&&(n.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(n.ColorNO=t.ColorNO)),n.partUrl="ColorLib/getColorRGB?f=json&libID="+n.SystemLibID+"&colorNO="+n.ColorNO;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}}]),r}(Cn);function Pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Catalog.ColorInfo=In;var En=function(t){Kt(r,t);var e=Pn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).serverName=void 0!==i.serverName?i.serverName:null,n.gdbName=void 0!==i.gdbName?i.gdbName:null,n.dsName=void 0!==i.dsName?i.dsName:null,n.rcsName=void 0!==i.rcsName?i.rcsName:null,n.User=void 0!==i.User?i.User:null,n.Password=void 0!==i.Password?i.Password:null,n.containAll=void 0===i.containAll||i.containAll,n}return _(r,[{key:"getServerList",value:function(t,e){var r=this;r.partUrl="datasource?f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"?f=json":r.partUrl="datasource/"+r.serverName+"?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"?f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,r){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}},{key:"AttachGDB",value:function(t,e,r){var n=this;if(null!==n.serverName&&null!==n.gdbName&&null!==t){n.partUrl="gdb/attach/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json",null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var r=this;if(null!==r.serverName&&null!==r.gdbName){r.partUrl="gdb/detach/"+r.gdbName+"?gdbSvrName="+r.serverName,null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,r){var n=this;if(null!==n.serverName&&null!==n.gdbName&&("mapgislocal"!==n.serverName.toLowerCase()||null!==t)){n.partUrl="gdb/creat/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json",null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var r=this;if(null!==r.serverName&&null!==r.gdbName){r.partUrl="gdb/delete/"+r.gdbName+"?gdbSvrName="+r.serverName,null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}}]),r}(Cn);function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Catalog.GDBInfo=En;var Ln=function(t){Kt(r,t);var e=Mn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).docName=void 0!==i.docName?i.docName:null,n.mapIndex=void 0!==i.mapIndex?i.mapIndex:0,n.layerID=void 0!==i.layerID?i.layerID:0,n.version=void 0!==i.version?i.version:2,n.include=void 0!==i.include?i.include:"{includeDetails:true,includeSubs:false}",n.returnFullStyle=void 0!==i.returnFullStyle&&i.returnFullStyle,n.guid=void 0!==i.guid?i.guid:Pt(),n}return _(r,[{key:"getMapDocList",value:function(t,e){var r=this;r.partUrl="docs?v="+this.version+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,r,n,i){var o=this;if("boolean"==typeof i&&(o.returnFullStyle=i),"boolean"==typeof e||"boolean"==typeof r){var s={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof r&&r};o.include=bt(s)}o.partUrl="docs/"+o.docName+"?include="+o.include+"&returnFullStyle="+o.returnFullStyle+"&guid="+o.guid+"&f=json";var a=o.getFullUrl();new nn(a,{eventListeners:{scope:o,processCompleted:t,processFailed:n}}).processAsync()}},{key:"getMapInfo",value:function(t,e,r){var n=this;"boolean"==typeof e&&(n.returnFullStyle=e),n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}}).processAsync()}},{key:"getMapDocTree",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"?tree=true&guid="+r.guid+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerID+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers?f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/delete?layerIDs="+r.layerID+"&guid="+r.guid+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/add?guid="+n.guid+"&f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/index?guid="+n.guid+"&f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,r,n){var i=this;i.partUrl="legendInfo/"+i.docName+"?f=json&layerIndexes="+t+"&fields="+e;var o=i.getFullUrl();new nn(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}}).processAsync()}}]),r}(Cn);function Nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Catalog.MapDoc=Ln;var Tn=function(t){Kt(r,t);var e=Nn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).tileName=void 0!==i.tileName?i.tileName:null,n.version=void 0!==i.version?i.version:"2.0",n}return _(r,[{key:"getTileList",value:function(t,e){var r=this;r.partUrl="tiles?f=json",this.version&&("2.0"===r.version?r.partUrl+="&v=2":r.partUrl+="&v="+r.version);var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var r=this;r.partUrl="tiles/"+r.tileName+"?f=json",r.version&&(r.partUrl+="&v="+r.version);var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}]),r}(Cn);function On(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Catalog.TileLayer=Tn;var Rn=function(t){Kt(r,t);var e=On(r);function r(t){g(this,r);var n=t||{};return e.call(this,n)}return _(r,[{key:"getSfclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?user="+r.User+"&psw="+r.Password+"&containAll="+this.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0||"mapgislocalplus"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,r){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,r){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,r,n){var i=this;i.partUrl="layerinfo?gdbpUrl="+t+"&f=json&encryptPassword="+n+"&proj="+this.proj;var o=i.getFullUrl();new nn(o,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,r){var n=this;if(null!==(t=null!==t?t:null)&&null!==n.serverName&&null!==n.gdbName){null!==n.User&&null!==n.Password?n.partUrl="datasource/"+n.User+":"+n.Password+"@":n.partUrl="datasource/",null===t.clsName&&(t.clsName=Pt()),n.partUrl+=n.serverName+"/"+n.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null===t.attStruct&&(t.attStruct=new Be);var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,r,n){var i=this;if(null!==i.serverName&&null!==i.gdbName&&null!==t&&null!==e){i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=i.getFullUrl();new nn(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}}).processAsync()}}}]),r}(En);function An(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Catalog.VectorLayer=Rn;var Fn=function(t){Kt(r,t);var e=An(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).f=i.f||"json",n.page=i.page||0,n.pageCount=i.pageCount||20,n.systemLib=i.systemLib||null,n.type=i.type||null,n}return _(r,[{key:"GetSystemLibrary",value:function(t,e){var r=this;r.partUrl="systemlibraries?f="+r.f;var n=r.getFullUrl();new nn(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetSymbol",value:function(t,e){var r=this,n="symbols?&systemLib="+r.systemLib+"&type="+r.type;r.f&&(n+="&f="+r.f),r.page&&(n+="&page="+r.page),r.size&&(n+="&size="+r.pageCount),r.partUrl=n;var i=r.getFullUrl();new nn(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}]),r}(Cn);function Dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Catalog.SystomInfo=Fn;var kn=function(t){Kt(r,t);var e=Dn(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).guid=void 0!==i.guid?i.guid:Pt(),n.baseUrl="igs/rest/mrfs",n.f=void 0!==i.f?i.f:"json",n}return _(r)}(pn);function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.EditServiceBase=kn;var Bn=function(t){Kt(r,t);var e=jn(r);function r(t,n,i){var o;g(this,r);var s=i||{};return(o=e.call(this,s)).docName=void 0!==t?t:null,o.mapIndex=0,o.layerIndex=void 0!==n?n:0,o}return _(r,[{key:"add",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/addFeatures?f="+n.f+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/updateFeatures?f="+n.f+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/deleteFeatures?f="+n.f+"&objectIds="+t+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}}}]),r}(kn);function Gn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.EditDocFeature=Bn;var Un=function(t){Kt(r,t);var e=Gn(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).gdbp=void 0!==t?t:null,i}return _(r,[{key:"add",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="layer/addFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="layer/updateFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="layer/deleteFeatures?f="+n.f+"&objectIds="+t+"&gdbp="+n.gdbp+"&guid="+n.guid;var i=n.getFullUrl();new nn(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync()}}}]),r}(kn);Z.Service.EditLayerFeature=Un;var qn=function(t){var e=t||{};$(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};qn.prototype.toJSON=function(){return bt(this)},Z.Service.QueryFeatureStruct=qn;var zn=function(t){var e=t||{};$(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};zn.prototype.toJSON=function(){return bt(this)},Z.Service.QueryFeatureRule=zn;var Vn=_(function t(e){g(this,t);var r=e||{};$(this,r),this.geometry=void 0!==r.geometry?r.geometry:null,this.where=void 0!==r.where?r.where:null,this.rule=void 0!==r.rule?r.rule:new zn,this.objectIds=void 0!==r.objectIds?r.objectIds:null,this.pageIndex=void 0!==r.pageIndex?r.pageIndex:0,this.recordNumber=void 0!==r.recordNumber?r.recordNumber:20,this.resultFormat=void 0!==r.resultFormat?r.resultFormat:"json",this.struct=void 0!==r.struct?r.struct:new qn,this.orderField=void 0!==r.orderField?r.orderField:null,this.rtnLabel=void 0!==r.rtnLabel&&r.rtnLabel,this.fields=r.fields||"",this.coordPrecision=r.coordPrecision||0===r.coordPrecision?r.coordPrecision:2,this.isAsc=void 0!==r.isAsc&&r.isAsc,this.cursorType=void 0!==r.cursorType?r.cursorType:"forward",this.proj=r.proj||null,this.guid=r.guid||"__readonly_user__"});function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.QueryParameterBase=Vn;var Xn=function(t){Kt(r,t);var e=Wn(r);function r(t){g(this,r);var n=t||{};return e.call(this,n)}return _(r,[{key:"getParameterURL",value:function(){var t="page="+this.pageIndex.toString();return t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),this.struct&&(t+="&structs="+bt(this.struct)),this.where&&(t+="&where="+this.where),this.rule&&(t+="&rule="+bt(this.rule)),this.objectIds&&(t+="&objectIds="+this.objectIds),this.orderField&&(t+="&orderField="+this.orderField),void 0!==this.rtnLabel&&(t+="&rtnLabel="+this.rtnLabel),this.fields&&(t+="&fields="+this.fields),void 0!==this.coordPrecision&&(t+="&coordPrecision="+this.coordPrecision),this.isAsc&&(t+="&isAsc="+this.isAsc),this.proj&&(t+="&srsIds="+this.proj),this.guid&&(t+="&guid="+this.guid),t+="&cursorType="+this.cursorType}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!==this.struct&&(t.structs=this.struct.toJSON()),null!==this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!==this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!==this.where&&(t.where=this.where),null!==this.rule&&(t.rule=this.rule.toJSON()),null!==this.orderField&&(t.orderField=this.orderField),null!==this.isAsc&&(t.isAsc=this.isAsc),t.cursorType=this.cursorType,t)}}]),r}(Vn);function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.QueryParameter=Xn;var Yn=function(t){Kt(r,t);var e=Hn(r);function r(t){var n;g(this,r);var i=t||{};return i.baseUrl="igs/rest/mrfs",(n=e.call(this,i)).resultCallBack=void 0!==i.resultCallBack?i.resultCallBack:null,n.queryParam=void 0!==i.queryParam?i.queryParam:null,n.requestType=void 0!==i.requestType?i.requestType:"GET",n}return _(r,[{key:"processResult",value:function(t){var e=new Br;nt(e,t,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};nt(e,t,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,r,n,i,o){var s=this;s.resultCallBack=r;var a=new nn(t,{eventListeners:{scope:s,processCompleted:"geojson"!==o?s.processResult:s.processGeoJsonResult,processFailed:i}});"GET"===n?a.processAsync():a.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,r){if(null!==this.queryParam){var n="";if(this.queryParam instanceof Xn){n=this.getFullUrl();var i="",o=null;"GET"===(i=r||(this.requestType?this.requestType:"GET")).toUpperCase()?n+=encodeURI("?"+this.queryParam.getParameterURL()):o=this.queryParam.getParameterObject(),this.restQuery(n,o,t,i,e,this.queryParam.resultFormat.toLowerCase())}}}}]),r}(pn);Z.Service.QueryServiceBase=Yn;var Zn=function(t){var e=void 0!==t?t:{};$(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4};function Qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zn.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,t+="&geometryType="+this.geometryType,t+="&nearDis="+this.nearDis},Z.Service.MultiGeoQueryParameter=Zn;var Jn=function(t){Kt(r,t);var e=Qn(r);function r(t,n,i,o){var s;g(this,r);var a=o||{};return(s=e.call(this,a)).queryParam=t,s.mapName=n,s.mapIndex=0,s.layerIndex=i,s.baseUrl="igs/rest/extend/MultiGeo",s.partUrl="docs/"+s.mapName+"/"+s.mapIndex.toString()+"/"+s.layerIndex+"/Geoquery",s.partUrl+=t.getParameterURL(),s}return _(r,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof Zn){var r=null;"point"===this.queryParam.geometryType?r={pointArr:this.queryParam.geometry}:"line"===this.queryParam.geometryType?r={lineArr:this.queryParam.geometry}:"polygon"===this.queryParam.geometryType&&(r={PolygonObjs:this.queryParam.geometry});var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),r}(Yn);Z.Service.MultiGeoQuery=Jn;var Kn=function(t){var e=void 0!==t?t:{};$(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};function $n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Kn.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!==this.objectIds?t+="&objectIds="+this.objectIds:null!==this.where&&(t+="&where="+this.where),t},Z.Service.ObjClsQueryParameter=Kn;var ti=function(t){Kt(r,t);var e=$n(r);function r(t,n,i){var o;g(this,r);var s=i||{};return(o=e.call(this,s)).queryParam=t,o.gdbp=n,o.baseUrl="igs/rest/extend/dxlcz",o.partUrl="objlayer/query?gdbp="+n,o.partUrl+=t.getParameterURL(),o}return _(r,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof Kn){var r=this.getFullUrl();new nn(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),r}(Yn);function ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ObjClsQuery=ti;var ri=function(t){Kt(r,t);var e=ei(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).gdbp=void 0!==t?t:null,i}return _(r,[{key:"getParameterURL",value:function(){return en(te(r.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=en(te(r.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),r}(Xn);function ni(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.QueryByLayerParameter=ri;var ii=function(t){Kt(r,t);var e=ni(r);function r(t,n,i,o){var s;g(this,r);var a=o||{};return(s=e.call(this,a)).queryParam=t,s.docName=n,s.layerIndex=null==i?-1:i,s.mapIndex=0,s.partUrl="docs/"+s.docName+"/"+s.mapIndex.toString()+"/"+s.layerIndex.toString()+"/query",s}return _(r)}(Yn);function oi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.QueryDocFeature=ii;var si=function(t){Kt(r,t);var e=oi(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).queryParam=t,i.partUrl="layer/query",i}return _(r)}(Yn);function ai(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ui(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ui(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function li(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=_(function t(){g(this,t);var r,n=ai(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;i&&ci(this,new i)}}catch(t){n.e(t)}finally{n.f()}}),i=0,o=e;i<o.length;i++){var s=o[i];s&&ci(n,s),s&&ci(n.prototype,s.prototype)}return n}function ci(t,e){var r,n=ai(Reflect.ownKeys(e));try{for(n.s();!(r=n.n()).done;){var i=r.value;if("constructor"!==i&&"prototype"!==i&&"name"!==i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,o)}}}catch(t){n.e(t)}finally{n.f()}}Z.Service.QueryLayerFeature=si;function hi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var fi=function(t){Kt(r,t);var e=hi(r);function r(){return g(this,r),e.call(this)}return _(r)}(li(ri,Xn,ii));var pi=function(){function t(){g(this,t),this.layers=[],this.pageIndex=0,this.pagination=100,this.resultFormat="json",this.IncludeAttribute=!0,this.IncludeGeometry=!0,this.IncludeWebGraphic=!1,this.orderBy=void 0,this.isAsc=void 0,this.proj=void 0,this.fields=void 0,this.coordPrecision=void 0,this.cursorType="backward"}return _(t,null,[{key:"formatParam",value:function(t){for(var e=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"],r=0;r<e.length;r++)"string"==typeof t[e[r]]&&(t[e[r]]="true"===t[e[r]]);return t}}]),t}();pi.prototype.formatParameter=function(t,e){var r,n=this;return n._crs=e,"typename"===t?(r={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"},this.where&&this.geometry&&delete r.geometry,Object.keys(r).forEach(function(t){n.hasOwnProperty(t)&&n[t]&&(n[t]instanceof Array?r[r[t]]=n[t].join(","):r[r[t]]="where"===t||"geometry"===t?initFilter(n[t],n.geometry,n):n[t]),delete r[t]}),r):(r={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"},Object.keys(r).forEach(function(t){n.hasOwnProperty(t)&&(n[r[t]]=n[t],delete n[t])}),this)},Z.Service.BaseParameter=pi;var di=function(){function t(e){g(this,t),this.url=e.url;var r=this.url.split("http://");this._ip=r[1].split(":")[0];var n=r[1].split(":")[1].split("/");this._port=n[0],this.url.indexOf("igs/rest/mrfs/docs")>-1&&(this._mapId=n[n.length-1])}return _(t,null,[{key:"get",value:function(t,e,r,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status||304==i.status?e.call(this,i.responseText,n):4===i.readyState&&200!==i.status&&304!==i.status&&r.call(this,i.responseText,n)},i.send()}}]),t}();function yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}di.prototype.query=function(t,e,r){t=pi.formatParam(t);var n,i,o,s,a,u,l,c=Object.assign({},t);if("string"==typeof(a=c.layers)&&(a=a.split(",")),u=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"],Object.keys(c).forEach(function(t){switch(t){case"pagination":c.recordNumber=c.pagination;break;case"orderBy":c.orderField=c.orderBy;break;case"spatialRelationType":c.MustInside="MustInside"===c.spatialRelationType,c.Intersect="Intersect"===c.spatialRelationType;break;case"objectIds":c.objectIds=c.objectIds.join(",")}}),c.hasOwnProperty("geometry")&&c.geometry||c.hasOwnProperty("rectangle")&&c.rectangle.length>0)if(n=new zn({EnableDisplayCondition:c.enableDisplayCondition,MustInside:c.MustInside,CompareRectOnly:c.compareRectOnly,Intersect:c.Intersect}),!c.hasOwnProperty("geometry")&&c.rectangle.length>0)s=new Mr(c.rectangle[0],c.rectangle[1],c.rectangle[2],c.rectangle[3]),delete c.rectangle;else if("Point"===c.geometry.type)s=new wr(c.geometry.coordinates[0],c.geometry.coordinates[1],{nearDis:"0.001"}),delete c.geometry;else if("LineString"===c.geometry.type||"Polygon"===c.geometry.type){for(var h=[],f=0;f<c.geometry.coordinates.length;f++)h.push(new wr(c.geometry.coordinates[f][0],c.geometry.coordinates[f][1]));switch(c.geometry.type){case"LineString":s=new Wr(h);break;case"Polygon":s=new Ur(h)}delete c.geometry}else if("MultiPolygon"===c.geometry.type){for(var p=[],d=0;d<c.geometry.coordinates.length;d++){for(var y=[],v=c.geometry.coordinates[d],g=0;g<v.length;g++)y.push(new wr(v[g][0],v[g][1]));p.push(new Ur(y))}s=new zr(p),delete c.geometry}o=new qn({IncludeGeometry:c.IncludeGeometry,IncludeAttribute:c.IncludeAttribute,IncludeWebGraphic:c.IncludeWebGraphic});var m=new RegExp("^[0-9]+$");if(a.length<=0)throw new Error("请填写您要查询的图层");if(m.test(a[0]))i=new Xn,l=new ii(i,this._mapId,a.join(","),{ip:this._ip,port:this._port});else{if(!("string"==typeof a[0]&&a[0].indexOf("gdbp")>-1))throw new Error("请填写正确的图层Id或gdbp地址");i=new ri(a),l=new si(i,{ip:this._ip,port:this._port})}s&&(i.geometry=s,i.rule=n),i.struct=o;for(var _=Object.assign({},c),x=0;x<u.length;x++)_.hasOwnProperty(u[x])&&delete _[u[x]];$(i,_),l.query(function(t){e&&e(t)},function(t){r&&r(t)})},di.prototype.add=function(t,e,r,n){var i=this;this.getFieldAtt(e,function(o){var s=i.getFeatureSet(o,t);i.getFeatureService(e).add(s,r,n)})},di.prototype.update=function(t,e,r,n){var i=this;this.getFieldAtt(e,function(o){var s=i.getFeatureSet(o,t);i.getFeatureService(e).update(s,r,n)})},di.prototype.delete=function(t,e,r,n){t=t.join(","),this.getFeatureService(e).deletes(t,r,n)},di.prototype.getFeatureSet=function(t,e){for(var r=[],n=t.FieldAtt.FldType,i=0;i<n.length;i++)r.push(n[i].substr(3,n[i].length).toLowerCase());t.FieldAtt.FldType=r;for(var o=new Br({AttStruct:new Be(t.FieldAtt)}),s=0;s<e.length;s++){for(var a=e[s].hasOwnProperty("geometry")&&e[s].geometry,u=void 0,l=void 0,c=void 0,h=[],f=0;f<t.FieldAtt.FldName.length;f++)e[s].attributes.hasOwnProperty(t.FieldAtt.FldName[f])?h.push(e[s].attributes[t.FieldAtt.FldName[f]]):h.push(null);var p=new jr({AttValue:h}),d=void 0;if(a){var y=e[s].geometryType,v=void 0,g=void 0,m=void 0,_=void 0,x=void 0,b=void 0,S=void 0,C=void 0;switch(u=e[s].geometry,y){case"Point":l=[];for(var w=0;w<u.length;w++)x=new Tr(u[w].coordinates[0],u[w].coordinates[1]),l.push(x);v=new Dr({PntGeom:l}),d=1,e[s].style&&(m=new vr(e[s].style),g=new kr({InfoType:1,PntInfo:m}));break;case"LineString":l=[];for(var I=0;I<u.length;I++){b=[];for(var P=0;P<u[I].coordinates.length;P++)b.push(new wr(u[I].coordinates[P].x,u[I].coordinates[P].y));S=new Arc(b),_=new ke([S]),c=new Rr(_),l.push(c)}v=new Dr({LinGeom:l}),d=2,e[s].style&&(m=new yr(e[s].style),g=new kr({InfoType:2,LinInfo:m}));break;case"Polygon":l=[];for(var E=0;E<u.length;E++){_=[];for(var M=[],L=0;L<u[E].exterior.length;L++)M.push(new wr(u[E].exterior[L].x,u[E].exterior[L].y));_.push(new ke([new Arc(M)]));for(var N=0;N<u[E].interior.length;N++){for(var T=[],O=0;O<u[E].interior[N].length;O++)T.push(new wr(u[E].interior[N][O].x,u[E].interior[N][O].y));_.push(new ke([new Arc(T)]))}C=new Fr(_),l.push(C)}v=new Dr({RegGeom:l}),d=3,e[s].style&&(m=new gr(e[s].style),g=new kr({InfoType:3,RegInfo:m}))}p.fGeom=v,p.GraphicInfo=g,p.ftype=d}e[s].FID&&p.setFID(e[s].FID),o.addFeature(p)}return o},di.prototype.getFeatureService=function(t){return t.indexOf("gdbp")>=0?new Un(t):new Bn(this._mapId,t,{ip:this._ip,port:this._port})},di.prototype.getFieldAtt=function(t,e){var r=this;t.indexOf("gdbp")>=0?this.getGDBPInfo(t,e):this.getLayerInfo(t,function(t){r.getGDBPInfo(t,e)})},di.prototype.getGDBPInfo=function(t,e){di.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t),e(t)})},di.prototype.getLayerInfo=function(t,e){di.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){var r=(t=JSON.parse(t)).URL;e(r)})},Z.Service.FeatureService=di;var vi=function(t){Kt(r,t);var e=yi(r);function r(t){var n;return g(this,r),(n=e.call(this)).where=void 0,$(Qt(n),t),n}return _(r)}(pi);Z.Service.SQLParameter=vi;var gi=_(function t(){g(this,t),this.coordinates=[]}),mi=6371008.8,_i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:mi,metres:mi,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function xi(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function bi(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ni(t[0])||!Ni(t[1]))throw new Error("coordinates must contain numbers");return xi({type:"Point",coordinates:t},e,r)}function Si(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return xi({type:"Polygon",coordinates:t},e,r)}function Ci(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return xi({type:"LineString",coordinates:t},e,r)}function wi(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function Ii(t,e,r){return void 0===r&&(r={}),xi({type:"MultiLineString",coordinates:t},e,r)}function Pi(t,e,r){return void 0===r&&(r={}),xi({type:"MultiPoint",coordinates:t},e,r)}function Ei(t,e){void 0===e&&(e="kilometers");var r=_i[e];if(!r)throw new Error(e+" units is invalid");return t/r}function Mi(t){return 180*(t%(2*Math.PI))/Math.PI}function Li(t){return t%360*Math.PI/180}function Ni(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ti(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(h=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,g,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(x=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Ti(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Oi(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function Ri(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function Ai(t,e){Ri(t,function(t,r,n,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(xi(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(xi({type:s,coordinates:l},n),r,u))return!1}})}function Fi(t){var e=[1/0,1/0,-1/0,-1/0];return Ti(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Fi.default=Fi;const Di=Fi;function ki(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ji(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Bi(t){return"Feature"===t.type?t.geometry:t}o(7418);o(2273);function Gi(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=ki(t),i=Bi(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(Ui(n,a[l][0],r.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)Ui(n,a[l][h],!r.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function Ui(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!r;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(n=!n)}return n}Object.prototype.hasOwnProperty;var qi=new ArrayBuffer(16);new Float64Array(qi),new Uint32Array(qi);o(5510);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],n=this.points[e+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>t&&(e.push(n),r=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(t,e,r,n,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+e.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+e.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])}}();const zi=function(t){return function(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n];return Si([[s,[i,n],[i,o],[r,o],s]],e.properties,{bbox:t,id:e.id})}(Di(t))};function Vi(t,e,r,n){void 0===n&&(n={});var i=ki(t),o=Li(i[0]),s=Li(i[1]),a=Li(r),u=Ei(e,n.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return bi([Mi(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),Mi(l)],n.properties)}const Wi=function(t,e,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<n;s++)o.push(Vi(t,e,-360*s/n,r).geometry.coordinates);return o.push(o[0]),Si([o],i)};const Xi=function(t,e){void 0===e&&(e={});var r=Di(t);return bi([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)};o(9187);const Hi=function(t){if(!t)throw new Error("geojson is required");var e=[];return Ai(t,function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=ji(n);break;case"LineString":r=[ji(n)]}r.forEach(function(r){var n=function(t,e){var r=[];return t.reduce(function(t,n){var i=Ci([t,n],e);return i.bbox=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(t,n),r.push(i),n}),r}(r,t.properties);n.forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),wi(e)};var Yi=o(1787);function Zi(t,e){var r=ji(t),n=ji(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],u=n[0][0],l=n[0][1],c=n[1][0],h=n[1][1],f=(h-l)*(s-i)-(c-u)*(a-o),p=(c-u)*(o-l)-(h-l)*(i-u),d=(s-i)*(o-l)-(a-o)*(i-u);if(0===f)return null;var y=p/f,v=d/f;return y>=0&&y<=1&&v>=0&&v<=1?bi([i+y*(s-i),o+y*(a-o)]):null}const Qi=function(t,e){var r={},n=[];if("LineString"===t.type&&(t=xi(t)),"LineString"===e.type&&(e=xi(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Zi(t,e);return i&&n.push(i),wi(n)}var o=Yi();return o.load(Hi(e)),Oi(Hi(t),function(t){Oi(o.search(t),function(e){var i=Zi(t,e);if(i){var o=ji(i).join(",");r[o]||(r[o]=!0,n.push(i))}})}),wi(n)};function Ji(t,e,r,n,i){var o=r[0],s=r[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(r[0]-a)*f-(r[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return n?"start"===n?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===n?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===n&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}const Ki=function(t,e,r){void 0===r&&(r={});for(var n=ki(t),i=ji(e),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Ji(i[o],i[o+1],n,s,void 0===r.epsilon?null:r.epsilon))return!0}return!1};var $i=Math.PI/180,to=180/Math.PI,eo=function(t,e){this.lon=t,this.lat=e,this.x=$i*t,this.y=$i*e};eo.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},eo.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new eo(e,t)};var ro=function(){this.coords=[],this.length=0};ro.prototype.move_to=function(t){this.length++,this.coords.push(t)};var no=function(t){this.properties=t||{},this.geometries=[]};no.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},no.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var io=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new eo(t.x,t.y),this.end=new eo(e.x,e.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};io.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=to*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[to*Math.atan2(i,n),s]},io.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),i=0;i<t;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<r.length;++p){var d=r[p-1][0],y=r[p][0],v=Math.abs(y-d);v>f&&(y>c&&d<h||d>c&&y<h)?a=!0:v>u&&(u=v)}var g=[];if(a&&u<l){var m=[];g.push(m);for(var _=0;_<r.length;++_){var x=parseFloat(r[_][0]);if(_>0&&Math.abs(x-r[_-1][0])>f){var b=parseFloat(r[_-1][0]),S=parseFloat(r[_-1][1]),C=parseFloat(r[_][0]),w=parseFloat(r[_][1]);if(b>-180&&b<h&&180===C&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<h){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(b>c&&b<180&&-180===C&&_+1<r.length&&r[_-1][0]>c&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(b<h&&C>c){var I=b;b=C,C=I;var P=S;S=w,w=P}if(b>c&&C<h&&(C+=360),b<=180&&C>=180&&b<C){var E=(180-b)/(C-b),M=E*w+(1-E)*S;m.push([r[_-1][0]>c?180:-180,M]),(m=[]).push([r[_-1][0]>c?-180:180,M]),g.push(m)}else m=[],g.push(m);m.push([x,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var L=[];g.push(L);for(var N=0;N<r.length;++N)L.push([r[N][0],r[N][1]])}for(var T=new no(this.properties),O=0;O<g.length;++O){var R=new ro;T.geometries.push(R);for(var A=g[O],F=0;F<A.length;++F)R.move_to(A[F])}return T};function oo(t,e){void 0===e&&(e={});var r=Bi(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return function(t,e){void 0===e&&(e={});var r=Bi(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{};return so(r,n)}(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=Bi(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach(function(t){i.push(so(t,n))}),wi(i)}(r,e);default:throw new Error("invalid poly")}}function so(t,e){return t.length>1?Ii(t,e):Ci(t[0],e)}o(251);var ao=[],uo=[],lo=[],co=[],ho=[],fo=[],po=[],yo=[],vo=[],go=[],mo=[],_o=[],xo=[],bo=[],So=[],Co=[],wo=[],Io=[],Po=[],Eo=[],Mo=[],Lo=[],No=[],To=[];po[85]=go[85]=-1,yo[85]=mo[85]=0,vo[85]=_o[85]=1,Po[85]=Lo[85]=1,Eo[85]=No[85]=0,Mo[85]=To[85]=1,ao[85]=co[85]=0,uo[85]=ho[85]=-1,lo[85]=So[85]=0,Co[85]=xo[85]=0,wo[85]=bo[85]=1,fo[85]=Io[85]=1,Lo[1]=Lo[169]=0,No[1]=No[169]=-1,To[1]=To[169]=0,xo[1]=xo[169]=-1,bo[1]=bo[169]=0,So[1]=So[169]=0,go[4]=go[166]=0,mo[4]=mo[166]=-1,_o[4]=_o[166]=1,Co[4]=Co[166]=1,wo[4]=wo[166]=0,Io[4]=Io[166]=0,po[16]=po[154]=0,yo[16]=yo[154]=1,vo[16]=vo[154]=1,co[16]=co[154]=1,ho[16]=ho[154]=0,fo[16]=fo[154]=1,Po[64]=Po[106]=0,Eo[64]=Eo[106]=1,Mo[64]=Mo[106]=0,ao[64]=ao[106]=-1,uo[64]=uo[106]=0,lo[64]=lo[106]=1,Po[2]=Po[168]=0,Eo[2]=Eo[168]=-1,Mo[2]=Mo[168]=1,Lo[2]=Lo[168]=0,No[2]=No[168]=-1,To[2]=To[168]=0,xo[2]=xo[168]=-1,bo[2]=bo[168]=0,So[2]=So[168]=0,Co[2]=Co[168]=-1,wo[2]=wo[168]=0,Io[2]=Io[168]=1,po[8]=po[162]=0,yo[8]=yo[162]=-1,vo[8]=vo[162]=0,go[8]=go[162]=0,mo[8]=mo[162]=-1,_o[8]=_o[162]=1,xo[8]=xo[162]=1,bo[8]=bo[162]=0,So[8]=So[162]=1,Co[8]=Co[162]=1,wo[8]=wo[162]=0,Io[8]=Io[162]=0,po[32]=po[138]=0,yo[32]=yo[138]=1,vo[32]=vo[138]=1,go[32]=go[138]=0,mo[32]=mo[138]=1,_o[32]=_o[138]=0,ao[32]=ao[138]=1,uo[32]=uo[138]=0,lo[32]=lo[138]=0,co[32]=co[138]=1,ho[32]=ho[138]=0,fo[32]=fo[138]=1,Lo[128]=Lo[42]=0,No[128]=No[42]=1,To[128]=To[42]=1,Po[128]=Po[42]=0,Eo[128]=Eo[42]=1,Mo[128]=Mo[42]=0,ao[128]=ao[42]=-1,uo[128]=uo[42]=0,lo[128]=lo[42]=1,co[128]=co[42]=-1,ho[128]=ho[42]=0,fo[128]=fo[42]=0,go[5]=go[165]=-1,mo[5]=mo[165]=0,_o[5]=_o[165]=0,Lo[5]=Lo[165]=1,No[5]=No[165]=0,To[5]=To[165]=0,Co[20]=Co[150]=0,wo[20]=wo[150]=1,Io[20]=Io[150]=1,co[20]=co[150]=0,ho[20]=ho[150]=-1,fo[20]=fo[150]=1,po[80]=po[90]=-1,yo[80]=yo[90]=0,vo[80]=vo[90]=1,Po[80]=Po[90]=1,Eo[80]=Eo[90]=0,Mo[80]=Mo[90]=1,xo[65]=xo[105]=0,bo[65]=bo[105]=1,So[65]=So[105]=0,ao[65]=ao[105]=0,uo[65]=uo[105]=-1,lo[65]=lo[105]=0,po[160]=po[10]=-1,yo[160]=yo[10]=0,vo[160]=vo[10]=1,go[160]=go[10]=-1,mo[160]=mo[10]=0,_o[160]=_o[10]=0,Lo[160]=Lo[10]=1,No[160]=No[10]=0,To[160]=To[10]=0,Po[160]=Po[10]=1,Eo[160]=Eo[10]=0,Mo[160]=Mo[10]=1,Co[130]=Co[40]=0,wo[130]=wo[40]=1,Io[130]=Io[40]=1,xo[130]=xo[40]=0,bo[130]=bo[40]=1,So[130]=So[40]=0,ao[130]=ao[40]=0,uo[130]=uo[40]=-1,lo[130]=lo[40]=0,co[130]=co[40]=0,ho[130]=ho[40]=-1,fo[130]=fo[40]=1,go[37]=go[133]=0,mo[37]=mo[133]=1,_o[37]=_o[133]=1,Lo[37]=Lo[133]=0,No[37]=No[133]=1,To[37]=To[133]=0,ao[37]=ao[133]=-1,uo[37]=uo[133]=0,lo[37]=lo[133]=0,co[37]=co[133]=1,ho[37]=ho[133]=0,fo[37]=fo[133]=0,Co[148]=Co[22]=-1,wo[148]=wo[22]=0,Io[148]=Io[22]=0,Lo[148]=Lo[22]=0,No[148]=No[22]=-1,To[148]=To[22]=1,Po[148]=Po[22]=0,Eo[148]=Eo[22]=1,Mo[148]=Mo[22]=1,co[148]=co[22]=-1,ho[148]=ho[22]=0,fo[148]=fo[22]=1,po[82]=po[88]=0,yo[82]=yo[88]=-1,vo[82]=vo[88]=1,Co[82]=Co[88]=1,wo[82]=wo[88]=0,Io[82]=Io[88]=1,xo[82]=xo[88]=-1,bo[82]=bo[88]=0,So[82]=So[88]=1,Po[82]=Po[88]=0,Eo[82]=Eo[88]=-1,Mo[82]=Mo[88]=0,po[73]=po[97]=0,yo[73]=yo[97]=1,vo[73]=vo[97]=0,go[73]=go[97]=0,mo[73]=mo[97]=-1,_o[73]=_o[97]=0,xo[73]=xo[97]=1,bo[73]=bo[97]=0,So[73]=So[97]=0,ao[73]=ao[97]=1,uo[73]=uo[97]=0,lo[73]=lo[97]=1,po[145]=po[25]=0,yo[145]=yo[25]=-1,vo[145]=vo[25]=0,xo[145]=xo[25]=1,bo[145]=bo[25]=0,So[145]=So[25]=1,Lo[145]=Lo[25]=0,No[145]=No[25]=1,To[145]=To[25]=1,co[145]=co[25]=-1,ho[145]=ho[25]=0,fo[145]=fo[25]=0,go[70]=go[100]=0,mo[70]=mo[100]=1,_o[70]=_o[100]=0,Co[70]=Co[100]=-1,wo[70]=wo[100]=0,Io[70]=Io[100]=1,Po[70]=Po[100]=0,Eo[70]=Eo[100]=-1,Mo[70]=Mo[100]=1,ao[70]=ao[100]=1,uo[70]=uo[100]=0,lo[70]=lo[100]=0,go[101]=go[69]=0,mo[101]=mo[69]=1,_o[101]=_o[69]=0,ao[101]=ao[69]=1,uo[101]=uo[69]=0,lo[101]=lo[69]=0,Lo[149]=Lo[21]=0,No[149]=No[21]=1,To[149]=To[21]=1,co[149]=co[21]=-1,ho[149]=ho[21]=0,fo[149]=fo[21]=0,Co[86]=Co[84]=-1,wo[86]=wo[84]=0,Io[86]=Io[84]=1,Po[86]=Po[84]=0,Eo[86]=Eo[84]=-1,Mo[86]=Mo[84]=1,po[89]=po[81]=0,yo[89]=yo[81]=-1,vo[89]=vo[81]=0,xo[89]=xo[81]=1,bo[89]=bo[81]=0,So[89]=So[81]=1,po[96]=po[74]=0,yo[96]=yo[74]=1,vo[96]=vo[74]=0,go[96]=go[74]=-1,mo[96]=mo[74]=0,_o[96]=_o[74]=1,Po[96]=Po[74]=1,Eo[96]=Eo[74]=0,Mo[96]=Mo[74]=0,ao[96]=ao[74]=1,uo[96]=uo[74]=0,lo[96]=lo[74]=1,po[24]=po[146]=0,yo[24]=yo[146]=-1,vo[24]=vo[146]=1,Co[24]=Co[146]=1,wo[24]=wo[146]=0,Io[24]=Io[146]=1,xo[24]=xo[146]=0,bo[24]=bo[146]=1,So[24]=So[146]=1,co[24]=co[146]=0,ho[24]=ho[146]=-1,fo[24]=fo[146]=0,go[6]=go[164]=-1,mo[6]=mo[164]=0,_o[6]=_o[164]=1,Co[6]=Co[164]=-1,wo[6]=wo[164]=0,Io[6]=Io[164]=0,Lo[6]=Lo[164]=0,No[6]=No[164]=-1,To[6]=To[164]=1,Po[6]=Po[164]=1,Eo[6]=Eo[164]=0,Mo[6]=Mo[164]=0,xo[129]=xo[41]=0,bo[129]=bo[41]=1,So[129]=So[41]=1,Lo[129]=Lo[41]=0,No[129]=No[41]=1,To[129]=To[41]=0,ao[129]=ao[41]=-1,uo[129]=uo[41]=0,lo[129]=lo[41]=0,co[129]=co[41]=0,ho[129]=ho[41]=-1,fo[129]=fo[41]=0,Co[66]=Co[104]=0,wo[66]=wo[104]=1,Io[66]=Io[104]=0,xo[66]=xo[104]=-1,bo[66]=bo[104]=0,So[66]=So[104]=1,Po[66]=Po[104]=0,Eo[66]=Eo[104]=-1,Mo[66]=Mo[104]=0,ao[66]=ao[104]=0,uo[66]=uo[104]=-1,lo[66]=lo[104]=1,po[144]=po[26]=-1,yo[144]=yo[26]=0,vo[144]=vo[26]=0,Lo[144]=Lo[26]=1,No[144]=No[26]=0,To[144]=To[26]=1,Po[144]=Po[26]=0,Eo[144]=Eo[26]=1,Mo[144]=Mo[26]=1,co[144]=co[26]=-1,ho[144]=ho[26]=0,fo[144]=fo[26]=1,go[36]=go[134]=0,mo[36]=mo[134]=1,_o[36]=_o[134]=1,Co[36]=Co[134]=0,wo[36]=wo[134]=1,Io[36]=Io[134]=0,ao[36]=ao[134]=0,uo[36]=uo[134]=-1,lo[36]=lo[134]=1,co[36]=co[134]=1,ho[36]=ho[134]=0,fo[36]=fo[134]=0,po[9]=po[161]=-1,yo[9]=yo[161]=0,vo[9]=vo[161]=0,go[9]=go[161]=0,mo[9]=mo[161]=-1,_o[9]=_o[161]=0,xo[9]=xo[161]=1,bo[9]=bo[161]=0,So[9]=So[161]=0,Lo[9]=Lo[161]=1,No[9]=No[161]=0,To[9]=To[161]=1,po[136]=0,yo[136]=1,vo[136]=1,go[136]=0,mo[136]=1,_o[136]=0,Co[136]=-1,wo[136]=0,Io[136]=1,xo[136]=-1,bo[136]=0,So[136]=0,Lo[136]=0,No[136]=-1,To[136]=0,Po[136]=0,Eo[136]=-1,Mo[136]=1,ao[136]=1,uo[136]=0,lo[136]=0,co[136]=1,ho[136]=0,fo[136]=1,po[34]=0,yo[34]=-1,vo[34]=0,go[34]=0,mo[34]=-1,_o[34]=1,Co[34]=1,wo[34]=0,Io[34]=0,xo[34]=1,bo[34]=0,So[34]=1,Lo[34]=0,No[34]=1,To[34]=1,Po[34]=0,Eo[34]=1,Mo[34]=0,ao[34]=-1,uo[34]=0,lo[34]=1,co[34]=-1,ho[34]=0,fo[34]=0,po[35]=0,yo[35]=1,vo[35]=1,go[35]=0,mo[35]=-1,_o[35]=1,Co[35]=1,wo[35]=0,Io[35]=0,xo[35]=-1,bo[35]=0,So[35]=0,Lo[35]=0,No[35]=-1,To[35]=0,Po[35]=0,Eo[35]=1,Mo[35]=0,ao[35]=-1,uo[35]=0,lo[35]=1,co[35]=1,ho[35]=0,fo[35]=1,po[153]=0,yo[153]=1,vo[153]=1,xo[153]=-1,bo[153]=0,So[153]=0,Lo[153]=0,No[153]=-1,To[153]=0,co[153]=1,ho[153]=0,fo[153]=1,go[102]=0,mo[102]=-1,_o[102]=1,Co[102]=1,wo[102]=0,Io[102]=0,Po[102]=0,Eo[102]=1,Mo[102]=0,ao[102]=-1,uo[102]=0,lo[102]=1,po[155]=0,yo[155]=-1,vo[155]=0,xo[155]=1,bo[155]=0,So[155]=1,Lo[155]=0,No[155]=1,To[155]=1,co[155]=-1,ho[155]=0,fo[155]=0,go[103]=0,mo[103]=1,_o[103]=0,Co[103]=-1,wo[103]=0,Io[103]=1,Po[103]=0,Eo[103]=-1,Mo[103]=1,ao[103]=1,uo[103]=0,lo[103]=0,po[152]=0,yo[152]=1,vo[152]=1,Co[152]=-1,wo[152]=0,Io[152]=1,xo[152]=-1,bo[152]=0,So[152]=0,Lo[152]=0,No[152]=-1,To[152]=0,Po[152]=0,Eo[152]=-1,Mo[152]=1,co[152]=1,ho[152]=0,fo[152]=1,po[156]=0,yo[156]=-1,vo[156]=1,Co[156]=1,wo[156]=0,Io[156]=1,xo[156]=-1,bo[156]=0,So[156]=0,Lo[156]=0,No[156]=-1,To[156]=0,Po[156]=0,Eo[156]=1,Mo[156]=1,co[156]=-1,ho[156]=0,fo[156]=1,po[137]=0,yo[137]=1,vo[137]=1,go[137]=0,mo[137]=1,_o[137]=0,xo[137]=-1,bo[137]=0,So[137]=0,Lo[137]=0,No[137]=-1,To[137]=0,ao[137]=1,uo[137]=0,lo[137]=0,co[137]=1,ho[137]=0,fo[137]=1,po[139]=0,yo[139]=1,vo[139]=1,go[139]=0,mo[139]=-1,_o[139]=0,xo[139]=1,bo[139]=0,So[139]=0,Lo[139]=0,No[139]=1,To[139]=0,ao[139]=-1,uo[139]=0,lo[139]=0,co[139]=1,ho[139]=0,fo[139]=1,po[98]=0,yo[98]=-1,vo[98]=0,go[98]=0,mo[98]=-1,_o[98]=1,Co[98]=1,wo[98]=0,Io[98]=0,xo[98]=1,bo[98]=0,So[98]=1,Po[98]=0,Eo[98]=1,Mo[98]=0,ao[98]=-1,uo[98]=0,lo[98]=1,po[99]=0,yo[99]=1,vo[99]=0,go[99]=0,mo[99]=-1,_o[99]=1,Co[99]=1,wo[99]=0,Io[99]=0,xo[99]=-1,bo[99]=0,So[99]=1,Po[99]=0,Eo[99]=-1,Mo[99]=0,ao[99]=1,uo[99]=0,lo[99]=1,go[38]=0,mo[38]=-1,_o[38]=1,Co[38]=1,wo[38]=0,Io[38]=0,Lo[38]=0,No[38]=1,To[38]=1,Po[38]=0,Eo[38]=1,Mo[38]=0,ao[38]=-1,uo[38]=0,lo[38]=1,co[38]=-1,ho[38]=0,fo[38]=0,go[39]=0,mo[39]=1,_o[39]=1,Co[39]=-1,wo[39]=0,Io[39]=0,Lo[39]=0,No[39]=-1,To[39]=1,Po[39]=0,Eo[39]=1,Mo[39]=0,ao[39]=-1,uo[39]=0,lo[39]=1,co[39]=1,ho[39]=0,fo[39]=0;var Oo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ro=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ao=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Fo=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Do=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ko=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},jo=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Bo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Go=[],Uo=[],qo=[],zo=[],Vo=[],Wo=[],Xo=[],Ho=[];zo[1]=Vo[1]=18,zo[169]=Vo[169]=18,qo[4]=Uo[4]=12,qo[166]=Uo[166]=12,Go[16]=Ho[16]=4,Go[154]=Ho[154]=4,Wo[64]=Xo[64]=22,Wo[106]=Xo[106]=22,qo[2]=Wo[2]=17,zo[2]=Vo[2]=18,qo[168]=Wo[168]=17,zo[168]=Vo[168]=18,Go[8]=zo[8]=9,Uo[8]=qo[8]=12,Go[162]=zo[162]=9,Uo[162]=qo[162]=12,Go[32]=Ho[32]=4,Uo[32]=Xo[32]=1,Go[138]=Ho[138]=4,Uo[138]=Xo[138]=1,Vo[128]=Ho[128]=21,Wo[128]=Xo[128]=22,Vo[42]=Ho[42]=21,Wo[42]=Xo[42]=22,Uo[5]=Vo[5]=14,Uo[165]=Vo[165]=14,qo[20]=Ho[20]=6,qo[150]=Ho[150]=6,Go[80]=Wo[80]=11,Go[90]=Wo[90]=11,zo[65]=Xo[65]=3,zo[105]=Xo[105]=3,Go[160]=Wo[160]=11,Uo[160]=Vo[160]=14,Go[10]=Wo[10]=11,Uo[10]=Vo[10]=14,qo[130]=Ho[130]=6,zo[130]=Xo[130]=3,qo[40]=Ho[40]=6,zo[40]=Xo[40]=3,Uo[101]=Xo[101]=1,Uo[69]=Xo[69]=1,Vo[149]=Ho[149]=21,Vo[21]=Ho[21]=21,qo[86]=Wo[86]=17,qo[84]=Wo[84]=17,Go[89]=zo[89]=9,Go[81]=zo[81]=9,Go[96]=Xo[96]=0,Uo[96]=Wo[96]=15,Go[74]=Xo[74]=0,Uo[74]=Wo[74]=15,Go[24]=qo[24]=8,zo[24]=Ho[24]=7,Go[146]=qo[146]=8,zo[146]=Ho[146]=7,Uo[6]=Wo[6]=15,qo[6]=Vo[6]=16,Uo[164]=Wo[164]=15,qo[164]=Vo[164]=16,zo[129]=Ho[129]=7,Vo[129]=Xo[129]=20,zo[41]=Ho[41]=7,Vo[41]=Xo[41]=20,qo[66]=Xo[66]=2,zo[66]=Wo[66]=19,qo[104]=Xo[104]=2,zo[104]=Wo[104]=19,Go[144]=Vo[144]=10,Wo[144]=Ho[144]=23,Go[26]=Vo[26]=10,Wo[26]=Ho[26]=23,Uo[36]=Ho[36]=5,qo[36]=Xo[36]=2,Uo[134]=Ho[134]=5,qo[134]=Xo[134]=2,Go[9]=Vo[9]=10,Uo[9]=zo[9]=13,Go[161]=Vo[161]=10,Uo[161]=zo[161]=13,Uo[37]=Ho[37]=5,Vo[37]=Xo[37]=20,Uo[133]=Ho[133]=5,Vo[133]=Xo[133]=20,qo[148]=Vo[148]=16,Wo[148]=Ho[148]=23,qo[22]=Vo[22]=16,Wo[22]=Ho[22]=23,Go[82]=qo[82]=8,zo[82]=Wo[82]=19,Go[88]=qo[88]=8,zo[88]=Wo[88]=19,Go[73]=Xo[73]=0,Uo[73]=zo[73]=13,Go[97]=Xo[97]=0,Uo[97]=zo[97]=13,Go[145]=zo[145]=9,Vo[145]=Ho[145]=21,Go[25]=zo[25]=9,Vo[25]=Ho[25]=21,Uo[70]=Xo[70]=1,qo[70]=Wo[70]=17,Uo[100]=Xo[100]=1,qo[100]=Wo[100]=17,Go[34]=zo[34]=9,Uo[34]=qo[34]=12,Vo[34]=Ho[34]=21,Wo[34]=Xo[34]=22,Go[136]=Ho[136]=4,Uo[136]=Xo[136]=1,qo[136]=Wo[136]=17,zo[136]=Vo[136]=18,Go[35]=Ho[35]=4,Uo[35]=qo[35]=12,zo[35]=Vo[35]=18,Wo[35]=Xo[35]=22,Go[153]=Ho[153]=4,zo[153]=Vo[153]=18,Uo[102]=qo[102]=12,Wo[102]=Xo[102]=22,Go[155]=zo[155]=9,Vo[155]=Ho[155]=23,Uo[103]=Xo[103]=1,qo[103]=Wo[103]=17,Go[152]=Ho[152]=4,qo[152]=Wo[152]=17,zo[152]=Vo[152]=18,Go[156]=qo[156]=8,zo[156]=Vo[156]=18,Wo[156]=Ho[156]=23,Go[137]=Ho[137]=4,Uo[137]=Xo[137]=1,zo[137]=Vo[137]=18,Go[139]=Ho[139]=4,Uo[139]=zo[139]=13,Vo[139]=Xo[139]=20,Go[98]=zo[98]=9,Uo[98]=qo[98]=12,Wo[98]=Xo[98]=22,Go[99]=Xo[99]=0,Uo[99]=qo[99]=12,zo[99]=Wo[99]=19,Uo[38]=qo[38]=12,Vo[38]=Ho[38]=21,Wo[38]=Xo[38]=22,Uo[39]=Ho[39]=5,qo[39]=Vo[39]=16,Wo[39]=Xo[39]=22;var Yo=[];Yo[1]=Yo[169]=Oo,Yo[4]=Yo[166]=Ro,Yo[16]=Yo[154]=Ao,Yo[64]=Yo[106]=Fo,Yo[168]=Yo[2]=Do,Yo[162]=Yo[8]=ko,Yo[138]=Yo[32]=jo,Yo[42]=Yo[128]=Bo,Yo[5]=Yo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Yo[20]=Yo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Yo[80]=Yo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Yo[65]=Yo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Yo[160]=Yo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Yo[130]=Yo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Yo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Yo[101]=Yo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Yo[149]=Yo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Yo[86]=Yo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Yo[89]=Yo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Yo[96]=Yo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Yo[24]=Yo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Yo[6]=Yo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Yo[129]=Yo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Yo[66]=Yo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Yo[144]=Yo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Yo[36]=Yo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Yo[9]=Yo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Yo[37]=Yo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Yo[148]=Yo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Yo[82]=Yo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Yo[73]=Yo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Yo[145]=Yo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Yo[70]=Yo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Yo[34]=function(t){return[Bo(t),ko(t)]},Yo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Yo[136]=function(t){return[jo(t),Do(t)]},Yo[153]=function(t){return[Ao(t),Oo(t)]},Yo[102]=function(t){return[Ro(t),Fo(t)]},Yo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Yo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Yo[152]=function(t){return[Ao(t),Do(t)]},Yo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Yo[137]=function(t){return[jo(t),Oo(t)]},Yo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Yo[98]=function(t){return[ko(t),Fo(t)]},Yo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Yo[38]=function(t){return[Ro(t),Bo(t)]},Yo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function Zo(t,e,r){var n,i=e[0]-t[0],o=e[1]-t[1],s=r[0]-e[0],a=r[1]-e[1];return((n=i*a-s*o)>0)-(n<0)||+n}function Qo(t,e){return e.geometry.coordinates[0].every(function(e){return Gi(bi(e),t)})}var Jo=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var n=e.to,i=r.to;if(n.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=Zo(t.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();const Ko=Jo;const $o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return Ci([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Zo(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();var ts=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,r,n){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e},0),r=(0===e?this.length:e)-1,n=(e+1)%this.length,i=Zo(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return Pi(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=Si([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=zi(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var r,n,i=t.getEnvelope();return e.forEach(function(e){var o,s,a,u,l,c,h=e.getEnvelope();if((n&&(r=n.getEnvelope()),s=i,a=(o=h).geometry.coordinates[0].map(function(t){return t[0]}),u=o.geometry.coordinates[0].map(function(t){return t[1]}),l=s.geometry.coordinates[0].map(function(t){return t[0]}),c=s.geometry.coordinates[0].map(function(t){return t[1]}),Math.max.apply(null,a)!==Math.max.apply(null,l)||Math.max.apply(null,u)!==Math.max.apply(null,c)||Math.min.apply(null,a)!==Math.min.apply(null,l)||Math.min.apply(null,u)!==Math.min.apply(null,c))&&Qo(h,i)){for(var f=t.map(function(t){return t.from.coordinates}),p=void 0,d=function(t){e.some(function(e){return r=t,n=e.from.coordinates,r[0]===n[0]&&r[1]===n[1];var r,n})||(p=t)},y=0,v=f;y<v.length;y++){d(v[y])}p&&e.inside(bi(p))&&(n&&!Qo(r,h)||(n=e))}}),n},t.prototype.inside=function(t){return Gi(t,this.toPolygon())},t}();const es=ts;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var r=new t;return Ai(e,function(t){var e,n,i,o;!function(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),e=function(t,e){if(t){var n=r.getNode(t),i=r.getNode(e);r.addEdge(n,i)}return e},o=n,Ti(t,function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)},i)}),r},t.prototype.getNode=function(t){var e=Ko.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new Ko(t)),r},t.prototype.addEdge=function(t,e){var r=new $o(t,e),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),r.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var r,n,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(n=l),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var n=r;do{n.label=e,n=n.next}while(!r.isEqual(n));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(r){t._computeNextCCWEdges(r,e.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],r=t,n=function(){var n=0;r.from.getOuterEdges().forEach(function(e){e.label===t.label&&++n}),n>1&&e.push(r.from),r=r.next};do{n()}while(!t.isEqual(r));return e},t.prototype._findEdgeRing=function(t){var e=t,r=new es;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}();function rs(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(is(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function ns(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(Gi(n[r],t))return!0}return Qi(e,oo(t)).features.length>0}function is(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==n*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}const os=function(t,e){var r=!0;return Ai(t,function(t){Ai(e,function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!rs(e,t);case"Polygon":return!Gi(t,e)}break;case"LineString":switch(e.type){case"Point":return!rs(t,e);case"LineString":return!function(t,e){if(Qi(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!ns(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Gi(e,t);case"LineString":return!ns(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++){if(Gi(n[r],e))return!0}for(var i=0,o=e.coordinates[0];i<o.length;i++){if(Gi(o[i],t))return!0}if(Qi(oo(t),oo(e)).features.length>0)return!0;return!1}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)})}),r};function ss(t,e){var r=Bi(t),n=Bi(e),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":if("Point"===o)return us(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(us(t.coordinates[r],e.coordinates)){n=!0;break}return n}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(us(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Ki(n,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Ki({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Ki({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return r}(r,n);case"MultiPoint":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Ki(o,t,{ignoreEndVertices:!0})&&(r=!0),!Ki(o,t))return!1}if(r)return!0;return!1}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return Gi(n,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,n=0,i=Di(t),o=Di(e);if(!as(i,o))return!1;for(;n<e.coordinates.length-1;n++){if(Gi({type:"Point",coordinates:ls(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){r=!0;break}}return r}(r,n);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var r=Di(t),n=Di(e);if(!as(r,n))return!1;for(var i=Bi(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++){if(!Gi(u[a],t))return!1}return!0}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(!Gi(n[r],t,{ignoreBoundary:!0}))return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function as(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function us(t,e){return t[0]===e[0]&&t[1]===e[1]}function ls(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}o(9657);o(2606);o(1160);function cs(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}var hs={search:function(t,e,r,n){t.cleanDirty();var i=(n=n||{}).heuristic||hs.heuristics.manhattan,o=n.closest||!1,s=new ds(function(t){return t.f}),a=e;for(e.h=i(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return cs(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,r),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?cs(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function fs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var n=0,i=t[r];n<i.length;n++){var o=new ps(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function ps(t,e,r){this.x=t,this.y=e,this.weight=r}function ds(t){this.content=[],this.scoreFunction=t}fs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)hs.cleanNode(this.nodes[t])},fs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)hs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},fs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},fs.prototype.neighbors=function(t){var e=[],r=t.x,n=t.y,i=this.grid;return i[r-1]&&i[r-1][n]&&e.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&e.push(i[r+1][n]),i[r]&&i[r][n-1]&&e.push(i[r][n-1]),i[r]&&i[r][n+1]&&e.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&e.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&e.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&e.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&e.push(i[r+1][n+1])),e},fs.prototype.toString=function(){for(var t,e,r,n,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,n=(e=o[s]).length;r<n;r++)t.push(e[r].weight);i.push(t.join(" "))}return i.join("\n")},ps.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ps.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ps.prototype.isWall=function(){return 0===this.weight},ds.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<n&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?n:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}};function ys(){this._=null}function vs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function gs(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function ms(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function _s(t){for(;t.L;)t=t.L;return t}ys.prototype={constructor:ys,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=_s(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(gs(this,r),r=(t=r).U),r.C=!1,n.C=!0,ms(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(ms(this,r),r=(t=r).U),r.C=!1,n.C=!0,gs(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?_s(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=s,s.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,gs(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ms(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,gs(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ms(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,gs(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ms(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};const xs=ys;function bs(t,e,r,n){var i=[null,null],o=Ws.push(i)-1;return i.left=t,i.right=e,r&&Cs(i,t,e,r),n&&Cs(i,e,t,n),zs[t.index].halfedges.push(o),zs[e.index].halfedges.push(o),i}function Ss(t,e,r){var n=[e,r];return n.left=t,n}function Cs(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function ws(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function Is(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=n)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,r];o=[y,i]}else{if(u){if(u[1]<r)return}else u=[y,i];o=[y,r]}}else if(a=v-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(f<d){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Ps(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function Es(t,e){return e[+(e.left!==t.site)]}function Ms(t,e){return e[+(e.left===t.site)]}var Ls,Ns=[];function Ts(){vs(this),this.x=this.y=this.arc=this.site=this.cy=null}function Os(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,l=n[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-Hs)){var p=u*u+l*l,d=c*c+h*h,y=(h*p-l*d)/f,v=(u*d-c*p)/f,g=Ns.pop()||new Ts;g.arc=t,g.site=i,g.x=y+s,g.y=(g.cy=v+a)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=Vs._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Vs.insert(m,g),m||(Ls=g)}}}}function Rs(t){var e=t.circle;e&&(e.P||(Ls=e.N),Vs.remove(e),Ns.push(e),vs(e),t.circle=null)}var As=[];function Fs(){vs(this),this.edge=this.site=this.circle=null}function Ds(t){var e=As.pop()||new Fs;return e.site=t,e}function ks(t){Rs(t),qs.remove(t),As.push(t),vs(t)}function js(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];ks(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Xs&&Math.abs(n-u.circle.cy)<Xs;)o=u.P,a.unshift(u),ks(u),u=o;a.unshift(u),Rs(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<Xs&&Math.abs(n-l.circle.cy)<Xs;)s=l.N,a.push(l),ks(l),l=s;a.push(l),Rs(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],Cs(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=bs(u.site,l.site,null,i),Os(u),Os(l)}function Bs(t){for(var e,r,n,i,o=t[0],s=t[1],a=qs._;a;)if((n=Gs(a,s)-o)>Xs)a=a.L;else{if(!((i=o-Us(a,s))>Xs)){n>-Xs?(e=a.P,r=a):i>-Xs?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){zs[t.index]={site:t,halfedges:[]}}(t);var u=Ds(t);if(qs.insert(e,u),e||r){if(e===r)return Rs(e),r=Ds(e.site),qs.insert(u,r),u.edge=r.edge=bs(e.site,u.site),Os(e),void Os(r);if(r){Rs(e),Rs(r);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=r.site,y=d[0]-c,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,x=[(v*m-p*_)/g+c,(f*_-y*m)/g+h];Cs(r.edge,l,d,x),u.edge=bs(l,t,null,x),r.edge=bs(t,d,null,x),Os(e),Os(r)}else u.edge=bs(e.site,u.site)}}function Gs(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],l=u-e;if(!l)return a;var c=a-n,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+n:(n+a)/2}function Us(t,e){var r=t.N;if(r)return Gs(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var qs,zs,Vs,Ws,Xs=1e-6,Hs=1e-12;function Ys(t,e){return e[1]-t[1]||e[0]-t[0]}function Zs(t,e){var r,n,i,o=t.sort(Ys).pop();for(Ws=[],zs=new Array(t.length),qs=new xs,Vs=new xs;;)if(i=Ls,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(Bs(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;js(i.arc)}if(function(){for(var t,e,r,n,i=0,o=zs.length;i<o;++i)if((t=zs[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=Ps(t,Ws[e[r]]);for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,r,n){for(var i,o=Ws.length;o--;)Is(i=Ws[o],t,e,r,n)&&ws(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>Xs||Math.abs(i[0][1]-i[1][1])>Xs)||delete Ws[o]}(s,a,u,l),function(t,e,r,n){var i,o,s,a,u,l,c,h,f,p,d,y,v=zs.length,g=!0;for(i=0;i<v;++i)if(o=zs[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ws[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=Ms(o,Ws[u[a]]))[0],y=p[1],h=(c=Es(o,Ws[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>Xs||Math.abs(y-f)>Xs)&&(u.splice(a,0,Ws.push(Ss(s,p,Math.abs(d-t)<Xs&&n-y>Xs?[t,Math.abs(h-t)<Xs?f:n]:Math.abs(y-n)<Xs&&r-d>Xs?[Math.abs(f-n)<Xs?h:r,n]:Math.abs(d-r)<Xs&&y-e>Xs?[r,Math.abs(h-r)<Xs?f:e]:Math.abs(y-e)<Xs&&d-t>Xs?[Math.abs(f-e)<Xs?h:t,e]:null))-1),++l);l&&(g=!1)}if(g){var m,_,x,b=1/0;for(i=0,g=null;i<v;++i)(o=zs[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<b&&(b=x,g=o);if(g){var S=[t,e],C=[t,n],w=[r,n],I=[r,e];g.halfedges.push(Ws.push(Ss(s=g.site,S,C))-1,Ws.push(Ss(s,C,w))-1,Ws.push(Ss(s,w,I))-1,Ws.push(Ss(s,I,S))-1)}}for(i=0;i<v;++i)(o=zs[i])&&(o.halfedges.length||delete zs[i])}(s,a,u,l)}this.edges=Ws,this.cells=zs,qs=Vs=Ws=zs=null}Zs.prototype={constructor:Zs,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return Es(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a,u,l,c=r.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&n<s.index&&n<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[n=s],s=null,i.halfedges.forEach(function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=n,null==r||c<=r*r?i.site:null}};o(2676);o(675);function Qs(){return new Js}function Js(){this.reset()}Js.prototype={constructor:Js,reset:function(){this.s=this.t=0},add:function(t){$s(Ks,t,this.t),$s(this,Ks.s,this.s),this.s?this.t+=Ks.t:this.s=Ks.t},valueOf:function(){return this.s}};var Ks=new Js;function $s(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}var ta=1e-6,ea=Math.PI,ra=ea/2,na=ea/4,ia=2*ea,oa=ea/180,sa=Math.abs,aa=Math.atan,ua=Math.atan2,la=Math.cos,ca=(Math.ceil,Math.exp),ha=(Math.floor,Math.log),fa=(Math.pow,Math.sin),pa=(Math.sign,Math.sqrt),da=Math.tan;function ya(t){return t>1?ra:t<-1?-ra:Math.asin(t)}function va(){}Qs(),Qs();function ga(t){var e=t[0],r=t[1],n=la(r);return[n*la(e),n*fa(e),fa(r)]}function ma(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _a(t){var e=pa(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Qs();function xa(t,e){return[t>ea?t-ia:t<-ea?t+ia:t,e]}function ba(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Sa(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!(t.length-1<=0)){var e,r,n=t[0],s=t[e];if(s,sa(n[0]-c[0])<ta&&sa(l[1]-c[1])<ta){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],n[1]);i.lineEnd()}else{var l,c;a.push(new ba(n,t,null,!0)),u.push(r.o=new ba(n,null,r,!1)),a.push(new ba(s,t,null,!1)),u.push(r.o=new ba(s,null,r,!0))}}}),a.length){for(u.sort(e),Ca(a),Ca(u),0,u.length;o<s;++o)u[o].e=!r;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if(f.n===h)return;f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(0,l.length;o<s;++o)i.point(l[o][0],c[1]);else n(f.x,f.n.x,1,i);f.n}else{if(p)for(f.p.z,l.length-1;o>=0;--o)i.point(l[o][0],c[1]);else n(f.x,f.p.x,-1,i);f.p}f.o.z,!p}while(!f.v);i.lineEnd()}}}function Ca(t){if(t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=t[n],r.p=i,r;i.n=t[0],r.p=i}}function wa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}xa.invert=xa;var Ia,Pa;1===(Ia=wa).length&&(Pa=Ia,Ia=function(t,e){return wa(Pa(t),e)});var Ea=Array.prototype;Ea.slice,Ea.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Ma=Qs();function La(t,e){var r=e[0],n=e[1],i=[fa(r),-la(r),0],o=0,s=0;Ma.reset();for(var a=0,u=t.length;a<u;++a)if(t[a].length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+na,d=fa(p),y=la(p),v=0;v<c;m,x,b,g){var g=l[v],m=g[0],_=g[1]/2+na,x=fa(_),b=la(_),S=m-f,C=S>=0?1:-1,w=C*S,I=w>ea,P=d*x;if(Ma.add(ua(P*C*fa(w),y*b+P*la(w))),I?S+C*ia:S,I^f>=r^m>=r){var E=ma(ga(h),ga(g));_a(E);var M=ma(i,E);_a(M);var L=(I^S>=0?-1:1)*ya(M[2]);(n>L||n===L&&(E[0]||E[1]))&&(I^S>=0?1:-1)}}return(o<-1e-6||o<ta&&Ma<-1e-6)^1&s}Qs();Qs(),Qs();Qs();function Na(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ta(t){return t.length>1}function Oa(t,e){return(t.x[0]<0?t[1]-ra-ta:ra-t[1])-(e.x[0]<0?e[1]-ra-ta:ra-e[1])}Na(4.5);function Ra(t){return function(e){var r=new Aa;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Aa(){}Aa.prototype={constructor:Aa,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};la(30*oa);Ra({point:function(t,e){this.stream.point(t*oa,e*oa)}});function Fa(t){return function(e,r){var n=la(e),i=la(r),o=t(n*i);return[o*i*fa(e),o*fa(r)]}}function Da(t){return function(e,r){var n=pa(e*e+r*r),i=t(n),o=fa(i),s=la(i);return[ua(e*o,n*s),ya(n&&r*o/n)]}}var ka=Fa(function(t){return pa(2/(1+t))});ka.invert=Da(function(t){return 2*ya(t/2)});var ja=Fa(function(t){return(t=(e=t)>1?0:e<-1?ea:Math.acos(e))&&t/fa(t);var e});function Ba(t,e){return[t,ha(da((ra+e)/2))]}function Ga(t,e){return[t,e]}function Ua(t,e){var r=la(e),n=la(t)*r;return[r*fa(t)/n,fa(e)/n]}function qa(t,e){var r=e*e,n=r*r;return[t*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791)),e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))]}function za(t,e){return[la(e)*fa(t),fa(e)]}function Va(t,e){var r=la(e),n=1+la(t)*r;return[r*fa(t)/n,fa(e)/n]}function Wa(t,e){return[ha(da((ra+e)/2)),-t]}ja.invert=Da(function(t){return t}),Ba.invert=function(t,e){return[t,2*aa(ca(e))-ra]},Ga.invert=Ga,Ua.invert=Da(aa),qa.invert=function(t,e){var r,n=e,i=25;do{var o=n*n,s=o*o;n-=r=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(sa(r)>ta&&--i>0);return[t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},za.invert=Da(ya),Va.invert=Da(function(t){return 2*aa(t)}),Wa.invert=function(t,e){return[-e,2*aa(ca(t))-ra]};function Xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var Ha=function(t){Kt(r,t);var e=Xa(r);function r(t){var n;return g(this,r),(n=e.call(this)).type="Point",$(Qt(n),t),n}return _(r,null,[{key:"getPointsCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var n=0;n<t[r].geometry.length;n++)e.push(t[r].geometry[n].coordinates);return e}},{key:"getPointsCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(bi(t[r]));return Xi(wi(e))}}]),r}(gi);function Ya(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Service.VPoint=Ha;var Za=function(t){Kt(r,t);var e=Ya(r);function r(t){var n;return g(this,r),(n=e.call(this)).type="LineString",$(Qt(n),t),n}return _(r,null,[{key:"getPolylinesCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var n=0;n<t[r].geometry.length;n++){for(var i=[],o=t[r].geometry[n].coordinates,s=0;s<o.length;s++)i.push([o[s].x,o[s].y]);e.push(i)}return e}},{key:"getPolylinesCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(Ci(t[r]));return Xi(wi(e))}}]),r}(gi);function Qa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var Ja=function(t){Kt(r,t);var e=Qa(r);function r(t){var n;if(g(this,r),(n=e.call(this)).type="Polygon",n.exterior=[],n.interior=[],$(Qt(n),t),n.exterior.length>0&&n.coordinates.push(n.exterior),n.interior.length>0)for(var i=0;i<n.interior.length;i++)n.coordinates.push(n.interior[i]);return n}return _(r,null,[{key:"getPolygonsCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var n=0;n<t[r].geometry.length;n++){for(var i=[],o=t[r].geometry[n].exterior,s=[],a=t[r].geometry[n].interior,u=[],l=0;l<o.length;l++)s.push([o[l].x,o[l].y]);for(var c=0;c<a.length;c++){for(var h=[],f=0;f<a[c].length;f++)h.push([a[c][f].x,a[c][f].y]);u.push(h)}i.push(s),i=i.concat(u),e.push(i)}return e}},{key:"getPolygonsCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(Si(t[r]));return Xi(wi(e))}}]),r}(gi);function Ka(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Service.VPolygon=Ja;var $a=function(t){Kt(r,t);var e=Ka(r);function r(t){var n;return g(this,r),(n=e.call(this)).geometry=void 0,n.where=void 0,n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersect",$(Qt(n),t),n}return _(r)}(pi);function tu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}$a.prototype.fromGeoJSON=function(t){if(t){var e=this;switch(t.geometry.type){case"Point":e.geometry=new Ha({coordinates:t.geometry.coordinates});break;case"LineString":e.geometry=new Za({coordinates:t.geometry.coordinates});break;case"Polygon":e.geometry=new Ja({coordinates:t.geometry.coordinates[0]})}}},Z.Service.GeometryParameter=$a;var eu=function(t){Kt(r,t);var e=tu(r);function r(t){var n;return g(this,r),(n=e.call(this)).where=void 0,n.rectangle=[],n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersects",$(Qt(n),t),n}return _(r)}(pi);function ru(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.RectangleParameter=eu;var nu=function(t){Kt(r,t);var e=ru(r);function r(t){var n;return g(this,r),(n=e.call(this)).objectIds=[],$(Qt(n),t),n}return _(r)}(pi);Z.Service.ObjectIdsParameter=nu;var iu=function(){function t(e){g(this,t),this.geometry=void 0,this.geometryType=void 0,this.attributes=void 0,this.style=void 0,this.FID=void 0,$(this,e)}return _(t,null,[{key:"fromQueryResult",value:function(e){if(!e.hasOwnProperty("SFEleArray")||!e.hasOwnProperty("AttStruct")||e.hasOwnProperty("SFEleArray")&&!e.SFEleArray||e.hasOwnProperty("AttStruct")&&!e.AttStruct)return[];for(var r,n=e.SFEleArray,i=e.AttStruct,o=[],s=0;s<n.length;s++){for(var a={},u=[],l=void 0,c=0;c<n[s].AttValue.length;c++)""!==n[s].AttValue[c]&&(a[i.FldName[c]]=n[s].AttValue[c]);if(n[s].fGeom)switch(n[s].ftype){case 1:for(var h=n[s].fGeom.PntGeom,f=0;f<h.length;f++){var p=new Ha({coordinates:[h[f].Dot.x,h[f].Dot.y]});u.push(p),l="Point"}break;case 2:for(var d=n[s].fGeom.LinGeom,y=0;y<d.length;y++){var v=new Za({coordinates:d[y].Line.Arcs[0].Dots});u.push(v),l="LineString"}break;case 3:for(var g=n[s].fGeom.RegGeom,m=0;m<g.length;m++){var _=new Ja;_.exterior=g[m].Rings[0].Arcs[0].Dots;for(var x=1;x<g[m].Rings.length;x++)_.interior.push(g[m].Rings[x].Arcs[0].Dots);u.push(_),l="Polygon"}}var b=void 0;if(n[s].GraphicInfo){var S=n[s].GraphicInfo;switch(S.InfoType){case 1:b=S.PntInfo;break;case 2:b=S.LinInfo;break;case 3:b=S.RegInfo}}r=new t({attributes:a,FID:n[s].FID,geometry:u,geometryType:l,style:b}),o.push(r)}return o}},{key:"fromGeoJSON",value:function(e){var r,n=[];if(!e.hasOwnProperty("type"))throw new Error("请输入正确的geoJSON");if("Feature"===e.type)return r=new t({geometry:t.geometry,attributes:e.properties});if("FeatureCollection"===e.type){for(var i,o,s,a=e.features,u=0;u<a.length;u++){switch(i=[],s=a[u].geometry.coordinates,a[u].geometry.type){case"Point":i.push(a[u].geometry);break;case"LineString":o=[];for(var l=0;l<s.length;l++)o.push({x:Number(s[l][0]),y:Number(s[l][1])});a[u].geometry.coordinates=o,i.push(a[u].geometry);break;case"Polygon":for(var c=new Ja,h=0;h<s[0].length;h++)c.exterior.push({x:Number(s[0][h][0]),y:Number(s[0][h][1])});for(var f=1;f<s.length;f++){for(var p=[],d=0;d<s[f].length;d++)p.push({x:Number(s[f][d][0]),y:Number(s[f][d][1])});c.exterior.push(p)}i.push(c)}r=new t({geometry:i,attributes:a[u].properties,geometryType:a[u].geometry.type}),n.push(r)}return n}throw new Error("不支持的geoJSON类型")}},{key:"toAntTableData",value:function(e){for(var r=[],n=t.fromQueryResult(e),i=0;i<n.length;i++)r.push(Object.assign(n[i].attributes,{key:n[i].FID?n[i].FID:i}));return r}},{key:"resultToGeojson",value:function(e){var r,n=t.fromQueryResult(e),i=[];n=JSON.parse(JSON.stringify(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));for(var o=0;o<n.length;o++)r=t.polygonToGeojson(n[o]),i=i.concat(r);return{type:"FeatureCollection",features:i}}},{key:"polygonToGeojson",value:function(t){for(var e,r=[],n=t.geometry,i=t.properties,o=0;o<n.length;o++)e={},"Polygon"===n[o].type&&(n[o].coordinates=[n[o].coordinates.concat(n[o].exterior,n[o].interior)]),e.geometry=n[o],e.properties=i,e.type="Feature",r.push(e);return r}},{key:"featureToGeojson",value:function(t){var e={type:"FeatureCollection",features:[]},r=[],n=t.geometryType;return"Polygon"==n?r=this.polyToGeojson(t):"LineString"==n?r=this.lineToGeojson(t):"Point"==n&&(r=this.pointToGeojson(t)),e.features=r,e}},{key:"polyToGeojson",value:function(t){for(var e,r=[],n=t.geometry,i=t.properties,o=0;o<n.length;o++){if(e={},"Polygon"===n[o].type){var s=n[o].exterior.map(function(t){return[t.x,t.y]}),a=n[o].interior.map(function(t){return[t.x,t.y]});n[o].coordinates=[n[o].coordinates.concat(s,a)]}e.geometry=n[o],e.properties=i,e.type="Feature",delete e.geometry.exterior,delete e.geometry.interior,r.push(e)}return r}},{key:"lineToGeojson",value:function(t){for(var e,r=[],n=t.geometry,i=t.properties,o=0;o<n.length;o++){if(e={},"LineString"===n[o].type){var s=n[o].coordinates.map(function(t){return[t.x,t.y]});n[o].coordinates=s}e.geometry=n[o],e.properties=i,e.type="Feature",r.push(e)}return r}},{key:"pointToGeojson",value:function(t){for(var e,r=[],n=t.geometry,i=t.properties,o=0;o<n.length;o++)e={},"Point"===n[o].type&&(n[o].coordinates=n[o].coordinates),e.geometry=n[o],e.properties=i,e.type="Feature",r.push(e);return r}}]),t}();function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.VFeature=iu;var su=function(t){Kt(r,t);var e=ou(r);function r(t){var n;g(this,r);var i=t||{};return i.baseUrl="igs/rest/mrfws",(n=e.call(this,i)).flowID=void 0!==i.flowID?i.flowID:null,n}return _(r,[{key:"execute",value:function(t,e,r){var n={};if(nt(n,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"===e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!==n)){var i=ft(n);null===i&&""===i||(this.partUrl+="&paraValues="+i)}if("post"===e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var o=new Array;if(null!==n)for(var s in n)if(null!==n[s]){var a={};a.Key=s,a.Value=n[s].toString(),o.push(a)}n=o}var u=this.getFullUrl(),l=new nn(u,{eventListeners:{scope:this,processCompleted:t,processFailed:r}});"post"===e.toLowerCase()?l.processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):l.processAsync()}}]),r}(pn);function au(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.AnalysisBase=su;var uu=function(t){Kt(r,t);var e=au(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo=void 0!==i.srcInfo?i.srcInfo:null,n.desInfo=void 0!==i.desInfo?i.desInfo:null,n.idstr=void 0!==i.idstr?i.idstr:"",n.angleType=void 0!==i.angleType?i.angleType:0,n.isDissolve=void 0===i.isDissolve||i.isDissolve,n.isDynPrj=void 0!==i.isDynPrj&&i.isDynPrj,n}return _(r)}(su);function lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClassBufferBase=uu;var cu=function(t){Kt(r,t);var e=lu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).flowID="600232",n.radiusStr=void 0!==i.radiusStr?i.radiusStr:"2,4,8,10",n}return _(r)}(uu);function hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClassBufferByMultiplyRing=cu;var fu=function(t){Kt(r,t);var e=hu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).leftRad=void 0!==i.leftRad?i.leftRad:.001,n.rightRad=void 0!==i.rightRad?i.rightRad:.001,n.isByAtt=void 0===i.isByAtt||i.isByAtt,n.fldName=void 0!==i.fldName?i.fldName:null,n.dynPrjRad=void 0!==i.dynPrjRad?i.dynPrjRad:0,n.flowID="600231",n}return _(r)}(uu);function pu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClassBufferBySingleRing=fu;var du=function(t){Kt(r,t);var e=pu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).desInfo=void 0!==i.desInfo?i.desInfo:null,n.attOptType=void 0!==i.attOptType?i.attOptType:1,n.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,n.overType=void 0!==i.overType?i.overType:3,n.tolerance=void 0!==i.tolerance?i.tolerance:1e-4,n.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,n.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,n.isValidReg=void 0!==i.isValidReg&&i.isValidReg,n}return _(r)}(su);function yu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClipBase=du;var vu=function(t){Kt(r,t);var e=yu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo=void 0!==i.srcInfo?i.srcInfo:null,n.center=void 0!==i.center?i.center:null,n.radius=void 0!==i.radius?i.radius:null,n.step=void 0!==i.step?i.step:.001,n.flowID="600229",n}return _(r)}(du);function gu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClipByCircle=vu;var mu=function(t){Kt(r,t);var e=gu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,n.srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,n.flowID="600230",n}return _(r)}(du);function _u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClipByLayer=mu;var xu=function(t){Kt(r,t);var e=_u(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo=void 0!==i.srcInfo?i.srcInfo:null,n.strPos=void 0!==i.strPos?i.strPos:null,n.flowID="600228",n}return _(r)}(du);function bu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ClipByPolygon=xu;var Su=function(t){Kt(r,t);var e=bu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).flowID="600320",n.linSfclsURL=void 0!==i.linSfclsURL?i.linSfclsURL:null,n.regSfclsURL=void 0!==i.regSfclsURL?i.regSfclsURL:null,n.annoClsURL=void 0!==i.annoClsURL?i.annoClsURL:null,n.meshingParam=void 0!==i.meshingParam?i.meshingParam:null,n.contourParam=void 0!==i.contourParam?i.contourParam:null,n}return _(r)}(su);function Cu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ContourAnalyse=Su;var wu=function(t){Kt(r,t);var e=Cu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).sfGeometryXML=void 0!==i.sfGeometryXML?i.sfGeometryXML:null,n.attStrctXML=void 0!==i.attStrctXML?i.attStrctXML:null,n.attRowsXML=void 0!==i.attRowsXML?i.attRowsXML:null,n.traceRadius=void 0!==i.traceRadius?i.traceRadius:1e-4,n.resultName=void 0!==i.resultName?i.resultName:null,n.inFormat=void 0!==i.inFormat?i.inFormat:"json",n}return _(r)}(su);function Iu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.FeatureBuffBase=wu;var Pu=function(t){Kt(r,t);var e=Iu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).radiusStr=void 0!==i.radiusStr?i.radiusStr:"0.003,0.002,0.001",n.flowID="600239",n}return _(r)}(wu);function Eu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.FeatureBuffByMultiplyRing=Pu;var Mu=function(t){Kt(r,t);var e=Eu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).leftRad=void 0!==i.leftRad?i.leftRad:.001,n.rightRad=void 0!==i.rightRad?i.rightRad:.001,n.flowID="600238",n}return _(r)}(wu);function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.FeatureBuffBySingleRing=Mu;var Nu=function(t){Kt(r,t);var e=Lu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,n.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,n.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,n.analyType=void 0!==i.analyType?i.analyType:er.UserMode,n.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",n.elementType=void 0!==i.elementType?i.elementType:rr.Edge,n.nearDis=void 0!==i.nearDis?i.nearDis:.001,n.outFormat=void 0!==i.outFormat?i.outFormat:"json",n.flowID="600233",n}return _(r)}(su);function Tu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.NetAnalysis=Nu;var Ou=function(t){Kt(r,t);var e=Tu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,n.desInfo=void 0!==i.desInfo?i.desInfo:null,n.attOptType=void 0!==i.attOptType?i.attOptType:1,n.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,n.overType=void 0!==i.overType?i.overType:3,n.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,n.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,n.isValidReg=void 0!==i.isValidReg&&i.isValidReg,n.isReCalculate=void 0===i.isReCalculate||i.isReCalculate,n.radius=void 0!==i.radius?i.radius:.001,n}return _(r)}(su);function Ru(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.OverlayBase=Ou;var Au=function(t){Kt(r,t);var e=Ru(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,n.flowID="600227",n}return _(r)}(Ou);function Fu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.OverlayByLayer=Au;var Du=function(t){Kt(r,t);var e=Fu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).strGRegionXML=void 0!==i.strGRegionXML?i.strGRegionXML:null,n.inFormat=void 0!==i.inFormat?i.inFormat:"json",n.flowID="600237",n}return _(r)}(Ou);function ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.OverlayByPolygon=Du;var ju=function(t){Kt(r,t);var e=ku(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).clsName=void 0!==i.clsName?i.clsName:null,n.desClsName=void 0!==i.desClsName?i.desClsName:null,n.resultName=void 0!==i.resultName?i.resultName:null,n}return _(r)}(su);function Bu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ProjectBase=ju;var Gu=function(t){Kt(r,t);var e=Bu(r);function r(t,n){var i;g(this,r);var o=n||{};return $(o,t),(i=e.call(this,o)).flowID="600235",i}return _(r)}(ju);function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ProjectByLayer=Gu;var qu=function(t){Kt(r,t);var e=Uu(r);function r(t,n){var i;g(this,r);var o=n||{};return $(o,t),(i=e.call(this,o)).flowID="600234",i.srID=void 0!==o.srID?o.srID:32,i}return _(r)}(ju);function zu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ProjectBySRID=qu;var Vu=function(t){Kt(r,t);var e=zu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).guid=i.guid?i.guid:Pt(),n.f=void 0!==i.f?i.f:"json",n}return _(r,[{key:"executeWorkFlow",value:function(t,e,r,n,i,o){r||(r=!1);var s={};null!==o&&"POST"===o.toUpperCase()?(s.paraValues=e,this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+r+"&guid="+this.guid):this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+r+"&guid="+this.guid;var a=this.getFullUrl(),u=new nn(a,{eventListeners:{scope:this,processCompleted:n,processFailed:i}});null!==o&&"POST"===o.toUpperCase()?u.processAsync({method:"POST",data:JSON.stringify(s)}):u.processAsync()}},{key:"getInstanceMessage",value:function(t,e,r){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getInstanceOutPutValue",value:function(t,e,r,n){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:r,processFailed:n}}).processAsync()}},{key:"getInstanceResult",value:function(t,e,r){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getInstanceStatus",value:function(t,e,r){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getWorkFlowGroups",value:function(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new nn(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfoByID",value:function(t,e,r){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getWorkFlowInfos",value:function(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new nn(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfosByGroup",value:function(t,e,r){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getFolder1",value:function(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new nn(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder2",value:function(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new nn(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder3",value:function(t,e,r){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}}]),r}(su);function Wu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.FunctionWareService=Vu;var Xu=function(t){Kt(r,t);var e=Wu(r);function r(t){g(this,r);var n=t||{};return n.baseUrl="igs/rest/mrgs",e.call(this,n)}return _(r)}(pn);Z.Service.GeometryAnalysisBase=Xu;var Hu=function(t){var e=t||{};$(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};Z.Service.CProjectParam=Hu;var Yu=function(t,e){this.DesSrsID=t,this.GdbInfo=e};function Zu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CProjectBySRSID=Yu;var Qu=function(t){Kt(r,t);var e=Zu(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).dots=void 0!==i.dots?i.dots:null,n.projectInfo=void 0!==i.projectInfo?i.projectInfo:null,n.projectInfoBySRSID=void 0!==i.projectInfoBySRSID?i.projectInfoBySRSID:null,n}return _(r,[{key:"execute",value:function(t,e,r){t instanceof Hu&&(this.projectInfo=t),t instanceof Yu&&(this.projectInfoBySrsID=t);var n={};n.Dots=this.dots,n.ProjectInfo=this.projectInfo,n.ProjectInfoBySrsID=this.projectInfoBySrsID;var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(Xu);function Ju(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CalServiceBase=Qu;var Ku=function(t){Kt(r,t);var e=Ju(r);function r(t,n){var i;g(this,r);var o=n||{};return $(o,{dots:t}),(i=e.call(this,o)).partUrl="geomservice/calArea?f=json",i}return _(r)}(Qu);function $u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CalArea=Ku;var tl=function(t){Kt(r,t);var e=$u(r);function r(t,n){var i;g(this,r);var o=n||{};return $(o,{dots:t}),(i=e.call(this,o)).partUrl="geomservice/calLength?f=json",i}return _(r)}(Qu);function el(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CalPolyLineLength=tl;var rl=function(t){Kt(r,t);var e=el(r);function r(t,n,i,o){var s;g(this,r);var a=o||{};return(s=e.call(this,a)).InputDots=t,s.SrcProjParam=n,s.DesProjParm=i,s}return _(r,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var r={};r.InputDots=this.InputDots,r.SrcProjParam=this.SrcProjParam,r.DesProjParm=this.DesProjParm;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(Xu);function nl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ProjectDots=rl;var il=function(t){Kt(r,t);var e=nl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).gdbsvrName=void 0!==i.gdbsvrName?i.gdbsvrName:"MapGISLocal",n.gdbName=void 0!==i.gdbName?i.gdbName:null,n.srefID=void 0!==i.srefID?i.srefID:0,n.desfID=void 0!==i.desfID?i.desfID:0,n.userName=void 0!==i.userName?i.userName:null,n.password=void 0!==i.password?i.password:null,n}return _(r,[{key:"execute",value:function(t,e,r){var n="";t&&(n=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null===this.userName||null===this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+n:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+n+"&userName="+this.userName+"&password="+this.password;var i=this.getFullUrl();new nn(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}}]),r}(Xu);function sl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ProjectRang=il;var al=function(t){Kt(r,t);var e=sl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).type=void 0!==i.type?i.type:0,n.step=void 0!==i.step?i.step:1,n}return _(r,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,r){if(2==this.type){if(t.length<4)return void alert("当前选中的为三次Beizer样条，最少需四个点")}else if(t.length<3)return void alert("当前选中的类型最少需三个点");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var n=this.getFullUrl();new nn(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(Xu);function ul(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.Smooth=al;var ll=function(t){Kt(r,t);var e=ul(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).pnt=void 0!==i.pnt?i.pnt:null,n.line=void 0!==i.line?i.line:null,n.reg=void 0!==i.reg?i.reg:null,n.nearDis=void 0!==i.nearDis?i.nearDis:.01,n.relativeObj=void 0!==i.relativeObj?i.relativeObj:null,n.p_onSuccess=void 0!==i.p_onSuccess?i.p_onSuccess:null,n}return _(r,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=Lt(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(n=this).p_onSuccess=t;var r={};r.NearDis=this.nearDis,r.Pnt=this.pnt,r.Line=this.line,r.Reg=this.reg,r.RelativeObj=this.relativeObj,n.partUrl="geomservice/topanalysis?f=json";var n,i=n.getFullUrl();new nn(i,{eventListeners:{scope:n=this,processCompleted:n.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(Xu);function cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.TopAnalysis=ll;var hl=function(t){Kt(r,t);var e=cl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).points=void 0!==i.points?i.points:"",n.dx=void 0!==i.dx?i.dx:"",n.dy=void 0!==i.dy?i.dy:"",n.dz=void 0!==i.dz?i.dz:"",n.m=void 0!==i.m?i.m:"",n.wx=void 0!==i.wx?i.wx:"",n.wy=void 0!==i.wy?i.wy:"",n.wz=void 0!==i.wz?i.wz:"",n.srcsrsname=void 0!==i.srcsrsname?i.srcsrsname:"",n.dessrsname=void 0!==i.dessrsname?i.dessrsname:"",n}return _(r,[{key:"coordinateTrans",value:function(t,e,r){var n={};null!==r&&"POST"===r.toUpperCase()?(n.paraValues="",this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname):(n=this,this.partUrl="geomservice/transcoordinate");var i=this.getFullUrl(),o=new nn(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}});null!==r&&"POST"===r.toUpperCase()?o.processAsync({method:"POST",data:JSON.stringify(n)}):o.processAsync()}}]),r}(Xu);function fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.CoordinateTransform=hl;var pl=function(t){Kt(r,t);var e=fl(r);function r(t){g(this,r);var n=t||{};return n.baseUrl="igs/rest/mrms",e.call(this,n)}return _(r)}(pn);function dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.MapServiceBase=pl;var yl=function(t){Kt(r,t);var e=dl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).docName=void 0!==i.docName?i.docName:null,n.cache=void 0!==i.cache&&i.cache,n.cache?(n.level=void 0!==i.level?i.level:0,n.row=void 0!==i.row?i.row:0,n.col=void 0!==i.col?i.col:0,n.update=void 0!==i.update&&i.update):(n.layers=void 0!==i.layers?i.layers:null,n.style=void 0!==i.style?i.style:null,n.picType=void 0!==i.picType?i.picType:"gif",n.bbox=void 0!==i.bbox?i.bbox:null,n.filters=void 0!==i.filters?i.filters:null,n.picWidth=void 0!==i.picWidth?i.picWidth:512,n.picHeight=void 0!==i.picHeight?i.picHeight:512,n.proj=void 0!==i.proj?i.proj:null,n.guid=void 0!==i.guid?i.guid:Pt()),n}return _(r,[{key:"GetMapImage",value:function(){return this.docName?(!0===this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!==this.bbox&&(this.partUrl+="bbox="+this.bbox),null!==this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!==this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!==this.layers&&(this.partUrl+="&layers="+this.layers),null!==this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.proj&&(this.partUrl+="&proj="+JSON.stringify(this.proj)),null!==this.picType&&(this.partUrl+="&f="+this.picType),null!==this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),r}(pl);function vl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.GetDocImageService=yl;var gl=function(t){Kt(r,t);var e=vl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).gdbps=void 0!==i.gdbps?i.gdbps:null,n.picType=void 0!==i.picType?i.picType:"gif",n.style=void 0!==i.style?i.style:null,n.bbox=void 0!==i.bbox?i.bbox:null,n.filters=void 0!==i.filters?i.filters:null,n.picWidth=void 0!==i.picWidth?i.picWidth:512,n.picHeight=void 0!==i.picHeight?i.picHeight:512,n}return _(r,[{key:"GetLayerImage",value:function(){if(null!==this.gdbps&&null!==this.picWidth&&null!==this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");for(var t=this.gdbps.split(","),e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.filters&&(this.partUrl+="&filters="+this.filters),null!==this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),r}(pl);function ml(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.GetLayerImageService=gl;var _l=function(t){Kt(r,t);var e=ml(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).mapName=void 0!==i.mapName?i.mapName:null,n.mapType=void 0!==i.mapType?i.mapType:ur.Doc,n.mapType===ur.Tile?(n.level=void 0!==i.level?i.level:0,n.row=void 0!==i.row?i.row:0,n.col=void 0!==i.col?i.col:0):(n.picType=void 0!==i.picType?i.picType:"gif",n.picWidth=void 0!==i.picWidth?i.picWidth:512,n.picHeight=void 0!==i.picHeight?i.picHeight:512,n.xmin=void 0!==i.xmin?i.xmin:null,n.xmax=void 0!==i.xmax?i.xmax:null,n.ymin=void 0!==i.ymin?i.ymin:null,n.ymax=void 0!==i.ymax?i.ymax:null),n}return _(r,[{key:"GetImage",value:function(){return this.mapName?(this.mapType===ur.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!==this.xmin&&null!==this.xmax&&null!==this.ymin&&null!==this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),r}(pl);function xl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.GetMapImageService=_l;var bl=function(t){Kt(r,t);var e=xl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).mapName=void 0!==i.mapName?i.mapName:null,n.guid=void 0!==i.guid?i.guid:Pt(),n.token=i.token,n.type=i.type,n}return _(r,[{key:"GetMapInfo",value:function(t,e){var r=this;if(r.mapName){r.partUrl="info/"+this.mapName;var n=[];r.guid&&n.push("guid="+r.guid),this.token&&n.push("token="+r.token),this.type&&n.push("type="+r.type),n.length>0&&(r.partUrl+="?"+n.join("&"));var i=r.getFullUrl();new nn(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}}]),r}(pl);function Sl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.GetMapInfoService=bl;var Cl=function(t){Kt(r,t);var e=Sl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).hdfName=void 0!==i.hdfName?i.hdfName:null,n.level=void 0!==i.level?i.level:0,n.row=void 0!==i.row?i.row:0,n.col=void 0!==i.col?i.col:0,n}return _(r,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),r}(pl);Z.Service.GetTileImageService=Cl;var wl={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};Z.Object.Theme.CAllOtherDataItemInfoSource=wl;var Il=function(t){var e=void 0!==t?t:{};$(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};Z.Object.Theme.CAnnInfo=Il;var Pl={Unknown:0,Value:1,Percent:2};Z.Object.Theme.CChartLabelFormat=Pl;var El=_(function t(e){g(this,t);var r=void 0!==e?e:{};$(this,r),this.Name=r&&r.Name?r.Name:null,this.IsBaseTheme=!r||!r.IsBaseTheme||r.IsBaseTheme,this.Visible=!r||!r.Visible||r.Visible});Z.Object.Theme.CTheme=El;var Ml={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};Z.Object.Theme.CChartType=Ml;var Ll=function(t){var e=void 0!==t?t:{};$(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};Z.Object.Theme.CPntInfo=Ll;var Nl=function(t){var e=void 0!==t?t:{};$(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:nr.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:ir.Round,this.JointType=void 0!==e.JointType?e.JointType:or.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:sr.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};Z.Object.Theme.CLinInfo=Nl;var Tl=function(t){var e=void 0!==t?t:{};$(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};Z.Object.Theme.CRegInfo=Tl;var Ol=_(function t(e){g(this,t);var r=void 0!==e?e:{};$(this,r),this.Caption=void 0!==r.Caption?r.Caption:null,this.IsVisible=void 0===r.IsVisible||r.IsVisible,this.MaxScale=void 0!==r.MaxScale?parseFloat(r.MaxScale):0,this.MinScale=void 0!==r.MinScale?parseFloat(r.MinScale):0,this.RegInfo=void 0!==r.RegInfo?r.RegInfo:null,this.LinInfo=void 0!==r.LinInfo?r.LinInfo:null,this.PntInfo=void 0!==r.PntInfo?r.PntInfo:null});function Rl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CThemeInfo=Ol;var Al=function(t){Kt(r,t);var e=Rl(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).Expression=void 0!==t?t:"",i}return _(r)}(Ol);Z.Object.Theme.CChartThemeInfo=Al;var Fl=function(t){var e=void 0!==t?t:{};$(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new Il,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:Pl.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};function Dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CChartThemeRepresentInfo=Fl;var kl=function(t){Kt(r,t);var e=Dl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).ChartType=void 0!==i.ChartType?i.ChartType:Ml.Bar,n.ChartThemeInfoArr=void 0!==i.ChartThemeInfoArr?i.ChartThemeInfoArr:null,n.RepresentInfo=void 0!==i.RepresentInfo?i.RepresentInfo:null,n.Type="CChartTheme",n}return _(r)}(El);function jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CChartTheme=kl;var Bl=function(t){Kt(r,t);var e=jl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).Expression=void 0!==i.Expression?i.Expression:"",n.Info=void 0!==i.Info?i.Info:null,n.Value=void 0!==i.Value?i.Value:null,n.Type="CDotDensityTheme",n}return _(r)}(El);function Gl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CDotDensityTheme=Bl;var Ul=function(t){Kt(r,t);var e=Gl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).ClrInfo=void 0!==i.ClrInfo?i.ClrInfo:[25,57,89,121],n.Type="CFourColorTheme",n}return _(r)}(El);function ql(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CFourColorTheme=Ul;var zl=function(t){Kt(r,t);var e=ql(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).BaseValue=void 0!==i.BaseValue?i.BaseValue:141e-6,n.DispMinus=void 0!==i.DispMinus&&i.DispMinus,n.DispZero=void 0!==i.DispZero&&i.DispZero,n.Expression=void 0!==i.Expression?i.Expression:null,n.MinusPntInfo=void 0!==i.MinusPntInfo?i.MinusPntInfo:null,n.PlusPntInfo=void 0!==i.PlusPntInfo?i.PlusPntInfo:null,n.ZeroPntInfo=void 0!==i.ZeroPntInfo?i.ZeroPntInfo:null,n.Type="CGraduatedSymbolTheme",n}return _(r)}(El);Z.Object.Theme.CGraduatedSymbolTheme=zl;var Vl=function(t,e,r){$(this,void 0!==r?r:{}),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};function Wl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.ExpInfo=Vl;var Xl=function(t){Kt(r,t);var e=Wl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,n.ExpInfoArr=void 0!==i.ExpInfoArr?i.ExpInfoArr:null,n.MultiClassThemeInfoArr=void 0!==i.MultiClassThemeInfoArr?i.MultiClassThemeInfoArr:null,n.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,n.Type="CMultiClassTheme",n}return _(r)}(El);function Hl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CMultiClassTheme=Xl;var Yl=function(t){Kt(r,t);var e=Hl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).Type="CRandomTheme",n}return _(r)}(El);function Zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CRandomTheme=Yl;var Ql=function(t){Kt(r,t);var e=Zl(r);function r(t,n,i){var o;g(this,r);var s=i||{};return(o=e.call(this,s)).StartValue=void 0!==t?t:"",o.EndValue=void 0!==n?n:"",o}return _(r)}(Ol);function Jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CRangeThemeInfo=Ql;var Kl=function(t){Kt(r,t);var e=Jl(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).AllOtherDataItemInfoSource=void 0!==i.AllOtherDataItemInfoSource?i.AllOtherDataItemInfoSource:wl.DefaultThemeInfo,n.Expression=void 0!==i.Expression?i.Expression:"",n.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,n.RangeThemeInfoArr=void 0!==i.RangeThemeInfoArr?i.RangeThemeInfoArr:null,n.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,n.Type="CRangeTheme",n}return _(r)}(El);function $l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CRangeTheme=Kl;var tc=function(t){Kt(r,t);var e=$l(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).ThemeInfo=void 0!==i.ThemeInfo?i.ThemeInfo:new Ol,n.Type="CSimpleTheme",n}return _(r)}(El);function ec(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CSimpleTheme=tc;var rc=function(t){Kt(r,t);var e=ec(r);function r(t,n){var i;g(this,r);var o=n||{};return(i=e.call(this,o)).Value=void 0!==t?t:"",i}return _(r)}(Ol);function nc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.CUniqueThemeInfo=rc;var ic=function(t){Kt(r,t);var e=nc(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,n.Expression=void 0!==i.Expression?i.Expression:"",n.UniqueThemeInfoArr=void 0!==i.UniqueThemeInfoArr?i.UniqueThemeInfoArr:null,n.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,n.Type="CUniqueTheme",n}return _(r)}(El);Z.Object.Theme.CUniqueTheme=ic;var oc=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};Z.Object.Theme.FolderInfoAttribute=oc;var sc=function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null};Z.Object.Theme.FolderInfo=sc;var ac=function(t,e,r,n){$(this,void 0!==n?n:{}),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==r?r:ar.RangeTheme};Z.Object.Theme.ItemValue=ac;var uc=function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null};function lc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Object.Theme.ThemesInfo=uc;var cc=function(t){Kt(r,t);var e=lc(r);function r(t,n){var i;return g(this,r),(n=n||{}).baseUrl="igs/rest/theme",(i=e.call(this,n)).guid=null!==t?t:Pt(),i.p_onSuccess=void 0!==n.p_onSuccess?n.p_onSuccess:null,i}return _(r,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new sc;if(et(e,t.result||t),null!==e&&null!==e.attribute&&e.attribute.length>0){for(var r=[],n=null,i=0;i<e.attribute.length;i++)if(r[i]=new uc,null!==e.attribute[i]&&(r[i].LayerName=e.attribute[i].name,null!==(n=JSON.parse(e.attribute[i].value))&&n.length>0)){r[i].ThemeArr=[];for(var o=0;o<n.length;o++){switch(n[o].name){case"CMultiClassTheme":r[i].ThemeArr[o]=new Xl;break;case"CSimpleTheme":r[i].ThemeArr[o]=new tc;break;case"CChartTheme":r[i].ThemeArr[o]=new kl;break;case"CGraduatedSymbolTheme":r[i].ThemeArr[o]=new zl;break;case"CDotDensityTheme":r[i].ThemeArr[o]=new Bl;break;case"CRandomTheme":r[i].ThemeArr[o]=new Yl;break;case"CFourColorTheme":r[i].ThemeArr[o]=new Ul;break;case"CUniqueTheme":r[i].ThemeArr[o]=new ic;break;case"CRangeTheme":r[i].ThemeArr[o]=new Kl}et(r[i].ThemeArr[o],JSON.parse(n[o].value))}}null!==this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(r)}}},{key:"getThemesInfo",value:function(t,e,r,n){var i=this;i.p_onSuccess=r;var o=Math.random();i.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+i.guid;var s=i.getFullUrl();new nn(s,{eventListeners:{scope:i,processCompleted:i.onGetThemesInfoSuccess,processFailed:n}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,r,n){var i=this,o=Math.random();i.partUrl=t+"/remove?idxArr="+e+"&r="+o+"&guid="+i.guid;var s=i.getFullUrl();new nn(s,{eventListeners:{scope:i,processCompleted:r,processFailed:n}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,r,n,i){var o=this;Math.random();o.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var s=o.getFullUrl(),a=new sc;if(null!==r&&r.length>0){a.name="ThemeInfo",a.attribute=[];for(var u=0;u<r.length;u++)if(a.attribute[u]=new oc,a.attribute[u].name=r[u].LayerName,null!==r[u].ThemeArr&&r[u].ThemeArr.length>0){for(var l=[],c=0;c<r[u].ThemeArr.length;c++)null!==r[u].ThemeArr[c]&&(l[c]=new oc(r[u].ThemeArr[c].Type,JSON.stringify(r[u].ThemeArr[c])));a.attribute[u].value=JSON.stringify(l)}}new nn(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}}).processAsync({method:"POST",data:JSON.stringify(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,r,n,i){var o=this;Math.random();o.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var s=o.getFullUrl(),a=new sc;if(null!==r&&r.length>0){a.name="ThemeInfo",a.attribute=[];for(var u=0;u<r.length;u++)if(a.attribute[u]=new oc,a.attribute[u].name=r[u].LayerName,null!==r[u].ThemeArr&&r[u].ThemeArr.length>0){for(var l=[],c=0;c<r[u].ThemeArr.length;c++)null!==r[u].ThemeArr[c]&&(l[c]=new oc(r[u].ThemeArr[c].Type,JSON.stringify(r[u].ThemeArr[c])));a.attribute[u].value=JSON.stringify(l)}}new nn(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}}).processAsync({method:"POST",data:JSON.stringify(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(pn);Z.Service.ThemeOper=cc;var hc=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")};Z.XLink.readHref=hc;var fc=function(t,e){return t>e?1:t<e?-1:0},pc=function(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]};Z.array.binarySearch=function(t,e,r){for(var n,i,o=r||fc,s=0,a=t.length,u=!1;s<a;)(i=+o(t[n=s+(a-s>>1)],e))<0?s=n+1:(a=n,u=!i);return u?s:~s},Z.array.numberSafeCompareFunction=fc,Z.array.includes=function(t,e){return t.indexOf(e)>=0},Z.array.linearFindNearest=function(t,e,r){var n,i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;if(r>0){for(n=1;n<i;++n)if(t[n]<e)return n-1}else if(r<0){for(n=1;n<i;++n)if(t[n]<=e)return n}else for(n=1;n<i;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return i-1},Z.array.reverseSubArray=function(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}},Z.array.extend=pc,Z.array.remove=function(t,e){var r=t.indexOf(e),n=r>-1;return n&&t.splice(r,1),n},Z.array.find=function(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null},Z.array.equals=function(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0},Z.array.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort(function(t,r){return e(t.value,r.value)||t.index-r.index}),r=0;r<t.length;r++)t[r]=i[r].value},Z.array.findIndex=function(t,e){var r;return!t.every(function(n,i){return r=i,!e(n,i,t)})?r:-1},Z.array.isSorted=function(t,e,r){var n=e||fc;return t.every(function(e,i){if(0===i)return!0;var o=n(t[i-1],e);return!(o>0||r&&0===o)})};var dc=document.implementation.createDocument("","",null),yc=function(t,e){return dc.createElementNS(t,e)},vc=function(t,e){return gc(t,e,[]).join("")},gc=function t(e,r,n){var i;if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)r?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else for(i=e.firstChild;i;i=i.nextSibling)t(i,r,n);return n},mc=function(t){return t instanceof Document},_c=function(t){return t instanceof Node},xc=function(t){return(new DOMParser).parseFromString(t,"application/xml")},bc=function(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}},Sc=function(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var s=i[i.length-1],a=void 0!==e?e:n.localName;(a in s?s[a]:s[a]=[]).push(o)}}},Cc=function(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}},wc=function(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,s=r;void 0===s&&(s=i);var a=void 0!==e?e:o.namespaceURI;return yc(a,s)}},Ic=wc(),Pc=function(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o},Ec=function(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var s=o[i.localName];void 0!==s&&s.call(n,i,r)}}},Mc=function(t,e,r,n,i){return n.push(t),Ec(e,r,n,i),n.pop()},Lc=function(t,e,r,n,i,o){for(var s,a,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(s=r[l])&&void 0!==(a=e.call(void 0!==o?o:this,s,n,void 0!==i?i[l]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,n)};Z.xml.DOCUMENT=dc,Z.xml.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance",Z.xml.createElementNS=yc,Z.xml.getAllTextContent=vc,Z.xml.getAllTextContent_=gc,Z.xml.isDocument=mc,Z.xml.isNode=_c,Z.xml.getAttributeNS=function(t,e,r){return t.getAttributeNS(e,r)||""},Z.xml.parse=xc,Z.xml.makeArrayExtender=function(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);if(void 0!==i){var o=n[n.length-1];pc(o,i)}}},Z.xml.makeArrayPusher=bc,Z.xml.makeReplacer=function(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}},Z.xml.makeObjectPropertyPusher=Sc,Z.xml.makeObjectPropertySetter=Cc,Z.xml.makeChildAppender=function(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}},Z.xml.makeArraySerializer=function(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var s={};s[e.localName]=t,r[e.namespaceURI]=s,n=wc(e.localName)}Lc(r,n,i,o)}},Z.xml.makeSimpleNodeFactory=wc,Z.xml.OBJECT_PROPERTY_NODE_FACTORY=Ic,Z.xml.makeSequence=function(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n},Z.xml.makeStructureNS=Pc,Z.xml.parseNode=Ec,Z.xml.pushParseAndPop=Mc,Z.xml.serialize=Lc,Z.xml.applyTransform=function(t,e,r,n,i,o,s){return i.push(t),Lc(e,r,n,i,o,s),i.pop()};var Nc=function(){function t(){g(this,t)}return _(t,[{key:"read",value:function(t){if(mc(t))return this.readFromDocument(t);if(_c(t))return this.readFromNode(t);if("string"==typeof t){var e=xc(t);return this.readFromDocument(e)}return null}},{key:"readFromDocument",value:function(t){}},{key:"readFromNode",value:function(t){}}]),t}();const Tc=Nc;Z.Format.XML=Nc;var Oc=function(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n};Z.string.padNumber=Oc,Z.string.compareVersions=function(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0};var Rc=function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0},Ac=function(t){var e=vc(t,!1);return Fc(e)},Fc=function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0},Dc=function(t){var e=vc(t,!1);return kc(e)},kc=function(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0},jc=function(t){return vc(t,!1).trim()},Bc=function(t,e){t.appendChild(dc.createTextNode(e))};function Gc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.xsd.readBoolean=function(t){var e=vc(t,!1);return Rc(e)},Z.xsd.readBooleanString=Rc,Z.xsd.readDateTime=function(t){var e=vc(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3},Z.xsd.readDecimal=Ac,Z.xsd.readDecimalString=Fc,Z.xsd.readNonNegativeInteger=Dc,Z.xsd.readNonNegativeIntegerString=kc,Z.xsd.readString=jc,Z.xsd.writeBooleanTextNode=function(t,e){Bc(t,e?"1":"0")},Z.xsd.writeCDATASection=function(t,e){t.appendChild(dc.createCDATASection(e))},Z.xsd.writeDateTimeTextNode=function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+Oc(r.getUTCMonth()+1,2)+"-"+Oc(r.getUTCDate(),2)+"T"+Oc(r.getUTCHours(),2)+":"+Oc(r.getUTCMinutes(),2)+":"+Oc(r.getUTCSeconds(),2)+"Z";t.appendChild(dc.createTextNode(n))},Z.xsd.writeDecimalTextNode=function(t,e){var r=e.toPrecision();t.appendChild(dc.createTextNode(r))},Z.xsd.writeNonNegativeIntegerTextNode=function(t,e){var r=e.toString();t.appendChild(dc.createTextNode(r))},Z.xsd.writeStringTextNode=Bc;var Uc=[null,"http://www.opengis.net/wms"],qc=Pc(Uc,{Service:Cc(function(t,e){return Mc({},Wc,t,e)}),Capability:Cc(function(t,e){return Mc({},zc,t,e)})}),zc=Pc(Uc,{Request:Cc(function(t,e){return Mc({},$c,t,e)}),Exception:Cc(function(t,e){return Mc([],Zc,t,e)}),Layer:Cc(function(t,e){return Mc({},Qc,t,e)})}),Vc=function(t){Kt(r,t);var e=Gc(r);function r(){var t;return g(this,r),(t=e.call(this)).version=void 0,t}return _(r,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){this.version=t.getAttribute("version").trim();var e=Mc({version:this.version},qc,t,[]);return e||null}}]),r}(Tc),Wc=Pc(Uc,{Name:Cc(jc),Title:Cc(jc),Abstract:Cc(jc),KeywordList:Cc(lh),OnlineResource:Cc(hc),ContactInformation:Cc(function(t,e){return Mc({},Xc,t,e)}),Fees:Cc(jc),AccessConstraints:Cc(jc),LayerLimit:Cc(Dc),MaxWidth:Cc(Dc),MaxHeight:Cc(Dc)}),Xc=Pc(Uc,{ContactPersonPrimary:Cc(function(t,e){return Mc({},Hc,t,e)}),ContactPosition:Cc(jc),ContactAddress:Cc(function(t,e){return Mc({},Yc,t,e)}),ContactVoiceTelephone:Cc(jc),ContactFacsimileTelephone:Cc(jc),ContactElectronicMailAddress:Cc(jc)}),Hc=Pc(Uc,{ContactPerson:Cc(jc),ContactOrganization:Cc(jc)}),Yc=Pc(Uc,{AddressType:Cc(jc),Address:Cc(jc),City:Cc(jc),StateOrProvince:Cc(jc),PostCode:Cc(jc),Country:Cc(jc)}),Zc=Pc(Uc,{Format:bc(jc)}),Qc=Pc(Uc,{Name:Cc(jc),Title:Cc(jc),Abstract:Cc(jc),KeywordList:Cc(lh),SRS:Sc(jc),EX_GeographicBoundingBox:Cc(function(t,e){var r=Mc({},Kc,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,s=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===s)return;return[n,i,o,s]}),BoundingBox:Sc(function(t,e){var r=[Fc(t.getAttribute("minx")),Fc(t.getAttribute("miny")),Fc(t.getAttribute("maxx")),Fc(t.getAttribute("maxy"))],n=[Fc(t.getAttribute("resx")),Fc(t.getAttribute("resy"))];return{srs:t.getAttribute("SRS"),extent:r,res:n}}),Dimension:Sc(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Rc(t.getAttribute("multipleValues")),nearestValue:Rc(t.getAttribute("nearestValue")),current:Rc(t.getAttribute("current")),values:jc(t)}}),Attribution:Cc(function(t,e){return Mc({},Jc,t,e)}),AuthorityURL:Sc(function(t,e){var r=sh(t,e);if(r)return r.name=t.getAttribute("name"),r;return}),Identifier:Sc(jc),MetadataURL:Sc(function(t,e){var r=sh(t,e);if(r)return r.type=t.getAttribute("type"),r;return}),DataURL:Sc(sh),FeatureListURL:Sc(sh),Style:Sc(function(t,e){return Mc({},nh,t,e)}),MinScaleDenominator:Cc(Ac),MaxScaleDenominator:Cc(Ac),Layer:Sc(function(t,e){var r=e[e.length-1],n=Mc({},Qc,t,e);if(!n)return;var i=Rc(t.getAttribute("queryable"));void 0===i&&(i=r.queryable);n.queryable=void 0!==i&&i;var o=kc(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded);n.cascaded=o;var s=Rc(t.getAttribute("opaque"));void 0===s&&(s=r.opaque);n.opaque=void 0!==s&&s;var a=Rc(t.getAttribute("noSubsets"));void 0===a&&(a=r.noSubsets);n.noSubsets=void 0!==a&&a;var u=Fc(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth);n.fixedWidth=u;var l=Fc(t.getAttribute("fixedHeight"));l||(l=r.fixedHeight);n.fixedHeight=l,["Style","SRS","AuthorityURL"].forEach(function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in n)){var e=r[t];n[t]=e}}),n})}),Jc=Pc(Uc,{Title:Cc(jc),OnlineResource:Cc(hc),LogoURL:Cc(uh)}),Kc=Pc(Uc,{westBoundLongitude:Cc(Ac),eastBoundLongitude:Cc(Ac),southBoundLatitude:Cc(Ac),northBoundLatitude:Cc(Ac)}),$c=Pc(Uc,{GetCapabilities:Cc(ah),GetMap:Cc(ah),GetFeatureInfo:Cc(ah)}),th=Pc(Uc,{Format:Sc(jc),DCPType:Sc(function(t,e){return Mc({},eh,t,e)})}),eh=Pc(Uc,{HTTP:Cc(function(t,e){return Mc({},rh,t,e)})}),rh=Pc(Uc,{Get:Cc(sh),Post:Cc(sh)}),nh=Pc(Uc,{Name:Cc(jc),Title:Cc(jc),Abstract:Cc(jc),LegendURL:Sc(uh),StyleSheetURL:Cc(sh),StyleURL:Cc(sh)}),ih=Pc(Uc,{Format:Cc(jc),OnlineResource:Cc(hc)}),oh=Pc(Uc,{Keyword:bc(jc)});function sh(t,e){return Mc({},ih,t,e)}function ah(t,e){return Mc({},th,t,e)}function uh(t,e){var r=sh(t,e);if(r){var n=[kc(t.getAttribute("width")),kc(t.getAttribute("height"))];return r.size=n,r}}function lh(t,e){return Mc([],oh,t,e)}Z.Format.WMSCapabilities=Vc;var ch={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};Z.Enum.Corner=ch;var hh={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};Z.Enum.Relationship=hh;var fh=function(t){for(var e=yh(),r=0,n=t.length;r<n;++r)mh(e,t[r]);return e},ph=function(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]},dh=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=hh.UNKNOWN;return s<r?u|=hh.LEFT:s>i&&(u|=hh.RIGHT),a<n?u|=hh.BELOW:a>o&&(u|=hh.ABOVE),u===hh.UNKNOWN&&(u=hh.INTERSECTING),u},yh=function(){return[1/0,1/0,-1/0,-1/0]},vh=function(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]},gh=function(t){return vh(1/0,1/0,-1/0,-1/0,t)},mh=function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},_h=function(t,e){for(var r=0,n=e.length;r<n;++r)mh(t,e[r]);return t},xh=function(t,e,r,n,i){for(;r<n;r+=i)Sh(t,e[r],e[r+1]);return t},bh=function(t,e){for(var r=0,n=e.length;r<n;++r)_h(t,e[r]);return t},Sh=function(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)},Ch=function(t){var e=0;return Oh(t)||(e=Nh(t)*Ph(t)),e},wh=function(t){return[t[0],t[1]]},Ih=function(t){return[t[2],t[1]]},Ph=function(t){return t[3]-t[1]},Eh=function(t,e,r){var n=r||yh();return Th(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):gh(n),n},Mh=function(t){return[t[0],t[3]]},Lh=function(t){return[t[2],t[3]]},Nh=function(t){return t[2]-t[0]},Th=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},Oh=function(t){return t[2]<t[0]||t[3]<t[1]};function Rh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.extent.boundingExtent=fh,Z.extent.buffer=function(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},Z.extent.clone=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},Z.extent.closestSquaredDistanceXY=function(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i},Z.extent.containsCoordinate=function(t,e){return ph(t,e[0],e[1])},Z.extent.containsExtent=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},Z.extent.containsXY=ph,Z.extent.coordinateRelationship=dh,Z.extent.createEmpty=yh,Z.extent.createOrUpdate=vh,Z.extent.createOrUpdateEmpty=gh,Z.extent.createOrUpdateFromCoordinate=function(t,e){var r=t[0],n=t[1];return vh(r,n,r,n,e)},Z.extent.createOrUpdateFromCoordinates=function(t,e){var r=gh(e);return _h(r,t)},Z.extent.createOrUpdateFromFlatCoordinates=function(t,e,r,n,i){var o=gh(i);return xh(o,t,e,r,n)},Z.extent.createOrUpdateFromRings=function(t,e){var r=gh(e);return bh(r,t)},Z.extent.equals=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},Z.extent.extend=function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},Z.extent.extendCoordinate=mh,Z.extent.extendCoordinates=_h,Z.extent.extendFlatCoordinates=xh,Z.extent.extendRings=bh,Z.extent.extendXY=Sh,Z.extent.forEachCorner=function(t,e,r){var n;return(n=e.call(r,wh(t)))||(n=e.call(r,Ih(t)))||(n=e.call(r,Lh(t)))?n:(n=e.call(r,Mh(t)))||!1},Z.extent.getArea=Ch,Z.extent.getBottomLeft=wh,Z.extent.getBottomRight=Ih,Z.extent.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},Z.extent.getCorner=function(t,e){var r;return e===ch.BOTTOM_LEFT?r=wh(t):e===ch.BOTTOM_RIGHT?r=Ih(t):e===ch.TOP_LEFT?r=Mh(t):e===ch.TOP_RIGHT&&(r=Lh(t)),r},Z.extent.getEnlargedArea=function(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)},Z.extent.getForViewAndSize=function(t,e,r,n,i){var o=e*n[0]/2,s=e*n[1]/2,a=Math.cos(r),u=Math.sin(r),l=o*a,c=o*u,h=s*a,f=s*u,p=t[0],d=t[1],y=p-l+f,v=p-l-f,g=p+l-f,m=p+l+f,_=d-c-h,x=d-c+h,b=d+c+h,S=d+c-h;return vh(Math.min(y,v,g,m),Math.min(_,x,b,S),Math.max(y,v,g,m),Math.max(_,x,b,S),i)},Z.extent.getHeight=Ph,Z.extent.getIntersectionArea=function(t,e){var r=Eh(t,e);return Ch(r)},Z.extent.getIntersection=Eh,Z.extent.getMargin=function(t){return Nh(t)+Ph(t)},Z.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Z.extent.getTopLeft=Mh,Z.extent.getTopRight=Lh,Z.extent.getWidth=Nh,Z.extent.intersects=Th,Z.extent.isEmpty=Oh,Z.extent.returnOrUpdate=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},Z.extent.scaleFromCenter=function(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n},Z.extent.intersectsSegment=function(t,e,r){var n=!1,i=dh(t,e),o=dh(t,r);if(i===hh.INTERSECTING||o===hh.INTERSECTING)n=!0;else{var s,a,u=t[0],l=t[1],c=t[2],h=t[3],f=e[0],p=e[1],d=r[0],y=r[1],v=(y-p)/(d-f);o&hh.ABOVE&&!(i&hh.ABOVE)&&(n=(s=d-(y-h)/v)>=u&&s<=c),n||!(o&hh.RIGHT)||i&hh.RIGHT||(n=(a=y-(d-c)*v)>=l&&a<=h),n||!(o&hh.BELOW)||i&hh.BELOW||(n=(s=d-(y-l)/v)>=u&&s<=c),n||!(o&hh.LEFT)||i&hh.LEFT||(n=(a=y-(d-u)*v)>=l&&a<=h)}return n},Z.extent.applyTransform=function(t,e,r){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,r){var n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return vh(n,i,o,s,r)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],r)};var Ah=[null,"http://www.opengis.net/ows/1.1"],Fh=Pc(Ah,{ServiceIdentification:Cc(function(t,e){return Mc({},Yh,t,e)}),ServiceProvider:Cc(function(t,e){return Mc({},Zh,t,e)}),OperationsMetadata:Cc(function(t,e){return Mc({},Vh,t,e)})}),Dh=function(t){Kt(r,t);var e=Rh(r);function r(){return g(this,r),e.call(this)}return _(r,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=Mc({},Fh,t,[]);return e||null}}]),r}(Tc),kh=Pc(Ah,{DeliveryPoint:Cc(jc),City:Cc(jc),AdministrativeArea:Cc(jc),PostalCode:Cc(jc),Country:Cc(jc),ElectronicMailAddress:Cc(jc)}),jh=Pc(Ah,{Value:Sc(function(t,e){return jc(t)})}),Bh=Pc(Ah,{AllowedValues:Cc(function(t,e){return Mc({},jh,t,e)})}),Gh=Pc(Ah,{Phone:Cc(function(t,e){return Mc({},Wh,t,e)}),Address:Cc(function(t,e){return Mc({},kh,t,e)})}),Uh=Pc(Ah,{HTTP:Cc(function(t,e){return Mc({},qh,t,e)})}),qh=Pc(Ah,{Get:Sc(function(t,e){var r=hc(t);if(!r)return;return Mc({href:r},Xh,t,e)}),Post:void 0}),zh=Pc(Ah,{DCP:Cc(function(t,e){return Mc({},Uh,t,e)})}),Vh=Pc(Ah,{Operation:function(t,e){var r=t.getAttribute("name"),n=Mc({},zh,t,e);if(!n)return;e[e.length-1][r]=n}}),Wh=Pc(Ah,{Voice:Cc(jc),Facsimile:Cc(jc)}),Xh=Pc(Ah,{Constraint:Sc(function(t,e){var r=t.getAttribute("name");if(!r)return;return Mc({name:r},Bh,t,e)})}),Hh=Pc(Ah,{IndividualName:Cc(jc),PositionName:Cc(jc),ContactInfo:Cc(function(t,e){return Mc({},Gh,t,e)})}),Yh=Pc(Ah,{Abstract:Cc(jc),AccessConstraints:Cc(jc),Fees:Cc(jc),Title:Cc(jc),ServiceTypeVersion:Cc(jc),ServiceType:Cc(jc)}),Zh=Pc(Ah,{ProviderName:Cc(jc),ProviderSite:Cc(hc),ServiceContact:Cc(function(t,e){return Mc({},Hh,t,e)})});const Qh=Dh;function Jh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Format.OWS=Dh;var Kh=[null,"http://www.opengis.net/wmts/1.0"],$h=[null,"http://www.opengis.net/ows/1.1"],tf=Pc(Kh,{Contents:Cc(function(t,e){return Mc({},rf,t,e)})}),ef=function(t){Kt(r,t);var e=Jh(r);function r(){var t;return g(this,r),(t=e.call(this)).owsParser_=new Qh,t}return _(r,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=t.getAttribute("version").trim(),r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=Mc(r,tf,t,[]))||null):null}}]),r}(Tc),rf=Pc(Kh,{Layer:Sc(function(t,e){return Mc({},nf,t,e)}),TileMatrixSet:Sc(function(t,e){return Mc({},hf,t,e)})}),nf=Pc(Kh,{Style:Sc(function(t,e){var r=Mc({},of,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r}),Format:Sc(jc),TileMatrixSetLink:Sc(function(t,e){return Mc({},sf,t,e)}),Dimension:Sc(function(t,e){return Mc({},lf,t,e)}),ResourceURL:Sc(function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o})},Pc($h,{Title:Cc(jc),Abstract:Cc(jc),BoundingBox:Cc(pf),WGS84BoundingBox:Cc(pf),Identifier:Cc(jc)})),of=Pc(Kh,{LegendURL:Sc(function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=hc(t),r})},Pc($h,{Title:Cc(jc),Identifier:Cc(jc)})),sf=Pc(Kh,{TileMatrixSet:Cc(jc),TileMatrixSetLimits:Cc(function(t,e){return Mc([],af,t,e)})}),af=Pc(Kh,{TileMatrixLimits:bc(function(t,e){return Mc({},uf,t,e)})}),uf=Pc(Kh,{TileMatrix:Cc(jc),MinTileRow:Cc(Dc),MaxTileRow:Cc(Dc),MinTileCol:Cc(Dc),MaxTileCol:Cc(Dc)}),lf=Pc(Kh,{Default:Cc(jc),Value:Sc(jc)},Pc($h,{Identifier:Cc(jc)})),cf=Pc($h,{LowerCorner:bc(df),UpperCorner:bc(df)}),hf=Pc(Kh,{WellKnownScaleSet:Cc(jc),TileMatrix:Sc(function(t,e){return Mc({},ff,t,e)})},Pc($h,{SupportedCRS:Cc(jc),Identifier:Cc(jc)})),ff=Pc(Kh,{TopLeftCorner:Cc(df),ScaleDenominator:Cc(Ac),TileWidth:Cc(Dc),TileHeight:Cc(Dc),MatrixWidth:Cc(Dc),MatrixHeight:Cc(Dc)},Pc($h,{Identifier:Cc(jc)}));function pf(t,e){var r=Mc([],cf,t,e);if(2==r.length)return fh(r)}function df(t,e){var r=jc(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}Z.Format.WMTSCapabilities=ef;var yf=o(9644),vf=o.n(yf);function gf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var mf=function(t){Kt(r,t);var e=gf(r);function r(t){var n;g(this,r);var i=t||{};return n=e.call(this,i),i.baseUrl="igs/rest/ogc",n.ip=i.ip||"localhost",n.port=i.port||"6163",n.baseUrl=i.baseUrl,n.version=i.version||"1.0.0",n.serverName=i.serverName,n.name=i.name,n.style=i.style||"default",n.tileMatrixset=i.tileMatrixset,n.tileMatrix=i.tileMatrix,n.tileRow=i.tileRow,n.tileCol=i.tileCol,n.format=i.format||"image/png",n.infoFormat=i.infoFormat||"text/html",n.I=i.I,n.J=i.J,n}return _(r,[{key:"getWMTSInfo",value:function(t,e){var r=this,n="";r.serverName&&""!==r.serverName&&(n+=r.serverName+"/"),n+="WMTSServer/1.0.0/WMTSCapabilities.xml",r.partUrl=n;var i=r.getFullUrl();vf()({method:"get",url:i}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var r=this;r.partUrl="WMTSServer?service=WMTS&request=GetFeatureInfo&version="+r.version+"&layer="+r.serverName+":"+r.name+"&style="+r.style+"&TileMatrixSet="+r.tileMatrixSet+"&TileMatrix="+r.tileMatrix+"&TileRow="+r.tileRow+"&TileCol="+r.tileCol+"&format="+r.format+"&InfoFormat="+r.infoFormat+"&I="+r.I+"&J="+r.J;var n=r.getFullUrl();vf()({method:"get",url:n}).then(t).catch(e)}}]),r}(pn);function _f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.OGC.OGCWMTSInfo=mf;var xf=function(t){Kt(r,t);var e=_f(r);function r(t){var n;g(this,r);var i=t||{};return n=e.call(this,i),i.baseUrl="igs/rest/ogc",n.ip=i.ip||"localhost",n.port=i.port||"6163",n.baseUrl=i.baseUrl,n.serverType=i.serverType,n.serverName=i.serverName,n.version=i.version||"1.1.1",n.layersName=i.layersName,n.style=i.style||"default",n.srs=i.srs,n.bbox=i.bbox,n.width=i.width||"1024",n.height=i.height||"768",n.format=i.format||"image/png",n.infoFormat=i.infoFormat||"text/html",n.I=i.I,n.J=i.J,n}return _(r,[{key:"getWMSInfo",value:function(t,e){var r=this;r.partUrl=r.serverType+"/"+r.serverName+"/WMSServer?service=WMS&REQUEST=GetCapabilities&version="+r.version;var n=r.getFullUrl();vf()({method:"get",url:n}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var r=this;r.partUrl=r.serverType+"/"+r.serverName+"/WMSServer?layers="+r.layersName+"&version="+r.version+"&service=WMS&request=GetFeatureInfo&styles="+r.style+"&format="+r.format+"&bbox="+r.bbox+"&width="+r.width+"&height="+r.height+"&query_Layers="+r.layersName+"&info_Format="+r.infoFormat,"1.1.1"===r.version?r.partUrl+="&srs="+r.srs+"&&X="+r.I+"&Y="+r.J:"1.3.0"===r.version&&(r.partUrl+="&crs="+r.srs+"&&I="+r.I+"&J="+r.J);var n=r.getFullUrl();vf()({method:"get",url:n}).then(t).catch(e)}}]),r}(pn);Z.OGC.OGCWMSInfo=xf;var bf=window.MapGIS=window.MapGIS||{};function Sf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}bf.OGC=bf.OGC||{};var Cf=function(t){Kt(r,t);var e=Sf(r);function r(t){g(this,r);var n=t||{};return n.baseUrl="igs/rest/ogc",e.call(this,n)}return _(r,[{key:"get",value:function(t,e,r){new IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"post",value:function(t,e,r,n){new IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:r,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(pn);bf.OGC.OGCService=Cf;var wf=o(129),If=o.n(wf);function Pf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var Ef=function(t){Kt(i,t);var e,r,n=Pf(i);function i(t){var e;g(this,i);var r=t||{};return(e=n.call(this,r)).url=r.url,e}return _(i,[{key:"isBaseUrl",value:function(){var t=!1,e="WMSServer",r=this.url.length,n=this.url.indexOf(e)+e.length;this.url;return n===r?("".concat(this.url,"?request=GetCapabilities&service=WMS"),t=!0):n===r-1&&("".concat(this.url,"request=GetCapabilities&service=WMS"),t=!0),t}},{key:"makeFullUrl",value:(r=v(b().mark(function t(){var e,r,n,i,o,s,a,u,l,c;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isBaseUrl()){t.next=9;break}return t.next=3,this.getCapabilities();case 3:return e=t.sent,r=this.height,n=this.width,i=this.crs,o=this.format,s=this.version,a=this.styles,u=e.WMT_MS_Capabilities.Capability.Layer.Layer.map(function(t){return t.Name}).toString(),l={service:"WMS",request:"GetMap",layers:u,styles:a||"",format:o||"image/png",transparent:!0,version:s||"1.1.1",height:r||256,width:n||256,srs:i||"EPSG:4326"},c="".concat(this.url,"?").concat(If().stringify(l)),t.abrupt("return",c);case 9:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"getCapabilities",value:(e=v(b().mark(function t(){var e,r,n,i,o,s,a,u;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="WMSServer",r=this.url.length,n=this.url.indexOf(e)+e.length,i=this.url,n===r?i="".concat(this.url,"?request=GetCapabilities&service=WMS"):n===r-1&&(i="".concat(this.url,"request=GetCapabilities&service=WMS")),t.next=7,vf().get(i);case 7:return o=t.sent,s=o.data,a=S.getTraversalObj(s,{}),u=S.convertToJson(a,{}),t.abrupt("return",u);case 12:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}]),i}(Cf);function Mf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}bf.OGC.WMS=Ef;var Lf=function(t){Kt(i,t);var e,r,n=Mf(i);function i(t){var e;g(this,i);var r=t||{};return(e=n.call(this,r)).url=r.url,e.featureTypes=[],e.layers=[],e}return _(i,[{key:"isBaseUrl",value:function(){var t=!1,e="WFSServer",r=this.url.length,n=this.url.indexOf(e)+e.length;return n===r?("".concat(this.url,"?request=GetCapabilities&service=WFS"),t=!0):n===r-1&&("".concat(this.url,"request=GetCapabilities&service=WFS"),t=!0),t}},{key:"setVersion",value:function(t){return this.version=t,this}},{key:"setCrs",value:function(t){return this.srsname=t,this}},{key:"setName",value:function(t){return this.typename=t,this}},{key:"setOutputFormat",value:function(t){this.outputFormat=t}},{key:"getCapabilities",value:(r=v(b().mark(function t(){var e,r,n,i,o,s,a,u,l,c,h,f,p,d;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="WFSServer",r=this.url.length,n=this.url.indexOf(e)+e.length,i=this.url,n===r?i="".concat(this.url,"?request=GetCapabilities&service=WFS"):n===r-1&&(i="".concat(this.url,"request=GetCapabilities&service=WFS")),t.next=7,vf().get(i);case 7:return o=t.sent,s=o.data,a=S.getTraversalObj(s,{}),u=S.convertToJson(a,{}),"1.1.0"===(l=u["wfs:WFS_Capabilities"]["ows:ServiceIdentification"]["ows:ServiceTypeVersion"])?(this.featureTypes=u["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType,h="",this.featureTypes.forEach(function(t,e){0==e&&(c=t.DefaultSRS,h="".concat(t.Name))}),this.layers=this.featureTypes.map(function(t){return t.Name}),this.setName(h).setCrs(c).setVersion(l).setOutputFormat("text/xml; subtype=gml/3.2")):"2.0.0"===l&&(f=u["wfs:WFS_Capabilities"]["wfs:FeatureTypeList"]["wfs:FeatureType"],p=f["wfs:DefaultCRS"],d=f["wfs:Name"],this.setName(d).setCrs(p).setVersion(l)),t.abrupt("return",u);case 14:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"getFeature",value:(e=v(b().mark(function t(){var e,r,n,i,o,s,a,u,l,c,h,f,p,d,y,v,g,m,_,x;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="WFSServer",r=this.url.length,n=this.url.indexOf(e)+e.length,i=this.url,o=this.maxFeatures,s=void 0===o?100:o,a=this.version,u=void 0===a?"1.1.0":a,l=this.typename,c=void 0===l?"":l,h=this.outputFormat,f=this.srsname,p=void 0===f?"EPSG:4326":f,d=this.bbox,y={service:"WFS",request:"GetFeature",version:u,typename:c,outputFormat:h,srsname:p,maxFeatures:s},"1.1.0"===u?y=d?Object.assign(y,{bbox:"".concat(d,",").concat(p)}):y:"2.0.0"===u&&(y=Object.assign(y,{Envelope:"".concat(d,",").concat(p)})),n===r?i="".concat(this.url,"?").concat(If().stringify(y)):n===r-1&&(i="".concat(this.url).concat(If().stringify(y))),t.next=10,vf().get(i);case 10:v=t.sent,g=v.data,m=S.getTraversalObj(g,{}),_=S.convertToJson(m,{}),x={geojson:void 0,xml:_},t.t0=u,t.next="1.1.0"===t.t0?18:"2.0.0"===t.t0?20:21;break;case 18:return convert,t.abrupt("break",21);case 20:return t.abrupt("break",21);case 21:return t.abrupt("return",x);case 22:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}]),i}(Cf);bf.OGC.WFS=Lf;var Nf={SpaceTime:"spacetime_db",Addredd:"address_db"},Tf={SpaceTime:"时空库",Addredd:"地址库"},Of={Point:0,Polygon:1};function Rf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Zondy.Enum.EsCatlogType=Nf,Zondy.Enum.EsCatlogName=Tf,Zondy.Enum.EsGeoHashType=Of;var Af=function(t){Kt(r,t);var e=Rf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).fixParams(t),n}return _(r,[{key:"fixParams",value:function(t){this.params=t,delete this.params.url,delete this.params.ip,delete this.params.port,delete this.params.domain,delete this.params.baseUrl,delete this.params.networkProtocol,delete this.params.partUrl}},{key:"getBaseUrl",value:function(){var t="",e=this.baseUrl,r=this.ip,n=this.port,i=this.domain,o=this.networkProtocol;return e?t=e:i?t=i:o&&r&&n&&(t="".concat(o,"://").concat(r,":").concat(n)),t}},{key:"getFullUrl",value:function(t,e){return this.getBaseUrl()+t+"?"+If().stringify(e)}},{key:"get",value:function(t,e,r){new nn(t,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"post",value:function(t,e,r,n){new nn(t,{eventListeners:{scope:this,processCompleted:r,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(pn);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var Df=function(t){Kt(r,t);var e=Ff(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).serviceUrl="/datastore/rest/catalog/es/services/",n.indexName=void 0!==i.indexName?i.indexName:null,n.classify=void 0!==i.classify?i.classify:null,n.keyWords=void 0!==i.keyWords?i.keyWords:null,n.pageSize=void 0!==i.pageSize?i.pageSize:100,n.pageNo=void 0!==i.pageNo?i.pageNo:1,n}return _(r,[{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.params,i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);function kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.ElasticSearch.EsCatlogService=Df;var jf=function(t){Kt(r,t);var e=kf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/addressservice/es/location/geocode/",n.indexName=void 0!==t.indexName?t.indexName:null,n.province=void 0!==t.province?t.province:null,n.city=void 0!==t.city?t.city:null,n.keyWord=void 0!==t.keyWord?t.keyWord:"",n.bbox=void 0!==t.bbox?t.bbox:null,n.geometry=void 0!==t.geometry?t.geometry:null,n.filter=void 0!==t.filter?t.filter:null,n.pageSize=void 0!==t.pageSize?t.pageSize:100,n.pageNo=void 0!==t.pageNo?t.pageNo:1,n.fixOption(),n}return _(r,[{key:"fixOption",value:function(){this.option={province:this.province,city:this.city,keyWord:this.keyWord,bbox:this.bbox,geometry:this.geometry,filter:this.filter,pageSize:this.pageSize,pageNo:this.pageNo}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.option;r+=this.indexName;var i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);function Bf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.ElasticSearch.ESGeoCode=jf;var Gf=function(t){Kt(r,t);var e=Bf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/addressservice/es/location/geodecode/",n.indexName=void 0!==t.indexName?t.indexName:null,n.province=void 0!==t.province?t.province:null,n.city=void 0!==t.city?t.city:null,n.bbox=void 0!==t.bbox?t.bbox:null,n.geometry=void 0!==t.geometry?t.geometry:null,n.filter=void 0!==t.filter?t.filter:null,n.lon=void 0!==t.lon?t.lon:null,n.lat=void 0!==t.lat?t.lat:null,n.dis=void 0!==t.dis?t.dis:.1,n.pageSize=void 0!==t.pageSize?t.pageSize:100,n.pageNo=void 0!==t.pageNo?t.pageNo:1,n.fixOption(),n}return _(r,[{key:"fixOption",value:function(){this.option={province:this.province,city:this.city,bbox:this.bbox,geometry:this.geometry,filter:this.filter,lon:this.lon,lat:this.lat,dis:this.dis,pageSize:this.pageSize,pageNo:this.pageNo}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.option;r+=this.indexName;var i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);function Uf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.ElasticSearch.ESGeoDecode=Gf;var qf=function(t){Kt(r,t);var e=Uf(r);function r(t){var n;if(g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/dataset/es/query/",n.libName=void 0!==t.libName?t.libName:null,n.tableName=void 0!==t.tableName?t.tableName:null,void 0!==t.geometry||void 0!==t.extent)if(n.geoFormat=void 0!==t.geoFormat?t.geoFormat:"wkt",void 0!==t.geometry)n.geometry=void 0!==t.geometry?t.geometry:null;else if(void 0!==t.extent){var i=t.extent;n.geometry="polygon(("+i.xmin+" "+i.ymax+","+i.xmin+" "+i.ymin+","+i.xmax+" "+i.ymin+","+i.xmax+" "+i.ymax+","+i.xmin+" "+i.ymax+"))"}if(void 0!==t.filter){if(n.filter={},void 0!==t.filter.spatialCondition)n.filter.spatialCondition=t.filter.spatialCondition;else if(void 0!==t.filter.extent){var o=t.filter.extent;n.filter.spatialCondition="polygon:"+o.ymax+","+o.xmin+";"+o.yamx+","+o.xmax+";"+o.ymin+","+o.xmax+";"+o.ymin+","+o.xmin}void 0!==t.filter.timeCondition&&void 0!==t.filter.timeCondition.field&&void 0!==t.filter.timeCondition.timeRange&&(n.filter.timeCondition={},n.filter.timeCondition.field=t.filter.timeCondition.field,n.filter.timeCondition.timeRange=t.filter.timeCondition.timeRange.join(",")),void 0!==t.filter.otherProperty&&""!==t.filter.otherProperty&&(n.filter.otherProperty=t.filter.otherProperty),void 0!==t.filter.fieldTag&&(n.filter.fieldTag=t.filter.fieldTag),n.filter="["+JSON.stringify(n.filter)+"]"}if(n.fields=void 0!==t.fields?t.fields:null,void 0!==t.statisticFields&&t.statisticFields.length>0){for(var s=[],a=0;a<t.statisticFields.length;a++){var u={field:t.statisticFields[a].field,statisticTypes:[t.statisticFields[a].statisticTypes]};s.push(u)}n.statisticFields=JSON.stringify(s)}return n.sref=void 0!==t.sref?t.sref:null,n.includeProperites=void 0!==t.includeProperites&&t.includeProperites,n.pageSize=void 0!==t.pageSize?t.pageSize:10,n.pageNo=void 0!==t.pageNo?t.pageNo:1,n.fixOption(),n}return _(r,[{key:"fixOption",value:function(){this.option={geoFormat:this.geoFormat,geometry:this.geometry,filter:this.filter,fields:this.fields,statisticFields:this.statisticFields,sref:this.sref,includeProperites:this.includeProperites,pageSize:this.pageSize,pageNo:this.pageNo}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.option;r=r+this.libName+"/"+this.tableName;var i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);function zf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.ElasticSearch.ESQueryStats=qf;var Vf=function(t){Kt(r,t);var e=zf(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).serviceUrl="/datastore/rest/dataset/es/schema/",n.indexName=void 0!==i.indexName?i.indexName:null,n.tableNames=void 0!==i.tableNames?i.tableNames:null,n}return _(r,[{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.params;r+=this.indexName;var i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);function Wf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.ElasticSearch.EsTableService=Vf;var Xf=function(t){Kt(r,t);var e=Wf(r);function r(t){var n;g(this,r);var i=t||{};return(n=e.call(this,i)).options=t,n.serviceUrl="/es/stQueryByAgg",n.indexName=void 0!==i.indexName?i.indexName:null,n.typeName=void 0!==i.typeName?i.typeName:null,n.aggfield=void 0!==i.aggfield?i.aggfield:null,n.spatialCondition=void 0!==i.spatialCondition?i.spatialCondition:null,n.timefield=void 0!==i.timefield?i.timefield:null,n.timeCondition=void 0!==i.timeCondition?i.timeCondition:null,n.aggGeoFormat=void 0!==i.aggGeoFormat?i.aggGeoFormat:null,n.percision=void 0!==i.percision?i.percision:8,n}return _(r,[{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.options,i=this.getFullUrl(r,n);this.get(i,t,e)}}]),r}(Af);Z.DataStore.ElasticSearch.EsSpaceTimeQueryByAgg=Xf;const Hf={EsCatlogType:Nf,EsCatlogName:Tf,EsGeoHashType:Of,EsCatlogService:Df,ESGeoCode:jf,ESGeoDecode:Gf,ESQueryStats:qf,EsTableService:Vf,EsSpaceTimeQueryByAgg:Xf};function Yf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var Zf=function(t){Kt(r,t);var e=Yf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/catalog/pg/services/",n.path=t.path,n.classify=t.classify,n.keyWords=t.keyWords,n.fixOption(t),n}return _(r,[{key:"fixOption",value:function(t){this.option={classify:t.classify,keyWords:t.keyWords,pageSize:t.pageSize,pageNo:t.pageNo}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.path,i=this.option;r+=n;var o=this.getFullUrl(r,i);this.get(o,t,e)}}]),r}(Af);function Qf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.PostGIS.PostgisCatlogService=Zf;var Jf=function(t){Kt(r,t);var e=Qf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/dataset/pg/executequery/",n.path=t.path,n.queryBody=t.queryBody,n.fixOption(t),n}return _(r,[{key:"fixOption",value:function(t){this.option={queryBody:t.queryBody}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.path,i=this.option;r+=n;var o=this.getFullUrl(r,i);this.get(o,t,e)}}]),r}(Af);function Kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.PostGIS.PostgisCustomQueryService=Jf;var $f=function(t){Kt(r,t);var e=Kf(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/dataset/pg/query/",n.path=t.path,n.geometry=t.geometry,n.geoFormat=t.geoFormat,n.sref=t.sref,n.filter=t.filter,n.fields=t.fields,n.segments=t.segments,n.statisticFields=t.statisticFields,n.includeProperites=t.includeProperites,n.includeGeometry=t.includeGeometry,n.fixOption(t),n}return _(r,[{key:"fixOption",value:function(t){this.option={geometry:t.geometry,geoFormat:t.geoFormat,sref:t.sref,filter:t.filter,fields:t.fields,segments:t.segments,statisticFields:t.statisticFields,includeProperites:t.includeProperites,propertyNames:t.propertyNames,includeGeometry:t.includeGeometry,pageSize:t.pageSize,pageNo:t.pageNo}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.path,i=this.option;this.geometry,this.geoFormat;r+=n;var o=this.getFullUrl(r,i);this.get(o,t,e)}},{key:"queryByWkt",value:function(t){}},{key:"queryByGeojson",value:function(t){}},{key:"queryByCircle",value:function(t){}},{key:"queryByRect",value:function(t){}}]),r}(Af);function tp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.PostGIS.PostgisQueryService=$f;var ep=function(t){Kt(r,t);var e=tp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/dataset/pg/schema/",n.path=t.path,n.tableNames=t.tableNames,n.fixOption(t),n}return _(r,[{key:"fixOption",value:function(t){this.option={tableNames:t.tableNames}}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.path,i=this.option;r+=n;var o=this.getFullUrl(r,i);this.get(o,t,e)}}]),r}(Af);function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.DataStore.PostGIS.PostgisTableService=ep;var np=function(t){Kt(r,t);var e=rp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/datastore/rest/dataset/pg/vectortile/",n.path=t.path,n.version=t.version,n.tileMatrix=t.tileMatrix,n.tileRow=t.tileRow,n.tileCol=t.tileCol,n.fixOption(t),n}return _(r,[{key:"fixOption",value:function(t){this.option={version:t.version,tileMatrix:t.tileMatrix,tileRow:t.tileRow,tileCol:t.tileCol}}},{key:"getWmtsUrl",value:function(){var t=this.serviceUrl,e=this.path,r=this.option;t+=e;var n=this.getFullUrl(t,r);return n=decodeURI(n)}},{key:"query",value:function(t,e){var r=this.serviceUrl,n=this.path,i=this.option;r+=n;var o=this.getFullUrl(r,i);this.get(o,t,e)}}]),r}(Af);Z.DataStore.PostGIS.PostgisVectorTileService=np;const ip={PostgisCatlogService:Zf,PostgisCustomQueryService:Jf,PostgisQueryService:$f,PostgisTableService:ep,PostgisVectorTileService:np};function op(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var sp=function(t){Kt(r,t);var e=op(r);function r(t){var n;g(this,r),n=e.call(this,t);var i=t.headers;return n.fixParams(t),n.headers=i||void 0,n}return _(r,[{key:"setHeaders",value:function(t){this.headers=t}},{key:"fixParams",value:function(t){this.params=t,delete this.params.url,delete this.params.ip,delete this.params.port,delete this.params.domain,delete this.params.baseUrl,delete this.params.networkProtocol,delete this.params.partUrl}},{key:"getBaseUrl",value:function(){var t="",e=this.baseUrl,r=this.ip,n=this.port,i=this.domain,o=this.networkProtocol;return e?t=e:i?t=i:o&&r&&n&&(t="".concat(o,"://").concat(r,":").concat(n)),t}},{key:"getFullUrl",value:function(t,e){return this.getBaseUrl()+t+"?"+If().stringify(e)}},{key:"get",value:function(t,e,r){new nn(t,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"GET",headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"post",value:function(t,e,r,n){new nn(t,{eventListeners:{scope:this,processCompleted:r,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(e),headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}}]),r}(pn);function ap(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}var up=function(t){Kt(r,t);var e=ap(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/clouddisk/rest/users/",n}return _(r,[{key:"login",value:function(t,e,r){var n=this.serviceUrl,i=this.getBaseUrl(),o="".concat(i).concat(n).concat("login");this.post(o,t,e,r)}}]),r}(sp);function lp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.CloudDisk.UserService=up;var cp="featureclass/statistics",hp=function(t){Kt(r,t);var e=lp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/giscore/dataconvert/rest/geodataset/",n}return _(r,[{key:"schema",value:function(t,e,r){var n=this.serviceUrl;n+="schema";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"featuremetadata",value:function(t,e,r){var n=this.serviceUrl;n+="featureclass/metadata";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"rastermetadata",value:function(t,e,r){var n=this.serviceUrl;n+="raster/metadata";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"statistics",value:function(t,e,r){var n=this.serviceUrl;n+=cp;var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"query",value:function(t,e,r){var n=this.serviceUrl;n+=cp;var i=this.getFullUrl(n,t);this.get(i,e,r)}}]),r}(sp);function fp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.CloudDisk.GisCore.GeoDatasetService=hp;var pp=function(t){Kt(r,t);var e=fp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).serviceUrl="/clouddisk/rest/CalculateModel",n}return _(r,[{key:"add",value:function(t,e,r){var n=this.serviceUrl,i=this.getBaseUrl(),o="".concat(i).concat(n).concat("","?nodeId=").concat(t.nodeId);delete t.nodeId,this.post(o,t,e,r)}},{key:"catalog",value:function(t,e,r){var n=this.serviceUrl;n+="/catalog";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"catalogtype",value:function(t,e,r){var n=t.type,i=this.serviceUrl,o=this.getBaseUrl(),s="".concat(o).concat(i).concat("/catalog/{type}?");s=s.replace("{type}",n),delete t.type,s+=If().stringify(t),this.get(s,e,r)}},{key:"execute",value:function(t,e,r){var n=this.serviceUrl,i=t.type,o=t.modelID,s=this.getBaseUrl(),a="".concat(s).concat(n).concat("/execute/{type}/{modelID}?");a=(a=a.replace("{type}",i)).replace("{modelID}",o),this.post(a,void 0,e,r)}},{key:"node",value:function(t,e,r){var n=this.serviceUrl,i=this.getBaseUrl(),o="".concat(i).concat(n).concat("/node");this.post(o,t,e,r)}},{key:"nodeid",value:function(t,e,r){var n=t.id,i=this.serviceUrl,o="".concat(baseurl).concat(i).concat("/node/{id}?");o=o.replace("{id}",n),this.get(o,e,r)}},{key:"noderoot",value:function(t,e,r){t={};var n=this.serviceUrl;n+="/node/root";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"nodes",value:function(t,e,r){t={};var n=this.serviceUrl;n+="/nodes";var i=this.getFullUrl(n,t);this.get(i,e,r)}},{key:"nodesid",value:function(t,e,r){var n=t.nodeId,i=this.serviceUrl,o="".concat(baseurl).concat(i).concat("/nodes/{nodeId}?");o=o.replace("{nodeId}",n),delete t.nodeId,o+=If().stringify(t),this.get(o,e,r)}}]),r}(sp);Z.CloudDisk.Model.CalculateModelService=pp;const dp={UserService:up,GeoDatasetService:hp,CalculateModelService:pp};var yp={displayFieldName:null,geometryType:null,hasM:!1,hasZ:!1,queryGeometry:null,spatialReference:null,transform:null},vp=function(){function t(){g(this,t)}return _(t,[{key:"getPromise",value:function(t){var e=this;return new Promise(function(r,n){e.get(t,function(e){e=JSON.parse(e),t.indexOf("FeatureServer")>-1&&t.indexOf("query")>-1&&(e=$(e,yp)),r(e)},function(t){n(JSON.parse(t))})})}},{key:"getPromiseP",value:function(t,e){var r=this;return new Promise(function(n,i){r.post(t,e,function(t){n(JSON.parse(t))},function(t){i(JSON.parse(t))})})}},{key:"get",value:function(t,e,r,n){n=!1!==n;var i=new XMLHttpRequest;i.open("GET",t,n),i.onreadystatechange=function(){4==i.readyState&&200==i.status||304==i.status?e.call(this,i.responseText):4===i.readyState&&200!==i.status&&304!==i.status&&r.call(this,i.responseText)},i.send()}},{key:"post",value:function(t,e,r,n){var i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status?4===i.readyState&&200!==i.status&&304!==i.status&&n.call(this,i.responseText):r.call(this,i.responseText)},i.send(e)}}]),t}();Z.Service.ArcGisServiceBase=vp;var gp=function(){function t(){g(this,t)}return _(t,[{key:"clone",value:function(){return It(this)}},{key:"toJSON",value:function(){var t=this,e={};for(var r in t)"function"!=typeof t[r]&&"CLASS_NAME"!==r&&t[r]&&(e[r]=t[r]);return e.spatialRel="esriSpatialRelIntersects",e}}],[{key:"fromJSON",value:function(t){var e=new this;if(t instanceof Object)for(var r in t)e.hasOwnProperty(r)&&(e[r]=t[r]);return e}}]),t}();function mp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ArcGisBaseParam=gp;var _p=function(t){Kt(r,t);var e=mp(r);function r(t){var n;return g(this,r),(n=e.call(this)).aggregateIds=null,n.cacheHint=null,n.datumTransformation=null,n.distance=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=null,n.groupByFieldsForStatistics=null,n.having=null,n.historicMoment=null,n.maxAllowableOffset=null,n.maxRecordCountFactor=1,n.multipatchOption=null,n.num=null,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.outStatistics=null,n.parameterValues=null,n.pixelSize=null,n.quantizationParameters=null,n.rangeValues=null,n.relationParameter=null,n.returnCentroid=!1,n.returnDistinctValues=!1,n.returnExceededLimitFeatures=!0,n.returnGeometry=!1,n.returnM=null,n.returnQueryGeometry=!0,n.returnZ=null,n.spatialRelationship="intersects",n.sqlFormat=null,n.start=null,n.text=null,n.timeExtent=null,n.units=null,n.where=null,$(Qt(n),t),n}return _(r)}(gp);Z.Service.ArcGisQuery=_p;var xp=_(function t(e){g(this,t),this.id=null,this.uid=null,this.indexes={items:[]},this.load=null,this.attributionVisible=!0,this.listMode="show",this.hasAttributionData=!1,this.createQueryVersion=1,this.blendMode="normal",this.capabilities=null,this.copyright=null,this.loadError=null,this.loadStatus="not-loaded",this.loaded=!1,this.loadWarnings=[],this.customParameters=null,this.definitionExpression=null,this.displayField=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingEnabled=!0,this.editingInfo=null,this.effect=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex={dateFields:[],fields:[],uid:""},this.formTemplate=null,this.gdbVersion=null,this.geometryType=null,this.hasM=null,this.hasZ=null,this.historicMoment=null,this.isTable=!1,this.labelingInfo=null,this.labelsVisible=!0,this.layerId=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.opacity=1,this.operationalLayerType="ArcGisFeatureLayer",this.objectIdField=null,this.outFields=null,this.parent=null,this.path=null,this.parsedUrl=null,this.popupEnabled=!0,this.popupTemplate=null,this.portalItem=null,this.refreshInterval=0,this.relationships=null,this.renderer=null,this.returnM=null,this.returnZ=null,this.resourceReferences={paths:[],portalItem:null},this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.source=null,this.scaleRangeId="0,0",this.sourceJSON=null,this.spatialReference={imageCoordinateSystem:null,isGeographic:!0,isWGS84:!0,isWebMercator:!1,isWrappable:!0,latestVcsWkid:null,latestWkid:null,vcsWkid:null,wkid:4326,wkt:"GEOGCS['GCS_WGS_1984',DATUM['D_WGS_1984',SPHEROID['WGS_1984',6378137.0,298.257223563]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]]"},this.templates=null,this.sublayerTitleMode="item-title",this.timeExtent=null,this.timeInfo=null,this.timeOffset=null,this.title="",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.url=null,this.useViewTime=!0,this.version=null,this.userIsAdmin=!1,this.visible=!0,$(this,e),this._queryService=this.url&&this.url.indexOf("FeatureServer")+"FeatureServer".length===this.url.length?"queryByMap":"queryByLayer",this._applyEditsService=this.url&&this.url.indexOf("FeatureServer")+"FeatureServer".length===this.url.length?"applyEditsByMap":"applyEditsByLayer";var r=new vp;this.queryByMap=function(t){var e=this.url+"/query?f=json";return e=Ut(t,e,["geometry","layerDefs"],null),r.getPromise(e)},this.queryByLayer=function(t){var e=this.url+"/query?f=json";return e=Ut(t,e,["geometry"],null),r.getPromise(e)},this.applyEditsByLayer=function(t,e){var n=this.url+"/applyEdits",i="";e=e||{gdbVersion:[],rollbackOnFailure:!0,f:"json"};if(t.deleteFeatures){for(var o=[],s=0;s<t.deleteFeatures.length;s++)o.push(t.deleteFeatures[s].objectId);t.deleteFeatures=o.join(",")}return i=qt(i,t,["addFeatures","updateFeatures","deleteFeatures"]),i=(i=qt(i,e)).substring(0,i.length-1),r.getPromiseP(n,i)},this.applyEditsByMap=function(t,e){e=e||{gdbVersion:[],rollbackOnFailure:!0,f:"json"};var n=this.url+"/applyEdits",i="";return i+="edits="+encodeURIComponent(JSON.stringify(t))+"&",i=(i=qt(i,e)).substring(0,i.length-1),r.getPromiseP(n,i)}});function bp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}xp.prototype.createQuery=function(){return new _p},xp.prototype.queryFeatures=function(t){return this[this._queryService](t)},xp.prototype.applyEdits=function(t,e){return this[this._applyEditsService](t,e)},xp.prototype.queryFeatureCount=function(t){return t.returnCountOnly=!0,this[this._queryService](t)},xp.prototype.queryObjectIds=function(t){return t.returnIdsOnly=!0,this[this._queryService](t)},xp.prototype.queryExtent=function(t){return t.returnExtentOnly=!0,this[this._queryService](t)},Z.Service.ArcGisFeatureLayer=xp;var Sp=function(t){Kt(r,t);var e=bp(r);function r(t){var n;return g(this,r),(n=e.call(this)).contains=!0,n.dynamicLayerInfos=null,n.gdbVersion=null,n.geometryPrecision=null,n.layerDefinitions=null,n.layerIds=null,n.maxAllowableOffset=null,n.outSpatialReference=null,n.returnGeometry=!0,n.searchFields=null,n.searchText=null,$(Qt(n),t),n}return _(r)}(gp);Z.Service.ArcGisFindParameters=Sp;var Cp=_(function t(e){g(this,t),this.options={gdbVersion:null,url:null},e.url=e.url+"/find?f=json",$(this.options,e)});function wp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Cp.prototype.execute=function(t){var e=this.options.url,r=new vp;return e=Ut(t,e,null,{layerIds:"layers",outSpatialReference:"sr"}),r.getPromise(e)},Z.Service.ArcGisFindTask=Cp;var Ip=function(t){Kt(r,t);var e=wp(r);function r(t){var n;return g(this,r),(n=e.call(this)).imageCoordinateSystem=null,n.isGeographic=!1,n.isWebMercator=!1,n.isWGS84=!1,n.isWrappable=!1,n.WebMercator=null,n.WGS84=null,n.latestVcsWkid=null,n.latestWkid=null,n.vcsWkid=null,n.wkid=void 0,n.wkt=null,$(Qt(n),t),3857===n.wkid?(n.isWebMercator=!0,n.isWrappable=!0):4326===n.wkid&&(n.sGeographic=!0,n.isWGS84=!0,n.isWrappable=!0),n}return _(r)}(gp);function Pp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Ip.prototype.equals=function(t){return t.wkid===this.wkid||t.wkt===this.wkt},Z.Service.ArcGisSpatialReference=Ip;var Ep=function(t){Kt(r,t);var e=Pp(r);function r(t){var n;return g(this,r),(n=e.call(this)).cache={},n.extent=null,n.hasM=!1,n.hasZ=!1,n.spatialReference=new Ip({wkid:4326,wkt:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),n.type=null,$(Qt(n),t),t&&t.hasOwnProperty("spatialReference")&&(t.spatialReference=new Ip(t.spatialReference)),n}return _(r)}(gp);function Mp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Z.Service.ArcGisGeometry=Ep;var Lp=function(t){Kt(r,t);var e=Mp(r);function r(t){var n;g(this,r),(n=e.call(this)).hasM=!1,n.hasZ=!1,n.latitude=0,n.longitude=0,n.m=void 0,n.x=0,n.y=0,n.z=void 0,n.type="point";var i=n.spatialReference.wkid;if($(Qt(n),t),t)if(!t.hasOwnProperty("spatialReference")||t.hasOwnProperty("spatialReference")&&t.spatialReference.hasOwnProperty("wkid")&&4326===t.spatialReference.wkid){var o=Qt(n);["longitude","latitude","x","y"].forEach(function(e){t.hasOwnProperty(e)||(o[e]=void 0)}),t.hasOwnProperty("x")&&(n.longitude=n.x),t.hasOwnProperty("y")&&(n.latitude=n.y),!t.hasOwnProperty("x")&&t.hasOwnProperty("longitude")&&(n.x=n.longitude),!t.hasOwnProperty("y")&&t.hasOwnProperty("latitude")&&(n.y=n.latitude)}else t.hasOwnProperty("spatialReference")&&t.spatialReference.hasOwnProperty("wkid")&&3857===t.spatialReference.wkid&&(t.hasOwnProperty("longitude")&&t.hasOwnProperty("latitude")?Np(i,"3857",[n.longitude,n.latitude],"x","y",Qt(n),t):(t.hasOwnProperty("x")&&t.hasOwnProperty("y")||(t.hasOwnProperty("x")||(t.hasOwnProperty("longitude")&&(n.x=n.longitude),t.hasOwnProperty("longitude")||(n.x=n.longitude=void 0)),t.hasOwnProperty("y")||(t.hasOwnProperty("latitude")&&(n.y=n.latitude),t.hasOwnProperty("latitude")||(n.y=n.latitude=void 0))),Np("3857",i,[n.x,n.y],"longitude","latitude",Qt(n),t)));else n.x=n.y=n.latitude=n.longitude=void 0;return n.hasM=!!n.m,n.hasZ=!!n.z,n}return _(r)}(Ep);function Np(t,e,r,n,i,o,s){var a=Oe()("EPSG:"+t,"EPSG:"+e,[r[0],r[1]]);o[n]=isNaN(a[0])?void 0:a[0],o[i]=isNaN(a[1])?void 0:a[1],o.spatialReference=new Ip(s.spatialReference)}function Tp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Lp.prototype.toArray=function(){var t=[];return t.push(this.x),t.push(this.y),this.z&&t.push(this.z),t},Lp.prototype.copy=function(t){$(this,t)},Lp.prototype.distance=function(t){var e=Math.abs(this.x-t.x),r=Math.abs(this.y-t.y),n=0;return this.hasZ&&t.hasZ&&(n=Math.abs(this.z-t.z)),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))},Lp.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.m===t.m&&this.spatialRefere.equals(t.spatialRefere)},Lp.prototype.toGeometryJSON=function(){return'{"x":'+this.x+',"y":'+this.y+"}"},Z.Service.ArcGisPoint=Lp;var Op=function(t){Kt(r,t);var e=Tp(r);function r(t){var n;for(var i in g(this,r),(n=e.call(this,t)).center=void 0,n.hasM=!1,n.hasZ=!1,n.height=0,n.mmax=void 0,n.mmin=void 0,n.type="extent",n.width=0,n.xmax=0,n.xmin=0,n.ymax=0,n.ymin=0,n.zmax=void 0,n.zmin=void 0,n.extent=Qt(n),n.private=["center","hasM","hasZ","height","width","type","extent"],n.private)if(Wt(t[n.private[i]]))throw new Error("[accessor] cannot assign to read-only property '"+n.private[i]+"' of ArcGisExtent");return $(Qt(n),t),(n.zmax||n.zmin)&&(n.hasZ=!0),(n.mmax||n.mmin)&&(n.hasM=!0),n._extentPolygon=Si([[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.ymax,n.ymin],[n.xmin,n.ymin]]],{name:"_extentPlygon"}),n.center=Rp(Qt(n)),n.width=n.xmax-n.xmin,n.height=n.ymax-n.ymin,n}return _(r)}(Ep);function Rp(t){var e=wi([bi([t.xmin,t.ymin]),bi([t.xmin,t.ymax]),bi([t.xmax,t.ymax]),bi([t.ymax,t.ymin]),bi([t.xmin,t.ymin])]),r=Xi(e).geometry.coordinates;return new Lp({longitude:r[0],latitude:r[1]})}Op.prototype.equals=function(t){return this.mmax===t.mmax&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.xmin===t.xmin&&this.ymax===t.ymax&&this.ymin===t.ymin&&this.zmax===t.zmax&&this.zmin===t.zmin},Op.prototype.contains=function(t){if("point"===t.type){var e=t.toArray();return e=bi([e[0],e[1]]),ss(this._extentPolygon,e)}return"extent"===t.type&&ss(this._extentPolygon,t._extentPolygon)},Op.prototype.expand=function(t){if(t instanceof Number)return t=Math.abs(t),this.width=this.width*t,this.height=this.height*t,this.xmin=this.center.x-this.width/2,this.xmax=this.center.x+this.width/2,this.ymin=this.center.y-this.height/2,this.ymax=this.center.y+this.height/2,this;throw new Error("require is not defined")},Op.prototype.intersects=function(t){return!!t.type&&("polyline"===t.type?e=Ii(t.paths):"point"===t.type?e=bi(t.toArray()):"multipoint"===t.type?e=Pi(t.points):"extent"===t.type?e=t._extentPolygon:"polygon"===t.type&&(e=Si(t.rings)),!os(e,this._extentPolygon));var e},Op.prototype.offset=function(t,e,r){return this.xmax+=t,this.xmin+=t,this.ymax+=e,this.ymin+=e,this.hasZ?(this.zmax+=r,this.zmin+=r):(this.hasZ=!0,this.zmax=0,this.zmin=0),this},Op.prototype.centerAt=function(t){if(t instanceof Lp)return this.center=new Lp({longitude:t.x,latitude:t.y}),this.xmin=this.center.x-this.width/2,this.xmax=this.center.x+this.width/2,this.ymin=this.center.y-this.height/2,this.ymax=this.center.y+this.height/2,this},Op.prototype.normalize=function(){return[this]},Op.prototype.union=function(t){var e=this.center,r=t.center;return r.x-e.x>0&&r.y-e.y>0||r.x-e.x==0&&r.y-e.y>0||r.x-e.x==0&&r.y-e.y==0||r.x-e.x>0&&r.y-e.y==0?(this.xmax=t.xmax,this.ymax=t.ymax):r.x-e.x>0&&r.y-e.y<0||r.x-e.x==0&&r.y-e.y<0?(this.xmax=t.xmax,this.ymin=t.ymin):r.x-e.x<0&&r.y-e.y<0?(this.xmin=t.xmin,this.ymin=t.ymin):r.x-e.x<0&&0===(r.y-e.y||r.x-e.x<0&&r.y-e.y<0)&&(this.xmin=t.xmin,this.ymax=t.ymax),this.center=Rp(this),this.width=this.xmax-this.xmin,this.height=this.ymax-this.ymin,this},Op.prototype.toString=function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax},Z.Service.ArcGisExtent=Op;var Ap=_(function t(e){g(this,t),this.options={gdbVersion:null,url:null};var r=e.url.split("?")[0]+"?f=pjson";e.url=e.url+"/identify?f=json";var n=new vp,i=this;n.get(r,function(t){t=JSON.parse(t),i.mapInfo=t,$(i.options,e)},function(t){console.log(t)},!1)});function Fp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Ap.prototype.execute=function(t){var e=this.options.url,r=new vp,n={},i=t.geometry.type,o=i.substr(0,1).toUpperCase(),s=i.substr(1,i.length);return t.geometryType="esriGeometry"+o+s,t.geometry=encodeURIComponent(t.geometry.toGeometryJSON()),n.layers||(n.layers=t.layerIds?t.layerOption+":"+String(t.layerIds):"layers="+t.layerOption,delete t.layerOption,delete t.layerIds),n.imageDisplay||(n.imageDisplay=t.width+","+t.height+","+t.dpi,delete t.width,delete t.height,delete t.dpi),t.hasOwnProperty("mapExtent")&&t.mapExtent||(t.mapExtent=new Op({xmin:this.mapInfo.initialExtent.xmin,ymin:this.mapInfo.initialExtent.ymin,xmax:this.mapInfo.initialExtent.xmax,ymax:this.mapInfo.initialExtent.ymax})),$(n,t),e=Ut(n,e,null,{outSpatialReference:"sr"}),r.getPromise(e)},Z.Service.ArcGisIdentifyTask=Ap;var Dp=function(t){Kt(r,t);var e=Fp(r);function r(t){var n;return g(this,r),(n=e.call(this)).dpi=96,n.dynamicLayerInfos=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=null,n.height=400,n.layerDefinitions=null,n.layerIds=null,n.layerOption="top",n.layerTimeOptions=null,n.mapExtent=null,n.maxAllowableOffset=null,n.returnFieldName=!1,n.returnGeometry=!1,n.returnM=!1,n.returnUnformattedValues=!1,n.returnZ=!1,n.spatialReference=null,n.timeExtent=null,n.tolerance=0,n.width=400,$(Qt(n),t),n.mapExtent&&(n.mapExtent=n.mapExtent.toString()),n}return _(r)}(gp);Z.Service.ArcGisIdentifyParameters=Dp;var kp=_(function t(e){g(this,t),this.url=null,this.gdbVersion=null,$(this,e)});function jp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}kp.prototype.execute=function(){},kp.prototype.queryByLayer=function(t,e){e.outFields=e.outFields||"*";var r=this.url+"/"+t+"/query?f=json",n=new vp;return r=Ut(e,r,["geometry"],null),n.getPromise(r)},kp.prototype.executeAttachmentQuery=function(){},kp.prototype.executeForCount=function(){},kp.prototype.executeForExtent=function(){},kp.prototype.executeForIds=function(){},kp.prototype.executeRelationshipQuery=function(){},Z.Service.ArcGisQueryTask=kp;var Bp=function(t){Kt(r,t);var e=jp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).centroid=null,n.isSelfIntersecting=!1,n.rings=[],n.type="polygon",$(Qt(n),t),n.rings[0]&&n.rings[0][0]&&n.rings[0][0].length>=3&&(n.hasZ=!0),n}return _(r)}(Ep);function Gp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Bp.prototype.getPoint=function(t,e){return t>=this.rings.length||e>=this.rings[t].length?null:zt(Lp,this,this.rings[t][e])},Bp.prototype.insertPoint=function(t,e,r){return t<this.rings.length&&e<=this.rings[t].length&&(r instanceof Array?this.rings[t].splice(e,0,r):r instanceof Lp&&this.rings[t].splice(e,0,r.hasZ?[r.x,r.y,r.z]:[r.x,r.y])),this},Bp.prototype.removePoint=function(t,e){if(t>=this.rings.length||e>=this.rings[t].length)return null;var r=this.rings[t].splice(e,1)[0];return zt(Lp,this,r)},Bp.prototype.setPoint=function(t,e,r){if(t>=this.rings.length||e>=this.rings[t].length)return null;if(r instanceof Array)this.rings[t][e]=r;else if(r instanceof Lp){var n=[r.x,r.y];r.hasZ&&n.push(r.z),r.hasM&&n.push(r.m),this.rings[t][e]=n}return this},Bp.prototype.addRing=function(t){return t instanceof Array?this.rings.push(Vt(t)):this.rings.push([]),this},Bp.prototype.removeRing=function(t){if(t>=this.rings.length)return null;for(var e,r=this.rings.splice(t,1)[0],n=[],i=0;i<r.length;i++)e=zt(Lp,this,r[i]),n.push(e);return n},Bp.prototype.isClockwise=function(t){var e,r,n,i=0,o=1;for(e=!!t[0][2];o<t.length;)r=n||t[0],n=t[o],i+=e?(n[0]-r[0])*(n[1]+r[1])*(n[2]+r[2]):(n[0]-r[0])*(n[1]+r[1]),o++;return i>0},Bp.prototype.contains=function(t){return t instanceof Lp&&ss(Si(this.rings,{name:"_extentPlygon"}),bi(t.toArray()))},Bp.prototype.toGeometryJSON=function(){for(var t=this.rings,e='{"rings":[',r=0;r<t.length;r++){e+="[";for(var n=0;n<t[r].length;n++)e+="[",e+=t[r][n].join(","),e+="],";e=e.substr(0,e.length-1),e+="],"}return e=e.substr(0,e.length-1),e+="]}"},Bp.prototype.fromExtent=function(t){return new Bp({rings:t._extentPolygon.geometry.coordinates})},Z.Service.ArcGisPolygon=Bp;var Up=function(t){Kt(r,t);var e=Gp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).points=[],n.type="multipoint",$(Qt(n),t),n}return _(r)}(Ep);function qp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Up.prototype.addPoint=function(t){t instanceof Array?this.points.push(t):t instanceof Lp&&this.points.push([t.x,t.y])},Up.prototype.getPoint=function(t){return zt(Lp,this,this.points[t])},Up.prototype.removePoint=function(t){var e=this.points.splice(t,1);return zt(Lp,this,e)},Up.prototype.setPoint=function(t,e){return t>=this.points.length?null:(e instanceof Array?this.points[t]=[e[0],e[1]]:e instanceof Lp&&(this.points[t]=[e.x,e.y]),this)},Up.prototype.toGeometryJSON=function(){return'{"points":[['+this.points.join("],[")+"]]}"},Z.Service.ArcGisMultipoint=Up;var zp=function(t){Kt(r,t);var e=qp(r);function r(t){var n;return g(this,r),(n=e.call(this,t)).paths=[],n.type="polyline",$(Qt(n),t),n}return _(r)}(Ep);function Vp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}zp.prototype.getPoint=function(t,e){return t>=this.paths.length||e>=this.paths[t].length?null:zt(Lp,this,this.paths[t][e])},zp.prototype.removePoint=function(t,e){if(t>=this.paths.length||e>=this.paths[t].length)return null;var r=this.paths[t].splice(e,1)[0];return zt(Lp,this,r)},zp.prototype.setPoint=function(t,e,r){if(t>=this.paths.length||e>=this.paths[t].length)return null;if(r instanceof Array)this.paths[t][e]=r;else if(r instanceof Lp){var n=[r.x,r.y];r.hasZ&&n.push(r.z),r.hasM&&n.push(r.m),this.paths[t][e]=n}return this},zp.prototype.addPath=function(t){return t instanceof Array?this.paths.push(Vt(t)):this.paths.push([]),this},zp.prototype.removePath=function(t){if(t>=this.path.length)return null;for(var e,r=this.paths.splice(t,1)[0],n=[],i=0;i<r.length;i++)e=zt(Lp,this,r[i]),n.push(e);return n},zp.prototype.insertPoint=function(t,e,r){return t<this.paths.length&&e<=this.paths[t].length&&(r instanceof Array?this.paths[t].splice(e,0,r):r instanceof Lp&&this.paths[t].splice(e,0,r.hasZ?[r.x,r.y,r.z]:[r.x,r.y])),this},zp.prototype.toGeometryJSON=function(){for(var t=this.paths,e='{"paths":[',r=0;r<t.length;r++){e+="[";for(var n=0;n<t[r].length;n++)e+="[",e+=t[r][n].join(","),e+="],";e=e.substr(0,e.length-1),e+="],"}return e=e.substr(0,e.length-1),e+="]}"},Z.Service.ArcGisPolyline=zp;var Wp=function(t){Kt(r,t);var e=Vp(r);function r(t){var n;return g(this,r),(n=e.call(this)).attributes=null,n.geometry=null,n.isAggregate=!1,n.layer=null,n.popupTemplate=null,n.symbol=null,n.visible=!0,$(Qt(n),t),n}return _(r)}(gp);function Xp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}Wp.prototype.getAttribute=function(t){return this.attributes[t]},Wp.prototype.getEffectivePopupTemplate=function(t){},Wp.prototype.getObjectId=function(){return this.attributes.objectId},Wp.prototype.setAttribute=function(t,e){return this.attributes[t]=e},Z.Service.ArcGisGraphic=Wp;var Hp=function(t){Kt(r,t);var e=Xp(r);function r(t){var n;g(this,r),(n=e.call(this,t)).center=[0,0],n.radius=1e3,n.radiusUnit="meters",n.numberOfPoints=60,n.geodesic=!1,n.type="circle",$(Qt(n),t);var i={steps:n.numberOfPoints,units:n.radiusUnit},o=Wi(n.center,n.radius,i);return n.rings=o.geometry.coordinates,n}return _(r)}(Ep);Z.Service.ArcGisCircle=Hp;var Yp={ArcGisFeatureLayer:xp,ArcGisFindParameters:Sp,ArcGisFindTask:Cp,ArcGisIdentifyTask:Ap,ArcGisIdentifyParameters:Dp,ArcGisGeometry:Ep,ArcGisQuery:_p,ArcGisQueryTask:kp,ArcGisPoint:Lp,ArcGisMultipoint:Up,ArcGisPolyline:zp,ArcGisPolygon:Bp,ArcGisCircle:Hp,ArcGisGraphic:Wp,ArcGisExtent:Op};const Zp=Yp;var Qp={WMSCapabilities:Vc,WMTSCapabilities:ef,OGCWMTSInfo:mf,OGCWMSInfo:xf,WMS:Ef,WFS:Lf};const Jp={Style:e,geoJSON:r,Util:t,Crs:n,Common:i,BaseServer:on,Extend:a,G3D:u,MRCS:l,MRFS:c,MRFWS:h,MRGS:f,MRMS:p,Info:d,OGC:Qp,ElasticSearch:Hf,PostGIS:ip,CloudDisk:dp,ArcGis:Yp}})();var a=e;for(var u in s)a[u]=s[u];s.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})()}).call(this,r(124),r(214).setImmediate)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=undefined;var n=r(15);var i=x(n);var o=r(100);var s=x(o);var a=r(78);var u=x(a);var l=r(108);var c=x(l);var h=r(300);var f=x(h);var p=r(306);var d=x(p);var y=r(1);var v=x(y);var g=r(50);var m=x(g);var _=r(0);function x(t){return t&&t.__esModule?t:{default:t}}var b=function t(e,r){e=e||{};if(r){for(var n in r){var i=r[n];if(i!==undefined){e[n]=i}}var o=typeof window.Event==="function"&&r instanceof window.Event;if(!o&&r.hasOwnProperty&&r.hasOwnProperty("toString")){e.toString=r.toString}}return e};var S=function t(e){return Object.prototype.toString.call(e)==="[object Array]"};var C=function t(e,r){var n,i=Object.prototype.toString,o="[object Array]";e=e||{};for(n in r){if(r.hasOwnProperty(n)){if((0,m.default)(r[n])==="object"){if(i.call(e[n])==="[object Null]"||i.call(e[n])==="[object Undefined]"){e[n]=i.call(r[n])===o?[]:{}}t(e[n],r[n])}else{e[n]=r[n]}if(r[n]===""||r[n]===null){e[n]=r[n]}}}return e};var w=function t(e,r){e=e||{};var n;if(r){for(var i in e){n=r[i];if(typeof n!=="undefined"){e[i]=n}}}};var I=function t(e,r,n){e=e||{};var i;if(r){for(var o in r){i=r[o];if(typeof i!=="undefined"&&typeof i!=="function"){if(n.indexOf(o)<0){e[o]=i}}}}};var P=function t(e){e=e||{};for(var r in e){if(e.hasOwnProperty(r)){if((0,m.default)(e[r])==="object"&&e[r]instanceof Array){for(var n in e[r]){if(e[r][n].destroy){e[r][n].destroy()}}e[r].length=0}else if((0,m.default)(e[r])==="object"&&e[r]instanceof Object){if(e[r].destroy){e[r].destroy()}}e[r]=null}}};var E=function t(){var e=[];for(var r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(typeof i==="string"){i=document.getElementById(i)}if(arguments.length===1){return i}e.push(i)}return e};var M=function t(e){return!!(e&&e.nodeType===1)};var L=function t(e,r){for(var n=e.length-1;n>=0;n--){if(e[n]===r){e.splice(n,1)}}return e};var N=function t(e,r){if(e==null){return-1}else{if(typeof e.indexOf==="function"){return e.indexOf(r)}else{for(var n=0,i=e.length;n<i;n++){if(e[n]===r){return n}}return-1}}};var T=function t(e,r,n,i,o,s,a,u){if(r){e.id=r}if(n){e.style.left=n.x+"px";e.style.top=n.y+"px"}if(i){e.style.width=i.w+"px";e.style.height=i.h+"px"}if(o){e.style.position=o}if(s){e.style.border=s}if(a){e.style.overflow=a}if(parseFloat(u)>=0&&parseFloat(u)<1){e.style.filter="alpha(opacity="+u*100+")";e.style.opacity=u}else if(parseFloat(u)===1){e.style.filter="";e.style.opacity=""}};var O=function t(e,r){e=e||{};var n=typeof window.Event==="function"&&r instanceof window.Event;for(var i in r){if(e[i]===undefined||!n&&r.hasOwnProperty&&r.hasOwnProperty(i)&&!e.hasOwnProperty(i)){e[i]=r[i]}}if(!n&&r&&r.hasOwnProperty&&r.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")){e.toString=r.toString}return e};var R=function t(e){var r=[];for(var n in e){var i=e[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var s=[];var a;for(var u=0,l=i.length;u<l;u++){a=i[u];s.push(encodeURIComponent(a===null||a===undefined?"":a))}o=s.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+"="+o)}}return r.join("&")};var A=function t(e){var r=[];for(var n in e){var i=e[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var s=[];var a;for(var u=0,l=i.length;u<l;u++){a=i[u];s.push(encodeURIComponent(a===null||a===undefined?"":a))}o=s.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+":"+o)}}return r.join(";")};var F=function t(e,r){var n=e;if(r){var i=(e+" ").split(/[?&]/);n+=i.pop()===" "?r:i.length?"&"+r:"?"+r}return n};var D=function t(e){e=e===null||e===undefined?window.location.href:e;var r="";if(e.indexOf("?")>-1){var n=e.indexOf("?")+1;e.indexOf("#")>-1;var i=e.indexOf("#")>-1?e.indexOf("#"):e.length;r=e.substring(n,i)}var o={};var s=r.split(/[&;]/);for(var a=0,u=s.length;a<u;++a){var l=s[a].split("=");if(l[0]){var c=l[0];try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}var h=(l[1]||"").replace(/\+/g," ");try{h=decodeURIComponent(h)}catch(t){h=unescape(h)}h=h.split(",");if(h.length==1){h=h[0]}o[c]=h}}return o};var k=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("webkit")===-1&&t.indexOf("gecko")!==-1}();var j=function(){var t="",e="",r="pc",n;var i=navigator.userAgent.toLowerCase();if(i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1){t="msie";n=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)}else if(i.indexOf("chrome")>-1){t="chrome";n=i.match(/chrome\/([\d.]+)/)}else if(i.indexOf("firefox")>-1){t="firefox";n=i.match(/firefox\/([\d.]+)/)}else if(i.indexOf("opera")>-1){t="opera";n=i.match(/version\/([\d.]+)/)}else if(i.indexOf("safari")>-1){t="safari";n=i.match(/version\/([\d.]+)/)}e=n?n[1]:"";if(i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1){r="apple"}else if(i.indexOf("android")>-1){n=i.match(/version\/([\d.]+)/);e=n?n[1]:"";r="android"}return{name:t,version:e,device:r}}();var B=function t(){return j};var G=function(){var t=true,e=B();if(document.createElement("canvas").getContext){if(e.name==="firefox"&&parseFloat(e.version)<5){t=false}if(e.name==="safari"&&parseFloat(e.version)<4){t=false}if(e.name==="opera"&&parseFloat(e.version)<10){t=false}if(e.name==="msie"&&parseFloat(e.version)<9){t=false}}else{t=false}return t}();var U=function t(){return G};var q=function t(e){if(!e){return true}var r=e.indexOf("//");var n=document.location.toString();var i=n.indexOf("//");if(r===-1){return true}else{var o;var s=o=e.substring(0,r);var a=n.substring(i+2);i=a.indexOf("/");var u=a.indexOf(":");var l=a.substring(0,i);var c=document.location.protocol;if(u!==-1){}else{l+=":"+(c.toLowerCase()==="http:"?80:443)}if(c.toLowerCase()!==s.toLowerCase()){return false}s=e.substring(r+2);var h=s.indexOf(":");r=s.indexOf("/");var f=s.substring(0,r);var p;if(h!==-1){p=s.substring(0,h)}else{p=s.substring(0,r);f+=":"+(o.toLowerCase()==="http:"?80:443)}var d=document.domain;if(p===d&&f===l){return true}}return false};var z=function t(e){var r=e;if(r==null){return null}switch(r.constructor){case String:r='"'+r.replace(/(["\\])/g,"\\$1")+'"';r=r.replace(/\n/g,"\\n");r=r.replace(/\r/g,"\\r");r=r.replace("<","&lt;");r=r.replace(">","&gt;");r=r.replace(/%/g,"%25");r=r.replace(/&/g,"%26");return r;case Array:var n=[];for(var i=0,o=r.length;i<o;i++){n.push(t(r[i]))}return"["+n.join(",")+"]";case Number:return isFinite(r)?String(r):null;case Boolean:return String(r);case Date:var s="{"+"'__type':\"System.DateTime\","+"'Year':"+r.getFullYear()+","+"'Month':"+(r.getMonth()+1)+","+"'Day':"+r.getDate()+","+"'Hour':"+r.getHours()+","+"'Minute':"+r.getMinutes()+","+"'Second':"+r.getSeconds()+","+"'Millisecond':"+r.getMilliseconds()+","+"'TimezoneOffset':"+r.getTimezoneOffset()+"}";return s;default:if((typeof r==="undefined"?"undefined":(0,m.default)(r))==="object"){if(r.length){var n=[];for(var i=0,o=r.length;i<o;i++){n.push(t(r[i]))}return"["+n.join(",")+"]"}var a=[];for(var u in r){if(typeof r[u]!=="function"&&u!=="CLASS_NAME"){a.push("'"+u+"':"+t(r[u]))}}if(a.length>0){return"{"+a.join(",")+"}"}else{return"{}"}}return r.toString()}};var V=function t(e){if(e.responseText&&typeof e.responseText==="string"){e=JSON.parse(e.responseText)}return e};var W=function t(e,r){e=e||{};if(r){for(var n in r){var i=r[n];if(i!==undefined&&n!=="CLASS_NAME"&&typeof i!=="function"){e[n]=i}}}return e};var X=function t(e,r,n){e=e||{};if(r){for(var i in r){var o=false;if(n&&n.length){for(var s=0,a=n.length;s<a;s++){if(i===n[s]){o=true;break}}}if(o===true){continue}var u=r[i];if(u!==undefined&&i!=="CLASS_NAME"&&typeof u!=="function"){e[i]=u}}}return e};var H=function t(e){if(null===e||"object"!==(typeof e==="undefined"?"undefined":(0,m.default)(e))){return e}if(e instanceof Date){var r=new Date;r.setTime(e.getTime());return r}if(e instanceof Array){var r=e.slice(0);return r}if(e instanceof Object){var r={};for(var n in e){if(e.hasOwnProperty(n)){r[n]=t(e[n])}}return r}throw new Error("Unable to copy obj! Its type isn't supported.")};var Y=function t(){var e="";for(var r=1;r<=32;r++){var n=Math.floor(Math.random()*16).toString(16);e+=n;if(r==8||r==12||r==16||r==20)e+="-"}return e};var Z=function t(e,r){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var t=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(r,t)}};var Q=function t(e,r){return function(t){return e.call(r,t||window.event)}};var J=function t(e){var r=e.value;switch(r){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}};var K=function t(e){return e.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return $(t)})};var $=function t(e){var r=escape(e);var n=r.split("%");var i="";if(n[0]!=""){i=n[0]}for(var o=1;o<n.length;o++){if(n[o].substring(0,1)=="u"){i+=et(tt(n[o].substring(1,5)))}else i+="%"+n[o]}return i};var tt=function t(e){var r="";var n;var i="0123456789ABCDEF";var o="";for(var s=0;s<e.length;s++){r=e.charAt(s);n=i.indexOf(r);o+=nt(n)}return o};var et=function t(e){var r="";var n="";var i="";if(e.length==16){n="1110"+e.substring(0,4);n+="10"+e.substring(4,10);n+="10"+e.substring(10,16);var o="0123456789ABCDEF";for(var s=0;s<3;s++){r+="%";i=n.substring(s*8,(s+1)*8);r+=o.charAt(rt(i.substring(0,4)));r+=o.charAt(rt(i.substring(4,8)))}return r}return""};var rt=function t(e){var r=0;if(e.length==4){for(var n=0;n<4;n++){r+=e.charAt(n)*Math.pow(2,3-n)}return r}return-1};var nt=function t(e){var r="";var n=0;for(var i=0;i<4;i++){n=Math.pow(2,3-i);if(e>=n){r+="1";e=e-n}else r+="0"}return r};var it=function t(e,r){if(Object.prototype.toString.call(e)==="[object Object]"&&Object.prototype.toString.call(r)==="[object Object]"){for(var n in r){if(!e[n]){e[n]=r[n]}else{e[n]=t(e[n],r[n])}}}else if(Object.prototype.toString.call(e)==="[object Array]"&&Object.prototype.toString.call(r)==="[object Array]"){e=e.concat(r)}else{e=r}return e};var ot=function t(e,r,n,i){var o={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};if(r.hasOwnProperty(n)){if((0,m.default)(e[n])=="object"&&!o[Object.prototype.toString.call(e[n])]){st(e[n],r[n],i)}else if(i||!(n in e)){e[n]=r[n]}}};var st=function t(e,r,n){for(var i in r){ot(e,r,i,n)}return e};var at=function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}var i=function t(e){(0,v.default)(this,t);for(var n=0;n<r.length;n++){s(this,new r[n](e))}};for(var o=0;o<r.length;o++){var t=r[o];s(i,t);s(i.prototype,t.prototype);s(i.prototype,new t)}return i;function s(t,e){var r=(0,d.default)(e);if(f.default){r=r.concat((0,f.default)(e))}for(var n=0;n<r.length;n++){var i=r[n];if(i!=="constructor"&&i!=="prototype"&&i!=="name"&&i!=="length"){var o=(0,c.default)(e,i);if(window["ActiveXObject"]){(0,u.default)(t,i,o||{})}else{(0,u.default)(t,i,o)}}}}};var ut=function t(e,r){var n=document.createElement("CANVAS");if(e){n.width=e}if(r){n.height=r}return n.getContext("2d")};var lt=function t(e,r,n,o){(0,s.default)(e).forEach(function(t){var s=e[t],a=t;if(pt(s)&&typeof s!=="function"){if(n&&n.indexOf(t)>-1){var u={};if(t==="geometry"){if(s.type==="polygon"){u["rings"]=e[t]["rings"]}if(s.type==="multipoint"){u["points"]=e[t]["points"]}if(s.type==="point"){if(e[t]["x"]&&e[t]["y"]){u["y"]=e[t]["y"];u["x"]=e[t]["x"]}}if(s.type==="polyline"){u["paths"]=e[t]["paths"]}if(s.type==="circle"){s.type="polygon";u["rings"]=e[t]["rings"]}u["spatialReference"]=e[t]["spatialReference"];s=u;r+="&geometryType=esriGeometry"+e[t]["type"].charAt(0).toUpperCase()+e[t]["type"].slice(1);s=encodeURI((0,i.default)(s))}else{s=(0,i.default)(s)}}if(o&&o.hasOwnProperty(t)){a=o[t]}r+="&"+a+"="+s}});return r};var ct=function t(e,r,n){(0,s.default)(r).forEach(function(t){if(n&&n.indexOf(t)>-1){var o=t;o=t.substring(0,o.length-"Features".length)+"s";e+=o+"="+encodeURIComponent(r[t]instanceof Object?(0,i.default)(r[t]):r[t])+"&"}else{e+=t+"="+r[t]+"&"}});return e};var ht=function t(e,r,n){return new e({longitude:n[0],latitude:n[1],z:n[2],spatialReference:H(r.spatialReference)})};var ft=function t(e){for(var r=0;r<e.length;r++){if(e[r]instanceof Array){t(e[r])}else{if(e[r]instanceof Object){e[r]=e[r].toArray()}}}return e};var pt=function t(e){return e!==""&&e!==null&&e!==undefined};e.extend=b;e.isArray=S;e.extendDeep=C;e.copy=w;e.copyExcluce=I;e.reset=P;e.getElement=E;e.isElement=M;e.removeItem=L;e.indexOf=N;e.modifyDOMElement=T;e.applyDefaults=O;e.getParameterString=R;e.getWFParameterString=A;e.urlAppend=F;e.getParameters=D;e.IS_GECKO=k;e.Browser=j;e.getBrowser=B;e.isSupportCanvas=G;e.supportCanvas=U;e.isInTheSameDomain=q;e.toJSON=z;e.transformResult=V;e.copyAttributes=W;e.copyAttributesWithClip=X;e.cloneObject=H;e.newGuid=Y;e.bind=Z;e.bindAsEventListener=Q;e.getTopAnalysisResult=J;e.ChineseToUtf8=K;e.DeepMerge=it;e.merge=st;e.mixin=at;e.createCanvasContext2D=ut;e.formatQuery=lt;e.formatEdits=ct;e.returnPoint=ht;e.formatPoints=ft;e.notNULL=pt;_.Zondy.Util.extend=b;_.Zondy.Util.isArray=S;_.Zondy.Util.extendDeep=C;_.Zondy.Util.copy=w;_.Zondy.Util.copyExcluce=I;_.Zondy.Util.reset=P;_.Zondy.Util.getElement=E;_.Zondy.Util.isElement=M;_.Zondy.Util.removeItem=L;_.Zondy.Util.indexOf=N;_.Zondy.Util.modifyDOMElement=T;_.Zondy.Util.applyDefaults=O;_.Zondy.Util.getParameterString=R;_.Zondy.Util.getWFParameterString=A;_.Zondy.Util.urlAppend=F;_.Zondy.Util.getParameters=D;_.Zondy.IS_GECKO=k;_.Zondy.Browser=j;_.Zondy.Util.getBrowser=B;_.Zondy.Util.isSupportCanvas=G;_.Zondy.Util.supportCanvas=U;_.Zondy.Util.isInTheSameDomain=q;_.Zondy.Util.toJSON=z;_.Zondy.Util.transformResult=V;_.Zondy.Util.copyAttributes=W;_.Zondy.Util.copyAttributesWithClip=X;_.Zondy.Util.cloneObject=H;_.Zondy.Util.newGuid=Y;_.Zondy.Util.bind=Z;_.Zondy.Util.bindAsEventListener=Q;_.Zondy.Util.getTopAnalysisResult=J;_.Zondy.Util.ChineseToUtf8=K;_.Zondy.Util.DeepMerge=it;_.Zondy.Util.merge=st;_.Zondy.Util.mixin=at;_.Zondy.Util.createCanvasContext2D=ut;_.Zondy.Util.formatQuery=lt;_.Zondy.Util.formatEdits=ct;_.Zondy.Util.returnPoint=ht;_.Zondy.Util.returnPoint=ft;_.Zondy.Util.returnPoint=pt},function(t,e,r){"use strict";e.__esModule=true;var n=r(78);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,i.default)(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}()},function(t,e,r){t.exports={default:r(445),__esModule:true}},function(t,e,r){"use strict";e.__esModule=true;var n=r(69);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"||typeof e==="function")?e:t}},function(t,e,r){"use strict";e.__esModule=true;var n=r(475);var i=l(n);var o=r(479);var s=l(o);var a=r(69);var u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":(0,u.default)(e)))}t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)i.default?(0,i.default)(t,e):t.__proto__=e}},function(t,e,r){"use strict";e.__esModule=true;var n=r(10);var i=a(n);var o=r(482);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,r,n){if(e===null)e=Function.prototype;var o=(0,s.default)(e,r);if(o===undefined){var a=(0,i.default)(e);if(a===null){return undefined}else{return t(a,r,n)}}else if("value"in o){return o.value}else{var u=o.get;if(u===undefined){return undefined}return u.call(n)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.IgsServiceBase=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(202);var f=g(h);var p=r(4);var d=g(p);var y=r(8);var v=r(203);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);r=r||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.CLASS_NAME="Zondy.IgsServiceBase";return n}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this);var r=this;if(r.events){r.events.un(r.eventListeners);r.events.listeners=null;r.events.destroy();r.events=null;r.eventListeners=null}}},{key:"processAsync",value:function t(e){var r=this;r.request({method:e&&e.method?e.method:"GET",scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed,data:e&&e.data?e.data:null,headers:e&&e.headers?e.headers:null})}},{key:"serviceProcessCompleted",value:function t(e){var r=this;e=(0,y.transformResult)(e);if(e.succeed){r.events&&r.events.triggerEvent("processCompleted",{result:e})}else{r.events&&r.events.triggerEvent("processFailed",{result:e})}}}]);return e}(v.CommonServiceBase);e.IgsServiceBase=m;Zondy.Service.IgsServiceBase=m},function(t,e,r){t.exports={default:r(291),__esModule:true}},function(t,e){var r=t.exports={version:"2.6.12"};if(typeof __e=="number")__e=r},function(t,e){t.exports=mapboxgl},function(t,e){var r=t.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ShapeFactory=undefined;var n=r(5);var i=w(n);var o=r(6);var s=w(o);var a=r(7);var u=r(95);var l=r(166);var c=r(96);var h=r(274);var f=r(97);var p=r(275);var d=r(276);var y=r(167);var v=r(168);var g=r(277);var m=r(278);var _=r(169);var x=r(165);var b=r(98);var S=r(279);var C=r(280);function w(t){return t&&t.__esModule?t:{default:t}}var I=a.Common.copyAttributesWithClip,P=a.Common.Zondy;var E=function(){function t(e){(0,i.default)(this,t);this.shapeParameters=e;this.CLASS_NAME="Zondy.Feature.ShapeFactory"}(0,s.default)(t,[{key:"destroy",value:function t(){this.shapeParameters=null}},{key:"createShape",value:function e(r){if(r){this.shapeParameters=r}if(!this.shapeParameters){return null}var n=this.shapeParameters;if(n instanceof u.Point){var i=new Object;i["x"]=n.x;i["y"]=n.y;i["r"]=n.r;i=I(i,n.style,["x","y"]);var o=new v.SmicPoint;o.style=t.transformStyle(i);o.highlightStyle=t.transformStyle(n.highlightStyle);I(o,n,["x","y","style","highlightStyle"]);return o}else if(n instanceof l.Line){if(!n.pointList){return null}var s=new Object;s["pointList"]=n.pointList;s=I(s,n.style,["pointList"]);var a=new _.SmicBrokenLine;a.style=t.transformStyle(s);a.highlightStyle=t.transformStyle(n.highlightStyle);I(a,n,["pointList","style","highlightStyle"]);return a}else if(n instanceof c.Polygon){if(!n.pointList){return null}var w=new Object;w["pointList"]=n.pointList;w=I(w,n.style,["pointList"]);var P=new b.SmicPolygon;P.style=t.transformStyle(w);P.highlightStyle=t.transformStyle(n.highlightStyle);I(P,n,["pointList","style","highlightStyle"]);return P}else if(n instanceof h.Rectangle){if(!n.x&&!n.y&!n.width&!n.height){return null}var E=new Object;E["x"]=n.x;E["y"]=n.y;E["width"]=n.width;E["height"]=n.height;E=I(E,n.style,["x","y","width","height"]);var M=new S.SmicRectangle;M.style=t.transformStyle(E);M.highlightStyle=t.transformStyle(n.highlightStyle);I(M,n,["x","y","width","height","style","highlightStyle"]);return M}else if(n instanceof f.Sector){var L=new Object;L["x"]=n.x;L["y"]=n.y;L["r"]=n.r;L["startAngle"]=n.startAngle;L["endAngle"]=n.endAngle;if(n["r0"]){L["r0"]=n.r0}if(n["clockWise"]){L["clockWise"]=n.clockWise}L=I(L,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var N=new C.SmicSector;N.style=t.transformStyle(L);N.highlightStyle=t.transformStyle(n.highlightStyle);I(N,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]);return N}else if(n instanceof p.Label){var T=new Object;T["x"]=n.x;T["y"]=n.y;T["text"]=n.text;T=I(T,n.style,["x","y","text"]);var O=new g.SmicText;O.style=t.transformStyle(T);O.highlightStyle=t.transformStyle(n.highlightStyle);I(O,n,["x","y","text","style","highlightStyle"]);return O}else if(n instanceof d.Image){var R=new Object;R["x"]=n.x;R["y"]=n.y;if(n["image"]){R["image"]=n.image}if(n["width"]){R["width"]=n.width}if(n["height"]){R["height"]=n.height}if(n["sx"]){R["sx"]=n.sx}if(n["sy"]){R["sy"]=n.sy}if(n["sWidth"]){R["sWidth"]=n.sWidth}if(n["sHeight"]){R["sHeight"]=n.sHeight}R=I(R,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new x.SmicImage;A.style=t.transformStyle(R);A.highlightStyle=t.transformStyle(n.highlightStyle);I(A,n,["x","y","image","width","height","style","highlightStyle"]);return A}else if(n instanceof y.Circle){var F=new Object;F["x"]=n.x;F["r"]=n.r;F["y"]=n.y;F=I(F,n.style,["x","y","r"]);var D=new m.SmicCircle;D.style=new t.transformStyle(F);D.highlightStyle=new t.transformStyle(n.highlightStyle);I(D,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]);return D}return null}}],[{key:"transformStyle",value:function t(e){var r={};var n=["normal","normal","normal","12","arial,sans-serif"];var i=[true,false];for(var o in e){switch(o){case"fill":i[0]=e[o];break;case"fillColor":r["color"]=e[o];break;case"stroke":i[1]=e[o];break;case"strokeWidth":r["lineWidth"]=e[o];break;case"strokeLinecap":r["lineCap"]=e[o];break;case"strokeLineJoin":r["lineJoin"]=e[o];break;case"strokeDashstyle":r["lineType"]=e[o];break;case"pointRadius":r["r"]=e[o];break;case"label":r["text"]=e[o];break;case"labelRect":r["labelRect"]=e[o];break;case"fontColor":r["textColor"]=e[o];break;case"fontStyle":n[0]=e[o];break;case"fontVariant":n[1]=e[o];break;case"fontWeight":n[2]=e[o];break;case"fontSize":var s="";if(e[o]&&e[o].toString().indexOf("px")<0){s="px"}n[3]=e[o]+s;break;case"fontFamily":n[4]=e[o];break;case"fontOpacity":r["opacity"]=e[o];break;case"labelPosition":r["textPosition"]=e[o];break;case"labelAlign":r["textAlign"]=e[o];break;case"labelBaseline":r["textBaseline"]=e[o];break;case"labelRotation":r["textRotation"]=e[o];break;default:r[o]=e[o];break}}r["textFont"]=n.join(" ");if(i[0]===true&&i[1]===false){r["brushType"]="fill"}else if(i[0]===false&&i[1]===true){r["brushType"]="stroke"}else if(i[0]===true&&i[1]===true){r["brushType"]="both"}else{r["brushType"]="fill"}if(r["lineWidth"]==null){r["lineWidth"]=1}return r}},{key:"Background",value:function t(e,r,n){var i=n?n:{};var o=new h.Rectangle(r[0],r[3],Math.abs(r[2]-r[0]),Math.abs(r[3]-r[1]));o.style={fillColor:"#f3f3f3"};if(i.backgroundStyle){I(o.style,i.backgroundStyle)}if(i.backgroundRadius){o.style["radius"]=i.backgroundRadius}o.clickable=false;o.hoverable=false;return e.createShape(o)}},{key:"GraphAxis",value:function t(e,r,n,i){var o=r;var s=n?n:{};var a=[];var u=[];var h=s.useXReferenceLine?s.useXReferenceLine:false;var f=s.axisYTick&&!isNaN(s.axisYTick)?s.axisYTick:0;var d=[];var y=[];var v=[];if(f===0){v.push([o[0],o[3]-5]);v.push([o[0],o[1]]);if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var g=parseInt(s.axis3DParameter);var m=[o[0]-g,o[1]+g];if(s.axisUseArrow){y.push([m[0]+1.5,m[1]-7.5]);y.push([m[0]-1,m[1]+1]);y.push([m[0]+7.5,m[1]-1.5]);v.push([m[0],m[1]])}else{v.push([m[0],m[1]])}v.push([o[0],o[1]])}v.push([o[2]+5,o[1]])}else{var _=Math.abs(o[1]-o[3])/f;var x=o[3];v.push([o[0],x-5]);for(var b=0;b<f;b++){v.push([o[0],x]);v.push([o[0]-5,x]);v.push([o[0],x]);if(h){var S=new l.Line([[o[0],x],[o[2],x]]);S.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1};S.clickable=false;S.hoverable=false;if(s.xReferenceLineStyle){I(S.style,s.xReferenceLineStyle)}a.push(e.createShape(S))}x+=_}v.push([o[0],o[1]]);if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var C=parseInt(s.axis3DParameter);var w=[o[0]-C,o[1]+C];if(s.axisUseArrow){y.push([w[0]+1.5,w[1]-7.5]);y.push([w[0]-1,w[1]+1]);y.push([w[0]+7.5,w[1]-1.5]);v.push([w[0],w[1]])}else{v.push([w[0],w[1]])}v.push([o[0],o[1]])}v.push([o[2]+5,o[1]])}if(s.axisUseArrow){var P=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]];var E=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]];var M=new c.Polygon(P);M.style={fillColor:"#008acd"};I(M.style,s.axisStyle);u.push(e.createShape(M));var L=new c.Polygon(E);L.style={fillColor:"#008acd"};I(L.style,s.axisStyle);u.push(e.createShape(L));if(s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var N=new c.Polygon(y);N.style={fillColor:"#008acd"};I(N.style,s.axisStyle);u.push(e.createShape(N))}}d=v;var T=new l.Line(d);T.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1};if(s.axisStyle){I(T.style,s.axisStyle)}T.clickable=false;T.hoverable=false;var O=[e.createShape(T)];var R=[];if(s.axisYLabels&&s.axisYLabels.length&&s.axisYLabels.length>0){var A=s.axisYLabels;var F=A.length;var D=[0,0];if(s.axisYLabelsOffset&&s.axisYLabelsOffset.length){D=s.axisYLabelsOffset}if(F===1){var k=new p.Label(o[0]-5+D[0],o[3]+D[1],A[0]);k.style={labelAlign:"right"};if(s.axisYLabelsStyle){I(k.style,s.axisYLabelsStyle)}k.clickable=false;k.hoverable=false;R.push(e.createShape(k))}else{var j=o[3];var B=Math.abs(o[1]-o[3])/(F-1);for(var G=0;G<F;G++){var U=new p.Label(o[0]-5+D[0],j+D[1],A[G]);U.style={labelAlign:"right"};if(s.axisYLabelsStyle){I(U.style,s.axisYLabelsStyle)}U.clickable=false;U.hoverable=false;R.push(e.createShape(U));j+=B}}}var q=[];if(s.axisXLabels&&s.axisXLabels.length&&s.axisXLabels.length>0){var z=s.axisXLabels;var V=z.length;var W=[0,0];if(s.axisXLabelsOffset&&s.axisXLabelsOffset.length){W=s.axisXLabelsOffset}if(i&&i.xPositions&&i.xPositions.length&&i.xPositions.length===V){var X=i.xPositions;for(var H=0;H<V;H++){var Y=new p.Label(X[H]+W[0],o[1]+W[1],z[H]);Y.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I(Y.style,s.axisXLabelsStyle)}Y.clickable=false;Y.hoverable=false;q.push(e.createShape(Y))}}else{if(V===1){var Z=new p.Label(o[0]-5+W[0],o[1]+W[0],z[0]);Z.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I(Z.style,s.axisXLabelsStyle)}Z.clickable=false;Z.hoverable=false;q.push(e.createShape(Z))}else{var Q=o[0];var J=Math.abs(o[2]-o[0])/(V-1);for(var K=0;K<V;K++){var $=new p.Label(Q+W[0],o[1]+W[1],z[K]);$.style={labelAlign:"center",labelBaseline:"top"};if(s.axisXLabelsStyle){I($.style,s.axisXLabelsStyle)}$.clickable=false;$.hoverable=false;q.push(e.createShape($));Q+=J}}}}return a.concat(O).concat(R).concat(q).concat(u)}},{key:"ShapeStyleTool",value:function t(e,r,n,i,o,s){var a=e?e:{};if(r){I(a,r)}if(n&&n.length&&typeof o!=="undefined"&&!isNaN(o)&&o>=0){if(n[o]){I(a,n[o])}}if(i&&i.length&&typeof s!=="undefined"){var u=i;var l=u.length;var c=parseFloat(s);for(var h=0;h<l;h++){if(u[h].start<=c&&c<u[h].end){I(a,u[h].style);break}}}return a}}]);return t}();e.ShapeFactory=E;P.Feature.ShapeFactory=E},function(t,e,r){var n=r(104)("wks");var i=r(74);var o=r(18).Symbol;var s=typeof o=="function";var a=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=undefined;var n=r(329);var i=a(n);var o;var s=r(0);function a(t){return t&&t.__esModule?t:{default:t}}var u={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=u;s.Zondy.Enum.XClsType=u;var l={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=l;s.Zondy.Enum.VectClsType=l;var c={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=c;s.Zondy.Enum.FeatureType=c;var h={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=h;s.Zondy.Enum.FontShape=h;var f={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=f;s.Zondy.Enum.LabelLinType=f;var p={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=p;s.Zondy.Enum.LabelRegType=p;var d={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=d;s.Zondy.Enum.LabelPntType=d;var y={Auto:0,NoRep:1,OnStep:2};e.RepeatType=y;s.Zondy.Enum.RepeatType=y;var v={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=v;s.Zondy.Enum.LabelSpreadType=v;var g={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=g;s.Zondy.Enum.LineConstrain=g;var m={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=m;s.Zondy.Enum.EightDirType=m;var _={Reg:0,Arc:1,All:2};e.ISShowArc=_;s.Zondy.Enum.ISShowArc=_;var x=(o={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,i.default)(o,"SysModeMinDis","SysModeMinDis"),(0,i.default)(o,"SysModeSysRecommend","SysModeSysRecommend"),o);e.NetAnalyType=x;s.Zondy.Enum.Net.NetAnalyType=x;var b={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=b;s.Zondy.Enum.Net.NetElemType=b;var S={Adjust:0,NoAdjust:1};e.CLinAdjustType=S;s.Zondy.Enum.Theme.CLinAdjustType=S;var C={Round:0,Square:1,Butt:2};e.CLinHeadType=C;s.Zondy.Enum.Theme.CLinHeadType=C;var w={Round:0,Square:1,Butt:2};e.CLinJointType=w;s.Zondy.Enum.Theme.CLinJointType=w;var I={Byrule:0,Bypoint:1};e.CLinStyleMakeType=I;s.Zondy.Enum.Theme.CLinStyleMakeType=I;var P={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=P;s.Zondy.Enum.Theme.CItemType=P;var E={Doc:"mapType",Tile:"tileType"};e.MapType=E;s.Zondy.Enum.Map.MapType=E;var M={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=M;s.Zondy.Enum.Map.LayerStatusType=M},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Shape=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(70);var g=r(92);var m=r(24);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy,b=y.Common.mixin,S=y.Common.newGuid,C=y.Common.extend;var w=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));t=t||{};r.id=null;r.style={};r.highlightStyle=null;r.parent=null;r.__dirty=true;r.__clipShapes=[];r.invisible=false;r.ignore=false;r.zlevel=0;r.draggable=false;r.clickable=false;r.hoverable=true;r.z=0;r.refOriginalPosition=[0,0];r.refDataID=null;r.isHoverByRefDataID=false;r.refDataHoverGroup=null;r.dataInfo=null;C(r,t);r.id=r.id||S();r.CLASS_NAME="Zondy.LevelRenderer.Shape";r.getTansform=function(){var t=[];return function(e,r){var n=[e,r];if(this.needTransform&&this.transform){m.SUtil.Util_matrix.invert(t,this.transform);m.SUtil.Util_matrix.mulVector(n,t,[e,r,1]);if(e===n[0]&&r===n[1]){this.updateNeedTransform()}}return n}}();return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.id=null;this.style=null;this.highlightStyle=null;this.parent=null;this.__dirty=null;this.__clipShapes=null;this.invisible=null;this.ignore=null;this.zlevel=null;this.draggable=null;this.clickable=null;this.hoverable=null;this.z=null;this.refOriginalPosition=null;this.refDataID=null;this.refDataHoverGroup=null;this.isHoverByRefDataID=null;this.dataInfo=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){var n=this.beforeBrush(e,r);e.beginPath();this.buildPath(e,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n);e.fill();if(n.lineWidth>0){this.setCtxGlobalAlpha(e,"stroke",n);e.stroke()}this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n);n.lineWidth>0&&e.stroke();this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n);e.fill();this.setCtxGlobalAlpha(e,"reset",n);break}this.drawText(e,n,this.style);this.afterBrush(e)}},{key:"beforeBrush",value:function t(e,r){var n=this.style;if(this.brushTypeOnly){n.brushType=this.brushTypeOnly}if(r){n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)}if(this.brushTypeOnly==="stroke"){n.strokeColor=n.strokeColor||n.color}e.save();this.doClip(e);this.setContext(e,n);this.setTransform(e);return n}},{key:"afterBrush",value:function t(e){e.restore()}},{key:"setContext",value:function t(e,r){var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];for(var i=0,o=n.length;i<o;i++){var s=n[i][0];var a=r[s];var u=n[i][1];if(typeof a!="undefined"){e[u]=a}}}},{key:"doClip",value:function t(e){var r=m.SUtil.Util_matrix.create();if(this.__clipShapes){for(var n=0;n<this.__clipShapes.length;n++){var i=this.__clipShapes[n];if(i.needTransform){var o=i.transform;m.SUtil.Util_matrix.invert(r,o);e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}e.beginPath();i.buildPath(e,i.style);e.clip();if(i.needTransform){var s=r;e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}}}}},{key:"getHighlightStyle",value:function t(e,r,n){var i={};for(var o in e){i[o]=e[o]}var s=m.SUtil.Util_color.getHighlightColor();if(e.brushType!=="stroke"){i.strokeColor=s;i.lineWidth=e.lineWidth||1;i.brushType="both"}else{if(n!=="stroke"){i.strokeColor=s;i.lineWidth=e.lineWidth||1}else{i.strokeColor=r.strokeColor||m.SUtil.Util_color.mix(e.strokeColor,m.SUtil.Util_color.toRGB(s))}}for(var a in r){if(typeof r[a]!="undefined"){i[a]=r[a]}}return i}},{key:"getHighlightZoom",value:function t(){return this.type!=="text"?6:2}},{key:"drift",value:function t(e,r){this.position[0]+=e;this.position[1]+=r}},{key:"buildPath",value:function t(e,r){}},{key:"getRect",value:function t(e){}},{key:"isCover",value:function t(e,r){var n=this.getTansform(e,r);e=n[0];r=n[1];var i=this.style.__rect;if(!i){i=this.style.__rect=this.getRect(this.style)}if(e>=i.x&&e<=i.x+i.width&&r>=i.y&&r<=i.y+i.height){return m.SUtil.Util_area.isInside(this,this.style,e,r)}return false}},{key:"drawText",value:function t(r,n,i){if(typeof n.text=="undefined"||n.text===false){return}var o=n.textColor||n.color||n.strokeColor;r.fillStyle=o;var s=10;var a;var u;var l;var c;var h=n.textPosition||this.textPosition||"top";var f=[];if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){f=[0,0]}else{f=this.refOriginalPosition}switch(h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(i||n).__rect||this.getRect(i||n);switch(h){case"inside":l=p.x+p.width/2;c=p.y+p.height/2;a="center";u="middle";if(n.brushType!=="stroke"&&o===n.color){r.fillStyle="#fff"}break;case"left":l=p.x-s;c=p.y+p.height/2;a="end";u="middle";break;case"right":l=p.x+p.width+s;c=p.y+p.height/2;a="start";u="middle";break;case"top":l=p.x+p.width/2;c=p.y-s;a="center";u="bottom";break;case"bottom":l=p.x+p.width/2;c=p.y+p.height+s;a="center";u="top";break}}break;case"start":case"end":var d=0;var y=0;var v=0;var g=0;if(typeof n.pointList!="undefined"){var m=n.pointList;if(m.length<2){return}var _=m.length;switch(h){case"start":d=m[0][0]+f[0];y=m[1][0]+f[0];v=m[0][1]+f[1];g=m[1][1]+f[1];break;case"end":d=m[_-2][0]+f[0];y=m[_-1][0]+f[0];v=m[_-2][1]+f[1];g=m[_-1][1]+f[1];break}}else{d=n.xStart+f[0]||0;y=n.xEnd+f[0]||0;v=n.yStart+f[1]||0;g=n.yEnd+f[1]||0}switch(h){case"start":a=d<y?"end":"start";u=v<g?"bottom":"top";l=d;c=v;break;case"end":a=d<y?"start":"end";u=v<g?"top":"bottom";l=y;c=g;break}s-=4;if(d&&y&&d!==y){l-=a==="end"?s:-s}else{a="center"}if(v!==g){c-=u==="bottom"?s:-s}else{u="middle"}break;case"specific":l=n.textX||0;c=n.textY||0;a="start";u="middle";break}if(n.labelXOffset&&!isNaN(n.labelXOffset)){l+=n.labelXOffset}if(n.labelYOffset&&!isNaN(n.labelYOffset)){c+=n.labelYOffset}if(l!=null&&c!=null){e._fillText(r,n.text,l,c,n.textFont,n.textAlign||a,n.textBaseline||u)}}},{key:"modSelf",value:function t(){this.__dirty=true;if(this.style){this.style.__rect=null}if(this.highlightStyle){this.highlightStyle.__rect=null}}},{key:"isSilent",value:function t(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function t(e,r,n){if(r==="fill"){e.globalAlpha=typeof n["fillOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["fillOpacity"]}else if(r==="stroke"){e.globalAlpha=typeof n["strokeOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["strokeOpacity"]}else{e.globalAlpha=typeof n["opacity"]==="undefined"?1:n["opacity"]}}}],[{key:"_fillText",value:function t(r,n,i,o,s,a,u){if(s){r.font=s}r.textAlign=a;r.textBaseline=u;var l=e._getTextRect(n,i,o,s,a,u);n=(n+"").split("\n");var c=m.SUtil.Util_area.getTextHeight("ZH",s);switch(u){case"top":o=l.y;break;case"bottom":o=l.y+c;break;default:o=l.y+c/2}for(var h=0,f=n.length;h<f;h++){r.fillText(n[h],i,o);o+=c}}},{key:"_getTextRect",value:function t(e,r,n,i,o,s){var a=m.SUtil.Util_area.getTextWidth(e,i);var u=m.SUtil.Util_area.getTextHeight("ZH",i);e=(e+"").split("\n");switch(o){case"end":case"right":r-=a;break;case"center":r-=a/2;break}switch(s){case"top":break;case"bottom":n-=u*e.length;break;default:n-=u*e.length/2}return{x:r,y:n,width:a,height:u*e.length}}}]);return e}(b(v.Eventful,g.Transformable));e.Shape=w;x.LevelRenderer.Shape=w},function(t,e){var r=t.exports={version:"2.6.12"};if(typeof __e=="number")__e=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=undefined;var n=r(5);var i=_(n);var o=r(6);var s=_(o);var a=r(7);var u=r(262);var l=r(163);var c=r(263);var h=r(93);var f=r(264);var p=r(265);var d=r(266);var y=r(267);var v=r(268);var g=r(58);var m=r(94);function _(t){return t&&t.__esModule?t:{default:t}}var x=a.Common.Zondy;var b=function(){function t(){(0,i.default)(this,t)}(0,s.default)(t,null,[{key:"SUtil_smoothBezier",value:function e(r,n,i,o,s){if(!s||s!==2){s=[0,0]}var a=s;var u=[];var l=[];var c=[];var h=[];var f=!!o;var p,d;if(f){p=[Infinity,Infinity];d=[-Infinity,-Infinity];var y=r.length;for(var v=0;v<y;v++){t.Util_vector.min(p,p,[r[v][0]+a[0],r[v][1]+a[1]]);t.Util_vector.max(d,d,[r[v][0]+a[0],r[v][1]+a[1]])}t.Util_vector.min(p,p,o[0]);t.Util_vector.max(d,d,o[1])}var g=r.length;for(var m=0;m<g;m++){var _=[r[m][0]+a[0],r[m][1]+a[1]];var x=void 0;var b=void 0;if(i){x=[r[m?m-1:g-1][0]+a[0],r[m?m-1:g-1][1]+a[1]];b=[r[(m+1)%g][0]+a[0],r[(m+1)%g][1]+a[1]]}else{if(m===0||m===g-1){u.push([r[m][0]+a[0],r[m][1]+a[1]]);continue}else{x=[r[m-1][0]+a[0],r[m-1][1]+a[1]];b=[r[m+1][0]+a[0],r[m+1][1]+a[1]]}}t.Util_vector.sub(l,b,x);t.Util_vector.scale(l,l,n);var S=t.Util_vector.distance(_,x);var C=t.Util_vector.distance(_,b);var w=S+C;if(w!==0){S/=w;C/=w}t.Util_vector.scale(c,l,-S);t.Util_vector.scale(h,l,C);var I=t.Util_vector.add([],_,c);var P=t.Util_vector.add([],_,h);if(f){t.Util_vector.max(I,I,p);t.Util_vector.min(I,I,d);t.Util_vector.max(P,P,p);t.Util_vector.min(P,P,d)}u.push(I);u.push(P)}if(i){u.push(u.shift())}return u}},{key:"SUtil_smoothSpline",value:function e(r,n,i,o){if(!o||o!==2){o=[0,0]}var s=o;var a=r.length;var u=[];var l=0;for(var c=1;c<a;c++){l+=t.Util_vector.distance([r[c-1][0]+s[0],r[c-1][1]+s[1]],[r[c][0]+s[0],r[c][1]+s[1]])}var h=l/5;h=h<a?a:h;for(var f=0;f<h;f++){var p=f/(h-1)*(n?a:a-1);var d=Math.floor(p);var y=p-d;var v=void 0;var g=[r[d%a][0]+s[0],r[d%a][1]+s[1]];var m=void 0;var _=void 0;if(!n){v=[r[d===0?d:d-1][0]+s[0],r[d===0?d:d-1][1]+s[1]];m=[r[d>a-2?a-1:d+1][0]+s[0],r[d>a-2?a-1:d+1][1]+s[1]];_=[r[d>a-3?a-1:d+2][0]+s[0],r[d>a-3?a-1:d+2][1]+s[1]]}else{v=[r[(d-1+a)%a][0]+s[0],r[(d-1+a)%a][1]+s[1]];m=[r[(d+1)%a][0]+s[0],r[(d+1)%a][1]+s[1]];_=[r[(d+2)%a][0]+s[0],r[(d+2)%a][1]+s[1]]}var x=y*y;var b=y*x;u.push([S(v[0],g[0],m[0],_[0],y,x,b),S(v[1],g[1],m[1],_[1],y,x,b)])}return u;function S(t,e,r,n,i,o,s){var a=(r-t)*.5;var u=(n-e)*.5;return(2*(e-r)+a+u)*s+(-3*(e-r)-2*a-u)*o+a*i+e}}},{key:"SUtil_dashedLineTo",value:function t(e,r,n,i,o,s,a){var u=[5,5];s=typeof s!="number"?5:s;if(e.setLineDash){u[0]=s;u[1]=s;if(a&&a instanceof Array){e.setLineDash(a)}else{e.setLineDash(u)}e.moveTo(r,n);e.lineTo(i,o);return}var l=i-r;var c=o-n;var h=Math.floor(Math.sqrt(l*l+c*c)/s);l=l/h;c=c/h;var f=true;for(var p=0;p<h;++p){if(f){e.moveTo(r,n)}else{e.lineTo(r,n)}f=!f;r+=l;n+=c}e.lineTo(i,o)}}]);return t}();b.Util_area=new u.Area;b.Util_color=new l.Color;b.Util_computeBoundingBox=new c.ComputeBoundingBox;b.Util_curve=new h.Curve;b.Util_env=new f.Env;b.Util_event=new p.Event;b.Util_http=new d.Http;b.Util_math=new y.Math;b.Util_matrix=new v.Matrix;b.Util=new g.Util;b.Util_vector=new m.Vector;e.SUtil=b;x.LevelRenderer.SUtil=b},function(t,e,r){var n=r(18);var i=r(16);var o=r(64);var s=r(42);var a=r(40);var u="prototype";var l=function(t,e,r){var c=t&l.F;var h=t&l.G;var f=t&l.S;var p=t&l.P;var d=t&l.B;var y=t&l.W;var v=h?i:i[e]||(i[e]={});var g=v[u];var m=h?n:f?n[e]:(n[e]||{})[u];var _,x,b;if(h)r=e;for(_ in r){x=!c&&m&&m[_]!==undefined;if(x&&a(v,_))continue;b=x?m[_]:r[_];v[_]=h&&typeof m[_]!="function"?r[_]:d&&x?o(b,n):y&&m[_]==b?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};e[u]=t[u];return e}(b):p&&typeof b=="function"?o(Function.call,b):b;if(p){(v.virtual||(v.virtual={}))[_]=b;if(t&l.R&&g&&!g[_])s(g,_,b)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;t.exports=l},function(t,e,r){var n=r(36);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ServiceBase=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);(0,u.extend)(this,e);this.baseUrl=e&&e.baseUrl?e.baseUrl:null;this.ip=e&&e.ip?e.ip:"localhost";this.port=e&&e.port?e.port:"6163";this.partUrl=e&&e.partUrl?e.partUrl:null;this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";this.domain=e&&e.domain?e.domain:""}(0,s.default)(t,[{key:"getFullUrl",value:function t(){var e=this;var r=null;if(a.Zondy.Util.isArray(e.ip)){for(var n=0;n<e.ip.length;n++){r=new Array;var i=null;if((0,u.isArray)(e.port)){i=e.port[n]!==undefined?e.port[n]:"6163"}else{i=e.port!==undefined?e.port:"6163"}var o=null;if((0,u.isArray)(e.partUrl)){o=e.partUrl[n]!==undefined?e.partUrl[n]:null}else{o=e.partUrl!==undefined?e.partUrl:null}if(e.domain===""){e.domainStr=e.networkProtocol+"://"+e.ip[n]+":"+i}else{e.domainStr=e.domain}r.push(encodeURI((e.domainStr+"/"+e.baseUrl+"/"+o).trim()))}}else{if(e.domain===""){e.domainStr=e.networkProtocol+"://"+e.ip+":"+e.port}else{e.domainStr=e.domain}r=encodeURI((e.domainStr+"/"+e.baseUrl+"/"+e.partUrl).trim())}return r}}]);return t}();e.ServiceBase=c;a.Zondy.Service.ServiceBase=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=undefined;var n=r(116);var i=r(326);var o=r(0);var s=r(82);var a=r(327);var u=r(328);var l=r(188);var c=r(183);var h=r(189);var f=r(330);var p=r(83);var d=r(117);var y=r(118);var v=r(184);var g=r(182);var m=r(21);var _=r(190);var x=r(192);var b=r(84);var S=r(194);var C=r(120);var w=r(119);var I=r(121);var P=r(186);var E=r(187);var M=r(185);var L=r(340);var N=r(29);var T=r(195);var O=r(341);var R=r(191);var A=r(43);var F=r(342);var D=r(193);var k=r(8);e.AnyLine=n.AnyLine;e.Arc=i.Arc;e.Zondy=o.Zondy;e.CAttStruct=s.CAttStruct;e.CAttDataRow=a.CAttDataRow;e.CDisplayStyle=u.CDisplayStyle;e.CDisplayStyleExtend=l.CDisplayStyleExtend;e.CDynNoteInfo=c.CDynNoteInfo;e.CGDBInfo=h.CGDBInfo;e.Circle=f.Circle;e.CLineInfo=p.CLineInfo;e.CPointInfo=d.CPointInfo;e.CRegionInfo=y.CRegionInfo;e.DynNoteLableType=v.DynNoteLableType;e.DynShowStyle=g.DynShowStyle;e.XClsType=m.XClsType;e.VectClsType=m.VectClsType;e.FeatureType=m.FeatureType;e.FontShape=m.FontShape;e.LabelLinType=m.LabelLinType;e.LabelRegType=m.LabelRegType;e.LabelPntType=m.LabelPntType;e.RepeatType=m.RepeatType;e.LabelSpreadType=m.LabelSpreadType;e.LineConstrain=m.LineConstrain;e.EightDirType=m.EightDirType;e.ISShowArc=m.ISShowArc;e.NetAnalyType=m.NetAnalyType;e.NetElemType=m.NetElemType;e.CLinAdjustType=m.CLinAdjustType;e.CLinHeadType=m.CLinHeadType;e.CLinJointType=m.CLinJointType;e.CLinStyleMakeType=m.CLinStyleMakeType;e.CItemType=m.CItemType;e.MapType=m.MapType;e.LayerStatusType=m.LayerStatusType;e.Feature=_.Feature;e.FeatureGeometry=x.FeatureGeometry;e.FeatureGraphicBase=b.FeatureGraphicBase;e.FeatureSet=S.FeatureSet;e.GLine=C.GLine;e.GPoint=w.GPoint;e.GRegion=I.GRegion;e.LabelLinInfo=P.LabelLinInfo;e.LabelRegInfo=E.LabelRegInfo;e.LablePntInfo=M.LablePntInfo;e.MultiPolygon=L.MultiPolygon;e.Point2D=N.Point2D;e.Polygon=T.Polygon;e.PolyLine=O.PolyLine;e.Rectangle=R.Rectangle;e.Tangram=A.Tangram;e.VectCls=F.VectCls;e.WebGraphicsInfo=D.WebGraphicsInfo;e.extend=k.extend;e.isArray=k.isArray;e.extendDeep=k.extendDeep;e.copy=k.copy;e.copyExcluce=k.copyExcluce;e.reset=k.reset;e.getElement=k.getElement;e.isElement=k.isElement;e.removeItem=k.removeItem;e.indexOf=k.indexOf;e.modifyDOMElement=k.modifyDOMElement;e.applyDefaults=k.applyDefaults;e.getParameterString=k.getParameterString;e.getWFParameterString=k.getWFParameterString;e.urlAppend=k.urlAppend;e.getParameters=k.getParameters;e.IS_GECKO=k.IS_GECKO;e.Browser=k.Browser;e.getBrowser=k.getBrowser;e.isSupportCanvas=k.isSupportCanvas;e.supportCanvas=k.supportCanvas;e.isInTheSameDomain=k.isInTheSameDomain;e.toJSON=k.toJSON;e.transformResult=k.transformResult;e.copyAttributes=k.copyAttributes;e.copyAttributesWithClip=k.copyAttributesWithClip;e.cloneObject=k.cloneObject;e.newGuid=k.newGuid;e.bind=k.bind;e.bindAsEventListener=k.bindAsEventListener;e.getTopAnalysisResult=k.getTopAnalysisResult;e.ChineseToUtf8=k.ChineseToUtf8;e.DeepMerge=k.DeepMerge;e.merge=k.merge;e.mixin=k.mixin;e.createCanvasContext2D=k.createCanvasContext2D;e.formatQuery=k.formatQuery;e.formatEdits=k.formatEdits;e.returnPoint=k.returnPoint;e.formatPoints=k.formatPoints;e.notNULL=k.notNULL},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point2D=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(3);var c=d(l);var h=r(4);var f=d(h);var p=r(43);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.x=t!==undefined?t:null;a.y=r!==undefined?r:null;a.nearDis=o.nearDis!==undefined?parseFloat(o.nearDis):null;a.CLASS_NAME="Zondy.Object.Point2D";return a}(0,u.default)(e,[{key:"getGeometryType",value:function t(){return"point"}},{key:"setByOL",value:function t(e){if(e!==undefined){var r=e.getCoordinates();this.x=r[0];this.y=r[1]}}},{key:"toString",value:function t(){if(this.x===null||this.y===null)return"";var e=this.x+","+this.y;if(this.nearDis!==undefined){e+=";"+this.nearDis}return e}}]);return e}(p.Tangram);e.Point2D=y;Zondy.Object.Point2D=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CTheme=undefined;var n=r(1);var i=a(n);var o=r(0);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,s.extend)(this,r);this.Name=r&&r.Name?r.Name:null;this.IsBaseTheme=r&&r.IsBaseTheme?r.IsBaseTheme:true;this.Visible=r&&r.Visible?r.Visible:true};e.CTheme=u;o.Zondy.Object.Theme.CTheme=u},function(t,e,r){t.exports=!r(49)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnalysisBase=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(27);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfws";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.flowID=r.flowID!==undefined?r.flowID:null;return n}(0,c.default)(e,[{key:"execute",value:function t(e,r,n){var o={};(0,v.copyExcluce)(o,this,["port","ip","baseUrl","partUrl","flowID"]);if(!r){r="get"}if(r.toLowerCase()==="get"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";if(o!==null){var s=(0,v.getWFParameterString)(o);if(s!==null||s!==""){this.partUrl+="&paraValues="+s}}}if(r.toLowerCase()==="post"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var a=new Array;if(o!==null){for(var u in o){if(o[u]!==null){var l={};l.Key=u;l.Value=o[u].toString();a.push(l)}}}o=a}var c=this.getFullUrl();var h=this;var f=new m.IgsServiceBase(c,{eventListeners:{scope:h,processCompleted:e,processFailed:n}});if(r.toLowerCase()==="post"){f.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{f.processAsync()}}}]);return e}(g.ServiceBase);e.AnalysisBase=x;y.Zondy.Service.AnalysisBase=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ShapeParameters=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.refOriginalPosition=[0,0];this.refDataID=null;this.isHoverByRefDataID=false;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=true;this.hoverable=true;this.style=null;this.highlightStyle={};this.CLASS_NAME="Zondy.Feature.ShapeParameters"}(0,s.default)(t,[{key:"destroy",value:function t(){this.refOriginalPosition=null;this.refDataID=null;this.isHoverByRefDataID=null;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=null;this.hoverable=null;this.style=null;this.highlightStyle=null}}]);return t}();e.ShapeParameters=c;l.Feature.ShapeParameters=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.mapboxgl=e.Zondy=undefined;var n=r(17);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}window.mapboxgl=i.default;i.default.Zondy=window.mapboxgl.Zondy||{};var s=window.mapboxgl.Zondy||{};s.Map=s.Map||{};e.Zondy=s;e.mapboxgl=i.default},function(t,e,r){var n=r(26);var i=r(174);var o=r(107);var s=Object.defineProperty;e.f=r(31)?Object.defineProperty:function t(e,r,a){n(e);r=o(r,true);n(a);if(i)try{return s(e,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");if("value"in a)e[r]=a.value;return e}},function(t,e){t.exports=function(t){return typeof t==="object"?t!==null:typeof t==="function"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CThemeInfo=undefined;var n=r(1);var i=c(n);var o=r(0);var s=r(8);var a=r(87);var u=r(230);var l=r(231);function c(t){return t&&t.__esModule?t:{default:t}}var h=function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,s.extend)(this,r);this.Caption=r.Caption!==undefined?r.Caption:null;this.IsVisible=r.IsVisible!==undefined?r.IsVisible:true;this.MaxScale=r.MaxScale!==undefined?parseFloat(r.MaxScale):0;this.MinScale=r.MinScale!==undefined?parseFloat(r.MinScale):0;this.RegInfo=r.RegInfo!==undefined?r.RegInfo:null;this.LinInfo=r.LinInfo!==undefined?r.LinInfo:null;this.PntInfo=r.PntInfo!==undefined?r.PntInfo:null};e.CThemeInfo=h;o.Zondy.Object.Theme.CThemeInfo=h},function(t,e){var r=t.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Graph=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(59);var g=r(19);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,x=y.Common.Rectangle;var b=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.shapeFactory=new g.ShapeFactory;l.shapeParameters=null;l.RelativeCoordinate=false;l.setting=null;l.origonPoint=null;l.chartBox=null;l.chartBounds=null;l.width=null;l.height=null;l.XOffset=0;l.YOffset=0;l.DVBParameter=null;l.dataViewBox=null;l.DVBCodomain=null;l.DVBCenterPoint=null;l.DVBUnitValue=null;l.DVBOrigonPoint=null;l.DVBWidth=null;l.DVBHeight=null;l.origonPointOffset=null;l.fields=n||[];l.dataValues=null;if(a){l.lonlat=a}else{if(u&&u.calGravity){if(t.ftype===_.Enum.FeatureType.Pnt){var h=t.fGeom.PntGeom[0].Dot;l.lonlat=[h.x,h.y]}else if(t.ftype===_.Enum.FeatureType.Lin){var f=t.fGeom.LinGeom[0].Line.Arcs;var p=[];f.forEach(function(t){var e=t.Dots;p=[].concat(e)});var d=Math.ceil(p.length/2);var h=p[d-1];l.lonlat=[h.x,h.y]}else if(t.ftype===_.Enum.FeatureType.Reg){l.lonlat=l.getCenterOfGravityPoint(t)}else{var y=t.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}else{var y=t.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}if(o&&o.width&&o.height&&o.codomain){l.setting=o}l.CLASS_NAME="Zondy.Feature.Theme.Graph";return l}(0,u.default)(e,[{key:"destroy",value:function t(){this.shapeFactory=null;this.shapeParameters=null;this.width=null;this.height=null;this.origonPoint=null;this.chartBox=null;this.dataViewBox=null;this.chartBounds=null;this.DVBParameter=null;this.DVBOrigonPoint=null;this.DVBCenterPoint=null;this.DVBWidth=null;this.DVBHeight=null;this.DVBCodomain=null;this.DVBUnitValue=null;this.origonPointOffset=null;this.XOffset=null;this.YOffset=null;this.fields=null;this.dataValues=null;this.setting=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function t(){var e=true;if(!this.setting){return false}var r=this.setting;if(!(r.width&&r.height&&r.codomain)){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=v.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];this.width=parseFloat(r.width);this.height=parseFloat(r.height);this.DVBCodomain=r.codomain;this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var o=this.width;var s=this.height;var a=this.location;this.origonPoint=[a[0]-o/2,a[1]-s/2];var u=this.origonPoint;this.chartBox=[u[0],u[1]+s,u[0]+o,u[1]];var l=this.chartBox;var c=this.DVBParameter;this.dataViewBox=[l[0]+c[0],l[1]-c[1],l[2]-c[2],l[3]+c[3]];var h=this.dataViewBox;if(h[0]>=h[2]||h[1]<=h[3]){return false}this.DVBOrigonPoint=[h[0],h[3]];this.DVBWidth=Math.abs(h[2]-h[0]);this.DVBHeight=Math.abs(h[1]-h[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-u[0],this.DVBOrigonPoint[1]-u[1]];return e}},{key:"resetLocation",value:function t(e){if(e){this.lonlat=e}var r=this.getLocalXY(this.lonlat);r[0]+=this.XOffset;r[1]+=this.YOffset;this.location=r;var n=this.width;var i=this.height;var o=this.location;this.chartBounds=new x(o[0]-n/2,o[1]-i/2,o[0]+n/2,o[1]+i/2);this.resetLinearGradient();return o}},{key:"resetLinearGradient",value:function t(){}},{key:"shapesConvertToRelativeCoordinate",value:function t(){var e=this.shapes;var r=this.location;for(var n=0,i=e.length;n<i;n++){e[n].refOriginalPosition=r;var o=e[n].style;for(var s in o){switch(s){case"pointList":var a=o[s];for(var u=0,l=a.length;u<l;u++){a[u][0]-=r[0];a[u][1]-=r[1]}break;case"x":o[s]-=r[0];break;case"y":o[s]-=r[1];break;default:break}}}this.RelativeCoordinate=true}},{key:"assembleShapes",value:function t(){}},{key:"getLocalXY",value:function t(e){return this.layer.getLocalXY(e)}},{key:"getCenterOfGravityPoint",value:function t(e){var r=[];var n=0;var i=0,o=0;if(e.ftype===_.Enum.FeatureType.Reg){var s=e.fGeom.RegGeom;for(var a=0;a<s.length;a++){var u=s[a];if(u==null||u.Rings==null){continue}var l=u.Rings;for(var c=0;c<l.length;c++){var h=l[c];if(h==null||h.Arcs==null){continue}var f=h.Arcs;for(var p=0;p<f.length;p++){var d=f[p];if(d==null||d.Dots==null){continue}var y=d.Dots;for(var v=0;v<y.length;v++){r.push(y[v])}}}}}for(var c=1;c<=r.length;c++){var g=r[c%r.length].x;var m=r[c%r.length].y;var x=r[c-1].x;var b=r[c-1].y;var S=(g*b-m*x)/2;n+=S;i+=S*(g+x)/3;o+=S*(m+b)/3}i=i/n;o=o/n;return[i,o]}}]);return e}(v.Theme);v.Theme.getDataValues=function(t,e,r){if(!t.attributes){return false}var n=[];var i=t.attributes;for(var o=0;o<e.length;o++){for(var s in i){if(s!==e[o]){continue}if(i[s]===null||i[s]===undefined){continue}try{if(!isNaN(r)&&r>=0){n.push(parseFloat(i[s].toString()).toFixed(r))}else{n.push(parseFloat(i[s].toString()))}}catch(t){throw new Error("not a number")}}}if(n.length===e.length){return n}else{return false}};e.Graph=b;_.Theme.Graph=b},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(172);var i=r(101);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(35);var i=r(77);t.exports=r(31)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){t[e]=r;return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Tangram=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);var r=e?e:{};(0,u.extend)(this,r)}(0,s.default)(t,[{key:"setByOL",value:function t(e){return null}},{key:"toString",value:function t(){return""}},{key:"getGeometryType",value:function t(){return}},{key:"Trim",value:function t(e,r){var n;n=e.replace(/(^\s+)|(\s+$)/g,"");if(r.toLowerCase()==="g"){n=n.replace(/\s/g,"")}return n}}]);return t}();e.Tangram=c;a.Zondy.Object.Tangram=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeometryAnalysisBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrgs";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.GeometryAnalysisBase=d;h.Zondy.Service.GeometryAnalysisBase=d},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(67);var i=r(249);var o=r(151);var s=Object.defineProperty;e.f=r(47)?Object.defineProperty:function t(e,r,a){n(e);r=o(r,true);n(a);if(i)try{return s(e,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");if("value"in a)e[r]=a.value;return e}},function(t,e,r){t.exports=!r(68)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,e,r){var n=r(457);var i=r(147);t.exports=function(t){return n(i(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return true}}},function(t,e,r){"use strict";e.__esModule=true;var n=r(309);var i=u(n);var o=r(316);var s=u(o);var a=typeof s.default==="function"&&typeof i.default==="symbol"?function(t){return typeof t}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default=typeof s.default==="function"&&a(i.default)==="symbol"?function(t){return typeof t==="undefined"?"undefined":a(t)}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t==="undefined"?"undefined":a(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CatalogService=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrcs";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.CatalogService=d;h.Zondy.Catalog.CatalogService=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BaseParameter=undefined;var n=r(100);var i=c(n);var o=r(1);var s=c(o);var a=r(9);var u=c(a);var l=r(28);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){(0,u.default)(t,null,[{key:"formatParam",value:function t(e){var r=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"];for(var n=0;n<r.length;n++){if(typeof e[r[n]]==="string"){e[r[n]]=e[r[n]]==="true"}}return e}}]);function t(){(0,s.default)(this,t);this.layers=[];this.pageIndex=0;this.pagination=100;this.resultFormat="json";this.IncludeAttribute=true;this.IncludeGeometry=true;this.IncludeWebGraphic=false;this.orderBy=undefined;this.isAsc=undefined;this.proj=undefined;this.fields=undefined;this.coordPrecision=undefined;this.cursorType="backward"}return t}();h.prototype.formatParameter=function(t,e){var r=void 0,n=this;n._crs=e;if(t==="typename"){r={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"};if(this.where&&this.geometry){delete r.geometry}(0,i.default)(r).forEach(function(t){if(n.hasOwnProperty(t)&&n[t]){if(n[t]instanceof Array){r[r[t]]=n[t].join(",")}else{if(t==="where"||t==="geometry"){r[r[t]]=initFilter(n[t],n.geometry,n)}else{r[r[t]]=n[t]}}}delete r[t]});return r}else{r={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"};(0,i.default)(r).forEach(function(t){if(n.hasOwnProperty(t)){n[r[t]]=n[t];delete n[t]}});return this}};e.BaseParameter=h;l.Zondy.Service.BaseParameter=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapServiceBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(27);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrms";return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return e}(f.ServiceBase);e.MapServiceBase=d;h.Zondy.Service.MapServiceBase=d},function(t,e,r){var n=r(38);var i=r(23);var o=r(248);var s=r(55);var a=r(45);var u="prototype";var l=function(t,e,r){var c=t&l.F;var h=t&l.G;var f=t&l.S;var p=t&l.P;var d=t&l.B;var y=t&l.W;var v=h?i:i[e]||(i[e]={});var g=v[u];var m=h?n:f?n[e]:(n[e]||{})[u];var _,x,b;if(h)r=e;for(_ in r){x=!c&&m&&m[_]!==undefined;if(x&&a(v,_))continue;b=x?m[_]:r[_];v[_]=h&&typeof m[_]!="function"?r[_]:d&&x?o(b,n):y&&m[_]==b?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};e[u]=t[u];return e}(b):p&&typeof b=="function"?o(Function.call,b):b;if(p){(v.virtual||(v.virtual={}))[_]=b;if(t&l.R&&g&&!g[_])s(g,_,b)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;t.exports=l},function(t,e,r){var n=r(46);var i=r(91);t.exports=r(47)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){t[e]=r;return t}},function(t,e){t.exports=function(t){return typeof t==="object"?t!==null:typeof t==="function"}},function(t,e,r){var n=r(149)("wks");var i=r(90);var o=r(38).Symbol;var s=typeof o=="function";var a=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Util=undefined;var n=r(69);var i=c(n);var o=r(5);var s=c(o);var a=r(6);var u=c(a);var l=r(7);function c(t){return t&&t.__esModule?t:{default:t}}var h=l.Common.Zondy;var f=function(){function t(){(0,s.default)(this,t);this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};this._ctx=null;this._canvas=null;this._pixelCtx=null;this._width=null;this._height=null;this._offsetX=0;this._offsetY=0;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}(0,u.default)(t,[{key:"clone",value:function t(e){var r=this.BUILTIN_OBJECT;if((typeof e==="undefined"?"undefined":(0,i.default)(e))=="object"&&e!==null){var n=e;if(e instanceof Array){n=[];for(var o=0,s=e.length;o<s;o++){n[o]=this.clone(e[o])}}else if(!r[Object.prototype.toString.call(e)]){n={};for(var a in e){if(e.hasOwnProperty(a)){n[a]=this.clone(e[a])}}}return n}return e}},{key:"mergeItem",value:function t(e,r,n,o){var s=this.BUILTIN_OBJECT;if(r.hasOwnProperty(n)){if((0,i.default)(e[n])=="object"&&!s[Object.prototype.toString.call(e[n])]){this.merge(e[n],r[n],o)}else if(o||!(n in e)){e[n]=r[n]}}}},{key:"merge",value:function t(e,r,n){for(var i in r){this.mergeItem(e,r,i,n)}return e}},{key:"getContext",value:function t(){if(!this._ctx){this._ctx=document.createElement("canvas").getContext("2d")}return this._ctx}},{key:"getPixelContext",value:function t(){if(!this._pixelCtx){this._canvas=document.createElement("canvas");this._width=this._canvas.width;this._height=this._canvas.height;this._pixelCtx=this._canvas.getContext("2d")}return this._pixelCtx}},{key:"adjustCanvasSize",value:function t(e,r){var n=this._canvas;var i=this._pixelCtx;var o=this._width;var s=this._height;var a=this._offsetX;var u=this._offsetY;var l=100;var c;if(e+a>o){o=e+a+l;n.width=o;c=true}if(r+u>s){s=r+u+l;n.height=s;c=true}if(e<-a){a=Math.ceil(-e/l)*l;o+=a;n.width=o;c=true}if(r<-u){u=Math.ceil(-r/l)*l;s+=u;n.height=s;c=true}if(c){i.translate(a,u)}}},{key:"getPixelOffset",value:function t(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function t(e,r){if(e.indexOf){return e.indexOf(r)}for(var n=0,i=e.length;n<i;n++){if(e[n]===r){return n}}return-1}},{key:"inherits",value:function t(e,r){var n=e.prototype;function i(){}i.prototype=r.prototype;e.prototype=new i;for(var o in n){e.prototype[o]=n[o]}e.constructor=e}}]);return t}();e.Util=f;h.LevelRenderer.Tool.Util=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Theme=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.newGuid,c=a.Common.Zondy;var h=function(){function t(e,r){(0,i.default)(this,t);if(!e){return}if(!r||!r.map||!r.renderer){return}this.id=l();this.lonlat=null;this.location=[];this.data=e;this.shapes=[];this.layer=r;this.CLASS_NAME="Zondy.Feature.Theme"}(0,s.default)(t,[{key:"destroy",value:function t(){this.data=null;this.id=null;this.lonlat=null;this.location=null;this.shapes=null;this.layer=null}}]);return t}();e.Theme=h;c.Theme=h},function(t,e,r){var n=r(101);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(171);var i=r(105);t.exports=Object.keys||function t(e){return n(e,i)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=true},function(t,e,r){var n=r(76);t.exports=function(t,e,r){n(t);if(e===undefined)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryServiceBase=undefined;var n=r(15);var i=b(n);var o=r(2);var s=b(o);var a=r(1);var u=b(a);var l=r(9);var c=b(l);var h=r(3);var f=b(h);var p=r(4);var d=b(p);var y=r(0);var v=r(8);var g=r(27);var m=r(194);var _=r(85);var x=r(14);function b(t){return t&&t.__esModule?t:{default:t}}var S=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfs";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.resultCallBack=r.resultCallBack!==undefined?r.resultCallBack:null;n.queryParam=r.queryParam!==undefined?r.queryParam:null;n.requestType=r.requestType!==undefined?r.requestType:"GET";return n}(0,c.default)(e,[{key:"processResult",value:function t(e){var r=new m.FeatureSet;(0,v.copyExcluce)(r,e,"succeed");this.resultCallBack(r)}},{key:"processGeoJsonResult",value:function t(e){var r={};(0,v.copyExcluce)(r,e,"succeed");this.resultCallBack(r)}},{key:"restQuery",value:function t(e,r,n,o,s,a){var u=this;u.resultCallBack=n;var l=new x.IgsServiceBase(e,{eventListeners:{scope:u,processCompleted:a!=="geojson"?u.processResult:u.processGeoJsonResult,processFailed:s}});if(o==="GET"){l.processAsync()}else{l.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"query",value:function t(e,r,n){if(this.queryParam===null){return}var i="";if(this.queryParam instanceof _.QueryParameter){i=this.getFullUrl()}else{return}var o="";var s=null;if(!n){if(!this.requestType){o="GET"}else{o=this.requestType}}else{o=n}if(o.toUpperCase()==="GET"){i+=encodeURI("?"+this.queryParam.getParameterURL())}else{s=this.queryParam.getParameterObject()}this.restQuery(i,s,e,o,r,this.queryParam.resultFormat.toLowerCase())}}]);return e}(g.ServiceBase);e.QueryServiceBase=S;y.Zondy.Service.QueryServiceBase=S},function(t,e,r){var n=r(56);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return true}}},function(t,e,r){"use strict";e.__esModule=true;var n=r(451);var i=u(n);var o=r(466);var s=u(o);var a=typeof s.default==="function"&&typeof i.default==="symbol"?function(t){return typeof t}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default=typeof s.default==="function"&&a(i.default)==="symbol"?function(t){return typeof t==="undefined"?"undefined":a(t)}:function(t){return t&&typeof s.default==="function"&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t==="undefined"?"undefined":a(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Eventful=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this._handlers={};this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}(0,s.default)(t,[{key:"destroy",value:function t(){this._handlers=null}},{key:"one",value:function t(e,r,n){var i=this._handlers;if(!r||!e){return this}if(!i[e]){i[e]=[]}i[e].push({h:r,one:true,ctx:n||this});return this}},{key:"bind",value:function t(e,r,n){var i=this._handlers;if(!r||!e){return this}if(!i[e]){i[e]=[]}i[e].push({h:r,one:false,ctx:n||this});return this}},{key:"unbind",value:function t(e,r){var n=this._handlers;if(!e){this._handlers={};return this}if(r){if(n[e]){var i=[];for(var o=0,s=n[e].length;o<s;o++){if(n[e][o]["h"]!==r){i.push(n[e][o])}}n[e]=i}if(n[e]&&n[e].length===0){delete n[e]}}else{delete n[e]}return this}},{key:"dispatch",value:function t(e){if(this._handlers[e]){var r=arguments;var n=r.length;if(n>3){r=Array.prototype.slice.call(r,1)}var i=this._handlers[e];var o=i.length;for(var s=0;s<o;){switch(n){case 1:i[s]["h"].call(i[s]["ctx"]);break;case 2:i[s]["h"].call(i[s]["ctx"],r[1]);break;case 3:i[s]["h"].call(i[s]["ctx"],r[1],r[2]);break;default:i[s]["h"].apply(i[s]["ctx"],r);break}if(i[s]["one"]){i.splice(s,1);o--}else{s++}}}return this}},{key:"dispatchWithContext",value:function t(e){if(this._handlers[e]){var r=arguments;var n=r.length;if(n>4){r=Array.prototype.slice.call(r,1,r.length-1)}var i=r[r.length-1];var o=this._handlers[e];var s=o.length;for(var a=0;a<s;){switch(n){case 1:o[a]["h"].call(i);break;case 2:o[a]["h"].call(i,r[1]);break;case 3:o[a]["h"].call(i,r[1],r[2]);break;default:o[a]["h"].apply(i,r);break}if(o[a]["one"]){o.splice(a,1);s--}else{a++}}}return this}}]);return t}();e.Eventful=c;l.LevelRenderer.Eventful=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeVector=undefined;var n=r(10);var i=x(n);var o=r(5);var s=x(o);var a=r(6);var u=x(a);var l=r(11);var c=x(l);var h=r(13);var f=x(h);var p=r(12);var d=x(p);var y=r(7);var v=r(59);var g=r(169);var m=r(168);var _=r(98);function x(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy,S=y.Common.copyAttributesWithClip;var C=function(t){(0,d.default)(e,t);function e(t,r,n,o,a){(0,s.default)(this,e);var u=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));if(!t.fGeom){return(0,c.default)(u)}u.dataBounds=t.bound;u.nodesClipPixel=2;u.isHoverAble=true;u.isMultiHover=true;u.isClickAble=true;u.highlightStyle=null;u.shapeOptions={};u.style=n||{};u.CLASS_NAME="Zondy.Theme.ThemeVector";u.style=n?n:{};if(o){S(u,o,["shapeOptions","dataBounds"])}if(a){S(u.shapeOptions,a)}var l=t.fGeom;u.lonlat=[(u.dataBounds.xmin+u.dataBounds.xmax)/2,(u.dataBounds.ymin+u.dataBounds.ymax)/2];u.location=u.getLocalXY(u.lonlat);switch(t.ftype){case 0:break;case 1:u.pointsToTF(t.fGeom.PntGeom);break;case 2:u.linesToTF(t.fGeom.LinGeom);break;case 3:u.regsToTF(t.fGeom.RegGeom);break}return u}(0,u.default)(e,[{key:"destroy",value:function t(){this.style=null;this.dataBounds=null;this.nodesClipPixel=null;this.isHoverAble=null;this.isMultiHover=null;this.isClickAble=null;this.highlightStyle=null;this.shapeOptions=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function t(e){if(e==null||e.length<=0){return}var r=e.components;var n=[];var i=[];var o=this.location;var s=[];var a=this.nodesClipPixel;for(var u=0;u<e.length;u++){var l=e[u];i=[];n=this.getLocalXY([l.Dot.x,l.Dot.y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(s.length>0){var c=s[s.length-1];if(Math.abs(c[0]-i[0])<=a&&Math.abs(c[1]-i[1])<=a){continue}}s.push(i);var h=new Object;h.r=6;h=S(h,this.style);h.x=i[0];h.y=i[1];var f=new m.SmicPoint({style:h,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){f.highlightStyle=this.highlightStyle}f.refOriginalPosition=o;f.refDataID=this.data.FID;f.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){S(f,this.shapeOptions)}this.shapes.push(f)}}},{key:"linesToTF",value:function t(e){if(e==null||e.length<=0){return}for(var r=0;r<e.length;r++){this.lineToTF(e[r])}}},{key:"lineToTF",value:function t(e){var r=[];if(e.Line!=null&&e.Line.Arcs!=null&&e.Line.Arcs.length>0){var n=e.Line.Arcs;for(var i=0;i<n.length;i++){var o=n[i].Dots;for(var s=0;s<o.length;s++){r.push([o[s].x,o[s].y])}}}if(r.length<=0){return}var a=[];var u=[];var l=this.location;var c=[];var h=this.nodesClipPixel;for(var i=0;i<r.length;i++){var f=r[i];u=[];a=this.getLocalXY(f);u[0]=a[0]-l[0];u[1]=a[1]-l[1];if(c.length>0){var p=c[c.length-1];if(Math.abs(p[0]-u[0])<=h&&Math.abs(p[1]-u[1])<=h){continue}}c.push(u)}if(c.length<2){return null}var d=new Object;d=S(d,this.style,["pointList"]);d.pointList=c;var y=new g.SmicBrokenLine({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){y.highlightStyle=this.highlightStyle}y.refOriginalPosition=this.location;y.refDataID=this.data.FID;y.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){S(y,this.shapeOptions)}this.shapes.push(y)}},{key:"regsToTF",value:function t(e){if(e==null||e.length<=0){return}for(var r=0;r<e.length;r++){this.regToTF(e[r])}}},{key:"regToTF",value:function t(e){var r=e.Rings;if(r==null||r.length<=0){return}var n=[];var i=[];var o=this.location;var s=[];var a=[];var u=[];var l=this.nodesClipPixel;for(var c=0;c<r.length;c++){if(c===0){s=[];if(r[c]!=null&&r[c].Arcs!=null&&r[c].Arcs.length>0){var h=r[c].Arcs;for(var f=0;f<h.length;f++){var p=h[f].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(s.length>0){var y=s[s.length-1];if(Math.abs(y[0]-i[0])<=l&&Math.abs(y[1]-i[1])<=l){continue}}s.push(i)}}}}else{a=[];if(r[c]!=null&&r[c].Arcs!=null&&r[c].Arcs.length>0){var h=r[c].Arcs;for(var f=0;f<h.length;f++){var p=h[f].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-i[0])<=l&&Math.abs(v[1]-i[1])<=l){continue}}a.push(i)}}}}if(a.length<2){continue}u.push(a)}if(s.length<2){return}var g={};g=S(g,this.style,["pointList"]);g.pointList=s;var m=new _.SmicPolygon({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){m.highlightStyle=this.highlightStyle}m.refOriginalPosition=this.location;m.refDataID=this.data.FID;m.isHoverByRefDataID=this.isMultiHover;if(u.length>0){m.holePolygonPointLists=u}if(this.shapeOptions){S(m,this.shapeOptions)}this.shapes.push(m)}},{key:"updateAndAddShapes",value:function t(){var e=this.getLocalXY(this.lonlat);this.location=e;var r=this.layer.renderer;for(var n=0,i=this.shapes.length;n<i;n++){var o=this.shapes[n];o.refOriginalPosition=e;r.addShape(o)}}},{key:"getShapesCount",value:function t(){return this.shapes.length}},{key:"getLocalXY",value:function t(e){return this.layer.getLocalXY(e)}}]);return e}(v.Theme);e.ThemeVector=C;b.Theme.ThemeVector=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DataStoreService=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(142);var v=_(y);var g=r(27);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=e.DataStoreService=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));r.fixParams(t);return r}(0,c.default)(e,[{key:"fixParams",value:function t(e){this.params=e;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function t(){var e="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,s=this.networkProtocol;if(r){e=r}else if(o){e=o}else if(s&&n&&i){e=s+"://"+n+":"+i}return e}},{key:"getFullUrl",value:function t(e,r){var n=this.getBaseUrl();var i=n+e+"?"+v.default.stringify(r);return i}},{key:"get",value:function t(e,r,n){var i=this;var o=new m.IgsServiceBase(e,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync()}},{key:"post",value:function t(e,r,n,o){var s=this;var a=new m.IgsServiceBase(e,{eventListeners:{scope:s,processCompleted:n,processFailed:o}});a.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.default=x},function(t,e,r){t.exports={default:r(290),__esModule:true}},function(t,e){var r=0;var n=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(25);var i=r(16);var o=r(49);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t];var s={};s[t]=e(r);n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(t,e){t.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},function(t,e,r){t.exports={default:r(296),__esModule:true}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(35).f;var i=r(40);var o=r(20)("toStringTag");t.exports=function(t,e,r){if(t&&!i(t=r?t:t.prototype,o))n(t,o,{configurable:true,value:e})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAttStruct=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.FldNumber=r.FldNumber!==undefined?r.FldNumber:0;this.FldName=r.FldName!==undefined?r.FldName:null;this.FldType=r.FldType!==undefined?r.FldType:null};e.CAttStruct=o;n.Zondy.Object.CAttStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CLineInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.LinStyleID=r.LinStyleID!==undefined&&r.LinStyleID!==null?r.LinStyleID:1;this.LinStyleID2=r.LinStyleID2!==undefined&&r.LinStyleID2!==null?r.LinStyleID2:0;this.LinWidth=r.LinWidth!==undefined&&r.LinWidth!==null?r.LinWidth:1;this.Xscale=r.Xscale!==undefined&&r.Xscale!==null?r.Xscale:1;this.Yscale=r.Yscale!==undefined&&r.Yscale!==null?r.Yscale:1};e.CLineInfo=o;n.Zondy.Object.CLineInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureGraphicBase=undefined;var n=r(1);var i=l(n);var o=r(9);var s=l(o);var a=r(0);var u=r(8);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t);var r=e!==undefined?e:{};(0,u.extend)(this,r);this.GID=r.GID!==undefined&&r.GID!==null?r.GID:0}(0,s.default)(t,[{key:"setGID",value:function t(e){if(e!==undefined&&e!==null){this.GID=e}}}]);return t}();e.FeatureGraphicBase=c;a.Zondy.Object.FeatureGraphicBase=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryParameter=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(8);var y=r(217);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};return(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}(0,u.default)(e,[{key:"getParameterURL",value:function t(){var e="page="+this.pageIndex.toString();e+="&pageCount="+this.recordNumber.toString();e+="&f="+this.resultFormat;if(this.geometry){e+="&geometry="+this.geometry.toString();e+="&geometryType="+this.geometry.getGeometryType()}if(this.struct){e+="&structs="+(0,d.toJSON)(this.struct)}if(this.where){e+="&where="+this.where}if(this.rule){e+="&rule="+(0,d.toJSON)(this.rule)}if(this.objectIds){e+="&objectIds="+this.objectIds}if(this.orderField){e+="&orderField="+this.orderField}if(this.rtnLabel!==undefined){e+="&rtnLabel="+this.rtnLabel}if(this.fields){e+="&fields="+this.fields}if(this.coordPrecision!==undefined){e+="&coordPrecision="+this.coordPrecision}if(this.isAsc){e+="&isAsc="+this.isAsc}if(this.proj){e+="&srsIds="+this.proj}if(this.guid){e+="&guid="+this.guid}e+="&cursorType="+this.cursorType;return e}},{key:"getParameterObject",value:function t(){var e={};e.f=this.resultFormat;if(this.struct!==null){e.structs=this.struct.toJSON()}if(this.objectIds!==null){e.objectIds=this.objectIds;return e}e.page=this.pageIndex.toString();e.pageCount=this.recordNumber.toString();if(this.geometry!==null){e.geometry=this.geometry.toString();e.geometryType=this.geometry.getGeometryType()}if(this.where!==null){e.where=this.where}if(this.rule!==null){e.rule=this.rule.toJSON()}if(this.orderField!==null){e.orderField=this.orderField}if(this.isAsc!==null){e.isAsc=this.isAsc}e.cursorType=this.cursorType;return e}}]);return e}(y.QueryParameterBase);e.QueryParameter=g;p.Zondy.Service.QueryParameter=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.tolerance=r.tolerance!==undefined?r.tolerance:1e-4;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;return n}return e}(f.AnalysisBase);e.ClipBase=d;h.Zondy.Service.ClipBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CPntInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.FillFlg=r.FillFlg!==undefined?r.FillFlg:0;this.Height=r.Height!==undefined?r.Height:0;this.Width=r.Width!==undefined?r.Width:0;this.OutClr=r.OutClr!==undefined?r.OutClr:[0,0,0];this.SymID=r.SymID!==undefined?r.SymID:0;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};e.CPntInfo=o;n.Zondy.Object.Theme.CPntInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoFeatureThemeLayer=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(12);var f=_(h);var p=r(17);var d=_(p);var y=r(7);var v=r(162);var g=r(19);var m=r(71);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.extend,b=y.Common.copyAttributesWithClip,S=y.Common.FeatureSet,C=y.Common.Zondy;var w=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.name=null;n.style=null;n.highlightStyle=null;n.nodesClipPixel=2;n.isHoverAble=false;n.isMultiHover=false;n.isClickAble=true;n.isAllowFeatureStyle=false;x(n,r);n.cache=r.cache||{};n.cacheFields=r.cacheFields||[];n.maxCacheCount=r.maxCacheCount||0;n.isCustomSetMaxCacheCount=r.isCustomSetMaxCacheCount===undefined?false:r.isCustomSetMaxCacheCount;return n}(0,u.default)(e,[{key:"addFeatures",value:function t(e){var r=this;d.default.Evented.prototype.fire("beforefeaturesadded",{features:e});if(e&&(true||e instanceof S)){var n=null;var i=e.LabelDots;var o=e.AttStruct;var s=e.SFEleArray;if(s!=null&&s.length>0){for(var a=0;a<s.length;a++){var u=s[a];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[a]&&(u.LabelDot=i[a]);r.features.push(u)}}}if(!this.isCustomSetMaxCacheCount){this.maxCacheCount=this.features.length*5}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"removeFeatures",value:function t(e){this.clearCache();v.ThemeLayer.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function t(){this.clearCache();v.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function t(e){this.clearCache();var r=this.renderer.getHoverOne();var n=null;if(r&&r.refDataID){n=r.refDataID}this.renderer.clearAll();var i=this.features;var o=this.cache;var s=this.cacheFields;var a=this.map.getZoom();var u=this.maxCacheCount;for(var l=0,c=i.length;l<c;l++){var h=i[l];var f=h.FID+"_zoom_"+a.toString();var p;if(o[f]){o[f].updateAndAddShapes()}else{p=this.createThematicFeature(i[l]);if(p.getShapesCount()<1){continue}o[f]=p;s.push(f);if(s.length>u){var d=s[0];s.splice(0,1);delete o[d]}}}this.renderer.render();if(n&&this.isHoverAble&&this.isMultiHover){var y=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(y)}}},{key:"createThematicFeature",value:function t(e){var r=b(this.style);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=g.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(e,this,g.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"clearCache",value:function t(){this.cache={};this.cacheFields=[]}},{key:"clear",value:function t(){this.renderer.clearAll();this.renderer.refresh();this.removeAllFeatures();this.clearCache()}},{key:"getCacheCount",value:function t(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function t(e){if(!isNaN(e)){this.maxCacheCount=e;this.isCustomSetMaxCacheCount=true}}},{key:"getShapesByFeatureID",value:function t(e){var r=[];var n=this.renderer.getAllShapes();if(!e){return n}for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.refDataID&&e===s.refDataID){r.push(s)}}return r}}]);return e}(v.ThemeLayer);e.GeoFeatureThemeLayer=w;C.Map.GeoFeatureThemeLayer=w},function(t,e){t.exports=true},function(t,e){var r=0;var n=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Transformable=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(24);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.position=[0,0];this.rotation=[0,0,0];this.scale=[1,1,0,0];this.needLocalTransform=false;this.needTransform=false;this.CLASS_NAME="Zondy.LevelRenderer.Transformable";this.lookAt=function(){var t=u.SUtil.Util_vector.create();return function(e){if(!this.transform){this.transform=u.SUtil.Util_matrix.create()}var r=this.transform;u.SUtil.Util_vector.sub(t,e,this.position);if(n(t[0])&&n(t[1])){return}u.SUtil.Util_vector.normalize(t,t);r[2]=t[0]*this.scale[1];r[3]=t[1]*this.scale[1];r[0]=t[1]*this.scale[0];r[1]=-t[0]*this.scale[0];r[4]=this.position[0];r[5]=this.position[1];this.decomposeTransform();function n(t){var e=5e-5;return t>-e&&t<e}}}()}(0,s.default)(t,[{key:"destroy",value:function t(){this.position=null;this.rotation=null;this.scale=null;this.needLocalTransform=null;this.needTransform=null}},{key:"updateNeedTransform",value:function t(){this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1);function e(t){var e=5e-5;return t>e||t<-e}}},{key:"updateTransform",value:function t(){this.updateNeedTransform();if(this.parent){this.needTransform=this.needLocalTransform||this.parent.needTransform}else{this.needTransform=this.needLocalTransform}if(!this.needTransform){return}var e=[0,0];var r=this.transform||u.SUtil.Util_matrix.create();u.SUtil.Util_matrix.identity(r);if(this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0;e[1]=-this.scale[3]||0;var n=o(e[0])||o(e[1]);if(n){u.SUtil.Util_matrix.translate(r,r,e)}u.SUtil.Util_matrix.scale(r,r,this.scale);if(n){e[0]=-e[0];e[1]=-e[1];u.SUtil.Util_matrix.translate(r,r,e)}}if(this.rotation instanceof Array){if(this.rotation[0]!==0){e[0]=-this.rotation[1]||0;e[1]=-this.rotation[2]||0;var i=o(e[0])||o(e[1]);if(i){u.SUtil.Util_matrix.translate(r,r,e)}u.SUtil.Util_matrix.rotate(r,r,this.rotation[0]);if(i){e[0]=-e[0];e[1]=-e[1];u.SUtil.Util_matrix.translate(r,r,e)}}}else{if(this.rotation!==0){u.SUtil.Util_matrix.rotate(r,r,this.rotation)}}if(o(this.position[0])||o(this.position[1])){u.SUtil.Util_matrix.translate(r,r,this.position)}}this.transform=r;if(this.parent&&this.parent.needTransform){if(this.needLocalTransform){u.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform)}else{u.SUtil.Util_matrix.copy(this.transform,this.parent.transform)}}function o(t){var e=5e-5;return t>e||t<-e}}},{key:"setTransform",value:function t(e){if(this.needTransform){var r=this.transform;e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}}},{key:"decomposeTransform",value:function t(){if(!this.transform){return}var e=this.transform;var r=e[0]*e[0]+e[1]*e[1];var n=this.position;var i=this.scale;var o=this.rotation;if(a(r-1)){r=Math.sqrt(r)}var s=e[2]*e[2]+e[3]*e[3];if(a(s-1)){s=Math.sqrt(s)}n[0]=e[4];n[1]=e[5];i[0]=r;i[1]=s;i[2]=i[3]=0;o[0]=Math.atan2(-e[1]/s,e[0]/r);o[1]=o[2]=0;function a(t){var e=5e-5;return t>e||t<-e}}}]);return t}();e.Transformable=h;c.LevelRenderer.Transformable=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Curve=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(94);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.vector=new u.Vector;this.EPSILON=1e-4;this.THREE_SQRT=Math.sqrt(3);this.ONE_THIRD=1/3;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}(0,s.default)(t,[{key:"isAroundZero",value:function t(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function t(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function t(e,r,n,i,o){var s=1-o;return s*s*(s*e+3*o*r)+o*o*(o*i+3*s*n)}},{key:"cubicDerivativeAt",value:function t(e,r,n,i,o){var s=1-o;return 3*(((r-e)*s+2*(n-r)*o)*s+(i-n)*o*o)}},{key:"cubicRootAt",value:function t(e,r,n,i,o,s){var a=i+3*(r-n)-e;var u=3*(n-r*2+e);var l=3*(r-e);var c=e-o;var h=u*u-3*a*l;var f=u*l-9*a*c;var p=l*l-3*u*c;var d=0;if(this.isAroundZero(h)&&this.isAroundZero(f)){if(this.isAroundZero(u)){s[0]=0}else{var y=-l/u;if(y>=0&&y<=1){s[d++]=y}}}else{var v=f*f-4*h*p;if(this.isAroundZero(v)){var g=f/h;var m=-u/a+g;var _=-g/2;if(m>=0&&m<=1){s[d++]=m}if(_>=0&&_<=1){s[d++]=_}}else if(v>0){var x=Math.sqrt(v);var b=h*u+1.5*a*(-f+x);var S=h*u+1.5*a*(-f-x);if(b<0){b=-Math.pow(-b,this.ONE_THIRD)}else{b=Math.pow(b,this.ONE_THIRD)}if(S<0){S=-Math.pow(-S,this.ONE_THIRD)}else{S=Math.pow(S,this.ONE_THIRD)}var C=(-u-(b+S))/(3*a);if(C>=0&&C<=1){s[d++]=C}}else{var w=(2*h*u-3*a*f)/(2*Math.sqrt(h*h*h));var I=Math.acos(w)/3;var P=Math.sqrt(h);var E=Math.cos(I);var M=(-u-2*P*E)/(3*a);var L=(-u+P*(E+this.THREE_SQRT*Math.sin(I)))/(3*a);var N=(-u+P*(E-this.THREE_SQRT*Math.sin(I)))/(3*a);if(M>=0&&M<=1){s[d++]=M}if(L>=0&&L<=1){s[d++]=L}if(N>=0&&N<=1){s[d++]=N}}}return d}},{key:"cubicExtrema",value:function t(e,r,n,i,o){var s=6*n-12*r+6*e;var a=9*r+3*i-3*e-9*n;var u=3*r-3*e;var l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(s)){var c=-u/s;if(c>=0&&c<=1){o[l++]=c}}}else{var h=s*s-4*a*u;if(this.isAroundZero(h)){o[0]=-s/(2*a)}else if(h>0){var f=Math.sqrt(h);var p=(-s+f)/(2*a);var d=(-s-f)/(2*a);if(p>=0&&p<=1){o[l++]=p}if(d>=0&&d<=1){o[l++]=d}}}return l}},{key:"cubicSubdivide",value:function t(e,r,n,i,o,s){var a=(r-e)*o+e;var u=(n-r)*o+r;var l=(i-n)*o+n;var c=(u-a)*o+a;var h=(l-u)*o+u;var f=(h-c)*o+c;s[0]=e;s[1]=a;s[2]=c;s[3]=f;s[4]=f;s[5]=h;s[6]=l;s[7]=i}},{key:"cubicProjectPoint",value:function t(e,r,n,i,o,s,a,u,l,c,h){var f=this.vector.create();var p=this.vector.create();var d=this.vector.create();var y;var v=.005;var g=Infinity;f[0]=l;f[1]=c;for(var m=0;m<1;m+=.05){p[0]=this.cubicAt(e,n,o,a,m);p[1]=this.cubicAt(r,i,s,u,m);var _=this.vector.distSquare(f,p);if(_<g){y=m;g=_}}g=Infinity;for(var x=0;x<32;x++){if(v<this.EPSILON){break}var b=y-v;var S=y+v;p[0]=this.cubicAt(e,n,o,a,b);p[1]=this.cubicAt(r,i,s,u,b);var C=this.vector.distSquare(p,f);if(b>=0&&C<g){y=b;g=C}else{d[0]=this.cubicAt(e,n,o,a,S);d[1]=this.cubicAt(r,i,s,u,S);var w=this.vector.distSquare(d,f);if(S<=1&&w<g){y=S;g=w}else{v*=.5}}}if(h){h[0]=this.cubicAt(e,n,o,a,y);h[1]=this.cubicAt(r,i,s,u,y)}return Math.sqrt(g)}},{key:"quadraticAt",value:function t(e,r,n,i){var o=1-i;return o*(o*e+2*i*r)+i*i*n}},{key:"quadraticDerivativeAt",value:function t(e,r,n,i){return 2*((1-i)*(r-e)+i*(n-r))}},{key:"quadraticRootAt",value:function t(e,r,n,i,o){var s=e-2*r+n;var a=2*(r-e);var u=e-i;var l=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(a)){var c=-u/a;if(c>=0&&c<=1){o[l++]=c}}}else{var h=a*a-4*s*u;if(this.isAroundZero(h)){var f=-a/(2*s);if(f>=0&&f<=1){o[l++]=f}}else if(h>0){var p=Math.sqrt(h);var d=(-a+p)/(2*s);var y=(-a-p)/(2*s);if(d>=0&&d<=1){o[l++]=d}if(y>=0&&y<=1){o[l++]=y}}}return l}},{key:"quadraticExtremum",value:function t(e,r,n){var i=e+n-2*r;if(i===0){return.5}else{return(e-r)/i}}},{key:"quadraticProjectPoint",value:function t(e,r,n,i,o,s,a,u,l){var c=this.vector.create();var h=this.vector.create();var f=this.vector.create();var p;var d=.005;var y=Infinity;c[0]=a;c[1]=u;for(var v=0;v<1;v+=.05){h[0]=this.quadraticAt(e,n,o,v);h[1]=this.quadraticAt(r,i,s,v);var g=this.vector.distSquare(c,h);if(g<y){p=v;y=g}}y=Infinity;for(var m=0;m<32;m++){if(d<this.EPSILON){break}var _=p-d;var x=p+d;h[0]=this.quadraticAt(e,n,o,_);h[1]=this.quadraticAt(r,i,s,_);var b=this.vector.distSquare(h,c);if(_>=0&&b<y){p=_;y=b}else{f[0]=this.quadraticAt(e,n,o,x);f[1]=this.quadraticAt(r,i,s,x);var S=this.vector.distSquare(f,c);if(x<=1&&S<y){p=x;y=S}else{d*=.5}}}if(l){l[0]=this.quadraticAt(e,n,o,p);l[1]=this.quadraticAt(r,i,s,p)}return Math.sqrt(y)}}]);return t}();e.Curve=h;c.LevelRenderer.Tool.Curve=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Vector=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}(0,s.default)(t,[{key:"create",value:function t(e,r){var n=this.ArrayCtor;var i=new n(2);i[0]=e||0;i[1]=r||0;return i}},{key:"copy",value:function t(e,r){e[0]=r[0];e[1]=r[1];return e}},{key:"set",value:function t(e,r,n){e[0]=r;e[1]=n;return e}},{key:"add",value:function t(e,r,n){e[0]=r[0]+n[0];e[1]=r[1]+n[1];return e}},{key:"scaleAndAdd",value:function t(e,r,n,i){e[0]=r[0]+n[0]*i;e[1]=r[1]+n[1]*i;return e}},{key:"sub",value:function t(e,r,n){e[0]=r[0]-n[0];e[1]=r[1]-n[1];return e}},{key:"len",value:function t(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function t(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function t(e,r,n){e[0]=r[0]*n[0];e[1]=r[1]*n[1];return e}},{key:"div",value:function t(e,r,n){e[0]=r[0]/n[0];e[1]=r[1]/n[1];return e}},{key:"dot",value:function t(e,r){return e[0]*r[0]+e[1]*r[1]}},{key:"scale",value:function t(e,r,n){e[0]=r[0]*n;e[1]=r[1]*n;return e}},{key:"normalize",value:function t(e,r){var n=this.len(r);if(n===0){e[0]=0;e[1]=0}else{e[0]=r[0]/n;e[1]=r[1]/n}return e}},{key:"distance",value:function t(e,r){return Math.sqrt((e[0]-r[0])*(e[0]-r[0])+(e[1]-r[1])*(e[1]-r[1]))}},{key:"distanceSquare",value:function t(e,r){return(e[0]-r[0])*(e[0]-r[0])+(e[1]-r[1])*(e[1]-r[1])}},{key:"negate",value:function t(e,r){e[0]=-r[0];e[1]=-r[1];return e}},{key:"lerp",value:function t(e,r,n,i){e[0]=r[0]+i*(n[0]-r[0]);e[1]=r[1]+i*(n[1]-r[1]);return e}},{key:"applyTransform",value:function t(e,r,n){var i=r[0];var o=r[1];e[0]=n[0]*i+n[2]*o+n[4];e[1]=n[1]*i+n[3]*o+n[5];return e}},{key:"min",value:function t(e,r,n){e[0]=Math.min(r[0],n[0]);e[1]=Math.min(r[1],n[1]);return e}},{key:"max",value:function t(e,r,n){e[0]=Math.max(r[0],n[0]);e[1]=Math.max(r[1],n[1]);return e}},{key:"length",value:function t(e){return this.len(e)}},{key:"lengthSquare",value:function t(e){return this.lenSquare(e)}},{key:"dist",value:function t(e,r){return this.distance(e,r)}},{key:"distSquare",value:function t(e,r){return this.distanceSquare(e,r)}}]);return t}();e.Vector=c;l.LevelRenderer.Tool.Vector=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.x=!isNaN(t)?t:0;n.y=!isNaN(r)?r:0;n.r=6;n.CLASS_NAME="Zondy.Feature.ShapeParameters.Point";return n}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Point=_;m.Feature.ShapeParameters.Point=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Polygon=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.pointList=t;r.holePolygonPointLists=null;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.pointList=null;this.holePolygonPointLists=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Polygon=_;m.Feature.ShapeParameters.Polygon=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Sector=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u,l){(0,s.default)(this,e);var h=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u,l));h.x=!isNaN(t)?t:0;h.y=!isNaN(r)?r:0;h.r=!isNaN(n)?n:0;h.startAngle=!isNaN(o)?o:0;h.endAngle=!isNaN(a)?a:0;h.r0=!isNaN(u)?u:0;h.clockWise=l;h.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector";return h}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;this.startAngle=null;this.endAngle=null;this.r0=null;this.clockWise=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Sector=_;m.Feature.ShapeParameters.Sector=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicPolygon=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(22);var g=r(24);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,x=y.Common.cloneObject;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicpolygon";r.holePolygonPointLists=null;if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;this.holePolygonPointLists=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.style;if(r){n=this.getHighlightStyle(n,this.highlightStyle||{})}e.save();this.setContext(e,n);this.setTransform(e);var i=false;if(n.brushType==="fill"||n.brushType==="both"||typeof n.brushType==="undefined"){e.beginPath();if(n.lineType==="dashed"||n.lineType==="dotted"||n.lineType==="dot"||n.lineType==="dash"||n.lineType==="dashot"||n.lineType==="longdash"||n.lineType==="longdashdot"){this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList})}else{this.buildPath(e,n);i=true}e.closePath();this.setCtxGlobalAlpha(e,"fill",n);e.fill();this.setCtxGlobalAlpha(e,"reset",n)}if(n.lineWidth>0&&(n.brushType==="stroke"||n.brushType==="both")){if(!i){e.beginPath();this.buildPath(e,n)}this.setCtxGlobalAlpha(e,"stroke",n);e.stroke();this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style);var o=x(n);if(o.pointList){if(this.holePolygonPointLists&&this.holePolygonPointLists.length>0){var s=this.holePolygonPointLists;var a=s.length;for(var u=0;u<a;u++){var l=s[u];o.pointList=l;e.globalCompositeOperation="destination-out";i=false;if(o.brushType==="fill"||o.brushType==="both"||typeof o.brushType=="undefined"){e.beginPath();if(o.lineType==="dashed"||o.lineType==="dotted"||o.lineType==="dot"||o.lineType==="dash"||o.lineType==="dashot"||o.lineType==="longdash"||o.lineType==="longdashdot"){this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList})}else{this.buildPath(e,o);i=true}e.closePath();this.setCtxGlobalAlpha(e,"fill",o);e.fill();this.setCtxGlobalAlpha(e,"reset",o)}if(o.lineWidth>0&&(o.brushType==="stroke"||o.brushType==="both")){if(!i){e.beginPath();this.buildPath(e,o)}e.globalCompositeOperation="source-over";this.setCtxGlobalAlpha(e,"stroke",o);e.stroke();this.setCtxGlobalAlpha(e,"reset",o)}else{e.globalCompositeOperation="source-over"}}}}e.restore();return}},{key:"buildPath",value:function t(e,r){if(r.showShadow){e.shadowBlur=r.shadowBlur;e.shadowColor=r.shadowColor;e.shadowOffsetX=r.shadowOffsetX;e.shadowOffsetY=r.shadowOffsetY}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}if(r.smooth&&r.smooth!=="spline"){var o=g.SUtil.SUtil_smoothBezier(i,r.smooth,true,r.smoothConstraint,n);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var s;var a;var u;var l=i.length;for(var c=0;c<l;c++){s=o[c*2];a=o[c*2+1];u=[i[(c+1)%l][0]+n[0],i[(c+1)%l][1]+n[1]];e.bezierCurveTo(s[0],s[1],a[0],a[1],u[0],u[1])}}else{if(r.smooth==="spline"){i=g.SUtil.SUtil_smoothSpline(i,true,null,n)}if(!r.lineType||r.lineType==="solid"){e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var h=1;h<i.length;h++){e.lineTo(i[h][0]+n[0],i[h][1]+n[1])}e.lineTo(i[0][0]+n[0],i[0][1]+n[1])}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var f=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=f;var p=r.lineWidth||1;var d=p;var y=p;if(r.lineType==="dashed"){d*=5;y*=5;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){d=1;y+=p}}if(r.lineType==="dot"){y*=4;if(r.lineCap&&r.lineCap!=="butt"){d=1;y+=p}}if(r.lineType==="dash"){d*=4;y*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}if(r.lineType==="longdash"){d*=8;y*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;y+=p}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var v=1;v<i.length;v++){g.SUtil.SUtil_dashedLineTo(e,i[v-1][0]+n[0],i[v-1][1]+n[1],i[v][0]+n[0],i[v][1]+n[1],p,[d,y])}g.SUtil.SUtil_dashedLineTo(e,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],p,[d,y])}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var m=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=m;var _=r.lineWidth||1;var x=_;var b=_;var S=_;var C=_;if(r.lineType==="dashot"){x*=4;b*=4;C*=4;if(r.lineCap&&r.lineCap!=="butt"){x-=_;b+=_;S=1;C+=_}}if(r.lineType==="longdashdot"){x*=8;b*=4;C*=4;if(r.lineCap&&r.lineCap!=="butt"){x-=_;b+=_;S=1;C+=_}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var w=1;w<i.length;w++){g.SUtil.SUtil_dashedLineTo(e,i[w-1][0]+n[0],i[w-1][1]+n[1],i[w][0]+n[0],i[w][1]+n[1],_,[x,b,S,C])}g.SUtil.SUtil_dashedLineTo(e,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],_,[x,b,S,C])}}return}},{key:"getRect",value:function t(e,r){var n;if(!r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}n=this.refOriginalPosition}else{n=r}if(e.__rect){return e.__rect}var i=Number.MAX_VALUE;var o=Number.MIN_VALUE;var s=Number.MAX_VALUE;var a=Number.MIN_VALUE;var u=e.pointList;for(var l=0,c=u.length;l<c;l++){if(u[l][0]+n[0]<i){i=u[l][0]+n[0]}if(u[l][0]+n[0]>o){o=u[l][0]+n[0]}if(u[l][1]+n[1]<s){s=u[l][1]+n[1]}if(u[l][1]+n[1]>a){a=u[l][1]+n[1]}}var h;if(e.brushType==="stroke"||e.brushType==="fill"){h=e.lineWidth||1}else{h=0}e.__rect={x:Math.round(i-h/2),y:Math.round(s-h/2),width:o-i+h,height:a-s+h};return e.__rect}}]);return e}(v.Shape);e.SmicPolygon=b;_.LevelRenderer.SmicPolygon=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.mapboxgl=e.Zondy=undefined;var n=r(17);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}window.mapboxgl=i.default;i.default.zondy=window.mapboxgl.zondy||{};var s=window.mapboxgl.zondy||{};s.Map=s.Map||{};s.Util=s.Util||{};s.Network=s.Network||{};s.Event=s.Event||{};s.Socket=s.Socket||{};e.Zondy=s;e.mapboxgl=i.default},function(t,e,r){t.exports={default:r(292),__esModule:true}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var r=Math.ceil;var n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(104)("keys");var i=r(74);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(16);var i=r(18);var o="__core-js_shared__";var s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=e!==undefined?e:{})})("versions",[]).push({version:n.version,mode:r(63)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(36);var i=r(18).document;var o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(36);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;if(typeof(r=t.valueOf)=="function"&&!n(i=r.call(t)))return i;if(!e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports={default:r(298),__esModule:true}},function(t,e,r){var n=r(79);var i=r(77);var o=r(41);var s=r(107);var a=r(40);var u=r(174);var l=Object.getOwnPropertyDescriptor;e.f=r(31)?l:function t(e,r){e=o(e);r=s(r,true);if(u)try{return l(e,r)}catch(t){}if(a(e,r))return i(!n.f.call(e,r),e[r])}},function(t,e,r){e.f=r(20)},function(t,e,r){var n=r(18);var i=r(16);var o=r(63);var s=r(110);var a=r(35).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});if(t.charAt(0)!="_"&&!(t in e))a(e,t,{value:s.f(t)})}},function(t,e,r){var n=r(26);var i=r(305);var o=r(105);var s=r(103)("IE_PROTO");var a=function(){};var u="prototype";var l=function(){var t=r(106)("iframe");var e=o.length;var n="<";var i=">";var s;t.style.display="none";r(177).appendChild(t);t.src="javascript:";s=t.contentWindow.document;s.open();s.write(n+"script"+i+"document.F=Object"+n+"/script"+i);s.close();l=s.F;while(e--)delete l[u][o[e]];return l()};t.exports=Object.create||function t(e,r){var o;if(e!==null){a[u]=n(e);o=new a;a[u]=null;o[s]=e}else o=l();return r===undefined?o:i(o,r)}},function(t,e,r){var n=r(171);var i=r(105).concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return n(e,i)}},function(t,e,r){"use strict";var n=r(311)(true);r(179)(String,"String",function(t){this._t=String(t);this._i=0},function(){var t=this._t;var e=this._i;var r;if(e>=t.length)return{value:undefined,done:true};r=n(t,e);this._i+=r.length;return{value:r,done:false}})},function(t,e,r){r(313);var n=r(18);var i=r(42);var o=r(65);var s=r(20)("toStringTag");var a=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var u=0;u<a.length;u++){var l=a[u];var c=n[l];var h=c&&c.prototype;if(h&&!h[s])i(h,s,l);o[l]=o.Array}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnyLine=undefined;var n=r(0);var i=r(8);var o=function t(e,r){var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Arcs=e!==undefined&&e!==null?e:null};e.AnyLine=o;n.Zondy.Object.AnyLine=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CPointInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined&&r.Angle!==null?r.Angle:1;this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.SymHeight=r.SymHeight!==undefined&&r.SymHeight!==null?r.SymHeight:1;this.SymID=r.SymID!==undefined&&r.SymID!==null?r.SymID:1;this.SymWidth=r.SymWidth!==undefined&&r.SymWidth!==null?r.SymWidth:1};e.CPointInfo=o;n.Zondy.Object.CPointInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRegionInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.EndColor=r.EndColor!==undefined&&r.EndColor!==null?r.EndColor:1;this.FillColor=r.FillColor!==undefined&&r.FillColor!==null?r.FillColor:1;this.FillMode=r.FillMode!==undefined&&r.FillMode!==null?r.FillMode:0;this.OutPenWidth=r.OutPenWidth!==undefined&&r.OutPenWidth!==null?r.OutPenWidth:1;this.PatAngle=r.PatAngle!==undefined&&r.PatAngle!==null?r.PatAngle:1;this.PatColor=r.PatColor!==undefined&&r.PatColor!==null?r.PatColor:1;this.PatHeight=r.PatHeight!==undefined&&r.PatHeight!==null?r.PatHeight:1;this.PatID=r.PatID!==undefined&&r.PatID!==null?r.PatID:1;this.PatWidth=r.PatWidth!==undefined&&r.PatWidth!==null?r.PatWidth:1};e.CRegionInfo=o;n.Zondy.Object.CRegionInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GPoint=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(84);var y=r(29);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));if(t!==undefined&&t!==null&&r!==undefined&&r!==null){a.Dot=new y.Point2D(t,r)}return a}(0,u.default)(e,[{key:"setDot",value:function t(e){this.Dot=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GPoint=g;p.Zondy.Object.GPoint=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GLine=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(84);var y=r(116);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Line=t!==undefined&&t!==null?t:null;return o}(0,u.default)(e,[{key:"setLine",value:function t(e){this.Line=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GLine=g;p.Zondy.Object.GLine=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GRegion=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(84);var y=r(116);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Rings=t!==undefined&&t!==null&&Array.isArray(t)?t:null;return o}(0,u.default)(e,[{key:"setRings",value:function t(e){this.Rings=e!==undefined&&e!==null?e:null}}]);return e}(d.FeatureGraphicBase);e.GRegion=g;p.Zondy.Object.GRegion=g},function(t,e,r){"use strict";var n=r(76);function i(t){var e,r;this.promise=new t(function(t,n){if(e!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");e=t;r=n});this.resolve=n(e);this.reject=n(r)}t.exports.f=function(t){return new i(t)}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(t){if(typeof window==="object")r=window}t.exports=r},function(t,e){var r=t.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(t){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(t){i=s}})();function a(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var l=[];var c=false;var h;var f=-1;function p(){if(!c||!h){return}c=false;if(h.length){l=h.concat(l)}else{f=-1}if(l.length){d()}}function d(){if(c){return}var t=a(p);c=true;var e=l.length;while(e){h=l;l=[];while(++f<e){if(h){h[f].run()}}f=-1;e=l.length}h=null;c=false;u(t)}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){e[r-1]=arguments[r]}}l.push(new y(t,e));if(l.length===1&&!c){a(d)}};function y(t,e){this.fun=t;this.array=e}y.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function v(){}r.on=v;r.addListener=v;r.once=v;r.off=v;r.removeListener=v;r.removeAllListeners=v;r.emit=v;r.prependListener=v;r.prependOnceListener=v;r.listeners=function(t){return[]};r.binding=function(t){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(t){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditServiceBase=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(27);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.guid=r.guid!==undefined?r.guid:(0,p.newGuid)();n.baseUrl="igs/rest/mrfs";n.f=r.f!==undefined?r.f:"json";return n}return e}(f.ServiceBase);e.EditServiceBase=y;h.Zondy.Service.EditServiceBase=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryFeatureStruct=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.IncludeAttribute=r.IncludeAttribute!==undefined&&typeof r.IncludeAttribute==="boolean"?r.IncludeAttribute:true;this.IncludeGeometry=r.IncludeGeometry!==undefined&&typeof r.IncludeGeometry==="boolean"?r.IncludeGeometry:false;this.IncludeWebGraphic=r.IncludeWebGraphic!==undefined&&typeof r.IncludeWebGraphic==="boolean"?r.IncludeWebGraphic:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};e.QueryFeatureStruct=o;n.Zondy.Service.QueryFeatureStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPoint=undefined;var n=r(2);var i=x(n);var o=r(1);var s=x(o);var a=r(3);var u=x(a);var l=r(9);var c=x(l);var h=r(4);var f=x(h);var p=r(128);var d=r(28);var y=r(129);var v=_(y);var g=r(130);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function x(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPointsCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){r.push(e[n].geometry[i].coordinates)}}return r}},{key:"getPointsCenter",value:function t(e){var r=[],n=void 0;for(var i=0;i<e.length;i++){r.push(v.point(e[i]))}n=m.center(m.featureCollection(r));return n}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="Point";(0,d.extend)(r,t);return r}return e}(p.Geometry);e.VPoint=b;Zondy.Service.VPoint=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Geometry=undefined;var n=r(1);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var s=function t(){(0,i.default)(this,t);this.coordinates=[]};e.Geometry=s},function(t,e,r){"use strict";r.r(e);r.d(e,"earthRadius",function(){return n});r.d(e,"factors",function(){return i});r.d(e,"unitsFactors",function(){return o});r.d(e,"areaFactors",function(){return s});r.d(e,"feature",function(){return a});r.d(e,"geometry",function(){return u});r.d(e,"point",function(){return l});r.d(e,"points",function(){return c});r.d(e,"polygon",function(){return h});r.d(e,"polygons",function(){return f});r.d(e,"lineString",function(){return p});r.d(e,"lineStrings",function(){return d});r.d(e,"featureCollection",function(){return y});r.d(e,"multiLineString",function(){return v});r.d(e,"multiPoint",function(){return g});r.d(e,"multiPolygon",function(){return m});r.d(e,"geometryCollection",function(){return _});r.d(e,"round",function(){return x});r.d(e,"radiansToLength",function(){return b});r.d(e,"lengthToRadians",function(){return S});r.d(e,"lengthToDegrees",function(){return C});r.d(e,"bearingToAzimuth",function(){return w});r.d(e,"radiansToDegrees",function(){return I});r.d(e,"degreesToRadians",function(){return P});r.d(e,"convertLength",function(){return E});r.d(e,"convertArea",function(){return M});r.d(e,"isNumber",function(){return L});r.d(e,"isObject",function(){return N});r.d(e,"validateBBox",function(){return T});r.d(e,"validateId",function(){return O});var n=6371008.8;var i={centimeters:n*100,centimetres:n*100,degrees:n/111325,feet:n*3.28084,inches:n*39.37,kilometers:n/1e3,kilometres:n/1e3,meters:n,metres:n,miles:n/1609.344,millimeters:n*1e3,millimetres:n*1e3,nauticalmiles:n/1852,radians:1,yards:n*1.0936};var o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133};var s={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=e||{};n.geometry=t;return n}function u(t,e,r){if(r===void 0){r={}}switch(t){case"Point":return l(e).geometry;case"LineString":return p(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return v(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,r){if(r===void 0){r={}}if(!t){throw new Error("coordinates is required")}if(!Array.isArray(t)){throw new Error("coordinates must be an Array")}if(t.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!L(t[0])||!L(t[1])){throw new Error("coordinates must contain numbers")}var n={type:"Point",coordinates:t};return a(n,e,r)}function c(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return l(t,e)}),r)}function h(t,e,r){if(r===void 0){r={}}for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var s=0;s<o[o.length-1].length;s++){if(o[o.length-1][s]!==o[0][s]){throw new Error("First and last Position are not equivalent.")}}}var u={type:"Polygon",coordinates:t};return a(u,e,r)}function f(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return h(t,e)}),r)}function p(t,e,r){if(r===void 0){r={}}if(t.length<2){throw new Error("coordinates must be an array of two or more positions")}var n={type:"LineString",coordinates:t};return a(n,e,r)}function d(t,e,r){if(r===void 0){r={}}return y(t.map(function(t){return p(t,e)}),r)}function y(t,e){if(e===void 0){e={}}var r={type:"FeatureCollection"};if(e.id){r.id=e.id}if(e.bbox){r.bbox=e.bbox}r.features=t;return r}function v(t,e,r){if(r===void 0){r={}}var n={type:"MultiLineString",coordinates:t};return a(n,e,r)}function g(t,e,r){if(r===void 0){r={}}var n={type:"MultiPoint",coordinates:t};return a(n,e,r)}function m(t,e,r){if(r===void 0){r={}}var n={type:"MultiPolygon",coordinates:t};return a(n,e,r)}function _(t,e,r){if(r===void 0){r={}}var n={type:"GeometryCollection",geometries:t};return a(n,e,r)}function x(t,e){if(e===void 0){e=0}if(e&&!(e>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,e||0);return Math.round(t*r)/r}function b(t,e){if(e===void 0){e="kilometers"}var r=i[e];if(!r){throw new Error(e+" units is invalid")}return t*r}function S(t,e){if(e===void 0){e="kilometers"}var r=i[e];if(!r){throw new Error(e+" units is invalid")}return t/r}function C(t,e){return I(S(t,e))}function w(t){var e=t%360;if(e<0){e+=360}return e}function I(t){var e=t%(2*Math.PI);return e*180/Math.PI}function P(t){var e=t%360;return e*Math.PI/180}function E(t,e,r){if(e===void 0){e="kilometers"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("length must be a positive number")}return b(S(t,e),r)}function M(t,e,r){if(e===void 0){e="meters"}if(r===void 0){r="kilometers"}if(!(t>=0)){throw new Error("area must be a positive number")}var n=s[e];if(!n){throw new Error("invalid original units")}var i=s[r];if(!i){throw new Error("invalid final units")}return t/n*i}function L(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function N(t){return!!t&&t.constructor===Object}function T(t){if(!t){throw new Error("bbox is required")}if(!Array.isArray(t)){throw new Error("bbox must be an Array")}if(t.length!==4&&t.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}t.forEach(function(t){if(!L(t)){throw new Error("bbox must only contain numbers")}})}function O(t){if(!t){throw new Error("id is required")}if(["string","number"].indexOf(typeof t)===-1){throw new Error("id must be a number or a string")}}},function(t,e,r){(function(t){!function(t,r){true?r(e):undefined}(this,function(e){"use strict";var r=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*r,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:r/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function a(t,e,r){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return g(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!M(t[0])||!M(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return u(t,e)}),r)}function c(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return c(t,e)}),r)}function f(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,r)}function p(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return f(t,e)}),r)}function d(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t,e,r){return void 0===r&&(r={}),s({type:"MultiLineString",coordinates:t},e,r)}function v(t,e,r){return void 0===r&&(r={}),s({type:"MultiPoint",coordinates:t},e,r)}function g(t,e,r){return void 0===r&&(r={}),s({type:"MultiPolygon",coordinates:t},e,r)}function m(t,e,r){return void 0===r&&(r={}),s({type:"GeometryCollection",geometries:t},e,r)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function x(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function S(t,e){return w(b(t,e))}function C(t){var e=t%360;return e<0&&(e+=360),e}function w(t){return 180*(t%(2*Math.PI))/Math.PI}function I(t){return t%360*Math.PI/180}function P(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return x(b(t,e),r)}function E(t,e,r){if(void 0===e&&(e="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[r];if(!i)throw new Error("invalid final units");return t/n*i}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!M(t))throw new Error("bbox must only contain numbers")})}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:r,factors:n,unitsFactors:i,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:c,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:y,multiPoint:v,multiPolygon:g,geometryCollection:m,round:_,radiansToLength:x,lengthToRadians:b,lengthToDegrees:S,bearingToAzimuth:C,radiansToDegrees:w,degreesToRadians:I,convertLength:P,convertArea:E,isNumber:M,isObject:L,validateBBox:N,validateId:T});function R(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(h=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,g,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(x=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===R(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(t,e,r,n){var i=r;return R(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i}function F(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function D(t,e,r){var n=r;return F(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function k(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function j(t,e,r){var n=r;return k(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n}function B(t){var e=[];return R(t,function(t){e.push(t)}),e}function G(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function U(t,e,r){var n=r;return G(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n}function q(t,e){G(t,function(t,r,n,i,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},n),r,l))return!1}})}function z(t,e,r){var n=r;return q(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n}function V(t,e){q(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==R(t,function(o,c,h,p,d){if(void 0===s||r>a||p>u||d>l)return s=o,a=r,u=p,l=d,void(i=0);var y=f([s,o],t.properties);if(!1===e(y,r,n,d,i))return!1;i++,s=o})&&void 0}}})}function W(t,e,r){var n=r,i=!1;return V(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n}function X(t,e){if(!t)throw new Error("geojson is required");q(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),r,n,s))return!1}}})}function H(t,e,r){var n=r;return X(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n}function Y(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Z(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return u(l,a,e);case"MultiPoint":return i<0&&(i=l.length+i),u(l[i],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),u(l[i][s],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),u(l[i][o][s],a,e)}throw new Error("geojson is invalid")}var Q=Object.freeze({__proto__:null,coordAll:B,coordEach:R,coordReduce:A,featureEach:k,featureReduce:j,findPoint:Z,findSegment:Y,flattenEach:q,flattenReduce:z,geomEach:G,geomReduce:U,lineEach:X,lineReduce:H,propEach:F,propReduce:D,segmentEach:V,segmentReduce:W});function J(t){var e=[1/0,1/0,-1/0,-1/0];return R(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&M(t[0])&&M(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function rt(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=t.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var st=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:rt,collectionOf:nt,getGeom:it,getType:ot}),at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ct(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=ct(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))ut.call(r,s)&&(i[s]=r[s]);if(at){n=at(r);for(var a=0;a<n.length;a++)lt.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i},ft={successCallback:null,verbose:!1},pt={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function dt(t,e,r){r=r||{};for(var n=Object.keys(ft),i=0;i<n.length;i++){var o=n[i],s=r[o];s=null!=s?s:ft[o],pt[o]=s}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],r=0,n=1e-7;return t.cells.forEach(function(i,o){i.forEach(function(i,s){if(void 0!==i&&(5!==(p=i).cval&&10!==p.cval)&&!vt(i)){var a=function(t,e,r){var n,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][r],f=h.cval,p=l[f],d=mt(h,p);s.push([r+d[0],e+d[1]]),p=c[f],d=mt(h,p),s.push([r+d[0],e+d[1]]),gt(h);var y=r+a[f],v=e+u[f],g=f;for(;y>=0&&v>=0&&v<o&&(y!=r||v!=e)&&void 0!==(h=t[v][y]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};p=c[f],n=a[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[g]?(p="left",n=-1,i=0):(p="right",n=1,i=0):-1===a[g]&&(p="bottom",n=0,i=-1):10===f&&(h.flipped?-1===a[g]?(p="top",n=0,i=1):(p="bottom",n=0,i=-1):1===u[g]&&(p="left",n=-1,i=0))),d=mt(h,p),s.push([y+d[0],v+d[1]]),gt(h),y+=n,v+=i,g=f}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],h=r-1;h>=0;h--)if(Math.abs(e[h][0][0]-l)<=n&&Math.abs(e[h][0][1]-c)<=n){for(var f=a.path.length-2;f>=0;--f)e[h].unshift(a.path[f]);u=!0;break}u||(e[r++]=a.path)}var p})}),e}(function(t,e){for(var r=t.length-1,n=t[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,p,d,y,v=!1;if(5===(a|=h>=e?1:0)||10===a){var g=(u+l+c+h)/4;5===a&&g<e?(a=10,v=!0):10===a&&g<e&&(a=5,v=!0)}if(0!==a&&15!==a)f=p=d=y=.5,1===a?(d=1-yt(e,u,h),p=1-yt(e,c,h)):2===a?(p=yt(e,h,c),y=1-yt(e,l,c)):3===a?(d=1-yt(e,u,h),y=1-yt(e,l,c)):4===a?(f=yt(e,u,l),y=yt(e,c,l)):5===a?(f=yt(e,u,l),y=yt(e,c,l),p=1-yt(e,c,h),d=1-yt(e,u,h)):6===a?(p=yt(e,h,c),f=yt(e,u,l)):7===a?(d=1-yt(e,u,h),f=yt(e,u,l)):8===a?(d=yt(e,h,u),f=1-yt(e,l,u)):9===a?(p=1-yt(e,c,h),f=1-yt(e,l,u)):10===a?(f=1-yt(e,l,u),y=1-yt(e,l,c),p=yt(e,h,c),d=yt(e,h,u)):11===a?(f=1-yt(e,l,u),y=1-yt(e,l,c)):12===a?(d=yt(e,h,u),y=yt(e,c,l)):13===a?(p=1-yt(e,c,h),y=yt(e,c,l)):14===a?(d=yt(e,h,u),p=yt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:v,top:f,right:y,bottom:p,left:d}}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function yt(t,e,r){return(t-e)/(r-e)}function vt(t){return 0===t.cval||15===t.cval}function gt(t){vt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var xt=St,bt=St;function St(t,e,r,n,i){Ct(t,e,r||0,n||t.length-1,i||It)}function Ct(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,s=e-r+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);Ct(t,e,Math.max(r,Math.floor(e-s*u/o+l)),Math.min(n,Math.floor(e+(o-s)*u/o+l)),i)}var c=t[e],h=r,f=n;for(wt(t,r,e),i(t[n],c)>0&&wt(t,r,n);h<f;){for(wt(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?wt(t,r,f):wt(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function wt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function It(t,e){return t<e?-1:t>e?1:0}xt.default=bt;var Pt=Mt,Et=Mt;function Mt(t,e){if(!(this instanceof Mt))return new Mt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Lt(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function Nt(t,e){Tt(t,0,t.children.length,e,t)}function Tt(t,e,r,n,i){i||(i=Bt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],Ot(i,t.leaf?n(o):o);return i}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Rt(t,e){return t.minX-e.minX}function At(t,e){return t.minY-e.minY}function Ft(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function kt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function jt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Bt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Gt(t,e,r,n,i){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=n||(o=e+Math.ceil((r-e)/n/2)*n,xt(t,o,e,r,i),s.push(e,o,o,r))}function Ut(t){var e={exports:{}};return t(e,e.exports),e.exports}Mt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!jt(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],jt(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):kt(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!jt(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],jt(t,s=e.leaf?r(o):o)){if(e.leaf||kt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),s.leaf&&-1!==(i=Lt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!kt(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Rt,compareMinY:At,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return Nt(i=Bt(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=Bt([])).leaf=!1,i.height=n;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Gt(t,e,r,f,this.compareMinX),a=e;a<=r;a+=f)for(Gt(t,a,l=Math.min(a+f-1,r),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,n-1));return Nt(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,l,c,h,f,p;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Ft(s=e.children[i]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ot(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=Bt(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Nt(r,this.toBBox),Nt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=Bt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Nt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,a,u,l,c,h,f,p,d,y,v;for(u=l=1/0,n=e;n<=r-e;n++)i=Tt(t,0,n,this.toBBox),o=Tt(t,n,r,this.toBBox),h=i,f=o,p=void 0,d=void 0,y=void 0,v=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),v=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,v-d),a=Ft(i)+Ft(o),s<u?(u=s,c=n,l=a<l?a:l):s===u&&a<l&&(l=a,c=n);return c},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:Rt,i=t.leaf?this.compareMinY:At;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,a=Tt(t,0,e,s),u=Tt(t,r-e,r,s),l=Dt(a)+Dt(u);for(i=e;i<r-e;i++)o=t.children[i],Ot(a,t.leaf?s(o):o),l+=Dt(a);for(i=r-e-1;i>=e;i--)o=t.children[i],Ot(u,t.leaf?s(o):o),l+=Dt(u);return l},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)Ot(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Nt(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Pt.default=Et;var qt=function(t,e,r){var n=t*e,i=zt*t,o=i-(i-t),s=t-o,a=zt*e,u=a-(a-e),l=e-u,c=s*l-(n-o*u-s*u-o*l);if(r)return r[0]=c,r[1]=n,r;return[c,n]},zt=+(Math.pow(2,27)+1);var Vt=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,x=_,b=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=e[l],d=c(p))),(_=(o=x)-(m=(g=i+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y;for(;u<r;)(_=(o=x)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=x)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y,(l+=1)<n&&(p=e[l]);x&&(s[a++]=x);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var Wt=function(t,e,r){var n=t+e,i=n-t,o=e-i,s=t-(n-i);if(r)return r[0]=s+o,r[1]=n,r;return[s+o,n]};var Xt=function(t,e){var r=t.length;if(1===r){var n=qt(t[0],e);return n[0]?n:[n[1]]}var i=new Array(2*r),o=[.1,.1],s=[.1,.1],a=0;qt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<r;++u){qt(t[u],e,s);var l=o[1];Wt(l,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}o[1]&&(i[a++]=o[1]);0===a&&(i[a++]=0);return i.length=a,i};var Ht=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,s=new Array(r+n),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<r&&(h=t[u],f=c(h))):(o=p,(l+=1)<n&&(p=-e[l],d=c(p)));u<r&&f<d||l>=n?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p)));var y,v,g=i+o,m=g-i,_=o-m,x=_,b=g;for(;u<r&&l<n;)f<d?(i=h,(u+=1)<r&&(h=t[u],f=c(h))):(i=p,(l+=1)<n&&(p=-e[l],d=c(p))),(_=(o=x)-(m=(g=i+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y;for(;u<r;)(_=(o=x)-(m=(g=(i=h)+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y,(u+=1)<r&&(h=t[u]);for(;l<n;)(_=(o=x)-(m=(g=(i=p)+o)-i))&&(s[a++]=_),x=b-((y=b+g)-(v=y-b))+(g-v),b=y,(l+=1)<n&&(p=-e[l]);x&&(s[a++]=x);b&&(s[a++]=b);a||(s[a++]=0);return s.length=a,s};var Yt=Ut(function(t){function e(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[n][o]);return r}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function n(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",r(n(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,n(e(s,u))):o.push.apply(o,n(e(s,u))),a.push("m"+u);var l=r(i),c=r(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Vt,qt,Xt,Ht)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),s=(t[0]-r[0])*(e[1]-r[1]),a=i-s;if(i>0){if(s<=0)return a;n=i+s}else{if(!(i<0))return a;if(s>=0)return a;n=-(i+s)}var u=3.3306690738754716e-16*n;return a>=u||a<=-u?a:o(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],u=t[1]-n[1],l=e[1]-n[1],c=r[1]-n[1],h=t[2]-n[2],f=e[2]-n[2],p=r[2]-n[2],d=o*c,y=a*l,v=a*u,g=i*c,m=i*l,_=o*u,x=h*(d-y)+f*(v-g)+p*(m-_),b=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(h)+(Math.abs(v)+Math.abs(g))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return x>b||-x>b?x:s(t,e,r,n)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],r=["slow"],n=0;n<=5;++n)e.push("a"+n),r.push("o"+n);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)o.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(o.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[u].concat(a)),n=0;n<=5;++n)t.exports[n]=a[n]}()}),Zt=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var i=new Array(e);for(n=0;n<e;++n)i[n]=n;i.sort(function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(n=2;n<e;++n){for(var a=i[n],u=t[a],l=o.length;l>1&&Qt(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Qt(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}r=new Array(s.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)r[c++]=o[n];for(var f=s.length-2;f>0;--f)r[c++]=s[f];return r},Qt=Yt[3];var Jt=$t,Kt=$t;function $t(t,e){if(!(this instanceof $t))return new $t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function te(t,e){return t<e?-1:t>e?1:0}$t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Jt.default=Kt;var ee=function(t,e){for(var r=t[0],n=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>n!=c>n&&r<(l-a)*(n-u)/(c-u)+a&&(i=!i)}return i},re=Yt[3],ne=oe,ie=oe;function oe(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;for(var n,i=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[e,r,n,i],u=a.slice();for(o=0;o<t.length;o++)ee(t[o],a)||u.push(t[o]);var l=Zt(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Pt(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),n=fe(u,n),s.push(n)}var l=Pt(16);for(a=0;a<s.length;a++)l.insert(he(s[a]));for(var c=e*e,h=r*r;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=pe(p,d);if(!(y<h)){var v=y/c;(u=se(o,f.prev.p,p,d,f.next.next.p,v,l))&&Math.min(pe(u,p),pe(u,d))<=v&&(s.push(f),s.push(fe(u,f)),o.remove(u),l.remove(f),l.insert(he(f)),l.insert(he(f.next)))}}f=n;var g=[];do{g.push(f.p),f=f.next}while(f!==n);return g.push(f.p),g}function se(t,e,r,n,i,o,s){for(var a=new Jt(null,ae),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?de(c,r,n):ue(r,n,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=de(p,e,r),y=de(p,n,i);if(f.dist<d&&f.dist<y&&ce(r,p,s)&&ce(n,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function ae(t,e){return t.dist-e.dist}function ue(t,e,r){if(le(t,r)||le(e,r))return 0;var n=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=ye(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=ye(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=ye(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,i,o,s)}function le(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ce(t,e,r){for(var n,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(n=h[f].p,i=h[f].next.p,o=t,n!==(s=e)&&i!==o&&re(n,i,o)>0!=re(n,i,s)>0&&re(o,s,n)>0!=re(o,s,i)>0)return!1;return!0}function he(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function fe(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function pe(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function de(t,e,r){var n=e[0],i=e[1],o=r[0]-n,s=r[1]-i;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return(o=t[0]-n)*o+(s=t[1]-i)*s}function ye(t,e,r,n,i,o,s,a){var u,l,c,h,f=r-t,p=n-e,d=s-i,y=a-o,v=t-i,g=e-o,m=f*f+p*p,_=f*d+p*y,x=d*d+y*y,b=f*v+p*g,S=d*v+y*g,C=m*x-_*_,w=C,I=C;0===C?(l=0,w=1,h=S,I=x):(h=m*S-_*b,(l=_*S-x*b)<0?(l=0,h=S,I=x):l>w&&(l=w,h=S+_,I=x)),h<0?(h=0,-b<0?l=0:-b>m?l=w:(l=-b,w=m)):h>I&&(h=I,-b+_<0?l=0:-b+_>m?l=w:(l=-b+_,w=m));var P=(1-(c=0===h?0:h/I))*i+c*s-((1-(u=0===l?0:l/w))*t+u*r),E=(1-c)*o+c*a-((1-u)*e+u*n);return P*P+E*E}function ve(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var r=[];if(R(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var n=ne(r,e.concavity);return n.length>3?c([n]):null}function ge(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=K(t),i=it(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(me(n,a[l][0],r.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)me(n,a[l][h],!r.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function me(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!r;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(n=!n)}return n}function _e(t,e){var r=[];return k(t,function(t){var n=!1;if("Point"===t.geometry.type)G(e,function(e){ge(t,e)&&(n=!0)}),n&&r.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];G(e,function(e){R(t,function(t){ge(t,e)&&(n=!0,i.push(t))})}),n&&r.push(v(i))}}),d(r)}function xe(t,e,r){void 0===r&&(r={});var n=K(t),i=K(e),o=I(i[1]-n[1]),s=I(i[0]-n[0]),a=I(n[1]),u=I(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return x(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function be(t,e){var r=!1;return d(function(t){if(t.length<3)return[];t.sort(Ce);var e,r,n,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c,f=1e-12;for(;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,d=l-u,y=h-c,v=d>y?d:y,g=.5*(l+u),m=.5*(h+c),_=[new Se({__sentinel:!0,x:g-20*v,y:m-v},{__sentinel:!0,x:g,y:m+20*v},{__sentinel:!0,x:g+20*v,y:m-v})],x=[],b=[];a=t.length;for(;a--;){for(b.length=0,p=_.length;p--;)(d=t[a].x-_[p].x)>0&&d*d>_[p].r?(x.push(_[p]),_.splice(p,1)):d*d+(y=t[a].y-_[p].y)*y>_[p].r||(b.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(we(b),p=b.length;p;)r=b[--p],e=b[--p],n=t[a],i=r.x-e.x,o=r.y-e.y,s=2*(i*(n.y-r.y)-o*(n.x-r.x)),Math.abs(s)>f&&_.push(new Se(e,r,n))}Array.prototype.push.apply(x,_),a=x.length;for(;a--;)(x[a].a.__sentinel||x[a].b.__sentinel||x[a].c.__sentinel)&&x.splice(a,1);return x}(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?n.z=t.properties[e]:3===t.geometry.coordinates.length&&(r=!0,n.z=t.geometry.coordinates[2]),n})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return r?(e.push(t.a.z),n.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,n,i,e]],o)}))}ne.default=ie;var Se=function(t,e,r){this.a=t,this.b=e,this.c=r;var n,i,o=e.x-t.x,s=e.y-t.y,a=r.x-t.x,u=r.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+r.x)+u*(t.y+r.y),h=2*(o*(r.y-e.y)-s*(r.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,n=this.x-t.x,i=this.y-t.y,this.r=n*n+i*i};function Ce(t,e){return e.x-t.x}function we(t){var e,r,n,i,o,s=t.length;t:for(;s;)for(r=t[--s],e=t[--s],n=s;n;)if(o=t[--n],e===(i=t[--n])&&r===o||e===o&&r===i){t.splice(s,2),t.splice(n,2),s-=2;continue t}}function Ie(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Pe(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return Pe(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Me(t);default:throw new Error("unknown GeoJSON type")}}function Pe(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=Ee(t.properties),e.geometry=Me(t.geometry),e}function Ee(t){var e={};return t?(Object.keys(t).forEach(function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:Array.isArray(n)?e[r]=n.map(function(t){return t}):e[r]=Ee(n):e[r]=n}),e):e}function Me(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Me(t)}),e):(e.coordinates=Le(t.coordinates),e)}function Le(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(t){return Le(t)})}function Ne(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=[],i=H(t,function(t,e){var r=function(t,e){var r,n=t.geometry.coordinates,i=e.geometry.coordinates,o=Te(n[0]),s=Te(n[n.length-1]),a=Te(i[0]),u=Te(i[i.length-1]);if(o===u)r=i.concat(n.slice(1));else if(a===s)r=n.concat(i.slice(1));else if(o===a)r=n.slice(1).reverse().concat(i);else{if(s!==u)return null;r=n.concat(i.reverse().slice(1))}return f(r)}(t,e);return r||(n.push(t),e)});return i&&n.push(i),n.length?1===n.length?n[0]:y(n.map(function(t){return t.coordinates})):null}function Te(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Re(t,e){var r=function(t){if(null==t)return Oe;var e,r,n=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*n+o,c[1]=(r+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),n=t.arcs;function i(t,e){e.length&&e.pop();for(var i=n[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(r(i[o],o));t<0&&function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}(e,s)}function o(t){return r(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=o(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(o);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}function Ae(t,e){var r={},n={},i={},o=[],s=-1;function a(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=r,e[n]=i)}),e.forEach(function(e){var r,o,s=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];t.transform?(r=[0,0],n.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=n[n.length-1];return e<0?[r,i]:[i,r]}(e),a=s[0],u=s[1];if(r=i[a])if(delete i[r.end],r.push(e),r.end=u,o=n[u]){delete n[o.start];var l=o===r?r:r.concat(o);n[l.start=r.start]=i[l.end=o.end]=l}else n[r.start]=i[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(e),r.start=a,o=i[a]){delete i[o.end];var c=o===r?r:o.concat(r);n[c.start=o.start]=i[c.end=r.end]=c}else n[r.start]=i[r.end]=r;else n[(r=[e]).start=a]=i[r.end=u]=r}),a(i,n),a(n,i),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}function Fe(t,e){var r={},n=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),n.push(t)}function s(e){return function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Re(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var n,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&i.push(t)})})}),(n=(i=Ae(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<n;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i}).filter(function(t){return t.length>0})}}var De=Object.prototype.hasOwnProperty;function ke(t,e,r,n,i,o){3===arguments.length&&(n=o=Array,i=null);for(var s=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;function c(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function h(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=n,a[l]=o,o}function f(n,o){for(var l=e(n)&u,c=s[l],h=0;c!=i;){if(r(c,n))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o}function p(){for(var t=[],e=0,r=s.length;e<r;++e){var n=s[e];n!=i&&t.push(n)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function je(t,e){return t[0]===e[0]&&t[1]===e[1]}var Be=new ArrayBuffer(16),Ge=new Float64Array(Be),Ue=new Uint32Array(Be);function qe(t){Ge[0]=t[0],Ge[1]=t[1];var e=Ue[0]^Ue[1];return 2147483647&(e=e<<5^e>>7^Ue[2]^Ue[3])}function ze(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=ke(1.4*o.length,b,S,Int32Array,-1,Int32Array),e=new Int32Array(o.length),r=0,n=o.length;r<n;++r)e[r]=t.maybeSet(r,r);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,r=o.length;e<r;++e)l[e]=c[e]=h[e]=-1;for(e=0,r=s.length;e<r;++e){var d=s[e],y=d[0],v=d[1];for(n=u[y],i=u[++y],++p,f[n]=1;++y<=v;)x(e,n,n=i,i=u[y]);++p,f[i]=1}for(e=0,r=o.length;e<r;++e)l[e]=-1;for(e=0,r=a.length;e<r;++e){var g=a[e],m=g[0]+1,_=g[1];for(x(e,u[_-1],n=u[m-1],i=u[m]);++m<=_;)x(e,n,n=i,i=u[m])}function x(t,e,r,n){if(l[r]!==t){l[r]=t;var i=c[r];if(i>=0){var o=h[r];i===e&&o===n||i===n&&o===e||(++p,f[r]=1)}else c[r]=e,h[r]=n}}function b(t){return qe(o[t])}function S(t,e){return je(o[t],o[e])}l=c=h=null;var C,w=function(t,e,r,n,i){3===arguments.length&&(n=Array,i=null);for(var o=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=n,!0}function l(n){for(var a=e(n)&s,u=o[a],l=0;u!=i;){if(r(u,n))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,r=o.length;e<r;++e){var n=o[e];n!=i&&t.push(n)}return t}return{add:u,has:l,values:c}}(1.4*p,qe,je);for(e=0,r=o.length;e<r;++e)f[C=u[e]]&&w.add(o[C]);return w}function Ve(t,e,r,n){We(t,e,r),We(t,e,e+n),We(t,e+n,r)}function We(t,e,r){for(var n,i=e+(r---e>>1);e<i;++e,--r)n=t[e],t[e]=t[r],t[r]=n}function Xe(t){var e,r,n={};for(e in t)n[e]=null==(r=t[e])?{type:null}:("FeatureCollection"===r.type?He:"Feature"===r.type?Ye:Ze)(r);return n}function He(t){var e={type:"GeometryCollection",geometries:t.features.map(Ye)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ye(t){var e,r=Ze(t.geometry);for(e in null!=t.id&&(r.id=t.id),null!=t.bbox&&(r.bbox=t.bbox),t.properties){r.properties=t.properties;break}return r}function Ze(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ze)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Qe(t,e){var r=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;function o(t){null!=t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>n&&(n=o),s<r&&(r=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return n>=e&&i>=r?[e,r,n,i]:void 0}(t=Xe(t)),n=e>0&&r&&function(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=o-n?(r-1)/(o-n):1,u=s-i?(r-1)/(s-i):1;function l(t){return[Math.round((t[0]-n)*a),Math.round((t[1]-i)*u)]}function c(t,e){for(var r,o,s,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)r=t[h],l=Math.round((r[0]-n)*a),c=Math.round((r[1]-i)*u),l===o&&c===s||(d[f++]=[o=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&De.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var v in t)d(t[v]);return{scale:[1/a,1/u],translate:[n,i]}}(t,r,e),i=function(t){var e,r,n,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,n=0,i=s.length;n<i;++n)for(e=s[n];e=e.next;)++u;for(n=0,i=a.length;n<i;++n)for(r=a[n];r=r.next;)++u;var l=ke(2*u*1.4,qe,je),c=t.arcs=[];for(n=0,i=s.length;n<i;++n){e=s[n];do{h(e)}while(e=e.next)}for(n=0,i=a.length;n<i;++n)if((r=a[n]).next)do{h(r)}while(r=r.next);else f(r);function h(t){var e,r,n,i,s,a,u,h;if(n=l.get(e=o[t[0]]))for(u=0,h=n.length;u<h;++u)if(p(i=n[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(r=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);n?n.push(t):l.set(e,[t]),s?s.push(t):l.set(r,[t]),c.push(t)}function f(t){var e,r,n,i,s;if(r=l.get(o[t[0]]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}if(r=l.get(e=o[t[0]+g(t)]))for(i=0,s=r.length;i<s;++i){if(y(n=r[i],t))return t[0]=n[0],void(t[1]=n[1]);if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}r?r.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var r=t[0],n=e[0],i=t[1];if(r-i!=n-e[1])return!1;for(;r<=i;++r,++n)if(!je(o[r],o[n]))return!1;return!0}function d(t,e){var r=t[0],n=e[0],i=t[1],s=e[1];if(r-i!=n-s)return!1;for(;r<=i;++r,--s)if(!je(o[r],o[s]))return!1;return!0}function y(t,e){var r=t[0],n=e[0],i=t[1]-r;if(i!==e[1]-n)return!1;for(var s=g(t),a=g(e),u=0;u<i;++u)if(!je(o[r+(u+s)%i],o[n+(u+a)%i]))return!1;return!0}function v(t,e){var r=t[0],n=e[0],i=t[1],s=e[1],a=i-r;if(a!==s-n)return!1;for(var u=g(t),l=a-g(e),c=0;c<a;++c)if(!je(o[r+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function g(t){for(var e=t[0],r=t[1],n=e,i=n,s=o[n];++n<r;){var a=o[n];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=n,s=a)}return i-e}return t}(function(t){var e,r,n,i=ze(t),o=t.coordinates,s=t.lines,a=t.rings;for(r=0,n=s.length;r<n;++r)for(var u=s[r],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(r=0,n=a.length;r<n;++r)for(var h=a[r],f=h[0],p=f,d=h[1],y=i.has(o[f]);++p<d;)i.has(o[p])&&(y?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ve(o,f,d,d-p),o[d]=o[f],y=!0,p=f));return t}(function(t){var e=-1,r=[],n=[],i=[];function o(t){t&&De.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function u(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:t}}(t))),o=i.coordinates,s=ke(1.4*i.arcs.length,Je,Ke);function a(t){t&&De.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var r=s.get(t);e.push(t[0]<t[1]?r:~r)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return n&&(i.transform=n,i.arcs=function(t){for(var e=-1,r=t.length;++e<r;){for(var n,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)n=(l=o[s])[0],i=l[1],n===c&&i===h||(o[a++]=[n-c,i-h],c=n,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Je(t){var e,r=t[0],n=t[1];return n<r&&(e=r,r=n,n=e),r+31*n}function Ke(t,e){var r,n=t[0],i=t[1],o=e[0],s=e[1];return i<n&&(r=n,n=i,i=r),s<o&&(r=o,o=s,s=r),n===o&&i===s}function $e(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ie(t));var r=[];q(t,function(t){r.push(t.geometry)});var n=Qe({geoms:m(r).geometry});return function(t){return Re(t,Fe.apply(this,arguments))}(n,n.objects.geoms.geometries)}function tr(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Ie(t));var n=function(t){var e={};q(t,function(t){e[t.geometry.type]=!0});var r=Object.keys(e);if(1===r.length)return r[0];return null}(t);if(!n)throw new Error("geojson must be homogenous");var i=t;switch(n){case"LineString":return Ne(i,e);case"Polygon":return $e(i,e);default:throw new Error(n+" is not supported")}}function er(t,e){void 0===e&&(e={});var r="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var n=ot(t),i=[];switch(n){case"LineString":i=rr(t);break;case"MultiLineString":case"Polygon":$(t).forEach(function(t){i.push(rr(t))});break;case"MultiPolygon":$(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(rr(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(n+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=i,t):{type:n,coordinates:i}:!0===r?(t.geometry.coordinates=i,t):s({type:n,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function rr(t){var e=$(t);if(2===e.length&&!nr(e[0],e[1]))return e;var r=[],n=e.length-1,i=r.length;r.push(e[0]);for(var o=1;o<n;o++){var s=r[r.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(r.push(e[o]),(i=r.length)>2&&ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(e[e.length-1]),i=r.length,nr(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function ir(t,e,r){var n=r[0],i=r[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0===(n-o)*c-(i-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=n&&n<=a:a<=n&&n<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)}function or(t,e,r){var n=e.x,i=e.y,o=r.x-n,s=r.y-i;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return(o=t.x-n)*o+(s=t.y-i)*s}function sr(t,e,r,n,i){for(var o,s=n,a=e+1;a<r;a++){var u=or(t[a],t[e],t[r]);u>s&&(o=a,s=u)}s>n&&(o-e>1&&sr(t,e,o,n,i),i.push(t[o]),r-o>1&&sr(t,o,r,n,i))}function ar(t,e){var r=t.length-1,n=[t[0]];return sr(t,0,r,e,n),n.push(t[r]),n}function ur(t,e,r){if(t.length<=2)return t;var n=void 0!==e?e*e:1;return t=ar(t=r?t:function(t,e){for(var r,n,i,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)r=t[l],i=a,o=void 0,s=void 0,o=(n=r).x-i.x,s=n.y-i.y,o*o+s*s>e&&(u.push(r),a=r);return a!==r&&u.push(r),u}(t,n),n)}function lr(t,e,r){return ur(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,r).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function cr(t,e,r){return t.map(function(t){var n=t.map(function(t){return{x:t[0],y:t[1]}});if(n.length<4)throw new Error("invalid polygon");for(var i=ur(n,e,r).map(function(t){return[t.x,t.y]});!hr(i);)i=ur(n,e-=.01*e,r).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function hr(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fr=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],n=this.points[e+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>t&&(e.push(n),r=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(t,e,r,n,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+e.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+e.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}();function pr(t,e){void 0===e&&(e={});for(var r=e.resolution||1e4,n=e.sharpness||.85,i=[],o=it(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new fr({duration:r,points:o,sharpness:n}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(i,e.properties)}function dr(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,n];return c([[s,[i,n],[i,o],[r,o],s]],e.properties,{bbox:t,id:e.id})}function yr(t){return dr(J(t))}function vr(t){var e=t[0],r=t[1],n=t[2],i=t[3];if(xe(t.slice(0,2),[n,r])>=xe(t.slice(0,2),[e,i])){var o=(r+i)/2;return[e,o-(n-e)/2,n,o+(n-e)/2]}var s=(e+n)/2;return[s-(i-r)/2,r,s+(i-r)/2,i]}function gr(t,e,r,n){void 0===n&&(n={});var i=K(t),o=I(i[0]),s=I(i[1]),a=I(r),l=b(e,n.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([w(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),w(c)],n.properties)}function mr(t,e,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<n;s++)o.push(gr(t,e,-360*s/n,r).geometry.coordinates);return o.push(o[0]),c([o],i)}function _r(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=_r(e,t);return r=(r+180)%360}(t,e);var n=K(t),i=K(e),o=I(n[0]),s=I(i[0]),a=I(n[1]),u=I(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return w(Math.atan2(l,c))}function xr(t,e){void 0===e&&(e={});var r=J(t);return u([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}function br(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return R(t,function(t){r+=t[0],n+=t[1],i++},!0),u([r/i,n/i],e.properties)}function Sr(t){var e=[];return"FeatureCollection"===t.type?k(t,function(t){R(t,function(r){e.push(u(r,t.properties))})}):R(t,function(r){e.push(u(r,t.properties))}),d(e)}var Cr=Ir,wr=Ir;function Ir(t,e,r){r=r||2;var n,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*r:t.length,f=Pr(t,0,h,r,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Pr(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(Dr(s));for(a.sort(Rr),i=0;i<a.length;i++)Ar(a[i],r),r=Er(r,r.next);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<h;d+=r)(a=t[d])<n&&(n=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-n,s-i))?1/l:0}return Mr(f,p,r,n,i,l),p}function Pr(t,e,r,n,i){var o,s;if(i===Hr(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Vr(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Vr(o,t[o],t[o+1],s);return s&&Gr(s,s.next)&&(Wr(s),s=s.next),s}function Er(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Gr(n,n.next)&&0!==Br(n.prev,n,n.next))n=n.next;else{if(Wr(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Mr(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=Fr(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(u=l;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1)}(i)}(t,n,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Nr(t,n,i,o):Lr(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),Wr(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?Mr(t=Tr(t,e,r),e,r,n,i,o,2):2===s&&Or(t,e,r,n,i,o):Mr(Er(t),e,r,n,i,o,1);break}}}function Lr(t){var e=t.prev,r=t,n=t.next;if(Br(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kr(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Br(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Nr(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Br(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Fr(a,u,e,r,n),f=Fr(l,c,e,r,n),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Br(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Br(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Br(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&kr(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Br(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Tr(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Gr(i,o)&&Ur(i,n,n.next,o)&&qr(i,o)&&qr(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Wr(n),Wr(n.next),n=t=o),n=n.next}while(n!==t);return n}function Or(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&jr(s,a)){var u=zr(s,a);return s=Er(s,s.next),u=Er(u,u.next),Mr(s,e,r,n,i,o),void Mr(u,e,r,n,i,o)}a=a.next}s=s.next}while(s!==t)}function Rr(t,e){return t.x-e.x}function Ar(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,l=r,c=r.x,h=r.y,f=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=c&&i!==n.x&&kr(o<h?i:s,o,c,h,o<h?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<f||u===f&&n.x>r.x)&&qr(n,t)&&(r=n,f=u),n=n.next;return r}(t,e)){var r=zr(e,t);Er(r,r.next)}}function Fr(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dr(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function kr(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function jr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Ur(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&qr(t,e)&&qr(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function Br(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Gr(t,e){return t.x===e.x&&t.y===e.y}function Ur(t,e,r,n){return!!(Gr(t,e)&&Gr(r,n)||Gr(t,n)&&Gr(r,e))||Br(t,e,r)>0!=Br(t,e,n)>0&&Br(r,n,t)>0!=Br(r,n,e)>0}function qr(t,e){return Br(t.prev,t,t.next)<0?Br(t,e,t.next)>=0&&Br(t,t.prev,e)>=0:Br(t,e,t.prev)<0||Br(t,t.next,e)<0}function zr(t,e){var r=new Xr(t.i,t.x,t.y),n=new Xr(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Vr(t,e,r,n){var i=new Xr(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Wr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xr(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hr(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Yr(t){var e=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}(t),r=Cr(e.vertices,e.holes,2),n=[],i=[];r.forEach(function(t,n){var o=r[n];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),n.push(c([s]))}return n}function Zr(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0,i=0;return k(e,function(e,r){var o=xe(t,e);o<n&&(i=r,n=o)}),(r=Ie(e.features[i])).properties.featureIndex=i,r.properties.distanceToPoint=n,r}function Qr(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=$(n);break;case"LineString":r=[$(n)]}r.forEach(function(r){(function(t,e){var r=[];return t.reduce(function(t,n){var i=f([t,n],e);return i.bbox=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(t,n),r.push(i),n}),r})(r,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}Ir.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Hr(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Hr(t,l,c,r))}var h=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},Ir.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},Cr.default=wr;var Jr=Ut(function(t,e){function r(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function c(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function f(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,r){switch(t){case"Point":return n(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return n(t,e)}),r)},e.polygon=i,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return i(t,e)}),r)},e.lineString=o,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return o(t,e)}),r)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[r];if(!i)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function Kr(t,e,r){if(null!==t)for(var n,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,v=d?t.features.length:1,g=0;g<v;g++){a=(c=!!(l=d?t.features[g].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(h=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,g,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],f,g,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-h;i++){if(!1===e(u[n][i],f,g,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(x=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-h;o++){if(!1===e(u[n][i][o],f,g,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Kr(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $r(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function tn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function en(t,e){var r,n,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,h=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function rn(t,e){en(t,function(t,r,n,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Jr.feature(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Jr.feature(l,n),r,u))return!1}})}function nn(t,e){rn(t,function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==Kr(t,function(o,c,h,f,p){if(void 0===s||r>a||f>u||p>l)return s=o,a=r,u=f,l=p,void(i=0);var d=Jr.lineString([s,o],t.properties);if(!1===e(d,r,n,p,i))return!1;i++,s=o})&&void 0}}})}function on(t,e){if(!t)throw new Error("geojson is required");rn(t,function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Jr.lineString(o[s],t.properties),r,n,s))return!1}}})}var sn=function(t){var e=[];return Kr(t,function(t){e.push(t)}),e},an=Kr,un=function(t,e,r,n){var i=r;return Kr(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)},n),i},ln=tn,cn=function(t,e,r){var n=r;return tn(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},hn=function(t,e){if(e=e||{},!Jr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Jr.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Jr.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Jr.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Jr.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Jr.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Jr.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},fn=function(t,e){if(e=e||{},!Jr.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),a=a||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Jr.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Jr.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Jr.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Jr.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},pn=rn,dn=function(t,e,r){var n=r;return rn(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n},yn=en,vn=function(t,e,r){var n=r;return en(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)}),n},gn=on,mn=function(t,e,r){var n=r;return on(t,function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)}),n},_n=$r,xn=function(t,e,r){var n=r;return $r(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},bn=nn,Sn=function(t,e,r){var n=r,i=!1;return nn(t,function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0}),n},Cn=Object.defineProperty({coordAll:sn,coordEach:an,coordReduce:un,featureEach:ln,featureReduce:cn,findPoint:hn,findSegment:fn,flattenEach:pn,flattenReduce:dn,geomEach:yn,geomReduce:vn,lineEach:gn,lineReduce:mn,propEach:_n,propReduce:xn,segmentEach:bn,segmentReduce:Sn},"__esModule",{value:!0});function wn(t){var e=[1/0,1/0,-1/0,-1/0];return Cn.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}wn.default=wn;var In=wn,Pn=Object.defineProperty({default:In},"__esModule",{value:!0}).default,En=Cn.featureEach,Mn=(Cn.coordEach,Jr.polygon,Jr.featureCollection);function Ln(t){var e=Pt(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Pn(t),Pt.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Pn(t),e.push(t)}):En(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Pn(t),e.push(t)}),Pt.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Pn(t),Pt.prototype.remove.call(this,t,e)},e.clear=function(){return Pt.prototype.clear.call(this)},e.search=function(t){var e=Pt.prototype.search.call(this,this.toBBox(t));return Mn(e)},e.collides=function(t){return Pt.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Pt.prototype.all.call(this);return Mn(t)},e.toJSON=function(){return Pt.prototype.toJSON.call(this)},e.fromJSON=function(t){return Pt.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Pn(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Pn(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Nn=Ln,Tn=Ln;function On(t,e){var r={},n=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Rn(t,e);return i&&n.push(i),d(n)}var o=Nn();return o.load(Qr(e)),k(Qr(t),function(t){k(o.search(t),function(e){var i=Rn(t,e);if(i){var o=$(i).join(",");r[o]||(r[o]=!0,n.push(i))}})}),d(n)}function Rn(t,e){var r=$(t),n=$(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],l=n[0][0],c=n[0][1],h=n[1][0],f=n[1][1],p=(f-c)*(s-i)-(h-l)*(a-o),d=(h-l)*(o-c)-(f-c)*(i-l),y=(s-i)*(o-c)-(a-o)*(i-l);if(0===p)return null;var v=d/p,g=y/p;return v>=0&&v<=1&&g>=0&&g<=1?u([i+v*(s-i),o+v*(a-o)]):null}function An(t,e,r){void 0===r&&(r={});var n=u([1/0,1/0],{dist:1/0}),i=0;return q(t,function(t){for(var o=$(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=xe(e,a,r);var l=u(o[s+1]);l.properties.dist=xe(e,l,r);var c=xe(a,l,r),h=Math.max(a.properties.dist,l.properties.dist),p=_r(a,l),d=gr(e,h,p+90,r),y=gr(e,h,p-90,r),v=On(f([d.geometry.coordinates,y.geometry.coordinates]),f([a.geometry.coordinates,l.geometry.coordinates])),g=null;v.features.length>0&&((g=v.features[0]).properties.dist=xe(e,g,r),g.properties.location=i+xe(a,g,r)),a.properties.dist<n.properties.dist&&((n=a).properties.index=s,n.properties.location=i),l.properties.dist<n.properties.dist&&((n=l).properties.index=s+1,n.properties.location=i+c),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=s),i+=c}}),n}function Fn(t,e,n){void 0===n&&(n={});var i=K(t),o=K(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,P(function(t,e,n){var i=n=void 0===n?r:Number(n),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*i}(i,o),"meters",n.units)}function Dn(t,e,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):rt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):rt(e,"LineString","line");var n=1/0,i=t.geometry.coordinates;return V(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,r,n){var i=[r[0]-e[0],r[1]-e[1]],o=kn([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return jn(t,e,{method:n.method,units:"degrees"});var s=kn(i,i);if(s<=o)return jn(t,r,{method:n.method,units:"degrees"});var a=o/s,u=[e[0]+a*i[0],e[1]+a*i[1]];return jn(t,u,{method:n.method,units:"degrees"})}(i,e,o,r);s<n&&(n=s)}),P(n,"degrees",r.units)}function kn(t,e){return t[0]*e[0]+t[1]*e[1]}function jn(t,e,r){return"planar"===r.method?Fn(t,e,r):xe(t,e,r)}function Bn(t,e,r,n,i,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(r-t)-(s-i)*(n-e))?null!==f.x&&null!==f.y&&f:(h=(r-t)*(l=e-o)-(n-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(r-t),f.y=e+l*(n-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Gn(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?d([s(t)]):d([t]);return t}(t),r=xr(e),n=!1,i=0;!n&&i<e.features.length;){var o,a=e.features[i].geometry,l=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var c=!1;for(o=0;!c&&o<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[o][0]&&r.geometry.coordinates[1]===a.coordinates[o][1]&&(n=!0,c=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,n=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){l=!1,o=0;for(var f=a.coordinates[h];!l&&o<f.length-1;)Un(r.geometry.coordinates[0],r.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(l=!0,n=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ge(r,a)&&(n=!0);i++}if(n)return r;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(Sr(e.features[i]).features);return u(Zr(r,p).geometry.coordinates)}function Un(t,e,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Nn.default=Tn;var qn=6378137;function zn(t){return U(t,function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return Vn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=Vn(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function Vn(t){var e=0;if(t&&t.length>0){e+=Math.abs(Wn(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Wn(t[r]))}return e}function Wn(t){var e,r,n,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,i=u-1,o=0):s===u-1?(n=u-1,i=0,o=1):(n=s,i=s+1,o=s+2),e=t[n],r=t[i],a+=(Xn(t[o][0])-Xn(e[0]))*Math.sin(Xn(r[1]));a=a*qn*qn/2}return a}function Xn(t){return t*Math.PI/180}function Hn(t,e){return void 0===e&&(e={}),W(t,function(t,r){var n=r.geometry.coordinates;return t+xe(n[0],n[1],e)},0)}function Yn(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[h]),f(o);a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates)}if(c>=r)return(s=r-c)?(a=_r(i[h],i[h-1])-180,u=gr(i[h],s,a,n),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(c>=e&&o.push(i[h]),h===i.length-1)return f(o);c+=xe(i[h],i[h+1],n)}if(c<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return f([p,p])}function Zn(t,e,r){void 0===r&&(r={});for(var n=K(t),i=$(e),o=0;o<i.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Qn(i[o],i[o+1],n,s,void 0===r.epsilon?null:r.epsilon))return!0}return!1}function Qn(t,e,r,n,i){var o=r[0],s=r[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(r[0]-a)*f-(r[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return n?"start"===n?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===n?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===n&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function Jn(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if($n(e.coordinates[r],t.coordinates)){n=!0;break}return n}(r,n);case"LineString":return Zn(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ge(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var r=0;r<t.coordinates.length;r++){for(var n=!1,i=0;i<e.coordinates.length;i++)$n(t.coordinates[r],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}(r,n);case"LineString":return function(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++){if(!Zn(t.coordinates[n],e))return!1;r||(r=Zn(t.coordinates[n],e,{ignoreEndVertices:!0}))}return r}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){for(var r=!0,n=!1,i=0;i<t.coordinates.length;i++){if(!(n=ge(t.coordinates[1],e))){r=!1;break}n=ge(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&n}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var r=0;r<t.coordinates.length;r++)if(!Zn(t.coordinates[r],e))return!1;return!0}(r,n);case"Polygon":case"MultiPolygon":return function(t,e){var r=J(e),n=J(t);if(!Kn(r,n))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ge(t.coordinates[o],e))return!1;if(i||(i=ge(t.coordinates[o],e,{ignoreBoundary:!0})),!i)i=ge(ti(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0})}return i}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var r=J(t);if(!Kn(J(e),r))return!1;for(var n=0;n<t.coordinates[0].length;n++)if(!ge(t.coordinates[0][n],e))return!1;return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function $n(t,e){return t[0]===e[0]&&t[1]===e[1]}function ti(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ei(t,e,r){void 0===r&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=t[0],o=t[1],s=t[2],a=t[3],l=e/xe([i,o],[s,o],r)*(s-i),c=e/xe([i,o],[i,a],r)*(a-o),h=s-i,f=a-o,p=Math.floor(h/l),y=(f-Math.floor(f/c)*c)/2,v=i+(h-p*l)/2;v<=s;){for(var g=o+y;g<=a;){var m=u([v,g],r.properties);r.mask?Jn(m,r.mask)&&n.push(m):n.push(m),g+=c}v+=l}return d(n)}function ri(t,e){void 0===e&&(e={});var r=e.precision,n=e.coordinates,i=e.mutate;if(r=null==r||isNaN(r)?6:r,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,r);return R(t,function(t){!function(t,e,r){t.length>r&&t.splice(r,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,o,n)}),t}function ni(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){e.push(t)}),d(e)}function ii(t,e,r){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var n=t.geometry.coordinates,i=[],o={};if(r){for(var s=[],a=0;a<n.length;a++)for(var u=0;u<n[a].length-1;u++)s.push(y(a,u));var l=Pt();l.load(s)}for(var c=0;c<n.length;c++)for(var h=0;h<n[c].length-1;h++){if(r)l.search(y(c,h)).forEach(function(t){var e=t.ring,r=t.edge;d(c,h,e,r)});else for(var f=0;f<n.length;f++)for(var p=0;p<n[f].length-1;p++)d(c,h,f,p)}return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,r,s,a){var u,l,c=n[t][r],h=n[t][r+1],f=n[s][a],p=n[s][a+1],d=function(t,e,r,n){if(oi(t,r)||oi(t,n)||oi(e,r)||oi(n,r))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=r[0],l=r[1],c=n[0],h=n[1],f=(i-s)*(l-h)-(o-a)*(u-c);return 0===f?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/f,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var y=d,v=!o[y];v&&(o[y]=!0),e?i.push(e(d,t,r,c,h,u,s,a,f,p,l,v)):i.push(d)}}function y(t,e){var r,i,o,s,a=n[t][e],u=n[t][e+1];return a[0]<u[0]?(r=a[0],i=u[0]):(r=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:r,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function oi(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!oi(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0}function si(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,r=[],n=0;n<e;n++){var i=t.geometry.coordinates[n];hi(i[0],i[i.length-1])||i.push(i[0]),r.push.apply(r,i.slice(0,i.length-1))}if(!function(t){for(var e={},r=1,n=0,i=t.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(e,t[n])){r=0;break}e[t[n]]=1}return r}(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=r.length,s=ii(t,function(t,e,r,n,i,o,s,a,u,l,c,h){return[t,e,r,n,i,o,s,a,u,l,c,h]}),a=s.length;if(0==a){var u=[];for(n=0;n<e;n++)u.push(c([t.geometry.coordinates[n]],{parent:-1,winding:ci(t.geometry.coordinates[n])}));var l=d(u);return j(),B(),l}var h=[],f=[];for(n=0;n<e;n++){h.push([]);for(var p=0;p<t.geometry.coordinates[n].length-1;p++)h[n].push([new ai(t.geometry.coordinates[n][fi(p+1,t.geometry.coordinates[n].length-1)],1,[n,p],[n,fi(p+1,t.geometry.coordinates[n].length-1)],void 0)]),f.push(new ui(t.geometry.coordinates[n][p],[n,fi(p-1,t.geometry.coordinates[n].length-1)],[n,p],void 0,void 0,!1,!0))}for(n=0;n<a;n++)h[s[n][1]][s[n][2]].push(new ai(s[n][0],s[n][5],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0)),s[n][11]&&f.push(new ui(s[n][0],[s[n][1],s[n][2]],[s[n][6],s[n][7]],void 0,void 0,!0,!0));var y=f.length;for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)h[n][p].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(n=0;n<y;n++)v.push({minX:f[n].coord[0],minY:f[n].coord[1],maxX:f[n].coord[0],maxY:f[n].coord[1],index:n});var g=Pt();g.load(v);for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(var m=0;m<h[n][p].length;m++){x=m==h[n][p].length-1?h[n][fi(p+1,t.geometry.coordinates[n].length-1)][0].coord:h[n][p][m+1].coord;var _=g.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0];h[n][p][m].nxtIsectAlongEdgeIn=_.index}for(n=0;n<h.length;n++)for(p=0;p<h[n].length;p++)for(m=0;m<h[n][p].length;m++){var x=h[n][p][m].coord,b=(_=g.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0]).index;b<o?f[b].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn:hi(f[b].ringAndEdge1,h[n][p][m].ringAndEdgeIn)?f[b].nxtIsectAlongRingAndEdge1=h[n][p][m].nxtIsectAlongEdgeIn:f[b].nxtIsectAlongRingAndEdge2=h[n][p][m].nxtIsectAlongEdgeIn}var S=[];for(n=0,p=0;p<e;p++){var C=n;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[n].coord[0]<f[C].coord[0]&&(C=n),n++;var w=f[C].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==C||f[m].nxtIsectAlongRingAndEdge2==C){var I=m;break}var P=li([f[I].coord,f[C].coord,f[w].coord],!0)?1:-1;S.push({isect:C,parent:-1,winding:P})}S.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1});for(u=[];S.length>0;){var E=S.pop(),M=E.isect,L=E.parent,N=E.winding,T=u.length,O=[f[M].coord],R=M;if(f[M].ringAndEdge1Walkable)var A=f[M].ringAndEdge1,F=f[M].nxtIsectAlongRingAndEdge1;else A=f[M].ringAndEdge2,F=f[M].nxtIsectAlongRingAndEdge2;for(;!hi(f[M].coord,f[F].coord);){O.push(f[F].coord);var D=void 0;for(n=0;n<S.length;n++)if(S[n].isect==F){D=n;break}if(null!=D&&S.splice(D,1),hi(A,f[F].ringAndEdge1)){if(A=f[F].ringAndEdge2,f[F].ringAndEdge2Walkable=!1,f[F].ringAndEdge1Walkable){var k={isect:F};li([f[R].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge2].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}R=F,F=f[F].nxtIsectAlongRingAndEdge2}else{if(A=f[F].ringAndEdge1,f[F].ringAndEdge1Walkable=!1,f[F].ringAndEdge2Walkable){k={isect:F};li([f[R].coord,f[F].coord,f[f[F].nxtIsectAlongRingAndEdge1].coord],1==N)?(k.parent=L,k.winding=-N):(k.parent=T,k.winding=N),S.push(k)}R=F,F=f[F].nxtIsectAlongRingAndEdge1}}O.push(f[F].coord),u.push(c([O],{index:T,parent:L,winding:N,netWinding:void 0}))}l=d(u);function j(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var r=-1,n=0;n<l.features.length;n++)t[e]!=n&&ge(l.features[t[e]].geometry.coordinates[0][0],l.features[n],{ignoreBoundary:!0})&&zn(l.features[n])<Infinity&&(r=n);l.features[t[e]].properties.parent=r}}function B(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,G(t,e)}}function G(t,e){for(var r=0;r<l.features.length;r++)if(l.features[r].properties.parent==t){var n=e+l.features[r].properties.winding;l.features[r].properties.netWinding=n,G(r,n)}}return j(),B(),l}var ai=function(t,e,r,n,i){this.coord=t,this.param=e,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},ui=function(t,e,r,n,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function li(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ci(t){for(var e=0,r=0;r<t.length-1;r++)t[r][0]<t[e][0]&&(e=r);if(li([t[fi(e-1,t.length-1)],t[e],t[fi(e+1,t.length-1)]],!0))var n=1;else n=-1;return n}function hi(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!hi(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}function fi(t,e){return(t%e+e)%e}var pi=Math.PI/180,di=180/Math.PI,yi=function(t,e){this.lon=t,this.lat=e,this.x=pi*t,this.y=pi*e};yi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},yi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new yi(e,t)};var vi=function(){this.coords=[],this.length=0};vi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var gi=function(t){this.properties=t||{},this.geometries=[]};gi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},gi.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var mi=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new yi(t.x,t.y),this.end=new yi(e.x,e.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function _i(t,e){var r=[],n=Nn();return q(e,function(e){if(r.forEach(function(t,e){t.id=e}),r.length){var i=n.search(e);if(i.features.length){var o=bi(e,i);r=r.filter(function(t){return t.id!==o.id}),n.remove(o),k(xi(o,e),function(t){r.push(t),n.insert(t)})}}else(r=xi(t,e).features).forEach(function(t){t.bbox||(t.bbox=vr(J(t)))}),n.load(d(r))}),d(r)}function xi(t,e){var r=[],n=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if(Si(n,K(e))||Si(i,K(e)))return d([t]);var o=Nn(),s=Qr(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=bi(e,a),l=j(s,function(t,n,i){var o=$(n)[1],s=K(e);return i===u.id?(t.push(s),r.push(f(t)),Si(s,o)?[s]:[s,o]):(t.push(o),t)},[n]);return l.length>1&&r.push(f(l)),d(r)}function bi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,n=1/0;return k(e,function(e){var i=An(e,t).properties.dist;i<n&&(r=e,n=i)}),r}function Si(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ci(t,e,r,n,i){void 0===i&&(i={});var o=i.steps||64,s=wi(r),a=wi(n),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(mr(t,e,i).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,h=l,p=[],d=0;h<c;)p.push(gr(t,e,h,i).geometry.coordinates),h=l+360*++d/o;return h>c&&p.push(gr(t,e,c,i).geometry.coordinates),f(p,u)}function wi(t){var e=t%360;return e<0&&(e+=360),e}function Ii(t,e){void 0===e&&(e={});var r=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return Pi(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=it(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach(function(t){i.push(Ei(t,n))}),d(i)}(r,e);default:throw new Error("invalid poly")}}function Pi(t,e){return void 0===e&&(e={}),Ei(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ei(t,e){return t.length>1?y(t,e):f(t[0],e)}function Mi(t,e){var r,n,i;void 0===e&&(e={});var o=e.properties,s=null===(r=e.autoComplete)||void 0===r||r,a=null===(n=e.orderCoords)||void 0===n||n;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=Ie(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push($(Li(t,{},s,a)))}),g(u,o);default:return Li(t,o,s,a)}}function Li(t,e,r,n){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=Ni(o)),c([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(r&&(t=Ni(t)),n){var e=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.abs(e-n)*Math.abs(r-i)}(J(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),c(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Ni(t){var e=t[0],r=e[0],n=e[1],i=t[t.length-1],o=i[0],s=i[1];return r===o&&n===s||t.push(e),t}function Ti(t,e){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],o=!(Ri(i=t[t.length-1],e)&n),s=0;s<t.length;s++)(u=!(Ri(a=t[s],e)&n))!==o&&r.push(Oi(i,a,n,e)),u&&r.push(a),i=a,o=u;if(!(t=r).length)break}return r}function Oi(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function Ri(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Ai(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var o=Ti(i[n],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}return r}mi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=di*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[di*Math.atan2(i,n),s]},mi.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),i=0;i<t;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<r.length;++p){var d=r[p-1][0],y=r[p][0],v=Math.abs(y-d);v>f&&(y>c&&d<h||d>c&&y<h)?a=!0:v>u&&(u=v)}var g=[];if(a&&u<l){var m=[];g.push(m);for(var _=0;_<r.length;++_){var x=parseFloat(r[_][0]);if(_>0&&Math.abs(x-r[_-1][0])>f){var b=parseFloat(r[_-1][0]),S=parseFloat(r[_-1][1]),C=parseFloat(r[_][0]),w=parseFloat(r[_][1]);if(b>-180&&b<h&&180===C&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<h){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(b>c&&b<180&&-180===C&&_+1<r.length&&r[_-1][0]>c&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(b<h&&C>c){var I=b;b=C,C=I;var P=S;S=w,w=P}if(b>c&&C<h&&(C+=360),b<=180&&C>=180&&b<C){var E=(180-b)/(C-b),M=E*w+(1-E)*S;m.push([r[_-1][0]>c?180:-180,M]),(m=[]).push([r[_-1][0]>c?-180:180,M]),g.push(m)}else m=[],g.push(m);m.push([x,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var L=[];g.push(L);for(var N=0;N<r.length;++N)L.push([r[N][0],r[N][1]])}for(var T=new gi(this.properties),O=0;O<g.length;++O){var R=new vi;T.geometries.push(R);for(var A=g[O],F=0;F<A.length;++F)R.move_to(A[F])}return T};var Fi=Ut(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),Di=Ut(function(t,e){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=r?n:i).supported=n,e.unsupported=i}),ki=Ut(function(t){var e=Array.prototype.slice,r=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(n(t)||n(o))return!1;if(t.prototype!==o.prototype)return!1;if(Di(t))return!!Di(o)&&(t=e.call(t),o=e.call(o),r(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=Fi(t),c=Fi(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!r(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function n(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}});function ji(t,e,r){if(void 0===r&&(r={}),!L(r=r||{}))throw new Error("options is invalid");var n,i=r.tolerance||0,o=[],s=Nn(),a=Qr(t);return s.load(a),V(e,function(t){var e=!1;t&&(k(s.search(t),function(r){if(!1===e){var o=$(t).sort(),s=$(r).sort();ki(o,s)||(0===i?Zn(o[0],r)&&Zn(o[1],r):An(r,o[0]).properties.dist<=i&&An(r,o[1]).properties.dist<=i)?(e=!0,n=n?Bi(n,t):t):(0===i?Zn(s[0],t)&&Zn(s[1],t):An(t,s[0]).properties.dist<=i&&An(t,s[1]).properties.dist<=i)&&(n=n?Bi(n,r):r)}}),!1===e&&n&&(o.push(n),n=void 0))}),n&&o.push(n),d(o)}function Bi(t,e){var r=$(e),n=$(t),i=n[0],o=n[n.length-1],s=t.geometry.coordinates;return ki(r[0],i)?s.unshift(r[1]):ki(r[0],o)?s.push(r[1]):ki(r[1],i)?s.unshift(r[0]):ki(r[1],o)&&s.push(r[0]),t}function Gi(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e,r){var n;return void 0===r&&(r={}),(n=r.final?qi(K(e),K(t)):qi(K(t),K(e)))>180?-(360-n):n}function qi(t,e){var r=I(t[1]),n=I(e[1]),i=I(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(w(Math.atan2(i,o))+360)%360}function zi(t,e,n,i){void 0===i&&(i={});var o=e<0,s=P(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var a=K(t),l=function(t,e,n,i){i=void 0===i?r:Number(i);var o=e/i,s=t[0]*Math.PI/180,a=I(t[1]),u=I(n),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?l/h:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,n);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,i.properties)}function Vi(t,e,r,n,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),n=Xi(a,u,e),r<=0&&n>0?Xi(e,a,i)<0||(i=a):r>0&&n<=0&&(Wi(e,a,o)||(o=a)),r=n}return[i,o]}function Wi(t,e,r){return Xi(t,e,r)>0}function Xi(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function Hi(t){for(var e,r,n=$(t),i=0,o=1;o<n.length;)e=r||n[0],i+=((r=n[o])[0]-e[0])*(r[1]+e[1]),o++;return i>0}function Yi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return G(t,function(t){Yi(t,e)}),t;case"LineString":return Zi($(t),e),t;case"Polygon":return Qi($(t),e),t;case"MultiLineString":return $(t).forEach(function(t){Zi(t,e)}),t;case"MultiPolygon":return $(t).forEach(function(t){Qi(t,e)}),t;case"Point":case"MultiPoint":return t}}function Zi(t,e){Hi(t)===e&&t.reverse()}function Qi(t,e){Hi(t[0])!==e&&t[0].reverse();for(var r=1;r<t.length;r++)Hi(t[r])===e&&t[r].reverse()}function Ji(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return k(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var Ki={successCallback:null,verbose:!1,polygons:!1},$i={};function to(t,e,r,n){n=n||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var s=i[o],a=n[s];a=null!=a?a:Ki[s],$i[s]=a}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+r)+"]");var u,l=function(t,e,r){for(var n=t.length-1,i=t[0].length-1,o={rows:n,cols:i,cells:[]},s=e+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var v=(c+h+f+p)/4;y=v>s?2:v<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var g,m,_,x,b,S,C,w;g=m=_=x=b=S=C=w=.5;var I=[];1===l?(_=1-Wo(e,f,p),w=1-Wo(e,c,p),I.push(Bo[l])):169===l?(_=Wo(s,p,f),w=Wo(s,p,c),I.push(Bo[l])):4===l?(S=1-Wo(e,h,f),x=Wo(e,p,f),I.push(ko[l])):166===l?(S=Wo(s,f,h),x=1-Wo(s,f,p),I.push(ko[l])):16===l?(b=Wo(e,f,h),m=Wo(e,c,h),I.push(Do[l])):154===l?(b=1-Wo(s,h,f),m=1-Wo(s,h,c),I.push(Do[l])):64===l?(C=Wo(e,p,c),g=1-Wo(e,h,c),I.push(Uo[l])):106===l?(C=1-Wo(s,c,p),g=Wo(s,c,h),I.push(Uo[l])):168===l?(x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),I.push(jo[l]),I.push(Bo[l])):2===l?(x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),I.push(jo[l]),I.push(Bo[l])):162===l?(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),I.push(jo[l]),I.push(Bo[l])):8===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),I.push(Do[l]),I.push(ko[l])):138===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):32===l?(b=Wo(s,f,h),S=Wo(e,f,h),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):42===l?(w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Go[l]),I.push(Uo[l])):128===l&&(w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Go[l]),I.push(Uo[l])),5===l?(S=1-Wo(e,h,f),w=1-Wo(e,c,p),I.push(ko[l])):165===l?(S=Wo(s,f,h),w=Wo(s,p,c),I.push(ko[l])):20===l?(x=Wo(e,p,f),m=Wo(e,c,h),I.push(jo[l])):150===l?(x=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(jo[l])):80===l?(b=Wo(e,f,h),C=Wo(e,p,c),I.push(Do[l])):90===l?(b=1-Wo(s,h,f),C=1-Wo(s,c,p),I.push(Do[l])):65===l?(_=1-Wo(e,f,p),g=1-Wo(e,h,c),I.push(Bo[l])):105===l?(_=Wo(s,p,f),g=Wo(s,c,h),I.push(Bo[l])):160===l?(b=Wo(s,f,h),S=Wo(e,f,h),w=Wo(e,p,c),C=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):10===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),w=1-Wo(s,c,p),C=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):130===l?(x=1-Wo(e,f,p),_=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(jo[l]),I.push(Bo[l])):40===l?(x=Wo(s,p,f),_=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(jo[l]),I.push(Bo[l])):101===l?(S=Wo(s,f,h),g=Wo(s,c,h),I.push(ko[l])):69===l?(S=1-Wo(e,h,f),g=1-Wo(e,h,c),I.push(ko[l])):149===l?(w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Go[l])):21===l?(w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Go[l])):86===l?(x=1-Wo(s,f,p),C=1-Wo(s,c,p),I.push(jo[l])):84===l?(x=Wo(e,p,f),C=Wo(e,p,c),I.push(jo[l])):89===l?(b=1-Wo(s,h,f),_=Wo(s,p,f),I.push(Bo[l])):81===l?(b=Wo(e,f,h),_=1-Wo(e,f,p),I.push(Bo[l])):96===l?(b=Wo(s,f,h),S=Wo(e,f,h),C=Wo(e,p,c),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):74===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),C=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):24===l?(b=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),m=Wo(e,c,h),I.push(Do[l]),I.push(Bo[l])):146===l?(b=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Bo[l])):6===l?(S=1-Wo(e,h,f),x=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),I.push(ko[l]),I.push(jo[l])):164===l?(S=Wo(s,f,h),x=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),I.push(ko[l]),I.push(jo[l])):129===l?(_=1-Wo(e,f,p),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(Bo[l]),I.push(Go[l])):41===l?(_=Wo(s,p,f),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(Bo[l]),I.push(Go[l])):66===l?(x=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(jo[l]),I.push(Bo[l])):104===l?(x=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),g=Wo(s,c,h),I.push(Bo[l]),I.push(qo[l])):144===l?(b=Wo(e,f,h),w=Wo(e,p,c),C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Uo[l])):26===l?(b=1-Wo(s,h,f),w=1-Wo(s,c,p),C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Uo[l])):36===l?(S=Wo(s,f,h),x=Wo(e,p,f),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):134===l?(S=1-Wo(e,h,f),x=1-Wo(s,f,p),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):9===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),w=1-Wo(e,c,p),I.push(Do[l]),I.push(ko[l])):161===l?(b=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),w=Wo(s,p,c),I.push(Do[l]),I.push(ko[l])):37===l?(S=Wo(s,f,h),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h),I.push(ko[l]),I.push(Go[l])):133===l?(S=1-Wo(e,h,f),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c),I.push(ko[l]),I.push(Go[l])):148===l?(x=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),m=1-Wo(s,h,c),I.push(jo[l]),I.push(Uo[l])):22===l?(x=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),m=Wo(e,c,h),I.push(jo[l]),I.push(Uo[l])):82===l?(b=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),I.push(Do[l]),I.push(Bo[l])):88===l?(b=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),I.push(Do[l]),I.push(Bo[l])):73===l?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),g=1-Wo(e,h,c),I.push(Do[l]),I.push(ko[l])):97===l?(b=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),g=Wo(s,c,h),I.push(Do[l]),I.push(ko[l])):145===l?(b=Wo(e,f,h),_=1-Wo(e,f,p),w=Wo(s,p,c),m=1-Wo(s,h,c),I.push(Do[l]),I.push(Go[l])):25===l?(b=1-Wo(s,h,f),_=Wo(s,p,f),w=1-Wo(e,c,p),m=Wo(e,c,h),I.push(Do[l]),I.push(Go[l])):70===l?(S=1-Wo(e,h,f),x=1-Wo(s,f,p),C=1-Wo(s,c,p),g=1-Wo(e,h,c),I.push(ko[l]),I.push(jo[l])):100===l?(S=Wo(s,f,h),x=Wo(e,p,f),C=Wo(e,p,c),g=Wo(s,c,h),I.push(ko[l]),I.push(jo[l])):34===l?(0===y?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l]),I.push(Uo[l])):35===l?(4===y?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l]),I.push(Uo[l])):136===l?(0===y?(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l]),I.push(Uo[l])):153===l?(0===y?(b=Wo(e,f,h),_=1-Wo(e,f,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(b=1-Wo(s,h,f),_=Wo(s,p,f),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Bo[l])):102===l?(0===y?(S=1-Wo(e,h,f),x=Wo(e,p,f),C=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),x=1-Wo(s,f,p),C=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(Uo[l])):155===l?(4===y?(b=Wo(e,f,h),_=1-Wo(e,f,p),w=1-Wo(e,c,p),m=Wo(e,c,h)):(b=1-Wo(s,h,f),_=Wo(s,p,f),w=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Go[l])):103===l?(4===y?(S=1-Wo(e,h,f),x=Wo(e,p,f),C=Wo(e,p,c),g=1-Wo(e,h,c)):(S=Wo(s,f,h),x=1-Wo(s,f,p),C=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l])):152===l?(0===y?(b=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(b=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(jo[l]),I.push(Bo[l])):156===l?(4===y?(b=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),m=Wo(e,c,h)):(b=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),m=1-Wo(s,h,c)),I.push(Do[l]),I.push(Bo[l]),I.push(Uo[l])):137===l?(0===y?(b=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(b=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l])):139===l?(4===y?(b=Wo(s,f,h),S=Wo(e,f,h),_=1-Wo(e,f,p),w=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)):(b=1-Wo(e,h,f),S=1-Wo(s,h,f),_=Wo(s,p,f),w=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)),I.push(Do[l]),I.push(ko[l]),I.push(Go[l])):98===l?(0===y?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),g=1-Wo(e,h,c)):(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Uo[l])):99===l?(4===y?(b=1-Wo(e,h,f),S=1-Wo(s,h,f),x=Wo(s,p,f),_=Wo(e,p,f),C=Wo(e,p,c),g=1-Wo(e,h,c)):(b=Wo(s,f,h),S=Wo(e,f,h),x=1-Wo(e,f,p),_=1-Wo(s,f,p),C=1-Wo(s,c,p),g=Wo(s,c,h)),I.push(Do[l]),I.push(ko[l]),I.push(Bo[l])):38===l?(0===y?(S=1-Wo(e,h,f),x=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),x=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(Go[l]),I.push(Uo[l])):39===l?(4===y?(S=1-Wo(e,h,f),x=Wo(e,p,f),w=Wo(e,p,c),C=Wo(s,p,c),g=1-Wo(s,h,c),m=1-Wo(e,h,c)):(S=Wo(s,f,h),x=1-Wo(s,f,p),w=1-Wo(s,c,p),C=1-Wo(e,c,p),g=Wo(e,c,h),m=Wo(s,c,h)),I.push(ko[l]),I.push(jo[l]),I.push(Uo[l])):85===l&&(b=1,S=0,x=1,_=0,w=0,C=1,g=0,m=1),(g<0||g>1||m<0||m>1||b<0||b>1||x<0||x>1||w<0||w>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+y+" "+g+" "+m+" "+b+" "+S+" "+x+" "+_+" "+w+" "+C),o.cells[a][u]={cval:l,cval_real:d,flipped:y,topleft:g,topright:m,righttop:b,rightbottom:S,bottomright:x,bottomleft:_,leftbottom:w,lefttop:C,edges:I}}}}}return o}(t,e,r);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],r=0;return t.cells.forEach(function(t,n){t.forEach(function(t,i){if(void 0!==t){var o=Vo[t.cval](t);"object"==typeof o&&Xo(o)?"object"==typeof o[0]&&Xo(o[0])?"object"==typeof o[0][0]&&Xo(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=n}),e[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],r=t.rows,n=t.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Yo(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Zo(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=r||l<0||l>=n||void 0===t.cells[c][l]){var h=Ho(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof $i.successCallback&&$i.successCallback(u),u}var eo=64,ro=16,no=[],io=[],oo=[],so=[],ao=[],uo=[],lo=[],co=[],ho=[],fo=[],po=[],yo=[],vo=[],go=[],mo=[],_o=[],xo=[],bo=[],So=[],Co=[],wo=[],Io=[],Po=[],Eo=[];lo[85]=fo[85]=-1,co[85]=po[85]=0,ho[85]=yo[85]=1,So[85]=Io[85]=1,Co[85]=Po[85]=0,wo[85]=Eo[85]=1,no[85]=so[85]=0,io[85]=ao[85]=-1,oo[85]=mo[85]=0,_o[85]=vo[85]=0,xo[85]=go[85]=1,uo[85]=bo[85]=1,Io[1]=Io[169]=0,Po[1]=Po[169]=-1,Eo[1]=Eo[169]=0,vo[1]=vo[169]=-1,go[1]=go[169]=0,mo[1]=mo[169]=0,fo[4]=fo[166]=0,po[4]=po[166]=-1,yo[4]=yo[166]=1,_o[4]=_o[166]=1,xo[4]=xo[166]=0,bo[4]=bo[166]=0,lo[16]=lo[154]=0,co[16]=co[154]=1,ho[16]=ho[154]=1,so[16]=so[154]=1,ao[16]=ao[154]=0,uo[16]=uo[154]=1,So[64]=So[106]=0,Co[64]=Co[106]=1,wo[64]=wo[106]=0,no[64]=no[106]=-1,io[64]=io[106]=0,oo[64]=oo[106]=1,So[2]=So[168]=0,Co[2]=Co[168]=-1,wo[2]=wo[168]=1,Io[2]=Io[168]=0,Po[2]=Po[168]=-1,Eo[2]=Eo[168]=0,vo[2]=vo[168]=-1,go[2]=go[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,xo[2]=xo[168]=0,bo[2]=bo[168]=1,lo[8]=lo[162]=0,co[8]=co[162]=-1,ho[8]=ho[162]=0,fo[8]=fo[162]=0,po[8]=po[162]=-1,yo[8]=yo[162]=1,vo[8]=vo[162]=1,go[8]=go[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,xo[8]=xo[162]=0,bo[8]=bo[162]=0,lo[32]=lo[138]=0,co[32]=co[138]=1,ho[32]=ho[138]=1,fo[32]=fo[138]=0,po[32]=po[138]=1,yo[32]=yo[138]=0,no[32]=no[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=0,so[32]=so[138]=1,ao[32]=ao[138]=0,uo[32]=uo[138]=1,Io[128]=Io[42]=0,Po[128]=Po[42]=1,Eo[128]=Eo[42]=1,So[128]=So[42]=0,Co[128]=Co[42]=1,wo[128]=wo[42]=0,no[128]=no[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=1,so[128]=so[42]=-1,ao[128]=ao[42]=0,uo[128]=uo[42]=0,fo[5]=fo[165]=-1,po[5]=po[165]=0,yo[5]=yo[165]=0,Io[5]=Io[165]=1,Po[5]=Po[165]=0,Eo[5]=Eo[165]=0,_o[20]=_o[150]=0,xo[20]=xo[150]=1,bo[20]=bo[150]=1,so[20]=so[150]=0,ao[20]=ao[150]=-1,uo[20]=uo[150]=1,lo[80]=lo[90]=-1,co[80]=co[90]=0,ho[80]=ho[90]=1,So[80]=So[90]=1,Co[80]=Co[90]=0,wo[80]=wo[90]=1,vo[65]=vo[105]=0,go[65]=go[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,io[65]=io[105]=-1,oo[65]=oo[105]=0,lo[160]=lo[10]=-1,co[160]=co[10]=0,ho[160]=ho[10]=1,fo[160]=fo[10]=-1,po[160]=po[10]=0,yo[160]=yo[10]=0,Io[160]=Io[10]=1,Po[160]=Po[10]=0,Eo[160]=Eo[10]=0,So[160]=So[10]=1,Co[160]=Co[10]=0,wo[160]=wo[10]=1,_o[130]=_o[40]=0,xo[130]=xo[40]=1,bo[130]=bo[40]=1,vo[130]=vo[40]=0,go[130]=go[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=0,so[130]=so[40]=0,ao[130]=ao[40]=-1,uo[130]=uo[40]=1,fo[37]=fo[133]=0,po[37]=po[133]=1,yo[37]=yo[133]=1,Io[37]=Io[133]=0,Po[37]=Po[133]=1,Eo[37]=Eo[133]=0,no[37]=no[133]=-1,io[37]=io[133]=0,oo[37]=oo[133]=0,so[37]=so[133]=1,ao[37]=ao[133]=0,uo[37]=uo[133]=0,_o[148]=_o[22]=-1,xo[148]=xo[22]=0,bo[148]=bo[22]=0,Io[148]=Io[22]=0,Po[148]=Po[22]=-1,Eo[148]=Eo[22]=1,So[148]=So[22]=0,Co[148]=Co[22]=1,wo[148]=wo[22]=1,so[148]=so[22]=-1,ao[148]=ao[22]=0,uo[148]=uo[22]=1,lo[82]=lo[88]=0,co[82]=co[88]=-1,ho[82]=ho[88]=1,_o[82]=_o[88]=1,xo[82]=xo[88]=0,bo[82]=bo[88]=1,vo[82]=vo[88]=-1,go[82]=go[88]=0,mo[82]=mo[88]=1,So[82]=So[88]=0,Co[82]=Co[88]=-1,wo[82]=wo[88]=0,lo[73]=lo[97]=0,co[73]=co[97]=1,ho[73]=ho[97]=0,fo[73]=fo[97]=0,po[73]=po[97]=-1,yo[73]=yo[97]=0,vo[73]=vo[97]=1,go[73]=go[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=1,lo[145]=lo[25]=0,co[145]=co[25]=-1,ho[145]=ho[25]=0,vo[145]=vo[25]=1,go[145]=go[25]=0,mo[145]=mo[25]=1,Io[145]=Io[25]=0,Po[145]=Po[25]=1,Eo[145]=Eo[25]=1,so[145]=so[25]=-1,ao[145]=ao[25]=0,uo[145]=uo[25]=0,fo[70]=fo[100]=0,po[70]=po[100]=1,yo[70]=yo[100]=0,_o[70]=_o[100]=-1,xo[70]=xo[100]=0,bo[70]=bo[100]=1,So[70]=So[100]=0,Co[70]=Co[100]=-1,wo[70]=wo[100]=1,no[70]=no[100]=1,io[70]=io[100]=0,oo[70]=oo[100]=0,fo[101]=fo[69]=0,po[101]=po[69]=1,yo[101]=yo[69]=0,no[101]=no[69]=1,io[101]=io[69]=0,oo[101]=oo[69]=0,Io[149]=Io[21]=0,Po[149]=Po[21]=1,Eo[149]=Eo[21]=1,so[149]=so[21]=-1,ao[149]=ao[21]=0,uo[149]=uo[21]=0,_o[86]=_o[84]=-1,xo[86]=xo[84]=0,bo[86]=bo[84]=1,So[86]=So[84]=0,Co[86]=Co[84]=-1,wo[86]=wo[84]=1,lo[89]=lo[81]=0,co[89]=co[81]=-1,ho[89]=ho[81]=0,vo[89]=vo[81]=1,go[89]=go[81]=0,mo[89]=mo[81]=1,lo[96]=lo[74]=0,co[96]=co[74]=1,ho[96]=ho[74]=0,fo[96]=fo[74]=-1,po[96]=po[74]=0,yo[96]=yo[74]=1,So[96]=So[74]=1,Co[96]=Co[74]=0,wo[96]=wo[74]=0,no[96]=no[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=1,lo[24]=lo[146]=0,co[24]=co[146]=-1,ho[24]=ho[146]=1,_o[24]=_o[146]=1,xo[24]=xo[146]=0,bo[24]=bo[146]=1,vo[24]=vo[146]=0,go[24]=go[146]=1,mo[24]=mo[146]=1,so[24]=so[146]=0,ao[24]=ao[146]=-1,uo[24]=uo[146]=0,fo[6]=fo[164]=-1,po[6]=po[164]=0,yo[6]=yo[164]=1,_o[6]=_o[164]=-1,xo[6]=xo[164]=0,bo[6]=bo[164]=0,Io[6]=Io[164]=0,Po[6]=Po[164]=-1,Eo[6]=Eo[164]=1,So[6]=So[164]=1,Co[6]=Co[164]=0,wo[6]=wo[164]=0,vo[129]=vo[41]=0,go[129]=go[41]=1,mo[129]=mo[41]=1,Io[129]=Io[41]=0,Po[129]=Po[41]=1,Eo[129]=Eo[41]=0,no[129]=no[41]=-1,io[129]=io[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=0,ao[129]=ao[41]=-1,uo[129]=uo[41]=0,_o[66]=_o[104]=0,xo[66]=xo[104]=1,bo[66]=bo[104]=0,vo[66]=vo[104]=-1,go[66]=go[104]=0,mo[66]=mo[104]=1,So[66]=So[104]=0,Co[66]=Co[104]=-1,wo[66]=wo[104]=0,no[66]=no[104]=0,io[66]=io[104]=-1,oo[66]=oo[104]=1,lo[144]=lo[26]=-1,co[144]=co[26]=0,ho[144]=ho[26]=0,Io[144]=Io[26]=1,Po[144]=Po[26]=0,Eo[144]=Eo[26]=1,So[144]=So[26]=0,Co[144]=Co[26]=1,wo[144]=wo[26]=1,so[144]=so[26]=-1,ao[144]=ao[26]=0,uo[144]=uo[26]=1,fo[36]=fo[134]=0,po[36]=po[134]=1,yo[36]=yo[134]=1,_o[36]=_o[134]=0,xo[36]=xo[134]=1,bo[36]=bo[134]=0,no[36]=no[134]=0,io[36]=io[134]=-1,oo[36]=oo[134]=1,so[36]=so[134]=1,ao[36]=ao[134]=0,uo[36]=uo[134]=0,lo[9]=lo[161]=-1,co[9]=co[161]=0,ho[9]=ho[161]=0,fo[9]=fo[161]=0,po[9]=po[161]=-1,yo[9]=yo[161]=0,vo[9]=vo[161]=1,go[9]=go[161]=0,mo[9]=mo[161]=0,Io[9]=Io[161]=1,Po[9]=Po[161]=0,Eo[9]=Eo[161]=1,lo[136]=0,co[136]=1,ho[136]=1,fo[136]=0,po[136]=1,yo[136]=0,_o[136]=-1,xo[136]=0,bo[136]=1,vo[136]=-1,go[136]=0,mo[136]=0,Io[136]=0,Po[136]=-1,Eo[136]=0,So[136]=0,Co[136]=-1,wo[136]=1,no[136]=1,io[136]=0,oo[136]=0,so[136]=1,ao[136]=0,uo[136]=1,lo[34]=0,co[34]=-1,ho[34]=0,fo[34]=0,po[34]=-1,yo[34]=1,_o[34]=1,xo[34]=0,bo[34]=0,vo[34]=1,go[34]=0,mo[34]=1,Io[34]=0,Po[34]=1,Eo[34]=1,So[34]=0,Co[34]=1,wo[34]=0,no[34]=-1,io[34]=0,oo[34]=1,so[34]=-1,ao[34]=0,uo[34]=0,lo[35]=0,co[35]=1,ho[35]=1,fo[35]=0,po[35]=-1,yo[35]=1,_o[35]=1,xo[35]=0,bo[35]=0,vo[35]=-1,go[35]=0,mo[35]=0,Io[35]=0,Po[35]=-1,Eo[35]=0,So[35]=0,Co[35]=1,wo[35]=0,no[35]=-1,io[35]=0,oo[35]=1,so[35]=1,ao[35]=0,uo[35]=1,lo[153]=0,co[153]=1,ho[153]=1,vo[153]=-1,go[153]=0,mo[153]=0,Io[153]=0,Po[153]=-1,Eo[153]=0,so[153]=1,ao[153]=0,uo[153]=1,fo[102]=0,po[102]=-1,yo[102]=1,_o[102]=1,xo[102]=0,bo[102]=0,So[102]=0,Co[102]=1,wo[102]=0,no[102]=-1,io[102]=0,oo[102]=1,lo[155]=0,co[155]=-1,ho[155]=0,vo[155]=1,go[155]=0,mo[155]=1,Io[155]=0,Po[155]=1,Eo[155]=1,so[155]=-1,ao[155]=0,uo[155]=0,fo[103]=0,po[103]=1,yo[103]=0,_o[103]=-1,xo[103]=0,bo[103]=1,So[103]=0,Co[103]=-1,wo[103]=1,no[103]=1,io[103]=0,oo[103]=0,lo[152]=0,co[152]=1,ho[152]=1,_o[152]=-1,xo[152]=0,bo[152]=1,vo[152]=-1,go[152]=0,mo[152]=0,Io[152]=0,Po[152]=-1,Eo[152]=0,So[152]=0,Co[152]=-1,wo[152]=1,so[152]=1,ao[152]=0,uo[152]=1,lo[156]=0,co[156]=-1,ho[156]=1,_o[156]=1,xo[156]=0,bo[156]=1,vo[156]=-1,go[156]=0,mo[156]=0,Io[156]=0,Po[156]=-1,Eo[156]=0,So[156]=0,Co[156]=1,wo[156]=1,so[156]=-1,ao[156]=0,uo[156]=1,lo[137]=0,co[137]=1,ho[137]=1,fo[137]=0,po[137]=1,yo[137]=0,vo[137]=-1,go[137]=0,mo[137]=0,Io[137]=0,Po[137]=-1,Eo[137]=0,no[137]=1,io[137]=0,oo[137]=0,so[137]=1,ao[137]=0,uo[137]=1,lo[139]=0,co[139]=1,ho[139]=1,fo[139]=0,po[139]=-1,yo[139]=0,vo[139]=1,go[139]=0,mo[139]=0,Io[139]=0,Po[139]=1,Eo[139]=0,no[139]=-1,io[139]=0,oo[139]=0,so[139]=1,ao[139]=0,uo[139]=1,lo[98]=0,co[98]=-1,ho[98]=0,fo[98]=0,po[98]=-1,yo[98]=1,_o[98]=1,xo[98]=0,bo[98]=0,vo[98]=1,go[98]=0,mo[98]=1,So[98]=0,Co[98]=1,wo[98]=0,no[98]=-1,io[98]=0,oo[98]=1,lo[99]=0,co[99]=1,ho[99]=0,fo[99]=0,po[99]=-1,yo[99]=1,_o[99]=1,xo[99]=0,bo[99]=0,vo[99]=-1,go[99]=0,mo[99]=1,So[99]=0,Co[99]=-1,wo[99]=0,no[99]=1,io[99]=0,oo[99]=1,fo[38]=0,po[38]=-1,yo[38]=1,_o[38]=1,xo[38]=0,bo[38]=0,Io[38]=0,Po[38]=1,Eo[38]=1,So[38]=0,Co[38]=1,wo[38]=0,no[38]=-1,io[38]=0,oo[38]=1,so[38]=-1,ao[38]=0,uo[38]=0,fo[39]=0,po[39]=1,yo[39]=1,_o[39]=-1,xo[39]=0,bo[39]=0,Io[39]=0,Po[39]=-1,Eo[39]=1,So[39]=0,Co[39]=1,wo[39]=0,no[39]=-1,io[39]=0,oo[39]=1,so[39]=1,ao[39]=0,uo[39]=0;var Mo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Lo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},No=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},To=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ro=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ao=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Fo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Do=[],ko=[],jo=[],Bo=[],Go=[],Uo=[],qo=[],zo=[];Bo[1]=Go[1]=18,Bo[169]=Go[169]=18,jo[4]=ko[4]=12,jo[166]=ko[166]=12,Do[16]=zo[16]=4,Do[154]=zo[154]=4,Uo[64]=qo[64]=22,Uo[106]=qo[106]=22,jo[2]=Uo[2]=17,Bo[2]=Go[2]=18,jo[168]=Uo[168]=17,Bo[168]=Go[168]=18,Do[8]=Bo[8]=9,ko[8]=jo[8]=12,Do[162]=Bo[162]=9,ko[162]=jo[162]=12,Do[32]=zo[32]=4,ko[32]=qo[32]=1,Do[138]=zo[138]=4,ko[138]=qo[138]=1,Go[128]=zo[128]=21,Uo[128]=qo[128]=22,Go[42]=zo[42]=21,Uo[42]=qo[42]=22,ko[5]=Go[5]=14,ko[165]=Go[165]=14,jo[20]=zo[20]=6,jo[150]=zo[150]=6,Do[80]=Uo[80]=11,Do[90]=Uo[90]=11,Bo[65]=qo[65]=3,Bo[105]=qo[105]=3,Do[160]=Uo[160]=11,ko[160]=Go[160]=14,Do[10]=Uo[10]=11,ko[10]=Go[10]=14,jo[130]=zo[130]=6,Bo[130]=qo[130]=3,jo[40]=zo[40]=6,Bo[40]=qo[40]=3,ko[101]=qo[101]=1,ko[69]=qo[69]=1,Go[149]=zo[149]=21,Go[21]=zo[21]=21,jo[86]=Uo[86]=17,jo[84]=Uo[84]=17,Do[89]=Bo[89]=9,Do[81]=Bo[81]=9,Do[96]=qo[96]=0,ko[96]=Uo[96]=15,Do[74]=qo[74]=0,ko[74]=Uo[74]=15,Do[24]=jo[24]=8,Bo[24]=zo[24]=7,Do[146]=jo[146]=8,Bo[146]=zo[146]=7,ko[6]=Uo[6]=15,jo[6]=Go[6]=16,ko[164]=Uo[164]=15,jo[164]=Go[164]=16,Bo[129]=zo[129]=7,Go[129]=qo[129]=20,Bo[41]=zo[41]=7,Go[41]=qo[41]=20,jo[66]=qo[66]=2,Bo[66]=Uo[66]=19,jo[104]=qo[104]=2,Bo[104]=Uo[104]=19,Do[144]=Go[144]=10,Uo[144]=zo[144]=23,Do[26]=Go[26]=10,Uo[26]=zo[26]=23,ko[36]=zo[36]=5,jo[36]=qo[36]=2,ko[134]=zo[134]=5,jo[134]=qo[134]=2,Do[9]=Go[9]=10,ko[9]=Bo[9]=13,Do[161]=Go[161]=10,ko[161]=Bo[161]=13,ko[37]=zo[37]=5,Go[37]=qo[37]=20,ko[133]=zo[133]=5,Go[133]=qo[133]=20,jo[148]=Go[148]=16,Uo[148]=zo[148]=23,jo[22]=Go[22]=16,Uo[22]=zo[22]=23,Do[82]=jo[82]=8,Bo[82]=Uo[82]=19,Do[88]=jo[88]=8,Bo[88]=Uo[88]=19,Do[73]=qo[73]=0,ko[73]=Bo[73]=13,Do[97]=qo[97]=0,ko[97]=Bo[97]=13,Do[145]=Bo[145]=9,Go[145]=zo[145]=21,Do[25]=Bo[25]=9,Go[25]=zo[25]=21,ko[70]=qo[70]=1,jo[70]=Uo[70]=17,ko[100]=qo[100]=1,jo[100]=Uo[100]=17,Do[34]=Bo[34]=9,ko[34]=jo[34]=12,Go[34]=zo[34]=21,Uo[34]=qo[34]=22,Do[136]=zo[136]=4,ko[136]=qo[136]=1,jo[136]=Uo[136]=17,Bo[136]=Go[136]=18,Do[35]=zo[35]=4,ko[35]=jo[35]=12,Bo[35]=Go[35]=18,Uo[35]=qo[35]=22,Do[153]=zo[153]=4,Bo[153]=Go[153]=18,ko[102]=jo[102]=12,Uo[102]=qo[102]=22,Do[155]=Bo[155]=9,Go[155]=zo[155]=23,ko[103]=qo[103]=1,jo[103]=Uo[103]=17,Do[152]=zo[152]=4,jo[152]=Uo[152]=17,Bo[152]=Go[152]=18,Do[156]=jo[156]=8,Bo[156]=Go[156]=18,Uo[156]=zo[156]=23,Do[137]=zo[137]=4,ko[137]=qo[137]=1,Bo[137]=Go[137]=18,Do[139]=zo[139]=4,ko[139]=Bo[139]=13,Go[139]=qo[139]=20,Do[98]=Bo[98]=9,ko[98]=jo[98]=12,Uo[98]=qo[98]=22,Do[99]=qo[99]=0,ko[99]=jo[99]=12,Bo[99]=Uo[99]=19,ko[38]=jo[38]=12,Go[38]=zo[38]=21,Uo[38]=qo[38]=22,ko[39]=zo[39]=5,jo[39]=Go[39]=16,Uo[39]=qo[39]=22;var Vo=[];function Wo(t,e,r){return(t-e)/(r-e)}function Xo(t){return t.constructor.toString().indexOf("Array")>-1}function Ho(t,e,r,n,i,o){for(var s=t.cells[r][e],a=s.cval_real,u=e+n,l=r+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=n,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)c.push([u,l]),n=-1,i=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+1,l]),n=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),n=0,i=1,o=0,h=!0;break}c.push([u,l]),n=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&ro)){if(a&eo){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),n=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}else c.push([u+1,l+1]),n=1,i=0,o=1;else if(-1===n)if(0===o){if(!(a&eo)){if(1&a){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),n=1,i=0,o=1,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),n=0,i=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}else{if(!(4&a)){if(a&ro){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),n=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===n)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])n=0,i=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),n=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&eo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])n=0,i=1,o=0;else{if(!(a&ro)){c.push([u+s.topleft,l+1]),n=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),n=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])n=1,i=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),n=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),n=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])n=-1,i=0,o=0;else{if(!(a&eo)){c.push([u,l+s.leftbottom]),n=1,i=0,o=0,h=!0;break}c.push([u,l+1]),n=0,i=1,o=0}}if(l+=i,(u+=n)===e&&l===r)break}return{path:c,i:u,j:l,x:n,y:i,o:o}}function Yo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],r=t.cval_real;switch(e){case 0:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return r&ro?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return r&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&r?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return r&eo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return r&eo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return r&eo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return r&ro?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return r&eo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return r&ro?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Zo(t,e,r,n){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(n){case 0:i=ko[l],s=fo[l],a=po[l],u=yo[l];break;default:i=Do[l],s=lo[l],a=co[l],u=ho[l]}break;case 1:switch(n){case 0:i=Go[l],s=Io[l],a=Po[l],u=Eo[l];break;default:i=Uo[l],s=So[l],a=Co[l],u=wo[l]}break;default:switch(r){case-1:switch(n){case 0:i=qo[l],s=no[l],a=io[l],u=oo[l];break;default:i=zo[l],s=so[l],a=ao[l],u=uo[l]}break;case 1:switch(n){case 0:i=Bo[l],s=vo[l],a=go[l],u=mo[l];break;default:i=jo[l],s=_o[l],a=xo[l],u=bo[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var r=e+1;r<t.edges.length;r++)t.edges[r-1]=t.edges[r];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&ro?(e=t.topleft,r=1):(e=1,r=t.righttop);break;case 1:4&l?(e=1,r=t.rightbottom):(e=t.topleft,r=1);break;case 2:4&l?(e=t.topleft,r=1):(e=t.bottomright,r=0);break;case 3:1&l?(e=t.bottomleft,r=0):(e=t.topleft,r=1);break;case 4:l&ro?(e=t.topright,r=1):(e=1,r=t.righttop);break;case 5:4&l?(e=1,r=t.rightbottom):(e=t.topright,r=1);break;case 6:4&l?(e=t.topright,r=1):(e=t.bottomright,r=0);break;case 7:1&l?(e=t.bottomleft,r=0):(e=t.topright,r=1);break;case 8:4&l?(e=1,r=t.righttop):(e=t.bottomright,r=0);break;case 9:1&l?(e=t.bottomleft,r=0):(e=1,r=t.righttop);break;case 10:1&l?(e=1,r=t.righttop):(e=0,r=t.leftbottom);break;case 11:l&eo?(e=0,r=t.lefttop):(e=1,r=t.righttop);break;case 12:4&l?(e=1,r=t.rightbottom):(e=t.bottomright,r=0);break;case 13:1&l?(e=t.bottomleft,r=0):(e=1,r=t.rightbottom);break;case 14:1&l?(e=1,r=t.rightbottom):(e=0,r=t.leftbottom);break;case 15:l&eo?(e=0,r=t.lefttop):(e=1,r=t.rightbottom);break;case 16:4&l?(e=0,r=t.leftbottom):(e=t.bottomright,r=0);break;case 17:l&eo?(e=0,r=t.lefttop):(e=t.bottomright,r=0);break;case 18:1&l?(e=t.bottomleft,r=0):(e=0,r=t.leftbottom);break;case 19:l&eo?(e=0,r=t.lefttop):(e=t.bottomleft,r=0);break;case 20:l&eo?(e=0,r=t.leftbottom):(e=t.topleft,r=1);break;case 21:l&ro?(e=t.topright,r=1):(e=0,r=t.leftbottom);break;case 22:l&eo?(e=0,r=t.lefttop):(e=t.topleft,r=1);break;case 23:l&ro?(e=t.topright,r=1):(e=0,r=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+r+" "+s+" "+a+" "+u)),{p:[e,r],x:s,y:a,o:u}}function Qo(t){var e=[],r=[];t.forEach(function(t){var n=zn(c([t]));r.push(n),e.push({ring:t,area:n})}),r.sort(function(t,e){return e-t});var n=[];return r.forEach(function(t){for(var r=0;r<e.length;r++)if(e[r].area===t){n.push(e[r].ring),e.splice(r,1);break}}),n}function Jo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),r=[];!$o(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var i=[];i.push(e[n].lrCoordinates),e[n].grouped=!0;for(var o=c([e[n].lrCoordinates]),s=n+1;s<e.length;s++){if(!e[s].grouped)Ko(c([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}r.push(i)}return r}function Ko(t,e){for(var r=Sr(t),n=0;n<r.features.length;n++)if(!ge(r.features[n],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ts(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(n||(n=br(t)),!1!==i&&void 0!==i||(t=Ie(t)),R(t,function(t){var r=Ui(n,t)+e,i=Fn(n,t),o=$(zi(n,i,r));t[0]=o[0],t[1]=o[1]})),t}function es(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(n)||"object"==typeof n;return!0!==i&&(t=Ie(t)),"FeatureCollection"!==t.type||o?rs(t,e,n):(k(t,function(r,i){t.features[i]=rs(r,e,n)}),t)}function rs(t,e,r){var n="Point"===ot(t);return r=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"==typeof e)return K(e);var r=t.bbox?t.bbox:J(t),n=r[0],i=r[1],o=r[2],s=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return xr(t);case void 0:case null:case"centroid":return br(t);default:throw new Error("invalid origin")}}(t,r),1===e||n||R(t,function(t){var n=Fn(r,t),i=Ui(r,t),o=$(zi(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function ns(t){var e=t[0],r=t[1];return[r[0]-e[0],r[1]-e[1]]}function is(t,e){return t[0]*e[1]-e[0]*t[1]}function os(t,e){return!function(t,e){return 0===is(ns(t),ns(e))}(t,e)&&function(t,e){var r,n,i=t[0],o=ns(t),s=e[0],a=ns(e),u=is(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(is((n=i,[(r=s)[0]-n[0],r[1]-n[1]]),a)/u,o))}(t,e)}function ss(t,e,r){var n=[],i=S(e,r),o=$(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var r=(l=t,c=o[e+1],h=i,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),p=l[0]+h*(c[1]-l[1])/f,d=c[0]+h*(c[1]-l[1])/f,y=l[1]+h*(l[0]-c[0])/f,v=c[1]+h*(l[0]-c[0])/f,[[p,y],[d,v]]);if(n.push(r),e>0){var a=n[e-1],u=os(r,a);!1!==u&&(a[1]=u,r[0]=u),s.push(a[0]),e===o.length-2&&(s.push(r[0]),s.push(r[1]))}2===o.length&&(s.push(r[0]),s.push(r[1]))}var l,c,h,f,p,d,y,v}),f(s,t.properties)}function as(t,e,r){var n=e[0]-t[0],i=e[1]-t[1],o=r[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(n*(r[1]-e[1])-o*i)}function us(t,e){return e.geometry.coordinates[0].every(function(e){return ge(u(e),t)})}Vo[1]=Vo[169]=Mo,Vo[4]=Vo[166]=Lo,Vo[16]=Vo[154]=No,Vo[64]=Vo[106]=To,Vo[168]=Vo[2]=Oo,Vo[162]=Vo[8]=Ro,Vo[138]=Vo[32]=Ao,Vo[42]=Vo[128]=Fo,Vo[5]=Vo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Vo[20]=Vo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Vo[80]=Vo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Vo[65]=Vo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[160]=Vo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Vo[130]=Vo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Vo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Vo[101]=Vo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Vo[149]=Vo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Vo[86]=Vo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Vo[89]=Vo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Vo[96]=Vo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[24]=Vo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Vo[6]=Vo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Vo[129]=Vo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Vo[66]=Vo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[144]=Vo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[36]=Vo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Vo[9]=Vo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Vo[37]=Vo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[148]=Vo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[82]=Vo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Vo[73]=Vo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Vo[145]=Vo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[70]=Vo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[34]=function(t){return[Fo(t),Ro(t)]},Vo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Vo[136]=function(t){return[Ao(t),Oo(t)]},Vo[153]=function(t){return[No(t),Mo(t)]},Vo[102]=function(t){return[Lo(t),To(t)]},Vo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Vo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[152]=function(t){return[No(t),Oo(t)]},Vo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Vo[137]=function(t){return[Ao(t),Mo(t)]},Vo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Vo[98]=function(t){return[Ro(t),To(t)]},Vo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Vo[38]=function(t){return[Lo(t),Fo(t)]},Vo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ls=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var n=e.to,i=r.to;if(n.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=as(t.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),cs=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return as(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),hs=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,r,n){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e},0),r=(0===e?this.length:e)-1,n=(e+1)%this.length,i=as(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return v(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=yr(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var r,n,i=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,c,h,f=e.getEnvelope();if((n&&(r=n.getEnvelope()),s=i,a=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),c=s.geometry.coordinates[0].map(function(t){return t[0]}),h=s.geometry.coordinates[0].map(function(t){return t[1]}),Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&us(f,i)){for(var p=t.map(function(t){return t.from.coordinates}),d=void 0,y=function(t){e.some(function(e){return r=t,n=e.from.coordinates,r[0]===n[0]&&r[1]===n[1];var r,n})||(d=t)},v=0,g=p;v<g.length;v++){y(g[v])}d&&e.inside(u(d))&&(n&&!us(r,f)||(n=e))}}),n},t.prototype.inside=function(t){return ge(t,this.toPolygon())},t}();var fs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var r=new t;return q(e,function(t){rt(t,"LineString","Graph::fromGeoJson"),A(t,function(t,e){if(t){var n=r.getNode(t),i=r.getNode(e);r.addEdge(n,i)}return e})}),r},t.prototype.getNode=function(t){var e=ls.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new ls(t)),r},t.prototype.addEdge=function(t,e){var r=new cs(t,e),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),r.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var r,n,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(n=l),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var n=r;do{n.label=e,n=n.next}while(!r.isEqual(n));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(r){t._computeNextCCWEdges(r,e.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],r=t,n=function(){var n=0;r.from.getOuterEdges().forEach(function(e){e.label===t.label&&++n}),n>1&&e.push(r.from),r=r.next};do{n()}while(!t.isEqual(r));return e},t.prototype._findEdgeRing=function(t){var e=t,r=new hs;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function ps(t,e){var r=!0;return q(t,function(t){q(e,function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!ds(e,t);case"Polygon":return!ge(t,e)}break;case"LineString":switch(e.type){case"Point":return!ds(t,e);case"LineString":return!function(t,e){if(On(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!ys(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ge(e,t);case"LineString":return!ys(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++){if(ge(n[r],e))return!0}for(var i=0,o=e.coordinates[0];i<o.length;i++){if(ge(o[i],t))return!0}if(On(Ii(t),Ii(e)).features.length>0)return!0;return!1}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)})}),r}function ds(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(vs(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function ys(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(ge(n[r],t))return!0}return On(e,Ii(t)).features.length>0}function vs(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==n*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}function gs(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function _s(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function xs(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Cs(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function bs(t,e){return On(t,Pi(e)).features.length>0}function Ss(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&(!r||!n);o++)ge(u(t.coordinates[o]),e)?r=!0:n=!0;return n&&r}function Cs(t,e,r,n){var i=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(n?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<r[0]&&r[0]<e[0]:e[0]<r[0]&&r[0]<t[0]:a>0?t[1]<r[1]&&r[1]<e[1]:e[1]<r[1]&&r[1]<t[1])}var ws=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Es};function Is(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Ps(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Es(t,e){return ki(t,e,{strict:!0})}ws.prototype.compare=function(t,e){if(t.type!==e.type||!Ps(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,n=Is(t),i=Is(e);return n.every(function(t){return this.some(function(e){return r.compare(t,e)})},i)}}return!1},ws.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},ws.prototype.compareLine=function(t,e,r,n){if(!Ps(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},ws.prototype.fixStartIndex=function(t,e){for(var r,n=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){n=i;break}return n>=0&&(r=[].concat(t.slice(n,t.length),t.slice(1,n+1))),r},ws.prototype.comparePath=function(t,e){var r=this;return t.every(function(t,e){return r.compareCoord(t,this[e])},e)},ws.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),i=this;return r.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},n)}return!1},ws.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ws.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ws.prototype.removePseudo=function(t){return t};var Ms=ws;function Ls(t,e){var r=!1;return q(t,function(t){q(e,function(e){if(!0===r)return!0;r=!ps(t.geometry,e.geometry)})}),r}var Ns=Ut(function(t){function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r)}return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)}),Ts=Ut(function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<r;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)}),Os=Ut(function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)}),Rs=Ut(function(t){if(t.exports)var e=Os;function r(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}r.prototype.run=function(t,r,n,i){this._init(t,r,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},r.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},r.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}})},r.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++){if(this._regionQuery(t,r).length>=this.minPts)return r}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},r.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=r)}),As=Ut(function(t){t.exports&&(t.exports={DBSCAN:Ns,KMEANS:Ts,OPTICS:Rs,PriorityQueue:Os})});var Fs=function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i},Ds=Fs,ks=function(t,e,r){var n=Math.abs(t-e);return r?n:n*n},js=Fs,Bs=function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n},Gs=function(t,e){var r=t[0].length?Ds:ks,n=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o&&s.join("_");for(n.push(s);n.length<e;){for(var a=[],u=n.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=r(t[h],n[p]);d<=f&&(f=d)}a[h]=f}for(var y=0;y<i;y++)l+=a[y];for(var v=0;v<i;v++)c[v]={i:v,v:t[v],pr:a[v]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var g=1;g<i;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);n.push(c[_-1].v)}return n};function Us(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}var qs=function(t,e,r,n){var i=[],o=[],s=[],a=[],u=!1,l=n||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(r)i="kmrand"==r?Bs(t,e):"kmpp"==r?Gs(t,e):r;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{Us(e,0,p);for(var v=0;v<c;v++){for(var g=1/0,m=0,_=0;_<e;_++){(a=f?js(t[v],i[_]):Math.abs(t[v]-i[_]))<=g&&(g=a,m=_)}s[v]=m,p[m]++}for(var x=[],b=(o=[],0);b<e;b++)x[b]=f?Us(h,0,x[b]):0,o[b]=i[b];if(f){for(var S=0;S<e;S++)i[S]=[];for(var C=0;C<c;C++)for(var w=x[s[C]],I=t[C],P=0;P<h;P++)w[P]+=I[P];u=!0;for(var E=0;E<e;E++){for(var M=i[E],L=x[E],N=o[E],T=p[E],O=0;O<h;O++)M[O]=L[O]/T||0;if(u)for(var R=0;R<h;R++)if(N[R]!=M[R]){u=!1;break}}}else{for(var A=0;A<c;A++){x[s[A]]+=t[A]}for(var F=0;F<e;F++)i[F]=x[F]/p[F]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function zs(t,e){return C(Ui(t[0],t[1]))===C(Ui(e[0],e[1]))}function Vs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ws(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}var Xs={search:function(t,e,r,n){t.cleanDirty();var i=(n=n||{}).heuristic||Xs.heuristics.manhattan,o=n.closest||!1,s=new Zs(function(t){return t.f}),a=e;for(e.h=i(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return Ws(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,r),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Ws(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Hs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var n=0,i=t[r];n<i.length;n++){var o=new Ys(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function Ys(t,e,r){this.x=t,this.y=e,this.weight=r}function Zs(t){this.content=[],this.scoreFunction=t}function Qs(t,e){for(var r=0;r<e.features.length;r++)if(ge(t,e.features[r]))return!0;return!1}function Js(t){return function(){return t}}function Ks(t){return t[0]}function $s(t){return t[1]}function ta(){this._=null}function ea(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ra(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function na(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function ia(t){for(;t.L;)t=t.L;return t}function oa(t,e,r,n){var i=[null,null],o=La.push(i)-1;return i.left=t,i.right=e,r&&aa(i,t,e,r),n&&aa(i,e,t,n),Ea[t.index].halfedges.push(o),Ea[e.index].halfedges.push(o),i}function sa(t,e,r){var n=[e,r];return n.left=t,n}function aa(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function ua(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function la(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=n)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,r];o=[y,i]}else{if(u){if(u[1]<r)return}else u=[y,i];o=[y,r]}}else if(a=v-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(f<d){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ca(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function ha(t,e){return e[+(e.left!==t.site)]}function fa(t,e){return e[+(e.left===t.site)]}Hs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Xs.cleanNode(this.nodes[t])},Hs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Xs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Hs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Hs.prototype.neighbors=function(t){var e=[],r=t.x,n=t.y,i=this.grid;return i[r-1]&&i[r-1][n]&&e.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&e.push(i[r+1][n]),i[r]&&i[r][n-1]&&e.push(i[r][n-1]),i[r]&&i[r][n+1]&&e.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&e.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&e.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&e.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&e.push(i[r+1][n+1])),e},Hs.prototype.toString=function(){for(var t,e,r,n,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,n=(e=o[s]).length;r<n;r++)t.push(e[r].weight);i.push(t.join(" "))}return i.join("\n")},Ys.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ys.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ys.prototype.isWall=function(){return 0===this.weight},Zs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<n&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?n:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}},ta.prototype={constructor:ta,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=ia(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(ra(this,r),r=(t=r).U),r.C=!1,n.C=!0,na(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(na(this,r),r=(t=r).U),r.C=!1,n.C=!0,ra(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?ia(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=s,s.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ra(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ra(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ra(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var pa,da=[];function ya(){ea(this),this.x=this.y=this.arc=this.site=this.cy=null}function va(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,l=n[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-Ta)){var p=u*u+l*l,d=c*c+h*h,y=(h*p-l*d)/f,v=(u*d-c*p)/f,g=da.pop()||new ya;g.arc=t,g.site=i,g.x=y+s,g.y=(g.cy=v+a)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=Ma._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Ma.insert(m,g),m||(pa=g)}}}}function ga(t){var e=t.circle;e&&(e.P||(pa=e.N),Ma.remove(e),da.push(e),ea(e),t.circle=null)}var ma=[];function _a(){ea(this),this.edge=this.site=this.circle=null}function xa(t){var e=ma.pop()||new _a;return e.site=t,e}function ba(t){ga(t),Pa.remove(t),ma.push(t),ea(t)}function Sa(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];ba(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Na&&Math.abs(n-u.circle.cy)<Na;)o=u.P,a.unshift(u),ba(u),u=o;a.unshift(u),ga(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<Na&&Math.abs(n-l.circle.cy)<Na;)s=l.N,a.push(l),ba(l),l=s;a.push(l),ga(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],aa(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=oa(u.site,l.site,null,i),va(u),va(l)}function Ca(t){for(var e,r,n,i,o=t[0],s=t[1],a=Pa._;a;)if((n=wa(a,s)-o)>Na)a=a.L;else{if(!((i=o-Ia(a,s))>Na)){n>-Na?(e=a.P,r=a):i>-Na?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ea[t.index]={site:t,halfedges:[]}}(t);var u=xa(t);if(Pa.insert(e,u),e||r){if(e===r)return ga(e),r=xa(e.site),Pa.insert(u,r),u.edge=r.edge=oa(e.site,u.site),va(e),void va(r);if(r){ga(e),ga(r);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=r.site,y=d[0]-c,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,x=[(v*m-p*_)/g+c,(f*_-y*m)/g+h];aa(r.edge,l,d,x),u.edge=oa(l,t,null,x),r.edge=oa(t,d,null,x),va(e),va(r)}else u.edge=oa(e.site,u.site)}}function wa(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],l=u-e;if(!l)return a;var c=a-n,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+n:(n+a)/2}function Ia(t,e){var r=t.N;if(r)return wa(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var Pa,Ea,Ma,La,Na=1e-6,Ta=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function Ra(t,e){var r,n,i,o=t.sort(Oa).pop();for(La=[],Ea=new Array(t.length),Pa=new ta,Ma=new ta;;)if(i=pa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(Ca(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;Sa(i.arc)}if(function(){for(var t,e,r,n,i=0,o=Ea.length;i<o;++i)if((t=Ea[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=ca(t,La[e[r]]);for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,r,n){for(var i,o=La.length;o--;)la(i=La[o],t,e,r,n)&&ua(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>Na||Math.abs(i[0][1]-i[1][1])>Na)||delete La[o]}(s,a,u,l),function(t,e,r,n){var i,o,s,a,u,l,c,h,f,p,d,y,v=Ea.length,g=!0;for(i=0;i<v;++i)if(o=Ea[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)La[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=fa(o,La[u[a]]))[0],y=p[1],h=(c=ha(o,La[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>Na||Math.abs(y-f)>Na)&&(u.splice(a,0,La.push(sa(s,p,Math.abs(d-t)<Na&&n-y>Na?[t,Math.abs(h-t)<Na?f:n]:Math.abs(y-n)<Na&&r-d>Na?[Math.abs(f-n)<Na?h:r,n]:Math.abs(d-r)<Na&&y-e>Na?[r,Math.abs(h-r)<Na?f:e]:Math.abs(y-e)<Na&&d-t>Na?[Math.abs(f-e)<Na?h:t,e]:null))-1),++l);l&&(g=!1)}if(g){var m,_,x,b=1/0;for(i=0,g=null;i<v;++i)(o=Ea[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<b&&(b=x,g=o);if(g){var S=[t,e],C=[t,n],w=[r,n],I=[r,e];g.halfedges.push(La.push(sa(s=g.site,S,C))-1,La.push(sa(s,C,w))-1,La.push(sa(s,w,I))-1,La.push(sa(s,I,S))-1)}}for(i=0;i<v;++i)(o=Ea[i])&&(o.halfedges.length||delete Ea[i])}(s,a,u,l)}this.edges=La,this.cells=Ea,Pa=Ma=La=Ea=null}function Aa(t){return(t=t.slice()).push(t[0]),c([t])}function Fa(t,e,r,n){var i=(n=n||{}).steps||64,o=n.units||"kilometers",s=n.angle||0,a=n.pivot||t,u=n.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!L(n))throw new Error("options must be an object");if(!M(i))throw new Error("steps must be a number");if(!M(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var h=I(s);else e=zi(t,e,90,{units:o}),r=zi(t,r,0,{units:o}),e=K(e)[0]-l[0],r=K(r)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,y=e*r/Math.sqrt(Math.pow(r,2)+Math.pow(e,2)*Math.pow(Da(d),2)),v=e*r/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)/Math.pow(Da(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(v=-v),"degrees"===o){var g=y*Math.cos(h)+v*Math.sin(h),m=v*Math.cos(h)-y*Math.sin(h);y=g,v=m}f.push([y+l[0],v+l[1]])}return f.push(f[0]),"degrees"===o?c([f],u):ts(c([f],u),s,{pivot:a})}function Da(t){var e=t*Math.PI/180;return Math.tan(e)}function ka(t,e){void 0===e&&(e={});var r=0,n=0,i=0;return G(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!M(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&R(t,function(t){r+=t[0]*a,n+=t[1]*a,i+=a})}),u([r/i,n/i],e.properties,e)}function ja(t,e,r,n,i){var o=n.tolerance||.001,s=0,a=0,l=0,c=0;if(k(r,function(e){var r,n=null===(r=e.properties)||void 0===r?void 0:r.weight,i=null==n?1:n;if(!M(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*xe(e,t);0===o&&(o=1);var u=i/o;s+=e.geometry.coordinates[0]*u,a+=e.geometry.coordinates[1]*u,l+=u}}),c<1)throw new Error("no features to measure");var h=s/l,f=a/l;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(f-e[1])<o?u([h,f],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([h,f]),ja([h,f],t,r,n,i-1))}function Ba(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Ga(t,e){var r=0,n=0;R(t,function(i,o,s,a,u){u>r&&(r=u,n=o,e.push([]));var l=o-n,c=t.coordinates[u][l+1],h=i[0],f=i[1],p=c[0],d=c[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function Ua(t,e){var r=0,n=0,i=0;R(t,function(o,s,a,u,l){u>i&&(i=u,n=s,e.push([[]])),l>r&&(r=l,n=s,e[u].push([]));var c=s-n,h=t.coordinates[u][l][c+1],f=o[0],p=o[1],d=h[0],y=h[1];e[u][l].push([.75*f+.25*d,.75*p+.25*y]),e[u][l].push([.25*f+.75*d,.25*p+.75*y])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function qa(t,e,r){void 0===r&&(r=2);var n=K(t),i=K(e),o=n[0]-i[0],s=n[1]-i[1];return 1===r?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function za(t,e){var r=(e=e||{}).threshold||1e4,n=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];k(t,function(t){a.push(br(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=qa(a[l],a[c],n);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++){0!==(h=u[l][c])&&(u[l][c]=i?h<=r?1:0:h<=r?Math.pow(h,o):0)}if(s)for(l=0;l<a.length;l++){var f=u[l].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function Va(t){for(var e=0,r=0,n=t;r<n.length;r++){e+=n[r]}return e/t.length}function Wa(t,e){return void 0===e&&(e={}),Ha(t,"mercator",e)}function Xa(t,e){return void 0===e&&(e={}),Ha(t,"wgs84",e)}function Ha(t,e,r){void 0===r&&(r={});var n=(r=r||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&M(t[0])?t="mercator"===e?Ya(t):Za(t):(!0!==n&&(t=Ie(t)),R(t,function(t){var r="mercator"===e?Ya(t):Za(t);t[0]=r[0],t[1]=r[1]})),t}function Ya(t){var e=Math.PI/180,r=6378137,n=20037508.342789244,i=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function Za(t){var e=180/Math.PI,r=6378137;return[t[0]*e/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*e]}Ra.prototype={constructor:Ra,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return ha(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a,u,l,c=r.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&n<s.index&&n<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[n=s],s=null,i.halfedges.forEach(function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=n,null==r||c<=r*r?i.site:null}};var Qa=Object.freeze({__proto__:null,toMercator:Wa,toWgs84:Xa}),Ja=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};function Ka(t){return Array.isArray(t)?nu(t):t&&t.bbox?nu(t.bbox):[360*ru(),180*ru()]}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var r=[],n=0;n<t;n++)r.push(u(Ka(e.bbox)));return d(r)}function tu(t,e){void 0===e&&(e={}),null==t&&(t=1),M(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),M(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var r=[],n=function(t){var n,i=[],o=Ja(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,r){r[e]=e>0?t+r[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var r=Math.random();i.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((n=Ka(e.bbox),function(t){return[t[0]+n[0],t[1]+n[1]]})),r.push(c([i]))},i=0;i<t;i++)n();return d(r)}function eu(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!M(n)||void 0===n||n<2)&&(n=10),M(i)&&void 0!==i||(i=1e-4),M(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ka(r)],l=0;l<n-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(f(u))}return d(s)}function ru(){return Math.random()-.5}function nu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var iu=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:$a,randomPolygon:tu,randomLineString:eu});function ou(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var r=[];return k(t,function(t){lu(t.properties,e)&&r.push(t)}),d(r)}function su(t,e,r){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var n=uu(t,e),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);r(d(u),s,o)}}function au(t,e,r,n){var i=n;return su(t,e,function(t,e,o){i=0===o&&void 0===n?t:r(i,t,e,o)}),i}function uu(t,e){var r={};return k(t,function(t,n){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(r,o)?r[o].push(n):r[o]=[n]}}),r}function lu(t,e){if(void 0===t)return!1;var r=typeof e;if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!lu(t,e[n]))return!1;return!0}return cu(t,e)}function cu(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];if(t[i]!==e[i])return!1}return!0}function hu(t,e){if(!e)return{};if(!e.length)return{};for(var r={},n=0;n<e.length;n++){var i=e[n];Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}var fu=Object.freeze({__proto__:null,getCluster:ou,clusterEach:su,clusterReduce:au,createBins:uu,applyFilter:lu,propertiesContainsFilter:cu,filterProperties:hu}),pu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function du(t,e){return t>e?1:t<e?-1:0}function yu(t,e,r){for(var n=new pu(null,null),i=n,o=n;;){var s=r(t,e.key);if(s<0){if(null===e.left)break;if(r(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(r(t,e.right.key)>0){a=e.right;if(e.right=a.left,a.left=e,null===(e=a).right)break}i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function vu(t,e,r,n){var i=new pu(t,e);if(null===r)return i.left=i.right=null,i;var o=n(t,(r=yu(t,r,n)).key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function gu(t,e,r){var n=null,i=null;if(e){var o=r((e=yu(t,e,r)).key,t);0===o?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function mu(t,e,r,n,i){if(t){n(e+(r?"└── ":"├── ")+i(t)+"\n");var o=e+(r?"    ":"│   ");t.left&&mu(t.left,o,!1,n,i),t.right&&mu(t.right,o,!0,n,i)}}var _u=function(){function t(t){void 0===t&&(t=du),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=vu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var r=new pu(t,e);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var n=this._comparator,i=yu(t,this._root,n),o=n(t,i.key);return 0===o?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,r){var n;return null===e?null:0===r(t,(e=yu(t,e,r)).key)?(null===e.left?n=e.right:(n=yu(t,e.left,r)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=yu(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=yu(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):i=!0;return this},t.prototype.range=function(t,e,r,n){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,r=!1,n=0,i=[];!r;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},t.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?(r=e,e=e.left):e=e.right}return r},t.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?e=e.left:(r=e,e=e.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){var e=t,r=[],n=!1,i=new pu(null,null),o=i;for(;!n;)e?(r.push(e),e=e.left):r.length>0?e=(e=o=o.next=r.pop()).right:n=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var n=t.length,i=this._comparator;if(r&&Su(t,e,0,n-1,i),null===this._root)this._root=xu(t,e,0,n),this._size=n;else{var o=function(t,e,r){var n=new pu(null,null),i=n,o=t,s=e;for(;null!==o&&null!==s;)r(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;null!==o?i.next=o:null!==s&&(i.next=s);return n.next}(this.toList(),function(t,e){for(var r=new pu(null,null),n=r,i=0;i<t.length;i++)n=n.next=new pu(t[i],e[i]);return n.next=null,r.next}(t,e),i);n=this._size+n,this._root=bu({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return mu(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,r){var n=this._comparator,i=gu(t,this._root,n),o=i.left,s=i.right;n(t,e)<0?s=vu(e,r,s,n):o=vu(e,r,o,n),this._root=function(t,e,r){return null===e?t:(null===t||((e=yu(t.key,e,r)).left=t),e)}(o,s,n)},t.prototype.split=function(t){return gu(t,this._root,this._comparator)},t}();function xu(t,e,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),s=t[o],a=e[o],u=new pu(s,a);return u.left=xu(t,e,r,o),u.right=xu(t,e,o+1,n),u}return null}function bu(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),o=bu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=bu(t,i+1,r),s}return null}function Su(t,e,r,n,i){if(!(r>=n)){for(var o=t[r+n>>1],s=r-1,a=n+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}Su(t,e,r,a,i),Su(t,e,a+1,n,i)}}function Cu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Iu(t,e,r){return e&&wu(t.prototype,e),r&&wu(t,r),t}var Pu=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Eu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Mu=Number.EPSILON;void 0===Mu&&(Mu=Math.pow(2,-52));var Lu=Mu*Mu,Nu=function(t,e){if(-Mu<t&&t<Mu&&-Mu<e&&e<Mu)return 0;var r=t-e;return r*r<Lu*t*e?0:t<e?-1:1},Tu=function(){function t(){Cu(this,t),this.reset()}return Iu(t,[{key:"reset",value:function(){this.xRounder=new Ou,this.yRounder=new Ou}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ou=function(){function t(){Cu(this,t),this.tree=new _u,this.round(0)}return Iu(t,[{key:"round",value:function(t){var e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===Nu(e.key,r.key))return this.tree.remove(t),r.key;var n=this.tree.next(e);return null!==n&&0===Nu(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),t}(),Ru=new Tu,Au=function(t,e){return t.x*e.y-t.y*e.x},Fu=function(t,e){return t.x*e.x+t.y*e.y},Du=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=Au(n,i);return Nu(o,0)},ku=function(t){return Math.sqrt(Fu(t,t))},ju=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return Fu(i,n)/ku(i)/ku(n)},Bu=function(t,e,r){return 0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},Gu=function(t,e,r){return 0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},Uu=function(){function t(e,r){Cu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return Iu(t,null,[{key:"compare",value:function(e,r){var n=t.comparePoints(e.point,r.point);return 0!==n?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:zu.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Iu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,r=0,n=e.length;r<n;r++){var i=e[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var r=this.point.events[e];if(void 0===r.segment.consumedBy)for(var n=e+1;n<t;n++){var i=this.point.events[n];void 0===i.consumedBy&&(r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,r=this.point.events.length;e<r;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,r=new Map,n=function(n){var i,o,s,a,u,l=n.otherSE;r.set(n,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},Au(u,a)/ku(u)/ku(a)),cosine:ju(e.point,t.point,l.point)})};return function(t,e){r.has(t)||n(t),r.has(e)||n(e);var i=r.get(t),o=i.sine,s=i.cosine,a=r.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),qu=0,zu=function(){function t(e,r,n,i){Cu(this,t),this.id=++qu,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=n,this.windings=i}return Iu(t,null,[{key:"compare",value:function(t,e){var r=t.leftSE.point.x,n=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(r<n){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(r>n){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(i!==o){var v=u-s,g=i-r,m=l-a,_=o-n;if(v>g&&m<_)return 1;if(v<g&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Iu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/n.y,o=e.x+i*n.x;if(t.x===o)return 0;var s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),r=t.bbox(),n=Eu(e,r);if(null===n)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Pu(e,s)&&0===this.comparePoint(s),l=Pu(r,i)&&0===t.comparePoint(i),c=Pu(e,a)&&0===this.comparePoint(a),h=Pu(r,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,r,n){if(0===e.x)return Gu(r,n,t.x);if(0===n.x)return Gu(t,e,r.x);if(0===e.y)return Bu(r,n,t.y);if(0===n.y)return Bu(t,e,r.y);var i=Au(e,n);if(0==i)return null;var o={x:r.x-t.x,y:r.y-t.y},s=Au(o,e)/i,a=Au(o,n)/i;return{x:(t.x+a*e.x+(r.x+s*n.x))/2,y:(t.y+a*e.y+(r.y+s*n.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Pu(n,f)?Ru.round(f.x,f.y):null}},{key:"split",value:function(e){var r=[],n=void 0!==e.events,i=new Uu(e,!0),o=new Uu(e,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return Uu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Uu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,r=this.windings.length;e<r;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=t.compare(r,n);if(0!==i){if(i>0){var o=r;r=n,n=o}if(r.prev===n){var s=r;r=n,n=s}for(var a=0,u=n.rings.length;a<u;a++){var l=n.rings[a],c=n.windings[a],h=r.rings.indexOf(l);-1===h?(r.rings.push(l),r.windings.push(c)):r.windings[h]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),r.push(a)):r[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==r[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var v=0,g=l.length;v<g;v++){var m=l[v].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($u.type){case"union":var r=0===t.length,n=0===e.length;this._isInResult=r!==n;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$u.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat($u.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var i,o,s,a=Uu.comparePoints(e,r);if(a<0)i=e,o=r,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=r,o=e,s=-1}return new t(new Uu(i,!0),new Uu(o,!1),[n],[s])}}]),t}(),Vu=function(){function t(e,r,n){if(Cu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ru.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Ru.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(zu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(zu.fromRing(o,i,this))}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.segments.length;e<r;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),t}(),Wu=function(){function t(e,r){if(Cu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var o=new Vu(e[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,r=this.interiorRings.length;e<r;e++)for(var n=this.interiorRings[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Xu=function(){function t(e,r){if(Cu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var o=new Wu(e[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Iu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++)for(var n=this.polys[e].getSweepEvents(),i=0,o=n.length;i<o;i++)t.push(n[i]);return t}}]),t}(),Hu=function(){function t(e){Cu(this,t),this.events=e;for(var r=0,n=e.length;r<n;r++)e[r].segment.ringOut=this;this.poly=null}return Iu(t,null,[{key:"factory",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,v=0,g=h.length;v<g;v++)if(h[v].point===a.point){y=v;break}if(null===y){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(y)[0],x=l.splice(_.index);x.unshift(x[0].otherSE),r.push(new t(x.reverse()))}r.push(new t(l))}}return r}}]),Iu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],r=1,n=this.events.length-1;r<n;r++){var i=this.events[r].point,o=this.events[r+1].point;0!==Du(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Du(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,r=this.events.length;e<r;e++){var n=this.events[e];Uu.compare(t,n)>0&&(t=n)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Yu=function(){function t(e){Cu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Iu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,r=this.interiorRings.length;e<r;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),t}(),Zu=function(){function t(e){Cu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Iu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(!i.poly)if(i.isExteriorRing())e.push(new Yu(i));else{var o=i.enclosingRing();o.poly||e.push(new Yu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Qu=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu.compare;Cu(this,t),this.queue=e,this.tree=new _u(r),this.segments=[]}return Iu(t,[{key:"process",value:function(t){var e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=n,o=n,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)r.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),v=0,g=y.length;v<g;v++)r.push(y[v])}if(null!==u||null!==p){var m=null;if(null===u)m=p;else if(null===p)m=u;else{m=Uu.comparePoints(u,p)<=0?u:p}this.queue.remove(e.rightSE),r.push(e.rightSE);for(var _=e.split(m),x=0,b=_.length;x<b;x++)r.push(_[x])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var S=s.getIntersection(a);if(null!==S){if(!s.isAnEndpoint(S))for(var C=this._splitSafely(s,S),w=0,I=C.length;w<I;w++)r.push(C[w]);if(!a.isAnEndpoint(S))for(var P=this._splitSafely(a,S),E=0,M=P.length;E<M;E++)r.push(P[E])}}this.tree.remove(e)}return r}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.insert(t),n}}]),t}(),Ju="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ku="undefined"!=typeof t&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$u=new(function(){function t(){Cu(this,t)}return Iu(t,[{key:"run",value:function(t,e,r){$u.type=t,Ru.reset();for(var n=[new Xu(e,!0)],i=0,o=r.length;i<o;i++)n.push(new Xu(r[i],!1));if($u.numMultiPolys=n.length,"difference"===$u.type)for(var s=n[0],a=1;a<n.length;)null!==Eu(n[a].bbox,s.bbox)?a++:n.splice(a,1);if("intersection"===$u.type)for(var u=0,l=n.length;u<l;u++)for(var c=n[u],h=u+1,f=n.length;h<f;h++)if(null===Eu(c.bbox,n[h].bbox))return[];for(var p=new _u(Uu.compare),d=0,y=n.length;d<y;d++)for(var v=n[d].getSweepEvents(),g=0,m=v.length;g<m;g++)if(p.insert(v[g]),p.size>Ju)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Qu(p),x=p.size,b=p.pop();b;){var S=b.key;if(p.size===x){var C=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Ju)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var w=_.process(S),I=0,P=w.length;I<P;I++){var E=w[I];void 0===E.consumedBy&&p.insert(E)}x=p.size,b=p.pop()}Ru.reset();var M=Hu.factory(_.segments);return new Zu(M).getGeom()}}]),t}()),tl={union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $u.run("difference",t,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var el=function(){};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var rl=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nl=function(){},il={MAX_VALUE:{configurable:!0}};nl.isNaN=function(t){return Number.isNaN(t)},nl.doubleToLongBits=function(t){return t},nl.longBitsToDouble=function(t){return t},nl.isInfinite=function(t){return!Number.isFinite(t)},il.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,il);var ol=function(){},sl=function(){},al=function(){};function ul(){}var ll=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},cl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ll.prototype.setOrdinate=function(t,e){switch(t){case ll.X:this.x=e;break;case ll.Y:this.y=e;break;case ll.Z:this.z=e;break;default:throw new rl("Invalid ordinate index: "+t)}},ll.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!el.equalsWithTolerance(this.x,e.x,r)&&!!el.equalsWithTolerance(this.y,e.y,r)}},ll.prototype.getOrdinate=function(t){switch(t){case ll.X:return this.x;case ll.Y:return this.y;case ll.Z:return this.z}throw new rl("Invalid ordinate index: "+t)},ll.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nl.isNaN(this.z))&&nl.isNaN(t.z)},ll.prototype.equals=function(t){return t instanceof ll&&this.equals2D(t)},ll.prototype.equalInZ=function(t,e){return el.equalsWithTolerance(this.z,t.z,e)},ll.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ll.prototype.clone=function(){},ll.prototype.copy=function(){return new ll(this)},ll.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ll.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},ll.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},ll.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+ll.hashCode(this.x))+ll.hashCode(this.y)},ll.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ll.prototype.interfaces_=function(){return[ol,sl,ul]},ll.prototype.getClass=function(){return ll},ll.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nl.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},cl.DimensionalComparator.get=function(){return hl},cl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},cl.NULL_ORDINATE.get=function(){return nl.NaN},cl.X.get=function(){return 0},cl.Y.get=function(){return 1},cl.Z.get=function(){return 2},Object.defineProperties(ll,cl);var hl=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new rl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};hl.prototype.compare=function(t,e){var r=t,n=e,i=hl.compare(r.x,n.x);if(0!==i)return i;var o=hl.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:hl.compare(r.z,n.z)},hl.prototype.interfaces_=function(){return[al]},hl.prototype.getClass=function(){return hl},hl.compare=function(t,e){return t<e?-1:t>e?1:nl.isNaN(t)?nl.isNaN(e)?0:-1:nl.isNaN(e)?1:0};var fl=function(){};fl.prototype.create=function(){},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var pl=function(){},dl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLocationSymbol=function(t){switch(t){case pl.EXTERIOR:return"e";case pl.BOUNDARY:return"b";case pl.INTERIOR:return"i";case pl.NONE:return"-"}throw new rl("Unknown location value: "+t)},dl.INTERIOR.get=function(){return 0},dl.BOUNDARY.get=function(){return 1},dl.EXTERIOR.get=function(){return 2},dl.NONE.get=function(){return-1},Object.defineProperties(pl,dl);var yl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},vl=function(){},gl={LOG_10:{configurable:!0}};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl},vl.log10=function(t){var e=Math.log(t);return nl.isInfinite(e)||nl.isNaN(e)?e:e/vl.LOG_10},vl.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},vl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},vl.wrap=function(t,e){return t<0?e- -t%e:t%e},vl.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=t;return e>n&&(n=e),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},vl.average=function(t,e){return(t+e)/2},gl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(vl,gl);var ml=function(t){this.str=t};ml.prototype.append=function(t){this.str+=t},ml.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ml.prototype.toString=function(t){return this.str};var _l=function(t){this.value=t};_l.prototype.intValue=function(){return this.value},_l.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},_l.isNaN=function(t){return Number.isNaN(t)};var xl=function(){};xl.isWhitespace=function(t){return t<=32&&t>=0||127===t},xl.toUpperCase=function(t){return t.toUpperCase()};var bl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Sl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};bl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},bl.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=bl.magnitude(r._hi),i=bl.TEN.pow(n);(r=r.divide(i)).gt(bl.TEN)?(r=r.divide(bl.TEN),n+=1):r.lt(bl.ONE)&&(r=r.multiply(bl.TEN),n-=1);for(var o=n+1,s=new ml,a=bl.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),r=r.subtract(bl.valueOf(l)).multiply(bl.TEN),c&&r.selfAdd(bl.TEN);var f=!0,p=bl.magnitude(r._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=n,s.toString()},bl.prototype.sqr=function(){return this.multiply(this)},bl.prototype.doubleValue=function(){return this._hi+this._lo},bl.prototype.subtract=function(){if(arguments[0]instanceof bl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},bl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},bl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},bl.prototype.selfSubtract=function(){if(arguments[0]instanceof bl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},bl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},bl.prototype.min=function(t){return this.le(t)?this:t},bl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof bl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/r,h=(i=(l=bl.SPLIT*u)-(i=l-u))*(s=(h=bl.SPLIT*r)-(s=h-r))-(c=u*r)+i*(a=r-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*n)/r),this._hi=h,this._lo=u-h+l,this}},bl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},bl.prototype.divide=function(){if(arguments[0]instanceof bl){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;r=(o=this._hi/t._hi)-(e=(s=bl.SPLIT*o)-(e=s-o)),u=e*(n=(u=bl.SPLIT*t._hi)-(n=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-n)+r*n+r*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),c=o-u+s;return new bl(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return nl.isNaN(h)?bl.createNaN():bl.copy(this).selfDivide(h,0)}},bl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},bl.prototype.pow=function(t){if(0===t)return bl.valueOf(1);var e=new bl(this),r=bl.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},bl.prototype.ceil=function(){if(this.isNaN())return bl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new bl(t,e)},bl.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},bl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},bl.prototype.setValue=function(){if(arguments[0]instanceof bl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},bl.prototype.max=function(t){return this.ge(t)?this:t},bl.prototype.sqrt=function(){if(this.isZero())return bl.valueOf(0);if(this.isNegative())return bl.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=bl.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},bl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof bl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(r=i+a)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,y=null,v=null;p=this._hi+u,h=this._lo+l,d=p-(y=p-this._hi),f=h-(v=h-this._lo);var g=(c=p+(y=(d=u-y+(this._hi-d))+h))+(y=(f=l-v+(this._lo-f))+(y+(p-c))),m=y+(c-g);return this._hi=g,this._lo=m,this}},bl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof bl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=bl.SPLIT*this._hi)-this._hi,l=bl.SPLIT*r,i=u-i,o=this._hi-i,s=l-r;var c=(u=this._hi*r)+(l=i*(s=l-s)-u+i*(a=r-s)+o*s+o*a+(this._hi*n+this._lo*r)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},bl.prototype.selfSqr=function(){return this.selfMultiply(this)},bl.prototype.floor=function(){if(this.isNaN())return bl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new bl(t,e)},bl.prototype.negate=function(){return this.isNaN()?this:new bl(-this._hi,-this._lo)},bl.prototype.clone=function(){},bl.prototype.multiply=function(){if(arguments[0]instanceof bl){var t=arguments[0];return t.isNaN()?bl.createNaN():bl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nl.isNaN(e)?bl.createNaN():bl.copy(this).selfMultiply(e,0)}},bl.prototype.isNaN=function(){return nl.isNaN(this._hi)},bl.prototype.intValue=function(){return Math.trunc(this._hi)},bl.prototype.toString=function(){var t=bl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},bl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+bl.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+bl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},bl.prototype.reciprocal=function(){var t,e,r,n,i=null,o=null,s=null,a=null;t=(r=1/this._hi)-(i=(s=bl.SPLIT*r)-(i=s-r)),o=(a=bl.SPLIT*this._hi)-this._hi;var u=r+(s=(1-(n=r*this._hi)-(a=i*(o=a-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new bl(u,r-u+s)},bl.prototype.toSciNotation=function(){if(this.isZero())return bl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=bl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},bl.prototype.abs=function(){return this.isNaN()?bl.NaN:this.isNegative()?this.negate():new bl(this)},bl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},bl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},bl.prototype.add=function(){if(arguments[0]instanceof bl){var t=arguments[0];return bl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return bl.copy(this).selfAdd(e)}},bl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof bl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},bl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},bl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},bl.prototype.trunc=function(){return this.isNaN()?bl.NaN:this.isPositive()?this.floor():this.ceil()},bl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},bl.prototype.interfaces_=function(){return[ul,ol,sl]},bl.prototype.getClass=function(){return bl},bl.sqr=function(t){return bl.valueOf(t).selfMultiply(t)},bl.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return bl.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new bl(e)}},bl.sqrt=function(t){return bl.valueOf(t).sqrt()},bl.parse=function(t){for(var e=0,r=t.length;xl.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new bl,s=0,a=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,xl.isDigit(l)){var c=l-"0";o.selfMultiply(bl.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=_l.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=bl.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=bl.TEN.pow(-p);f=o.multiply(y)}return n?f.negate():f},bl.createNaN=function(){return new bl(nl.NaN,nl.NaN)},bl.copy=function(t){return new bl(t)},bl.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},bl.stringOfChar=function(t,e){for(var r=new ml,n=0;n<e;n++)r.append(t);return r.toString()},Sl.PI.get=function(){return new bl(3.141592653589793,1.2246467991473532e-16)},Sl.TWO_PI.get=function(){return new bl(6.283185307179586,2.4492935982947064e-16)},Sl.PI_2.get=function(){return new bl(1.5707963267948966,6.123233995736766e-17)},Sl.E.get=function(){return new bl(2.718281828459045,1.4456468917292502e-16)},Sl.NaN.get=function(){return new bl(nl.NaN,nl.NaN)},Sl.EPS.get=function(){return 1.23259516440783e-32},Sl.SPLIT.get=function(){return 134217729},Sl.MAX_PRINT_DIGITS.get=function(){return 32},Sl.TEN.get=function(){return bl.valueOf(10)},Sl.ONE.get=function(){return bl.valueOf(1)},Sl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Sl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(bl,Sl);var Cl=function(){},wl={DP_SAFE_EPSILON:{configurable:!0}};Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.orientationIndex=function(t,e,r){var n=Cl.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=bl.valueOf(e.x).selfAdd(-t.x),o=bl.valueOf(e.y).selfAdd(-t.y),s=bl.valueOf(r.x).selfAdd(-e.x),a=bl.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Cl.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},Cl.intersection=function(t,e,r,n){var i=bl.valueOf(n.y).selfSubtract(r.y).selfMultiply(bl.valueOf(e.x).selfSubtract(t.x)),o=bl.valueOf(n.x).selfSubtract(r.x).selfMultiply(bl.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=bl.valueOf(n.x).selfSubtract(r.x).selfMultiply(bl.valueOf(t.y).selfSubtract(r.y)),u=bl.valueOf(n.y).selfSubtract(r.y).selfMultiply(bl.valueOf(t.x).selfSubtract(r.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=bl.valueOf(t.x).selfAdd(bl.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=bl.valueOf(e.x).selfSubtract(t.x).selfMultiply(bl.valueOf(t.y).selfSubtract(r.y)),f=bl.valueOf(e.y).selfSubtract(t.y).selfMultiply(bl.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=bl.valueOf(r.y).selfAdd(bl.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new ll(c,d)},Cl.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=i-o;if(i>0){if(o<=0)return Cl.signum(s);n=i+o}else{if(!(i<0))return Cl.signum(s);if(o>=0)return Cl.signum(s);n=-i-o}var a=Cl.DP_SAFE_EPSILON*n;return s>=a||-s>=a?Cl.signum(s):2},Cl.signum=function(t){return t>0?1:t<0?-1:0},wl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Cl,wl);var Il=function(){},Pl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Pl.X.get=function(){return 0},Pl.Y.get=function(){return 1},Pl.Z.get=function(){return 2},Pl.M.get=function(){return 3},Il.prototype.setOrdinate=function(t,e,r){},Il.prototype.size=function(){},Il.prototype.getOrdinate=function(t,e){},Il.prototype.getCoordinate=function(){},Il.prototype.getCoordinateCopy=function(t){},Il.prototype.getDimension=function(){},Il.prototype.getX=function(t){},Il.prototype.clone=function(){},Il.prototype.expandEnvelope=function(t){},Il.prototype.copy=function(){},Il.prototype.getY=function(t){},Il.prototype.toCoordinateArray=function(){},Il.prototype.interfaces_=function(){return[sl]},Il.prototype.getClass=function(){return Il},Object.defineProperties(Il,Pl);var El=function(){},Ml=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(El),Ll=function(){};Ll.arraycopy=function(t,e,r,n,i){for(var o=0,s=e;s<e+i;s++)r[n+o]=t[s],o++},Ll.getProperty=function(t){return{"line.separator":"\n"}[t]};var Nl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=h.y-f.y,v=f.x-h.x,g=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=v*x-_*g,this.y=m*g-y*x,this.w=y*_-m*v}};Nl.prototype.getY=function(){var t=this.y/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getX=function(){var t=this.x/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Ml;return t},Nl.prototype.getCoordinate=function(){var t=new ll;return t.x=this.getX(),t.y=this.getY(),t},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(nl.isNaN(h)||nl.isInfinite(h)||nl.isNaN(f)||nl.isInfinite(f))throw new Ml;return new ll(h,f)};var Tl=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ol={serialVersionUID:{configurable:!0}};Tl.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Tl.prototype.equals=function(t){if(!(t instanceof Tl))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Tl.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Tl;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Tl(e,n,r,i)},Tl.prototype.isNull=function(){return this._maxx<this._minx},Tl.prototype.getMaxX=function(){return this._maxx},Tl.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Tl){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&(r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy)}},Tl.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ll){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},Tl.prototype.getMinY=function(){return this._miny},Tl.prototype.getMinX=function(){return this._minx},Tl.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Tl.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Tl.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Tl.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Tl.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Tl.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Tl.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Tl.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Tl.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Tl.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Tl.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Tl){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},Tl.prototype.centre=function(){return this.isNull()?null:new ll((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Tl.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Tl){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Tl.prototype.getMaxY=function(){return this._maxy},Tl.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},Tl.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+ll.hashCode(this._minx))+ll.hashCode(this._maxx))+ll.hashCode(this._miny))+ll.hashCode(this._maxy)},Tl.prototype.interfaces_=function(){return[ol,ul]},Tl.prototype.getClass=function(){return Tl},Tl.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(n.x,i.x),c=Math.max(n.x,i.x);return!(l>u)&&(!(c<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(n.y,i.y),c=Math.max(n.y,i.y),!(l>u)&&!(c<a)))}},Ol.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Tl,Ol);var Rl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Al=function(t){this.geometryFactory=t||new _h};Al.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=Rl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Rl.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],Dl[r]&&(e=Dl[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Al.prototype.write=function(t){return this.extractGeometry(t)},Al.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Fl[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Fl[e].apply(this,[t])+")"};var Fl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Fl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Fl.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Fl.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Fl.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Fl.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},Dl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Rl.spaces);return this.geometryFactory.createPoint(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Rl.trimParens,"$1"),n.push(Dl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Rl.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Rl.spaces),n.push(new ll(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var r=t.trim().split(Rl.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Rl.trimParens,"$1"),n.push(Dl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){var e,r,n;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Rl.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Rl.trimParens,"$1"),r=Dl.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===a?i=n:s.push(n);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var r=t.trim().split(Rl.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Rl.trimParens,"$1"),n.push(Dl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},kl=function(t){this.parser=new Al(t)};kl.prototype.write=function(t){return this.parser.write(t)},kl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var jl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Bl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jl),Gl=function(){};Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.shouldNeverReachHere=function(){if(0===arguments.length)Gl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Bl("Should never reach here"+(null!==t?": "+t:""))}},Gl.isTrue=function(){var t;if(1===arguments.length)Gl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Bl:new Bl(t)},Gl.equals=function(){var t,e,r;if(2===arguments.length)Gl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],r=arguments[2],!(e=arguments[1]).equals(t)))throw new Bl("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var Ul=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ll,this._intPt[1]=new ll,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ql={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ul.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Ul.prototype.getTopologySummary=function(){var t=new ml;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Ul.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},Ul.prototype.getIntersectionNum=function(){return this._result},Ul.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);e>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Ul.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Ul.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ul.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],r=0;r<this._result;r++)if(!t._intPt[r].equals2D(t._inputLines[e][0])&&!t._intPt[r].equals2D(t._inputLines[e][1]))return!0;return!1}},Ul.prototype.getIntersection=function(t){return this._intPt[t]},Ul.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Ul.prototype.hasIntersection=function(){return this._result!==Ul.NO_INTERSECTION},Ul.prototype.getEdgeDistance=function(t,e){return Ul.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Ul.prototype.isCollinear=function(){return this._result===Ul.COLLINEAR_INTERSECTION},Ul.prototype.toString=function(){return kl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Ul.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Ul.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Ul.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Gl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ul.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return Gl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ql.DONT_INTERSECT.get=function(){return 0},ql.DO_INTERSECT.get=function(){return 1},ql.COLLINEAR.get=function(){return 2},ql.NO_INTERSECTION.get=function(){return 0},ql.POINT_INTERSECTION.get=function(){return 1},ql.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Ul,ql);var zl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Tl(this._inputLines[0][0],this._inputLines[0][1]),r=new Tl(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,Tl.intersects(r,n,e)&&0===Xl.orientationIndex(r,n,e)&&0===Xl.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=Nl.intersection(t,r,n,i)}catch(s){if(!(s instanceof Ml))throw s;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new ll(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=Cl.intersection(t,e,r,n),s=this.isInSegmentEnvelopes(o);Ll.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Ll.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new ll(t),o=new ll(e),s=new ll(r),a=new ll(n),u=new ll;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=Tl.intersects(e,r,n),s=Tl.intersects(e,r,i),a=Tl.intersects(n,i,e),u=Tl.intersects(n,i,r);return o&&s?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!Tl.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=Xl.orientationIndex(e,r,n),s=Xl.orientationIndex(e,r,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Xl.orientationIndex(n,i,e),u=Xl.orientationIndex(n,i,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new ll(n):0===s?this._intPt[0]=new ll(i):0===a?this._intPt[0]=new ll(e):0===u&&(this._intPt[0]=new ll(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=Xl.distancePointLine(t,r,n),s=Xl.distancePointLine(e,r,n);return s<o&&(o=s,i=e),(s=Xl.distancePointLine(r,t,e))<o&&(o=s,i=r),(s=Xl.distancePointLine(n,t,e))<o&&(o=s,i=n),i},e}(Ul),Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return Vl.signOfDet2x2(n,i,o,s)},Vl.signOfDet2x2=function(t,e,r,n){var i=null,o=null,s=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(s=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=s*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(s=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=s*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Wl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Wl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Vl.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Wl.prototype.isPointInPolygon=function(){return this.getLocation()!==pl.EXTERIOR},Wl.prototype.getLocation=function(){return this._isPointOnSegment?pl.BOUNDARY:this._crossingCount%2==1?pl.INTERIOR:pl.EXTERIOR},Wl.prototype.isOnSegment=function(){return this._isPointOnSegment},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.locatePointInRing=function(){if(arguments[0]instanceof ll&&yl(arguments[1],Il)){for(var t=arguments[0],e=arguments[1],r=new Wl(t),n=new ll,i=new ll,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof ll&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Wl(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Xl=function(){},Hl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.orientationIndex=function(t,e,r){return Cl.orientationIndex(t,e,r)},Xl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y,s=t[n-1].y;e+=i*(s-o)}return e/2}if(yl(arguments[0],Il)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new ll,c=new ll,h=new ll;a.getCoordinate(0,c),a.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},Xl.distanceLineLine=function(t,e,r,n){if(t.equals(e))return Xl.distancePointLine(t,r,n);if(r.equals(n))return Xl.distancePointLine(n,t,e);var i=!1;if(Tl.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?vl.min(Xl.distancePointLine(t,r,n),Xl.distancePointLine(e,r,n),Xl.distancePointLine(r,t,e),Xl.distancePointLine(n,t,e)):0},Xl.isPointInRing=function(t,e){return Xl.locatePointInRing(t,e)!==pl.EXTERIOR},Xl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new ll;t.getCoordinate(0,n);for(var i=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,u=n.y,l=a-i,c=u-o;r+=Math.sqrt(l*l+c*c),i=a,o=u}return r},Xl.isCCW=function(t){var e=t.length-1;if(e<3)throw new rl("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==n);var u=t[s],l=t[a];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=Xl.computeOrientation(u,r,l),h=!1;return h=0===c?u.x>l.x:c>0,h},Xl.locatePointInRing=function(t,e){return Wl.locatePointInRing(t,e)},Xl.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},Xl.computeOrientation=function(t,e,r){return Xl.orientationIndex(t,e,r)},Xl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new rl("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=Xl.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Xl.isOnLine=function(t,e){for(var r=new zl,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},Hl.CLOCKWISE.get=function(){return-1},Hl.RIGHT.get=function(){return Xl.CLOCKWISE},Hl.COUNTERCLOCKWISE.get=function(){return 1},Hl.LEFT.get=function(){return Xl.COUNTERCLOCKWISE},Hl.COLLINEAR.get=function(){return 0},Hl.STRAIGHT.get=function(){return Xl.COLLINEAR},Object.defineProperties(Xl,Hl);var Yl=function(){};Yl.prototype.filter=function(t){},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var Zl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ql={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Zl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Zl.SORTINDEX_GEOMETRYCOLLECTION},Zl.prototype.getFactory=function(){return this._factory},Zl.prototype.getGeometryN=function(t){return this},Zl.prototype.getArea=function(){return 0},Zl.prototype.isRectangle=function(){return!1},Zl.prototype.equals=function(){if(arguments[0]instanceof Zl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Zl))return!1;var r=e;return this.equalsExact(r)}},Zl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Zl.prototype.geometryChanged=function(){this.apply(Zl.geometryChangedFilter)},Zl.prototype.geometryChangedAction=function(){this._envelope=null},Zl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Zl.prototype.getLength=function(){return 0},Zl.prototype.getNumGeometries=function(){return 1},Zl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},Zl.prototype.getUserData=function(){return this._userData},Zl.prototype.getSRID=function(){return this._SRID},Zl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Zl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Zl.SORTINDEX_GEOMETRYCOLLECTION)throw new rl("This method does not support GeometryCollection arguments")},Zl.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},Zl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Zl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Zl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Tl(this._envelope)},Zl.prototype.setSRID=function(t){this._SRID=t},Zl.prototype.setUserData=function(t){this._userData=t},Zl.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),s=i.compareTo(o);if(0!==s)return s}return r.hasNext()?1:n.hasNext()?-1:0},Zl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Zl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Zl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Zl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Zl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Zl.SORTINDEX_MULTIPOLYGON},Zl.prototype.interfaces_=function(){return[sl,ol,ul]},Zl.prototype.getClass=function(){return Zl},Zl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Zl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Ql.serialVersionUID.get=function(){return 0x799ea46522854c00},Ql.SORTINDEX_POINT.get=function(){return 0},Ql.SORTINDEX_MULTIPOINT.get=function(){return 1},Ql.SORTINDEX_LINESTRING.get=function(){return 2},Ql.SORTINDEX_LINEARRING.get=function(){return 3},Ql.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ql.SORTINDEX_POLYGON.get=function(){return 5},Ql.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ql.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ql.geometryChangedFilter.get=function(){return Jl},Object.defineProperties(Zl,Ql);var Jl=function(){};Jl.interfaces_=function(){return[Yl]},Jl.filter=function(t){t.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(t){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var $l=function(){},tc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$l.prototype.isInBoundary=function(t){},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},tc.Mod2BoundaryNodeRule.get=function(){return ec},tc.EndPointBoundaryNodeRule.get=function(){return rc},tc.MultiValentEndPointBoundaryNodeRule.get=function(){return nc},tc.MonoValentEndPointBoundaryNodeRule.get=function(){return ic},tc.MOD2_BOUNDARY_RULE.get=function(){return new ec},tc.ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},tc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},tc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ic},tc.OGC_SFS_BOUNDARY_RULE.get=function(){return $l.MOD2_BOUNDARY_RULE},Object.defineProperties($l,tc);var ec=function(){};ec.prototype.isInBoundary=function(t){return t%2==1},ec.prototype.interfaces_=function(){return[$l]},ec.prototype.getClass=function(){return ec};var rc=function(){};rc.prototype.isInBoundary=function(t){return t>0},rc.prototype.interfaces_=function(){return[$l]},rc.prototype.getClass=function(){return rc};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>1},nc.prototype.interfaces_=function(){return[$l]},nc.prototype.getClass=function(){return nc};var ic=function(){};ic.prototype.isInBoundary=function(t){return 1===t},ic.prototype.interfaces_=function(){return[$l]},ic.prototype.getClass=function(){return ic};var oc=function(){};function sc(t){this.message=t||""}oc.prototype.add=function(){},oc.prototype.addAll=function(){},oc.prototype.isEmpty=function(){},oc.prototype.iterator=function(){},oc.prototype.size=function(){},oc.prototype.toArray=function(){},oc.prototype.remove=function(){},sc.prototype=new Error,sc.prototype.name="IndexOutOfBoundsException";var ac=function(){};ac.prototype.hasNext=function(){},ac.prototype.next=function(){},ac.prototype.remove=function(){};var uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(oc);function lc(t){this.message=t||""}lc.prototype=new Error,lc.prototype.name="NoSuchElementException";var cc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,oc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new hc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new sc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(uc),hc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new lc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(ac),fc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var r=arguments[0],n=arguments[1],i=!1,o=r.iterator();o.hasNext();)e.add(o.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var r=arguments[0];t.prototype.add.call(this,r)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof ll&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ll){var y=arguments[0],v=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(y>0){var _=this.get(y-1);if(_.equals2D(v))return null}if(y<m){var x=this.get(y);if(x.equals2D(v))return null}}}t.prototype.add.call(this,y,v)}}else if(4===arguments.length){var b=arguments[0],S=arguments[1],C=arguments[2],w=arguments[3],I=1;C>w&&(I=-1);for(var P=C;P!==w;P+=I)e.add(b[P],S);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ll(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(cc),pc=function(){},dc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};dc.ForwardComparator.get=function(){return yc},dc.BidirectionalComparator.get=function(){return vc},dc.coordArrayType.get=function(){return new Array(0).fill(null)},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},pc.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(pc.indexOf(n,e)<0)return n}return null},pc.scroll=function(t,e){var r=pc.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);Ll.arraycopy(t,r,n,0,t.length-r),Ll.arraycopy(t,0,n,t.length-r,r),Ll.arraycopy(n,0,t,0,t.length)},pc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],i[s]))return!1;return!0}},pc.intersection=function(t,e){for(var r=new fc,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},pc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},pc.removeRepeatedPoints=function(t){return pc.hasRepeatedPoints(t)?new fc(t,!1).toCoordinateArray():t},pc.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},pc.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},pc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new ll(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ll(n[i+u])},pc.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},pc.envelope=function(t){for(var e=new Tl,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},pc.toCoordinateArray=function(t){return t.toArray(pc.coordArrayType)},pc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},pc.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},pc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},pc.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},pc.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},pc.extract=function(t,e,r){e=vl.clamp(e,0,t.length);var n=(r=vl.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,s=e;s<=r;s++)i[o++]=t[s];return i},Object.defineProperties(pc,dc);var yc=function(){};yc.prototype.compare=function(t,e){return pc.compare(t,e)},yc.prototype.interfaces_=function(){return[al]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=pc.compare(r,n);return pc.isEqualReversed(r,n)?0:i},vc.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=pc.increasingDirection(r),o=pc.increasingDirection(n),s=i>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[s].compareTo(n[a]);if(0!==l)return l;s+=i,a+=o}return 0},vc.prototype.interfaces_=function(){return[al]},vc.prototype.getClass=function(){return vc};var gc=function(){};gc.prototype.get=function(){},gc.prototype.put=function(){},gc.prototype.size=function(){},gc.prototype.values=function(){},gc.prototype.entrySet=function(){};var mc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gc);function _c(t){this.message=t||""}function xc(){}_c.prototype=new Error,_c.prototype.name="OperationNotSupported",xc.prototype=new oc,xc.prototype.contains=function(){};var bc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Sc(this)},e}(xc),Sc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new lc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _c},e}(ac);function Cc(t){return null===t?0:t.color}function wc(t){return null===t?null:t.parent}function Ic(t,e){null!==t&&(t.color=e)}function Pc(t){return null===t?null:t.left}function Ec(t){return null===t?null:t.right}function Mc(){this.root_=null,this.size_=0}Mc.prototype=new mc,Mc.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},Mc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},Mc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(wc(t)===Pc(wc(wc(t)))){var r=Ec(wc(wc(t)));1===Cc(r)?(Ic(wc(t),0),Ic(r,0),Ic(wc(wc(t)),1),t=wc(wc(t))):(t===Ec(wc(t))&&(t=wc(t),e.rotateLeft(t)),Ic(wc(t),0),Ic(wc(wc(t)),1),e.rotateRight(wc(wc(t))))}else{var n=Pc(wc(wc(t)));1===Cc(n)?(Ic(wc(t),0),Ic(n,0),Ic(wc(wc(t)),1),t=wc(wc(t))):(t===Pc(wc(t))&&(t=wc(t),e.rotateRight(t)),Ic(wc(t),0),Ic(wc(wc(t)),1),e.rotateLeft(wc(wc(t))))}this.root_.color=0},Mc.prototype.values=function(){var t=new cc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Mc.successor(e));)t.add(e.value);return t},Mc.prototype.entrySet=function(){var t=new bc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Mc.successor(e));)t.add(e);return t},Mc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Mc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Mc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Mc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},Mc.prototype.size=function(){return this.size_};var Lc=function(){};function Nc(){}function Tc(){this.array_=[],arguments[0]instanceof oc&&this.addAll(arguments[0])}Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Nc.prototype=new xc,Tc.prototype=new Nc,Tc.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},Tc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Tc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Tc.prototype.remove=function(t){throw new _c},Tc.prototype.size=function(){return this.array_.length},Tc.prototype.isEmpty=function(){return 0===this.array_.length},Tc.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},Tc.prototype.iterator=function(){return new Oc(this)};var Oc=function(t){this.treeSet_=t,this.position_=0};Oc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new lc;return this.treeSet_.array_[this.position_++]},Oc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oc.prototype.remove=function(){throw new _c};var Rc=function(){};Rc.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Rc.asList=function(t){for(var e=new cc,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var Ac=function(){},Fc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fc.P.get=function(){return 0},Fc.L.get=function(){return 1},Fc.A.get=function(){return 2},Fc.FALSE.get=function(){return-1},Fc.TRUE.get=function(){return-2},Fc.DONTCARE.get=function(){return-3},Fc.SYM_FALSE.get=function(){return"F"},Fc.SYM_TRUE.get=function(){return"T"},Fc.SYM_DONTCARE.get=function(){return"*"},Fc.SYM_P.get=function(){return"0"},Fc.SYM_L.get=function(){return"1"},Fc.SYM_A.get=function(){return"2"},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.toDimensionSymbol=function(t){switch(t){case Ac.FALSE:return Ac.SYM_FALSE;case Ac.TRUE:return Ac.SYM_TRUE;case Ac.DONTCARE:return Ac.SYM_DONTCARE;case Ac.P:return Ac.SYM_P;case Ac.L:return Ac.SYM_L;case Ac.A:return Ac.SYM_A}throw new rl("Unknown dimension value: "+t)},Ac.toDimensionValue=function(t){switch(xl.toUpperCase(t)){case Ac.SYM_FALSE:return Ac.FALSE;case Ac.SYM_TRUE:return Ac.TRUE;case Ac.SYM_DONTCARE:return Ac.DONTCARE;case Ac.SYM_P:return Ac.P;case Ac.SYM_L:return Ac.L;case Ac.SYM_A:return Ac.A}throw new rl("Unknown dimension symbol: "+t)},Object.defineProperties(Ac,Fc);var Dc=function(){};Dc.prototype.filter=function(t){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var kc=function(){};kc.prototype.filter=function(t,e){},kc.prototype.isDone=function(){},kc.prototype.isGeometryChanged=function(){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var jc=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new rl("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Tl,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Rc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ac.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ac.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new Tc(Rc.asList(this._geometries)),n=new Tc(Rc.asList(e._geometries));return this.compare(r,n)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),l=0;l<a&&l<u;){var c=t.getGeometryN(l),h=s.getGeometryN(l),f=c.compareToSameClass(h,o);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._geometries.length;r++)t._geometries[r].apply(e);else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(yl(arguments[0],Yl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Gl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(Zl),Bc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Zl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ac.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Gc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(jc),Gc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=$l.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Gc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Gc.prototype.getBoundary=function(){return this._geom instanceof Jc?this.boundaryLineString(this._geom):this._geom instanceof Bc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Gc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gc.prototype.computeBoundaryCoordinates=function(t){var e=this,r=new cc;this._endpointMap=new Mc;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&r.add(s.getKey())}return pc.toCoordinateArray(r)},Gc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Uc,this._endpointMap.put(t,e)),e.count++},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new Gc(t);return e.getBoundary()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Gc(r,n);return i.getBoundary()}};var Uc=function(){this.count=null};function qc(){}function zc(){}Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(){};function Wc(){}function Xc(){}function Hc(){}var Yc=function(){},Zc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},Yc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Wc,r=new qc(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",s=new zc(Yc.getStackTrace(n)),a=new Hc(s),u=0;u<i;u++)try{o+=a.readLine()+Yc.NEWLINE}catch(t){if(!(t instanceof Xc))throw t;Gl.shouldNeverReachHere()}return o}},Yc.split=function(t,e){for(var r=e.length,n=new cc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);n.add(s),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var a=new Array(n.size()).fill(null),u=0;u<a.length;u++)a[u]=n.get(u);return a},Yc.toString=function(){if(1===arguments.length){var t=arguments[0];return Yc.SIMPLE_ORDINATE_FORMAT.format(t)}},Yc.spaces=function(t){return Yc.chars(" ",t)},Zc.NEWLINE.get=function(){return Ll.getProperty("line.separator")},Zc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Vc("0.#")},Object.defineProperties(Yc,Zc);var Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Qc.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Qc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Il.X)===t.getOrdinate(e-1,Il.X)&&t.getOrdinate(0,Il.Y)===t.getOrdinate(e-1,Il.Y))},Qc.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!nl.isNaN(s)||!nl.isNaN(a)))return!1}return!0},Qc.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Qc.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Qc.copy(e,i-1,n,o,1);return n},Qc.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Qc.swap(t,n,e-n)},Qc.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Qc.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Qc.copyCoord(t,e+o,r,n+o)},Qc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new ml;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Yc.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Qc.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Qc.createClosedRing(t,e,4):e.getOrdinate(0,Il.X)===e.getOrdinate(r-1,Il.X)&&e.getOrdinate(0,Il.Y)===e.getOrdinate(r-1,Il.Y)?e:Qc.createClosedRing(t,e,r+1)},Qc.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Qc.copy(e,0,n,0,i);for(var o=i;o<r;o++)Qc.copy(e,0,n,o,1);return n};var Jc=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Tl:this._points.expandEnvelope(new Tl)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var r=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(r)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(r))>0&&Qc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ac.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Xl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Qc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=e,n=0,i=0;n<this._points.size()&&i<r._points.size();){var o=t._points.getCoordinate(n).compareTo(r._points.getCoordinate(i));if(0!==o)return o;n++,i++}return n<this._points.size()?1:i<r._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(yl(arguments[0],Kl))for(var e=arguments[0],r=0;r<this._points.size();r++)e.filter(t._points.getCoordinate(r));else if(yl(arguments[0],kc)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(t._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var o=arguments[0];o.filter(this)}else if(yl(arguments[0],Yl)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new Gc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new rl("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(Zl),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var $c=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Tl;var t=new Tl;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ac.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=r;return n.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(yl(arguments[0],Kl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(yl(arguments[0],kc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(yl(arguments[0],Dc)){var r=arguments[0];r.filter(this)}else if(yl(arguments[0],Yl)){var n=arguments[0];n.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Gl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(Zl),th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new rl("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new rl("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Xl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Xl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o===(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r,o=this._shell,s=i._shell;if(!o.equalsExact(s,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Rc.sort(this._holes)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];if(r.isEmpty())return null;var i=new Array(r.getCoordinates().length-1).fill(null);Ll.arraycopy(r.getCoordinates(),0,i,0,i.length);var o=pc.minCoordinate(r.getCoordinates());pc.scroll(i,o),Ll.arraycopy(i,0,r.getCoordinates(),0,i.length),r.getCoordinates()[i.length]=i[0],Xl.isCCW(r.getCoordinates())===n&&pc.reverse(r.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this._shell,n=e._shell;return r.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,l=a.compareToSameClass(u,o);if(0!==l)return l;for(var c=this.getNumInteriorRing(),h=s.getNumInteriorRing(),f=0;f<c&&f<h;){var p=t.getInteriorRingN(f),d=s.getInteriorRingN(f),y=p.compareToSameClass(d,o);if(0!==y)return y;f++}return f<c?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(yl(t,Kl)){this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}else if(yl(t,kc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(e._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(yl(t,Dc))t.filter(this);else if(yl(t,Yl)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(Zl),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Zl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ac.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(jc),nh=function(t){function e(e,r){e instanceof ll&&r instanceof _h&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Zl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ac.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Qc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new rl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new rl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Jc),ih=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Zl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new cc,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[th]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(jc),oh=function(t){this._factory=t||null,this._isUserDataCopied=!1},sh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};oh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},oh.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},oh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof eh?this.editPolygon(t,e):t instanceof $c||t instanceof Jc?e.edit(t,this._factory):(Gl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},oh.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new cc,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===rh?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Bc?this._factory.createMultiLineString(n.toArray([])):r.getClass()===ih?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},oh.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new cc,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(n,i.toArray([]))},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.GeometryEditorOperation=function(){},sh.NoOpGeometryOperation.get=function(){return ah},sh.CoordinateOperation.get=function(){return uh},sh.CoordinateSequenceOperation.get=function(){return lh},Object.defineProperties(oh,sh);var ah=function(){};ah.prototype.edit=function(t,e){return t},ah.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof nh?e.createLinearRing(r):t instanceof Jc?e.createLineString(r):t instanceof $c?r.length>0?e.createPoint(r[0]):e.createPoint():t},uh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var lh=function(){};lh.prototype.edit=function(t,e){return t instanceof nh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},lh.prototype.interfaces_=function(){return[oh.GeometryEditorOperation]},lh.prototype.getClass=function(){return lh};var ch=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var r=0;r<e;r++)t._coordinates[r]=new ll}else if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new ll}},hh={serialVersionUID:{configurable:!0}};ch.prototype.setOrdinate=function(t,e,r){switch(e){case Il.X:this._coordinates[t].x=r;break;case Il.Y:this._coordinates[t].y=r;break;case Il.Z:this._coordinates[t].z=r;break;default:throw new rl("invalid ordinateIndex")}},ch.prototype.size=function(){return this._coordinates.length},ch.prototype.getOrdinate=function(t,e){switch(e){case Il.X:return this._coordinates[t].x;case Il.Y:return this._coordinates[t].y;case Il.Z:return this._coordinates[t].z}return nl.NaN},ch.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},ch.prototype.getCoordinateCopy=function(t){return new ll(this._coordinates[t])},ch.prototype.getDimension=function(){return this._dimension},ch.prototype.getX=function(t){return this._coordinates[t].x},ch.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ch(t,this._dimension)},ch.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ch.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ch(t,this._dimension)},ch.prototype.toString=function(){if(this._coordinates.length>0){var t=new ml(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ch.prototype.getY=function(t){return this._coordinates[t].y},ch.prototype.toCoordinateArray=function(){return this._coordinates},ch.prototype.interfaces_=function(){return[Il,ul]},ch.prototype.getClass=function(){return ch},hh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ch,hh);var fh=function(){},ph={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fh.prototype.readResolve=function(){return fh.instance()},fh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ch(t)}if(yl(arguments[0],Il)){var e=arguments[0];return new ch(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new ch(r):new ch(r,n)}},fh.prototype.interfaces_=function(){return[fl,ul]},fh.prototype.getClass=function(){return fh},fh.instance=function(){return fh.instanceObject},ph.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ph.instanceObject.get=function(){return new fh},Object.defineProperties(fh,ph);var dh=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new cc,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new bc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(gc),yh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},vh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};yh.prototype.equals=function(t){if(!(t instanceof yh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},yh.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new _l(r).compareTo(new _l(n))},yh.prototype.getScale=function(){return this._scale},yh.prototype.isFloating=function(){return this._modelType===yh.FLOATING||this._modelType===yh.FLOATING_SINGLE},yh.prototype.getType=function(){return this._modelType},yh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===yh.FLOATING?t="Floating":this._modelType===yh.FLOATING_SINGLE?t="Floating-Single":this._modelType===yh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},yh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(nl.isNaN(t))return t;if(this._modelType===yh.FLOATING_SINGLE){return t}return this._modelType===yh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ll){var e=arguments[0];if(this._modelType===yh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},yh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===yh.FLOATING?t=16:this._modelType===yh.FLOATING_SINGLE?t=6:this._modelType===yh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},yh.prototype.setScale=function(t){this._scale=Math.abs(t)},yh.prototype.interfaces_=function(){return[ul,ol]},yh.prototype.getClass=function(){return yh},yh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},vh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},vh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(yh,vh);var gh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gh.prototype.readResolve=function(){return gh.nameToTypeMap.get(this._name)},gh.prototype.toString=function(){return this._name},gh.prototype.interfaces_=function(){return[ul]},gh.prototype.getClass=function(){return gh},mh.serialVersionUID.get=function(){return-552860263173159e4},mh.nameToTypeMap.get=function(){return new dh},Object.defineProperties(gh,mh),yh.Type=gh,yh.FIXED=new gh("FIXED"),yh.FLOATING=new gh("FLOATING"),yh.FLOATING_SINGLE=new gh("FLOATING SINGLE");var _h=function t(){this._precisionModel=new yh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?yl(arguments[0],fl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof yh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},xh={serialVersionUID:{configurable:!0}};_h.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ll(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ll(t.getMinX(),t.getMinY()),new ll(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ll(t.getMinX(),t.getMinY()),new ll(t.getMinX(),t.getMaxY()),new ll(t.getMaxX(),t.getMaxY()),new ll(t.getMaxX(),t.getMinY()),new ll(t.getMinX(),t.getMinY())]),null)},_h.prototype.createLineString=function(t){return t?t instanceof Array?new Jc(this.getCoordinateSequenceFactory().create(t),this):yl(t,Il)?new Jc(t,this):void 0:new Jc(this.getCoordinateSequenceFactory().create([]),this)},_h.prototype.createMultiLineString=function(){if(0===arguments.length)return new Bc(null,this);if(1===arguments.length){var t=arguments[0];return new Bc(t,this)}},_h.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(_h.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof eh)return this.createMultiPolygon(_h.toPolygonArray(t));if(a instanceof Jc)return this.createMultiLineString(_h.toLineStringArray(t));if(a instanceof $c)return this.createMultiPoint(_h.toPointArray(t));Gl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_h.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_h.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new $c(e,this)}}},_h.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_h.prototype.createPolygon=function(){if(0===arguments.length)return new eh(null,null,this);if(1===arguments.length){if(yl(arguments[0],Il)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nh){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new eh(n,i,this)}},_h.prototype.getSRID=function(){return this._SRID},_h.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},_h.prototype.createGeometry=function(t){return new oh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_h.prototype.getPrecisionModel=function(){return this._precisionModel},_h.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(yl(arguments[0],Il)){var e=arguments[0];return new nh(e,this)}}},_h.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ih(null,this);if(1===arguments.length){var t=arguments[0];return new ih(t,this)}},_h.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new rh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new rh(e,this)}if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(yl(arguments[0],Il)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),o=0;o<n.size();o++){var s=t.getCoordinateSequenceFactory().create(1,n.getDimension());Qc.copy(n,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},_h.prototype.interfaces_=function(){return[ul]},_h.prototype.getClass=function(){return _h},_h.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.getDefaultCoordinateSequenceFactory=function(){return fh.instance()},_h.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},xh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_h,xh);var bh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Sh=function(t){this.geometryFactory=t||new _h};Sh.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ch[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==bh.indexOf(r)?Ch[r].apply(this,[e.coordinates]):"GeometryCollection"===r?Ch[r].apply(this,[e.geometries]):Ch[r].apply(this,[e])},Sh.prototype.write=function(t){var e=t.getGeometryType();if(!wh[e])throw new Error("Geometry is not supported");return wh[e].apply(this,[t])};var Ch={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!Ch[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ch.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new ll(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ll(t[0],t[1]),new ll(t[2],t[1]),new ll(t[2],t[3]),new ll(t[0],t[3]),new ll(t[0],t[1])])},Point:function(t){var e=new ll(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ch.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ch.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ch.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ch.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],s=Ch.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(Ch.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},wh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=wh.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(wh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=wh.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=wh.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=wh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=wh.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(wh[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Ih=function(t){this.geometryFactory=t||new _h,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Sh(this.geometryFactory)};Ih.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===yh.FIXED&&this.reducePrecision(e),e},Ih.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var Ph=function(){this.parser=new Sh(this.geometryFactory)};Ph.prototype.write=function(t){return this.parser.write(t)};var Eh=function(){},Mh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Lh(t){this.message=t||""}function Nh(){this.array_=[]}Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.opposite=function(t){return t===Eh.LEFT?Eh.RIGHT:t===Eh.RIGHT?Eh.LEFT:t},Mh.ON.get=function(){return 0},Mh.LEFT.get=function(){return 1},Mh.RIGHT.get=function(){return 2},Object.defineProperties(Eh,Mh),Lh.prototype=new Error,Lh.prototype.name="EmptyStackException",Nh.prototype=new uc,Nh.prototype.add=function(t){return this.array_.push(t),!0},Nh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nh.prototype.push=function(t){return this.array_.push(t),t},Nh.prototype.pop=function(t){if(0===this.array_.length)throw new Lh;return this.array_.pop()},Nh.prototype.peek=function(){if(0===this.array_.length)throw new Lh;return this.array_[this.array_.length-1]},Nh.prototype.empty=function(){return 0===this.array_.length},Nh.prototype.isEmpty=function(){return this.empty()},Nh.prototype.search=function(t){return this.array_.indexOf(t)},Nh.prototype.size=function(){return this.array_.length},Nh.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var Th=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Th.prototype.getCoordinate=function(){return this._minCoord},Th.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},Th.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Gl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=Xl.computeOrientation(this._minCoord,r,e),i=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===Xl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===Xl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Th.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=Eh.LEFT;return r[e].y<r[e+1].y&&(n=Eh.RIGHT),n},Th.prototype.getEdge=function(){return this._orientedDe},Th.prototype.checkForRightmostCoordinate=function(t){for(var e=this,r=t.getEdge().getCoordinates(),n=0;n<r.length-1;n++)(null===e._minCoord||r[n].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=n,e._minCoord=r[n])},Th.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Th.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Gl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Eh.LEFT&&(this._orientedDe=this._minDe.getSym())},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Oh=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new ll(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(jl),Rh=function(){this.array_=[]};Rh.prototype.addLast=function(t){this.array_.push(t)},Rh.prototype.removeFirst=function(){return this.array_.shift()},Rh.prototype.isEmpty=function(){return 0===this.array_.length};var Ah=function(){this._finder=null,this._dirEdgeList=new cc,this._nodes=new cc,this._rightMostCoord=null,this._env=null,this._finder=new Th};Ah.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Ah.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ah.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Oh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ah.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Eh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ah.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ah.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Eh.RIGHT)>=1&&e.getDepth(Eh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ah.prototype.computeDepths=function(t){var e=new bc,r=new Rh,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},Ah.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ah.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Tl,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},Ah.prototype.addReachable=function(t){var e=new Nh;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},Ah.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Eh.LEFT,t.getDepth(Eh.RIGHT)),e.setDepth(Eh.RIGHT,t.getDepth(Eh.LEFT))},Ah.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},Ah.prototype.getNodes=function(){return this._nodes},Ah.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ah.prototype.interfaces_=function(){return[ol]},Ah.prototype.getClass=function(){return Ah};var Fh=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Eh.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Eh.ON]=s,this.location[Eh.LEFT]=a,this.location[Eh.RIGHT]=u}};Fh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Fh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==pl.NONE)return!1;return!0},Fh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===pl.NONE&&(this.location[e]=t)},Fh.prototype.isLine=function(){return 1===this.location.length},Fh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Eh.ON]=this.location[Eh.ON],e[Eh.LEFT]=pl.NONE,e[Eh.RIGHT]=pl.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===pl.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Fh.prototype.getLocations=function(){return this.location},Fh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Eh.LEFT];this.location[Eh.LEFT]=this.location[Eh.RIGHT],this.location[Eh.RIGHT]=t},Fh.prototype.toString=function(){var t=new ml;return this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Eh.LEFT])),t.append(pl.toLocationSymbol(this.location[Eh.ON])),this.location.length>1&&t.append(pl.toLocationSymbol(this.location[Eh.RIGHT])),t.toString()},Fh.prototype.setLocations=function(t,e,r){this.location[Eh.ON]=t,this.location[Eh.LEFT]=e,this.location[Eh.RIGHT]=r},Fh.prototype.get=function(t){return t<this.location.length?this.location[t]:pl.NONE},Fh.prototype.isArea=function(){return this.location.length>1},Fh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===pl.NONE)return!0;return!1},Fh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Eh.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Fh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(pl.NONE)},Fh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Fh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Dh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Fh(e),this.elt[1]=new Fh(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Fh(r.elt[0]),this.elt[1]=new Fh(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Fh(pl.NONE),this.elt[1]=new Fh(pl.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Fh(o,s,a),this.elt[1]=new Fh(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[1]=new Fh(pl.NONE,pl.NONE,pl.NONE),this.elt[u].setLocations(l,c,h)}};Dh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Dh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Dh.prototype.isNull=function(t){return this.elt[t].isNull()},Dh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Dh.prototype.isLine=function(t){return this.elt[t].isLine()},Dh.prototype.merge=function(t){for(var e=this,r=0;r<2;r++)null===e.elt[r]&&null!==t.elt[r]?e.elt[r]=new Fh(t.elt[r]):e.elt[r].merge(t.elt[r])},Dh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Dh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Eh.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Dh.prototype.toString=function(){var t=new ml;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Dh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Dh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Dh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Eh.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Dh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Dh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Dh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Fh(this.elt[t].location[0]))},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.toLineLabel=function(t){for(var e=new Dh(pl.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var kh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cc,this._pts=new cc,this._label=new Dh(pl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};kh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Xl.isCCW(this._ring.getCoordinates())},kh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},kh.prototype.computePoints=function(t){var e=this;this._startDe=t;var r=t,n=!0;do{if(null===r)throw new Oh("Found null DirectedEdge");if(r.getEdgeRing()===e)throw new Oh("Directed Edge visited twice during ring-building at "+r.getCoordinate());e._edges.add(r);var i=r.getLabel();Gl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(r.getEdge(),r.isForward(),n),n=!1,e.setEdgeRing(r,e),r=e.getNext(r)}while(r!==this._startDe)},kh.prototype.getLinearRing=function(){return this._ring},kh.prototype.getCoordinate=function(t){return this._pts.get(t)},kh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var r=e.getNode().getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},kh.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;r&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},kh.prototype.isHole=function(){return this._isHole},kh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},kh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Xl.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){if(r.next().containsPoint(t))return!1}return!0},kh.prototype.addHole=function(t){this._holes.add(t)},kh.prototype.isShell=function(){return null===this._shell},kh.prototype.getLabel=function(){return this._label},kh.prototype.getEdges=function(){return this._edges},kh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},kh.prototype.getShell=function(){return this._shell},kh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=e.getLocation(r,Eh.RIGHT);if(n===pl.NONE)return null;if(this._label.getLocation(r)===pl.NONE)return this._label.setLocation(r,n),null}},kh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},kh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var jh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Bh=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new cc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new jh(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kh),Gh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Gh.prototype.setVisited=function(t){this._isVisited=t},Gh.prototype.setInResult=function(t){this._isInResult=t},Gh.prototype.isCovered=function(){return this._isCovered},Gh.prototype.isCoveredSet=function(){return this._isCoveredSet},Gh.prototype.setLabel=function(t){this._label=t},Gh.prototype.getLabel=function(){return this._label},Gh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Gh.prototype.updateIM=function(t){Gl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Gh.prototype.isInResult=function(){return this._isInResult},Gh.prototype.isVisited=function(){return this._isVisited},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};var Uh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Dh(0,pl.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=pl.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==pl.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Dh(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Dh)for(var n=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(n,i),s=t._label.getLocation(i);s===pl.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=pl.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case pl.BOUNDARY:r=pl.INTERIOR;break;case pl.INTERIOR:default:r=pl.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gh),qh=function(){this.nodeMap=new Mc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};qh.prototype.find=function(t){return this.nodeMap.get(t)},qh.prototype.addNode=function(){if(arguments[0]instanceof ll){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Uh){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},qh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},qh.prototype.iterator=function(){return this.nodeMap.values().iterator()},qh.prototype.values=function(){return this.nodeMap.values()},qh.prototype.getBoundaryNodes=function(t){for(var e=new cc,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===pl.BOUNDARY&&e.add(n)}return e},qh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var zh=function(){},Vh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.isNorthern=function(t){return t===zh.NE||t===zh.NW},zh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},zh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},zh.isInHalfPlane=function(t,e){return e===zh.SE?t===zh.SE||t===zh.SW:t===e||t===e+1},zh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?zh.NE:zh.SE:e>=0?zh.NW:zh.SW}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new rl("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?zh.NE:zh.SE:n.y>=r.y?zh.NW:zh.SW}},Vh.NE.get=function(){return 0},Vh.NW.get=function(){return 1},Vh.SW.get=function(){return 2},Vh.SE.get=function(){return 3},Object.defineProperties(zh,Vh);var Wh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=null;this._edge=e,this.init(r,n),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Wh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Xl.computeOrientation(t._p0,t._p1,this._p1)},Wh.prototype.getDy=function(){return this._dy},Wh.prototype.getCoordinate=function(){return this._p0},Wh.prototype.setNode=function(t){this._node=t},Wh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Wh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Wh.prototype.getDirectedCoordinate=function(){return this._p1},Wh.prototype.getDx=function(){return this._dx},Wh.prototype.getLabel=function(){return this._label},Wh.prototype.getEdge=function(){return this._edge},Wh.prototype.getQuadrant=function(){return this._quadrant},Wh.prototype.getNode=function(){return this._node},Wh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Wh.prototype.computeLabel=function(t){},Wh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=zh.quadrant(this._dx,this._dy),Gl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Wh.prototype.interfaces_=function(){return[ol]},Wh.prototype.getClass=function(){return Wh};var Xh=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Dh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,r=0;r<2;r++)t._label.isArea(r)&&t._label.getLocation(r,Eh.LEFT)===pl.INTERIOR&&t._label.getLocation(r,Eh.RIGHT)===pl.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Eh.LEFT]+"/"+this._depth[Eh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,pl.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,pl.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===Eh.LEFT&&(n=-1);var i=Eh.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===pl.EXTERIOR&&e===pl.INTERIOR?1:t===pl.INTERIOR&&e===pl.EXTERIOR?-1:0},e}(Wh),Hh=function(){};Hh.prototype.createNode=function(t){return new Uh(t,null)},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh};var Yh=function(){if(this._edges=new cc,this._nodes=null,this._edgeEndList=new cc,0===arguments.length)this._nodes=new qh(new Hh);else if(1===arguments.length){var t=arguments[0];this._nodes=new qh(t)}};Yh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},Yh.prototype.find=function(t){return this._nodes.find(t)},Yh.prototype.addNode=function(){if(arguments[0]instanceof Uh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ll){var e=arguments[0];return this._nodes.addNode(e)}},Yh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Yh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},Yh.prototype.debugPrintln=function(t){Ll.out.println(t)},Yh.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===pl.BOUNDARY},Yh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},Yh.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&(Xl.computeOrientation(t,e,n)===Xl.COLLINEAR&&zh.quadrant(t,e)===zh.quadrant(r,n))},Yh.prototype.getEdgeEnds=function(){return this._edgeEndList},Yh.prototype.debugPrint=function(t){Ll.out.print(t)},Yh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Yh.prototype.findEdgeInSameDirection=function(t,e){for(var r=this,n=0;n<this._edges.size();n++){var i=r._edges.get(n),o=i.getCoordinates();if(r.matchInSameDirection(t,e,o[0],o[1]))return i;if(r.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Yh.prototype.insertEdge=function(t){this._edges.add(t)},Yh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},Yh.prototype.addEdges=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next();e._edges.add(n);var i=new Xh(n,!0),o=new Xh(n,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Yh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Yh.prototype.getNodes=function(){return this._nodes.values()},Yh.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Yh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var Zh=function(){this._geometryFactory=null,this._shellList=new cc;var t=arguments[0];this._geometryFactory=t};Zh.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},Zh.prototype.computePolygons=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},Zh.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Oh("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Zh.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new cc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else n.add(o)}return n},Zh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},Zh.prototype.buildMaximalEdgeRings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Bh(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},Zh.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},Zh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Zh.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(n)&&Xl.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Zh.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return Gl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},Zh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];Yh.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new cc,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Qh=function(){};Qh.prototype.getBounds=function(){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var Jh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Jh.prototype.getItem=function(){return this._item},Jh.prototype.getBounds=function(){return this._bounds},Jh.prototype.interfaces_=function(){return[Qh,ul]},Jh.prototype.getClass=function(){return Jh};var Kh=function(){this._size=null,this._items=null,this._size=0,this._items=new cc,this._items.add(null)};Kh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kh.prototype.size=function(){return this._size},Kh.prototype.reorder=function(t){for(var e=this,r=null,n=this._items.get(t);2*t<=this._size&&((r=2*t)!==e._size&&e._items.get(r+1).compareTo(e._items.get(r))<0&&r++,e._items.get(r).compareTo(n)<0);t=r)e._items.set(t,e._items.get(r));this._items.set(t,n)},Kh.prototype.clear=function(){this._size=0,this._items.clear()},Kh.prototype.isEmpty=function(){return 0===this._size},Kh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var $h=function(){};$h.prototype.visitItem=function(t){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tf=function(){};tf.prototype.insert=function(t,e){},tf.prototype.remove=function(t,e){},tf.prototype.query=function(){},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(){if(this._childBoundables=new cc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},rf={serialVersionUID:{configurable:!0}};ef.prototype.getLevel=function(){return this._level},ef.prototype.size=function(){return this._childBoundables.size()},ef.prototype.getChildBoundables=function(){return this._childBoundables},ef.prototype.addChildBoundable=function(t){Gl.isTrue(null===this._bounds),this._childBoundables.add(t)},ef.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ef.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},ef.prototype.interfaces_=function(){return[Qh,ul]},ef.prototype.getClass=function(){return ef},rf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(ef,rf);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var r=t.toArray();e?Rc.sort(r,e):Rc.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},nf.singletonList=function(t){var e=new cc;return e.add(t),e};var of=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};of.prototype.expandToQueue=function(t,e){var r=of.isComposite(this._boundable1),n=of.isComposite(this._boundable2);if(r&&n)return of.area(this._boundable1)>of.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new rl("neither boundable is composite")},of.prototype.isLeaves=function(){return!(of.isComposite(this._boundable1)||of.isComposite(this._boundable2))},of.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},of.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new of(o,e,this._itemDistance);s.getDistance()<n&&r.add(s)}},of.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},of.prototype.getDistance=function(){return this._distance},of.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},of.prototype.interfaces_=function(){return[ol]},of.prototype.getClass=function(){return of},of.area=function(t){return t.getBounds().getArea()},of.isComposite=function(t){return t instanceof ef};var sf=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new cc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];Gl.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},af={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};sf.prototype.getNodeCapacity=function(){return this._nodeCapacity},sf.prototype.lastNode=function(t){return t.get(t.size()-1)},sf.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof ef?r+=t.size(i):i instanceof Jh&&(r+=1)}return r}},sf.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Jh&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},sf.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new cc:e}if(1===arguments.length){for(var r=arguments[0],n=new cc,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ef){var s=t.itemsTree(o);null!==s&&n.add(s)}else o instanceof Jh?n.add(o.getItem()):Gl.shouldNeverReachHere()}return n.size()<=0?null:n}},sf.prototype.insert=function(t,e){Gl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Jh(t,e))},sf.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=new cc;return this.boundablesAtLevel(e,this._root,r),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(Gl.isTrue(n>-2),i.getLevel()===n)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof ef?t.boundablesAtLevel(n,a,o):(Gl.isTrue(a instanceof Jh),-1===n&&o.add(a))}return null}},sf.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var r=new cc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,r),r}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof ef?t.query(o,c,a):c instanceof Jh?a.visitItem(c.getItem()):Gl.shouldNeverReachHere())}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),y=0;y<d.size();y++){var v=d.get(y);t.getIntersectsOp().intersects(v.getBounds(),h)&&(v instanceof ef?t.query(h,v,p):v instanceof Jh?p.add(v.getItem()):Gl.shouldNeverReachHere())}},sf.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},sf.prototype.getRoot=function(){return this.build(),this._root},sf.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,r)}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),n)&&(l instanceof ef&&(s=t.remove(n,l,o)))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},sf.prototype.createHigherLevels=function(t,e){Gl.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},sf.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],r=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof ef){var o=t.depth(i);o>r&&(r=o)}}return r+1}},sf.prototype.createParentBoundables=function(t,e){var r=this;Gl.isTrue(!t.isEmpty());var n=new cc;n.add(this.createNode(e));var i=new cc(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();r.lastNode(n).getChildBoundables().size()===r.getNodeCapacity()&&n.add(r.createNode(e)),r.lastNode(n).addChildBoundable(s)}return n},sf.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},sf.prototype.interfaces_=function(){return[ul]},sf.prototype.getClass=function(){return sf},sf.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},af.IntersectsOp.get=function(){return uf},af.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},af.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(sf,af);var uf=function(){},lf=function(){};lf.prototype.distance=function(t,e){},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf};var cf=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Gl.isTrue(t.length>0);for(var r=new cc,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},e.prototype.createNode=function(t){return new hf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new cc;for(var s=0;i.hasNext()&&s<r;){var a=i.next();n[o].add(a),s++}}return n},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(yl(arguments[2],$h)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(yl(arguments[2],uc)&&arguments[0]instanceof Object&&arguments[1]instanceof ef){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,r){Gl.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new cc(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(yl(arguments[0],lf)){var t=arguments[0],r=new of(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(r)}if(arguments[0]instanceof of){var n=arguments[0];return this.nearestNeighbour(n,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&yl(arguments[1],lf)){var i=arguments[0],o=arguments[1],s=new of(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof of&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,c=null,h=new Kh;for(h.add(a);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=new Jh(d,y),m=new of(this.getRoot(),g,v);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[tf,ul]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return hf},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(n.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[al]},compare:function(r,n){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(n.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,r),e}(sf),hf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new Tl(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ef),ff=function(){};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ff.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=ff.relativeSign(e.x,r.x),i=ff.relativeSign(e.y,r.y);switch(t){case 0:return ff.compareValue(n,i);case 1:return ff.compareValue(i,n);case 2:return ff.compareValue(i,-n);case 3:return ff.compareValue(-n,i);case 4:return ff.compareValue(-n,-i);case 5:return ff.compareValue(-i,-n);case 6:return ff.compareValue(-i,n);case 7:return ff.compareValue(n,-i)}return Gl.shouldNeverReachHere("invalid octant value"),0},ff.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var pf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new ll(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};pf.prototype.getCoordinate=function(){return this.coord},pf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},pf.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ff.compare(this._segmentOctant,this.coord,e.coord)},pf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},pf.prototype.isInterior=function(){return this._isInterior},pf.prototype.interfaces_=function(){return[ol]},pf.prototype.getClass=function(){return pf};var df=function(){this._nodeMap=new Mc,this._edge=null;var t=arguments[0];this._edge=t};df.prototype.getSplitCoordinates=function(){var t=new fc;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},df.prototype.addCollapsedNodes=function(){var t=new cc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},df.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},df.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new _l(e+1))}},df.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new ll(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new ll(e.coord))},df.prototype.iterator=function(){return this._nodeMap.values().iterator()},df.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},df.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},df.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new _l(e[0])),n=i}},df.prototype.getEdge=function(){return this._edge},df.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},df.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ll(e.coord)),new mf(o,this._edge.getData())},df.prototype.add=function(t,e){var r=new pf(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(Gl.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},df.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new jl("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new jl("bad split edge end point at "+i)},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df};var yf=function(){};yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new rl("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new rl("Cannot compute the octant for two identical points "+i);return yf.octant(s,a)}};var vf=function(){};vf.prototype.getCoordinates=function(){},vf.prototype.size=function(){},vf.prototype.getCoordinate=function(t){},vf.prototype.isClosed=function(){},vf.prototype.setData=function(t){},vf.prototype.getData=function(){},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var gf=function(){};gf.prototype.addIntersection=function(t,e){},gf.prototype.interfaces_=function(){return[vf]},gf.prototype.getClass=function(){return gf};var mf=function(){this._nodeList=new df(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};mf.prototype.getCoordinates=function(){return this._pts},mf.prototype.size=function(){return this._pts.length},mf.prototype.getCoordinate=function(t){return this._pts[t]},mf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},mf.prototype.setData=function(t){this._data=t},mf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:yf.octant(t,e)},mf.prototype.getData=function(){return this._data},mf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new ll(r.getIntersection(i));this.addIntersection(o,n)}},mf.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},mf.prototype.getNodeList=function(){return this._nodeList},mf.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},mf.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},mf.prototype.interfaces_=function(){return[gf]},mf.prototype.getClass=function(){return mf},mf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new cc;return mf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(n)}};var _f=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ll,this.p1=new ll;else if(1===arguments.length){var t=arguments[0];this.p0=new ll(t.p0),this.p1=new ll(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new ll(e,r),this.p1=new ll(n,i)}},xf={serialVersionUID:{configurable:!0}};_f.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_f.prototype.orientationIndex=function(){if(arguments[0]instanceof _f){var t=arguments[0],e=Xl.orientationIndex(this.p0,this.p1,t.p0),r=Xl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof ll){var n=arguments[0];return Xl.orientationIndex(this.p0,this.p1,n)}},_f.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},_f.prototype.isVertical=function(){return this.p0.x===this.p1.x},_f.prototype.equals=function(t){if(!(t instanceof _f))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},_f.prototype.intersection=function(t){var e=new zl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},_f.prototype.project=function(){if(arguments[0]instanceof ll){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ll(t);var e=this.projectionFactor(t),r=new ll;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof _f){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(n.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new _f(s,a)}},_f.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_f.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_f.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},_f.prototype.distancePerpendicular=function(t){return Xl.distancePointLinePerpendicular(t,this.p0,this.p1)},_f.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_f.prototype.midPoint=function(){return _f.midPoint(this.p0,this.p1)},_f.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?nl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},_f.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=nl.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<n&&(n=i,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},_f.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},_f.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_f.prototype.getLength=function(){return this.p0.distance(this.p1)},_f.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},_f.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},_f.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},_f.prototype.lineIntersection=function(t){try{return Nl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Ml))throw t}return null},_f.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_f.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ll(r-u,n+a)},_f.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},_f.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nl.isNaN(e))&&(e=1),e},_f.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_f.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_f.prototype.distance=function(){if(arguments[0]instanceof _f){var t=arguments[0];return Xl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ll){var e=arguments[0];return Xl.distancePointLine(e,this.p0,this.p1)}},_f.prototype.pointAlong=function(t){var e=new ll;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},_f.prototype.hashCode=function(){var t=nl.doubleToLongBits(this.p0.x);t^=31*nl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=nl.doubleToLongBits(this.p1.x);return r^=31*nl.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))},_f.prototype.interfaces_=function(){return[ol,ul]},_f.prototype.getClass=function(){return _f},_f.midPoint=function(t,e){return new ll((t.x+e.x)/2,(t.y+e.y)/2)},xf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_f,xf);var bf=function(){this.tempEnv1=new Tl,this.tempEnv2=new Tl,this._overlapSeg1=new _f,this._overlapSeg2=new _f};bf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var Sf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};Sf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Sf.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,n),s<r&&this.computeSelect(t,s,r,n)},Sf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},Sf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Sf.prototype.setId=function(t){this._id=t},Sf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Sf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Tl(t,e)}return this._env},Sf.prototype.getEndIndex=function(){return this._end},Sf.prototype.getStartIndex=function(){return this._start},Sf.prototype.getContext=function(){return this._context},Sf.prototype.getId=function(){return this._id},Sf.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var s=this._pts[t],a=this._pts[e],u=r._pts[n],l=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((n+i)/2);t<c&&(n<h&&this.computeOverlapsInternal(t,c,r,n,h,o),h<i&&this.computeOverlapsInternal(t,c,r,h,i,o)),c<e&&(n<h&&this.computeOverlapsInternal(c,e,r,n,h,o),h<i&&this.computeOverlapsInternal(c,e,r,h,i,o))},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var Cf=function(){};Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=Cf.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return Cf.toIntArray(r)},Cf.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=zh.quadrant(t[r],t[r+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(zh.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},Cf.getChains=function(){if(1===arguments.length){var t=arguments[0];return Cf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new cc,i=Cf.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new Sf(e,i[o],i[o+1],r);n.add(s)}return n}},Cf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var wf=function(){};wf.prototype.computeNodes=function(t){},wf.prototype.getNodedSubstrings=function(){},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var If=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};If.prototype.setSegmentIntersector=function(t){this._segInt=t},If.prototype.interfaces_=function(){return[wf]},If.prototype.getClass=function(){return If};var Pf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new cc,this._index=new cf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,r=Cf.getChains(t.getCoordinates(),t).iterator();r.hasNext();){var n=r.next();n.setId(e._idCounter++),e._index.insert(n.getEnvelope(),n),e._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Ef(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var n=r.next(),i=t._index.query(n.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Ef},Object.defineProperties(e,r),e}(If),Ef=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=e.getContext(),s=n.getContext();this._si.processIntersections(o,r,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bf),Mf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Lf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mf.prototype.getEndCapStyle=function(){return this._endCapStyle},Mf.prototype.isSingleSided=function(){return this._isSingleSided},Mf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mf.JOIN_ROUND&&(this._quadrantSegments=Mf.DEFAULT_QUADRANT_SEGMENTS)},Mf.prototype.getJoinStyle=function(){return this._joinStyle},Mf.prototype.setJoinStyle=function(t){this._joinStyle=t},Mf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mf.prototype.getMitreLimit=function(){return this._mitreLimit},Mf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mf.prototype.setSingleSided=function(t){this._isSingleSided=t},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Lf.CAP_ROUND.get=function(){return 1},Lf.CAP_FLAT.get=function(){return 2},Lf.CAP_SQUARE.get=function(){return 3},Lf.JOIN_ROUND.get=function(){return 1},Lf.JOIN_MITRE.get=function(){return 2},Lf.JOIN_BEVEL.get=function(){return 3},Lf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Lf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Lf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mf,Lf);var Nf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Xl.COUNTERCLOCKWISE,this._inputLine=t||null},Tf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nf.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,n)&&this.isShallowSampled(i,o,t,r,n))},Nf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,r=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(r),i=!1;n<this._inputLine.length;){var o=!1;t.isDeletable(e,r,n,t._distanceTol)&&(t._isDeleted[r]=Nf.DELETE,o=!0,i=!0),e=o?n:r,r=t.findNextNonDeletedIndex(e),n=t.findNextNonDeletedIndex(r)}return i},Nf.prototype.isShallowConcavity=function(t,e,r,n){return Xl.computeOrientation(t,e,r)===this._angleOrientation&&Xl.distancePointLine(e,t,r)<n},Nf.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/Nf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nf.prototype.isConcave=function(t,e,r){var n=Xl.computeOrientation(t,e,r)===this._angleOrientation;return n},Nf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Xl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nf.DELETE;)e++;return e},Nf.prototype.isShallow=function(t,e,r,n){return Xl.distancePointLine(e,t,r)<n},Nf.prototype.collapseLine=function(){for(var t=new fc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.simplify=function(t,e){return new Nf(t).simplify(e)},Tf.INIT.get=function(){return 0},Tf.DELETE.get=function(){return 1},Tf.KEEP.get=function(){return 1},Tf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nf,Tf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cc},Rf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new ll(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new _h).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ll(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Rf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,Rf);var Af=function(){},Ff={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.toDegrees=function(t){return 180*t/Math.PI},Af.normalize=function(t){for(;t>Math.PI;)t-=Af.PI_TIMES_2;for(;t<=-Math.PI;)t+=Af.PI_TIMES_2;return t},Af.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},Af.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},Af.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},Af.interiorAngle=function(t,e,r){var n=Af.angle(e,t),i=Af.angle(e,r);return Math.abs(i-n)},Af.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Af.PI_TIMES_2;t>=Af.PI_TIMES_2&&(t=0)}else{for(;t>=Af.PI_TIMES_2;)t-=Af.PI_TIMES_2;t<0&&(t=0)}return t},Af.angleBetween=function(t,e,r){var n=Af.angle(e,t),i=Af.angle(e,r);return Af.diff(n,i)},Af.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},Af.toRadians=function(t){return t*Math.PI/180},Af.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?Af.COUNTERCLOCKWISE:r<0?Af.CLOCKWISE:Af.NONE},Af.angleBetweenOriented=function(t,e,r){var n=Af.angle(e,t),i=Af.angle(e,r)-n;return i<=-Math.PI?i+Af.PI_TIMES_2:i>Math.PI?i-Af.PI_TIMES_2:i},Ff.PI_TIMES_2.get=function(){return 2*Math.PI},Ff.PI_OVER_2.get=function(){return Math.PI/2},Ff.PI_OVER_4.get=function(){return Math.PI/4},Ff.COUNTERCLOCKWISE.get=function(){return Xl.COUNTERCLOCKWISE},Ff.CLOCKWISE.get=function(){return Xl.CLOCKWISE},Ff.NONE.get=function(){return Xl.COLLINEAR},Object.defineProperties(Af,Ff);var Df=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _f,this._seg1=new _f,this._offset0=new _f,this._offset1=new _f,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new zl,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Mf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},kf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Df.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Xl.computeOrientation(this._s0,this._s1,this._s2),n=r===Xl.CLOCKWISE&&this._side===Eh.LEFT||r===Xl.COUNTERCLOCKWISE&&this._side===Eh.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Df.prototype.addLineEndCap=function(t,e){var r=new _f(t,e),n=new _f;this.computeOffsetSegment(r,Eh.LEFT,this._distance,n);var i=new _f;this.computeOffsetSegment(r,Eh.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Xl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Mf.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Mf.CAP_SQUARE:var u=new ll;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new ll(n.p1.x+u.x,n.p1.y+u.y),c=new ll(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Df.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Df.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=Nl.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Ml))throw t;o=new ll(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},Df.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,l=r.y-t.y,c=Math.atan2(l,u);n===Xl.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,n,i),this._segList.addPt(r)},Df.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Df.prototype.createSquare=function(t){this._segList.addPt(new ll(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ll(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ll(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Df.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Df.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Df.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Df.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Df.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=Af.angle(i,this._seg0.p0),s=Af.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Af.normalize(o+s),u=Af.normalize(a+Math.PI),l=n*r,c=r-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new ll(h,f),d=new _f(i,p),y=d.pointAlongOffset(1,c),v=d.pointAlongOffset(1,-c);this._side===Eh.LEFT?(this._segList.addPt(y),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(y))},Df.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===Eh.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*r*o/a,l=i*r*s/a;n.p0.x=t.p0.x-l,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-l,n.p1.y=t.p1.y+u},Df.prototype.addFilletArc=function(t,e,r,n,i){var o=n===Xl.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new ll;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Df.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ll((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new ll((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Df.prototype.createCircle=function(t){var e=new ll(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Df.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Df.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Df.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Xl.CLOCKWISE,this._distance))},Df.prototype.closeRing=function(){this._segList.closeRing()},Df.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},kf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Df,kf);var jf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};jf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&pc.reverse(o),o},jf.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Eh.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{r.addSegments(t,!1);var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Eh.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment(),r.closeRing()},jf.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===Eh.RIGHT&&(n=-n);var i=Nf.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(i[s],a)}r.closeRing()},jf.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=Nf.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],Eh.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var s=Nf.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],Eh.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mf.CAP_ROUND:e.createCircle(t);break;case Mf.CAP_SQUARE:e.createSquare(t)}},jf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},jf.prototype.getBufferParameters=function(){return this._bufParams},jf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},jf.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return jf.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},jf.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Nf.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Eh.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{var a=Nf.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],Eh.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment()},jf.prototype.getSegGen=function(t){return new Df(this._precisionModel,this._bufParams,t)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new ll(t[r]);return e};var Bf=function(){this._subgraphs=null,this._seg=new _f,this._cga=new Xl;var t=arguments[0];this._subgraphs=t},Gf={DepthSegment:{configurable:!0}};Bf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=new cc,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),r)}return r}if(3===arguments.length)if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&arguments[1]instanceof Xh)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x)&&!(t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Xl.computeOrientation(t._seg.p0,t._seg.p1,s)===Xl.RIGHT)){var f=a.getDepth(Eh.LEFT);t._seg.p0.equals(l[c])||(f=a.getDepth(Eh.RIGHT));var p=new Uf(t._seg,f);u.add(p)}}else if(yl(arguments[2],uc)&&arguments[0]instanceof ll&&yl(arguments[1],uc))for(var d=arguments[0],y=arguments[1],v=arguments[2],g=y.iterator();g.hasNext();){var m=g.next();m.isForward()&&t.findStabbedSegments(d,m,v)}},Bf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Gf.DepthSegment.get=function(){return Uf},Object.defineProperties(Bf,Gf);var Uf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new _f(t),this._leftDepth=e};Uf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!==(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Uf.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Uf.prototype.toString=function(){return this._upwardSeg.toString()},Uf.prototype.interfaces_=function(){return[ol]},Uf.prototype.getClass=function(){return Uf};var qf=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};qf.prototype.area=function(){return qf.area(this.p0,this.p1,this.p2)},qf.prototype.signedArea=function(){return qf.signedArea(this.p0,this.p1,this.p2)},qf.prototype.interpolateZ=function(t){if(null===t)throw new rl("Supplied point is null.");return qf.interpolateZ(t,this.p0,this.p1,this.p2)},qf.prototype.longestSideLength=function(){return qf.longestSideLength(this.p0,this.p1,this.p2)},qf.prototype.isAcute=function(){return qf.isAcute(this.p0,this.p1,this.p2)},qf.prototype.circumcentre=function(){return qf.circumcentre(this.p0,this.p1,this.p2)},qf.prototype.area3D=function(){return qf.area3D(this.p0,this.p1,this.p2)},qf.prototype.centroid=function(){return qf.centroid(this.p0,this.p1,this.p2)},qf.prototype.inCentre=function(){return qf.inCentre(this.p0,this.p1,this.p2)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},qf.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},qf.det=function(t,e,r,n){return t*n-e*r},qf.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,s=r.x-i,a=n.x-i,u=r.y-o,l=n.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(r.z-e.z)+d*(n.z-e.z)},qf.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),s=n;return i>s&&(s=i),o>s&&(s=o),s},qf.isAcute=function(t,e,r){return!!Af.isAcute(t,e,r)&&(!!Af.isAcute(e,r,t)&&!!Af.isAcute(r,t,e))},qf.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,s=t.y-i,a=e.x-n,u=e.y-i,l=2*qf.det(o,s,a,u),c=qf.det(s,o*o+s*s,u,a*a+u*u),h=qf.det(o,o*o+s*s,a,a*a+u*u);return new ll(n-c/l,i+h/l)},qf.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new Nl(t.x+r/2,t.y+n/2,1),o=new Nl(t.x-n+r/2,t.y+r+n/2,1);return new Nl(i,o)},qf.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new ll(t.x+i*o,t.y+i*s)},qf.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,l=i*u-o*a,c=o*s-n*u,h=n*a-i*s,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},qf.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new ll(n,i)},qf.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),s=n+i+o,a=(n*t.x+i*e.x+o*r.x)/s,u=(n*t.y+i*e.y+o*r.y)/s;return new ll(a,u)};var zf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};zf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addPolygon=function(t){var e=this,r=this._distance,n=Eh.LEFT;this._distance<0&&(r=-this._distance,n=Eh.RIGHT);var i=t.getExteriorRing(),o=pc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,r,n,pl.EXTERIOR,pl.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=pc.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,r,Eh.opposite(n),pl.INTERIOR,pl.EXTERIOR)}},zf.prototype.isTriangleErodedCompletely=function(t,e){var r=new qf(t[0],t[1],t[2]),n=r.inCentre();return Xl.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},zf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=pc.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},zf.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new mf(t,new Dh(0,pl.BOUNDARY,e,r));this._curveList.add(n)},zf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zf.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<nh.MINIMUM_VALID_SIZE)return null;var o=n,s=i;t.length>=nh.MINIMUM_VALID_SIZE&&Xl.isCCW(t)&&(o=i,s=n,r=Eh.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},zf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof eh?this.addPolygon(t):t instanceof Jc?this.addLineString(t):t instanceof $c?this.addPoint(t):(t instanceof rh||t instanceof Bc||t instanceof ih||t instanceof jc)&&this.addCollection(t)},zf.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},zf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Vf=function(){};Vf.prototype.locate=function(t){},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Wf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Wf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Wf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new lc;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new Wf(t),this._subcollectionIterator.next()):t},Wf.prototype.remove=function(){throw new Error(this.getClass().getName())},Wf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Wf.prototype.interfaces_=function(){return[ac]},Wf.prototype.getClass=function(){return Wf},Wf.isAtomic=function(t){return!(t instanceof jc)};var Xf=function(){this._geom=null;var t=arguments[0];this._geom=t};Xf.prototype.locate=function(t){return Xf.locate(t,this._geom)},Xf.prototype.interfaces_=function(){return[Vf]},Xf.prototype.getClass=function(){return Xf},Xf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Xl.isPointInRing(t,e.getCoordinates())},Xf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Xf.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(Xf.isPointInRing(t,i))return!1}return!0},Xf.containsPoint=function(t,e){if(e instanceof eh)return Xf.containsPointInPolygon(t,e);if(e instanceof jc)for(var r=new Wf(e);r.hasNext();){var n=r.next();if(n!==e&&Xf.containsPoint(t,n))return!0}return!1},Xf.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:Xf.containsPoint(t,e)?pl.INTERIOR:pl.EXTERIOR};var Hf=function(){this._edgeMap=new Mc,this._edgeList=null,this._ptInAreaLocation=[pl.NONE,pl.NONE]};Hf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},Hf.prototype.propagateSideLabels=function(t){for(var e=pl.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,Eh.LEFT)!==pl.NONE&&(e=n.getLocation(t,Eh.LEFT))}if(e===pl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Eh.ON)===pl.NONE&&a.setLocation(t,Eh.ON,i),a.isArea(t)){var u=a.getLocation(t,Eh.LEFT),l=a.getLocation(t,Eh.RIGHT);if(l!==pl.NONE){if(l!==i)throw new Oh("side location conflict",s.getCoordinate());u===pl.NONE&&Gl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Gl.isTrue(a.getLocation(t,Eh.LEFT)===pl.NONE,"found single null side"),a.setLocation(t,Eh.RIGHT,i),a.setLocation(t,Eh.LEFT,i)}}},Hf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hf.prototype.print=function(t){Ll.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Hf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,Eh.LEFT);Gl.isTrue(n!==pl.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Gl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Eh.LEFT),u=s.getLocation(t,Eh.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Hf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},Hf.prototype.iterator=function(){return this.getEdges().iterator()},Hf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cc(this._edgeMap.values())),this._edgeList},Hf.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===pl.NONE&&(this._ptInAreaLocation[t]=Xf.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},Hf.prototype.toString=function(){var t=new ml;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},Hf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},Hf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===pl.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=pl.NONE;if(e[u])l=pl.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Hf.prototype.getDegree=function(){return this._edgeMap.size()},Hf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf};var Yf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),n){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;r=s,n=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;r.setNext(o),n=t._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Oh("no outgoing dirEdge found",this.getCoordinate());Gl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),r.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return zh.isNorthern(i)&&zh.isNorthern(o)?r:zh.isNorthern(i)||zh.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(Gl.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){Ll.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],r=this.findIndex(e),n=e.getDepth(Eh.LEFT),i=e.getDepth(Eh.RIGHT),o=this.computeDepths(r+1,this._edgeList.size(),n),s=this.computeDepths(0,r,o);if(s!==i)throw new Oh("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=l,h=a;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(Eh.RIGHT,c),c=f.getDepth(Eh.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,r=null,n=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===r&&s.getEdgeRing()===t&&(r=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Gl.isTrue(null!==r,"found null for first outgoing dirEdge"),Gl.isTrue(r.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(r))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var r=e.next();r.isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===n&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=pl.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=pl.INTERIOR;break}if(n.isInResult()){t=pl.EXTERIOR;break}}}if(t===pl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===pl.INTERIOR):(s.isInResult()&&(i=pl.EXTERIOR),a.isInResult()&&(i=pl.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Dh(pl.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==pl.INTERIOR&&o!==pl.BOUNDARY||this._label.setLocation(i,pl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hf),Zf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Uh(t,new Yf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hh),Qf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Qf.prototype.compareTo=function(t){var e=t;return Qf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Qf.prototype.interfaces_=function(){return[ol]},Qf.prototype.getClass=function(){return Qf},Qf.orientation=function(t){return 1===pc.increasingDirection(t)},Qf.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?r.length:-1,u=e?0:t.length-1,l=n?0:r.length-1;;){var c=t[u].compareTo(r[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Jf=function(){this._edges=new cc,this._ocaMap=new Mc};Jf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},Jf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Jf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Jf.prototype.iterator=function(){return this._edges.iterator()},Jf.prototype.getEdges=function(){return this._edges},Jf.prototype.get=function(t){return this._edges.get(t)},Jf.prototype.findEqualEdge=function(t){var e=new Qf(t.getCoordinates());return this._ocaMap.get(e)},Jf.prototype.add=function(t){this._edges.add(t);var e=new Qf(t.getCoordinates());this._ocaMap.put(e,t)},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,r,n){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var $f=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$f.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if($f.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},$f.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$f.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$f.prototype.getLineIntersector=function(){return this._li},$f.prototype.hasProperIntersection=function(){return this._hasProper},$f.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$f.prototype.hasIntersection=function(){return this._hasIntersection},$f.prototype.isDone=function(){return!1},$f.prototype.hasInteriorIntersection=function(){return this._hasInterior},$f.prototype.interfaces_=function(){return[Kf]},$f.prototype.getClass=function(){return $f},$f.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var tp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new ll(t),this.segmentIndex=e,this.dist=r};tp.prototype.getSegmentIndex=function(){return this.segmentIndex},tp.prototype.getCoordinate=function(){return this.coord},tp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},tp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},tp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},tp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},tp.prototype.getDistance=function(){return this.dist},tp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},tp.prototype.interfaces_=function(){return[ol]},tp.prototype.getClass=function(){return tp};var ep=function(){this._nodeMap=new Mc,this.edge=null;var t=arguments[0];this.edge=t};ep.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},ep.prototype.iterator=function(){return this._nodeMap.values().iterator()},ep.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},ep.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ep.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ll(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new sp(o,new Dh(this.edge._label))},ep.prototype.add=function(t,e,r){var n=new tp(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},ep.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var rp=function(){};rp.prototype.getChainStartIndices=function(t){var e=0,r=new cc;r.add(new _l(e));do{var n=this.findChainEnd(t,e);r.add(new _l(n)),e=n}while(e<t.length-1);return rp.toIntArray(r)},rp.prototype.findChainEnd=function(t,e){for(var r=zh.quadrant(t[e],t[e+1]),n=e+1;n<t.length;){if(zh.quadrant(t[n-1],t[n])!==r)break;n++}return n-1},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Tl,this.env2=new Tl;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new rp;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((a+u)/2);i<d&&(a<y&&this.computeIntersectsForChain(i,d,s,a,y,l),y<u&&this.computeIntersectsForChain(i,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},op={NULL_VALUE:{configurable:!0}};ip.prototype.getDepth=function(t,e){return this._depth[t][e]},ip.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},ip.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var r=0;r<3;r++)if(t._depth[e][r]!==ip.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ip.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===ip.NULL_VALUE}},ip.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var r=t._depth[e][1];t._depth[e][2]<r&&(r=t._depth[e][2]),r<0&&(r=0);for(var n=1;n<3;n++){var i=0;t._depth[e][n]>r&&(i=1),t._depth[e][n]=i}}},ip.prototype.getDelta=function(t){return this._depth[t][Eh.RIGHT]-this._depth[t][Eh.LEFT]},ip.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?pl.EXTERIOR:pl.INTERIOR},ip.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ip.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=0;r<2;r++)for(var n=1;n<3;n++){var i=e.getLocation(r,n);i!==pl.EXTERIOR&&i!==pl.INTERIOR||(t.isNull(r,n)?t._depth[r][n]=ip.depthAtLocation(i):t._depth[r][n]+=ip.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===pl.INTERIOR&&this._depth[o][s]++}},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.depthAtLocation=function(t){return t===pl.EXTERIOR?0:t===pl.INTERIOR?1:ip.NULL_VALUE},op.NULL_VALUE.get=function(){return-1},Object.defineProperties(ip,op);var sp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new ep(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ip,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Dh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(n=!1),this.pts[s].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Tl;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new ll(t.getIntersection(n)),o=e,s=t.getEdgeDistance(r,n),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new ml;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Eh.ON),e.getLocation(1,Eh.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Eh.LEFT),e.getLocation(1,Eh.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Eh.RIGHT),e.getLocation(1,Eh.RIGHT),2))},e}(Gh),ap=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jf,this._bufParams=t||null};ap.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ap.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip(),r.merge(n);var i=ap.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ap.depthDelta(t.getLabel()))},ap.prototype.buildSubgraphs=function(t,e){for(var r=new cc,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),s=new Bf(r).getDepth(o);i.computeDepth(s),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},ap.prototype.createSubgraphs=function(t){for(var e=new cc,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new Ah;i.create(n),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},ap.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ap.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Pf,r=new zl;return r.setPrecisionModel(t),e.setSegmentIntersector(new $f(r)),e},ap.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new jf(r,this._bufParams),i=new zf(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Yh(new Zf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Zh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ap.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new sp(i.getCoordinates(),new Dh(s));this.insertUniqueEdge(a)}}},ap.prototype.setNoder=function(t){this._workingNoder=t},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.depthDelta=function(t){var e=t.getLocation(0,Eh.LEFT),r=t.getLocation(0,Eh.RIGHT);return e===pl.INTERIOR&&r===pl.EXTERIOR?1:e===pl.EXTERIOR&&r===pl.INTERIOR?-1:0},ap.convertSegStrings=function(t){for(var e=new _h,r=new cc;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var up=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};up.prototype.rescale=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Ll.out.println(i)}},up.prototype.scale=function(){var t=this;if(yl(arguments[0],oc)){for(var e=arguments[0],r=new cc,n=e.iterator();n.hasNext();){var i=n.next();r.add(new mf(t.scale(i.getCoordinates()),i.getData()))}return r}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ll(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=pc.removeRepeatedPoints(s);return u}},up.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},up.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},up.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},up.prototype.interfaces_=function(){return[wf]},up.prototype.getClass=function(){return up};var lp=function(){this._li=new zl,this._segStrings=null;var t=arguments[0];this._segStrings=t},cp={fact:{configurable:!0}};lp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next(),n=r.getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new jl("found endpt/interior pt intersection at index "+l+" :pt "+i)},lp.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var r=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();t.checkInteriorIntersections(r,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,s,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var y=h.getCoordinates()[f],v=h.getCoordinates()[f+1],g=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(y,v,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,y,v)||this.hasInteriorIntersection(this._li,g,m)))throw new jl("found non-noded intersection at "+y+"-"+v+" and "+g+"-"+m)}},lp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},lp.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next();t.checkCollapses(r)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},lp.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},lp.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new jl("found non-noded collapse at "+lp.fact.createLineString([t,e,r]))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},cp.fact.get=function(){return new _h},Object.defineProperties(lp,cp);var hp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new rl("Scale factor must be non-zero");1!==e&&(this._pt=new ll(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ll,this._p1Scaled=new ll),this.initCorners(this._pt)},fp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};hp.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Gl.isTrue(!(s&&a),"Found bad envelope test"),a},hp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ll(this._maxx,this._maxy),this._corner[1]=new ll(this._minx,this._maxy),this._corner[2]=new ll(this._minx,this._miny),this._corner[3]=new ll(this._maxx,this._miny)},hp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},hp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},hp.prototype.getCoordinate=function(){return this._originalPt},hp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},hp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=hp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Tl(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},hp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},hp.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!r||!n)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},hp.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},fp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(hp,fp);var pp=function(){this.tempEnv1=new Tl,this.selectedSegment=new _f};pp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function(){this._index=null;var t=arguments[0];this._index=t},yp={HotPixelSnapAction:{configurable:!0}};dp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new vp(e,r,n);return this._index.query(i,{interfaces_:function(){return[$h]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},yp.HotPixelSnapAction.get=function(){return vp},Object.defineProperties(dp,yp);var vp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pp),gp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new cc};gp.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},gp.prototype.isDone=function(){return!1},gp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gp.prototype.interfaces_=function(){return[Kf]},gp.prototype.getClass=function(){return gp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new zl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mp.prototype.checkCorrectness=function(t){var e=mf.getNodedSubstrings(t),r=new lp(e);try{r.checkValid()}catch(t){if(!(t instanceof El))throw t;t.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mf.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},mp.prototype.findInteriorIntersections=function(t,e){var r=new gp(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var t=this;if(yl(arguments[0],oc))for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof mf)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new hp(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},mp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Pf,this._pointSnapper=new dp(this._noder.getIndex()),this.snapRound(t,this._li)},mp.prototype.computeIntersectionSnaps=function(t){for(var e=this,r=t.iterator();r.hasNext();){var n=r.next(),i=new hp(n,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},mp.prototype.interfaces_=function(){return[wf]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},xp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(t){var e=new up(new mp(new yh(1)),t.getScale()),r=new ap(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=_p.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=_p.precisionScaleFactor(this._argGeom,this._distance,r),i=new yh(n);this.bufferFixedPrecision(i)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===yh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},_p.prototype.bufferOriginalPrecision=function(){try{var t=new ap(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof jl))throw t;this._saveException=t}},_p.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new _p(t),n=r.getResultGeometry(e);return n}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Zl&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new _p(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof Mf&&arguments[0]instanceof Zl&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new _p(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],v=arguments[2],g=arguments[3],m=new _p(d);m.setQuadrantSegments(v),m.setEndCapStyle(g);var _=m.getResultGeometry(y);return _}},_p.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=vl.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},xp.CAP_ROUND.get=function(){return Mf.CAP_ROUND},xp.CAP_BUTT.get=function(){return Mf.CAP_FLAT},xp.CAP_FLAT.get=function(){return Mf.CAP_FLAT},xp.CAP_SQUARE.get=function(){return Mf.CAP_SQUARE},xp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,xp);var bp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};bp.prototype.getCoordinates=function(){return this._pt},bp.prototype.getCoordinate=function(t){return this._pt[t]},bp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},bp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},bp.prototype.getDistance=function(){return this._distance},bp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var Sp=function(){};Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.computeDistance=function(){if(arguments[2]instanceof bp&&arguments[0]instanceof Jc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=t.getCoordinates(),i=new _f,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var s=i.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof bp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Sp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Sp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof bp&&arguments[0]instanceof Zl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Jc)Sp.computeDistance(h,f,p);else if(h instanceof eh)Sp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Sp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof bp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],x=g.closestPoint(m);_.setMinimum(x,m)}};var Cp=function(t){this._maxPtDist=new bp,this._inputGeom=t||null},wp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Cp.prototype.computeMaxMidpointDistance=function(t){var e=new Pp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Cp.prototype.computeMaxVertexDistance=function(t){var e=new Ip(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Cp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Cp.prototype.getDistancePoints=function(){return this._maxPtDist},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},wp.MaxPointDistanceFilter.get=function(){return Ip},wp.MaxMidpointDistanceFilter.get=function(){return Pp},Object.defineProperties(Cp,wp);var Ip=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Ip.prototype.filter=function(t){this._minPtDist.initialize(),Sp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ip.prototype.interfaces_=function(){return[Kl]},Ip.prototype.getClass=function(){return Ip};var Pp=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Pp.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new ll((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),Sp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Pp.prototype.isDone=function(){return!1},Pp.prototype.isGeometryChanged=function(){return!1},Pp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Pp.prototype.interfaces_=function(){return[kc]},Pp.prototype.getClass=function(){return Pp};var Ep=function(t){this._comps=t||null};Ep.prototype.filter=function(t){t instanceof eh&&this._comps.add(t)},Ep.prototype.interfaces_=function(){return[Dc]},Ep.prototype.getClass=function(){return Ep},Ep.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ep.getPolygons(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof eh?r.add(e):e instanceof jc&&e.apply(new Ep(r)),r}};var Mp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};Mp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jc&&this._lines.add(t)},Mp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mp.prototype.interfaces_=function(){return[Yl]},Mp.prototype.getClass=function(){return Mp},Mp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mp.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(Mp.getLines(e,r))}},Mp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Mp.getLines(t,!1)}if(2===arguments.length){if(yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var e=arguments[0],r=arguments[1],n=e.iterator();n.hasNext();){var i=n.next();Mp.getLines(i,r)}return r}if(arguments[0]instanceof Zl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new cc;return o.apply(new Mp(a,s)),a}if(arguments[0]instanceof Zl&&yl(arguments[1],oc)){var u=arguments[0],l=arguments[1];return u instanceof Jc?l.add(u):u.apply(new Mp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&yl(arguments[0],oc)&&yl(arguments[1],oc)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();Mp.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Zl&&yl(arguments[1],oc)){var y=arguments[0],v=arguments[1],g=arguments[2];return y.apply(new Mp(v,g)),v}}};var Lp=function(){if(this._boundaryRule=$l.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new rl("Rule must be non-null");this._boundaryRule=t}};Lp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ll&&arguments[1]instanceof eh){var e=arguments[0],r=arguments[1];if(r.isEmpty())return pl.EXTERIOR;var n=r.getExteriorRing(),i=this.locateInPolygonRing(e,n);if(i===pl.EXTERIOR)return pl.EXTERIOR;if(i===pl.BOUNDARY)return pl.BOUNDARY;for(var o=0;o<r.getNumInteriorRing();o++){var s=r.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===pl.INTERIOR)return pl.EXTERIOR;if(a===pl.BOUNDARY)return pl.BOUNDARY}return pl.INTERIOR}if(arguments[0]instanceof ll&&arguments[1]instanceof Jc){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return pl.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?Xl.isOnLine(u,c)?pl.INTERIOR:pl.EXTERIOR:pl.BOUNDARY}if(arguments[0]instanceof ll&&arguments[1]instanceof $c){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?pl.INTERIOR:pl.EXTERIOR}},Lp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Xl.locatePointInRing(t,e.getCoordinates()):pl.EXTERIOR},Lp.prototype.intersects=function(t,e){return this.locate(t,e)!==pl.EXTERIOR},Lp.prototype.updateLocationInfo=function(t){t===pl.INTERIOR&&(this._isIn=!0),t===pl.BOUNDARY&&this._numBoundaries++},Lp.prototype.computeLocation=function(t,e){var r=this;if(e instanceof $c&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof eh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Bc)for(var n=e,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.updateLocationInfo(r.locateInternal(t,o))}else if(e instanceof ih)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);r.updateLocationInfo(r.locateInternal(t,u))}else if(e instanceof jc)for(var l=new Wf(e);l.hasNext();){var c=l.next();c!==e&&r.computeLocation(t,c)}},Lp.prototype.locate=function(t,e){return e.isEmpty()?pl.EXTERIOR:e instanceof Jc||e instanceof eh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?pl.BOUNDARY:this._numBoundaries>0||this._isIn?pl.INTERIOR:pl.EXTERIOR)},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Tp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Tp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Tp);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof $c&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Dc]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof $c?nf.singletonList(t):Op.getPoints(t,new cc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof $c?r.add(e):e instanceof jc&&e.apply(new Op(r)),r}};var Rp=function(){this._locations=null;var t=arguments[0];this._locations=t};Rp.prototype.filter=function(t){(t instanceof $c||t instanceof Jc||t instanceof eh)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Rp.prototype.interfaces_=function(){return[Dc]},Rp.prototype.getClass=function(){return Rp},Rp.getLocations=function(t){var e=new cc;return t.apply(new Rp(e)),e};var Ap=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Lp,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};Ap.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=1-r,o=Ep.getPolygons(this._geom[r]);if(o.size()>0){var s=Rp.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[r]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&yl(arguments[0],uc)&&yl(arguments[1],uc)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof eh){var p=arguments[0],d=arguments[1],y=arguments[2],v=p.getCoordinate();if(pl.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,y[0]=p,y[1]=new Np(d,v),null}},Ap.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Ap.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mp.getLines(this._geom[0]),r=Mp.getLines(this._geom[1]),n=Op.getPoints(this._geom[0]),i=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},Ap.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ap.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ap.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ap.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof $c){var e=arguments[0],r=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=r.getCoordinate(),s=0;s<i.length-1;s++){var a=Xl.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new _f(i[s],i[s+1]),l=u.closestPoint(o);n[0]=new Np(e,s,l),n[1]=new Np(r,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof Jc){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),y=0;y<p.length-1;y++)for(var v=0;v<d.length-1;v++){var g=Xl.distanceLineLine(p[y],p[y+1],d[v],d[v+1]);if(g<t._minDistance){t._minDistance=g;var m=new _f(p[y],p[y+1]),_=new _f(d[v],d[v+1]),x=m.closestPoints(_);f[0]=new Np(c,y,x[0]),f[1]=new Np(h,v,x[1])}if(t._minDistance<=t._terminateDistance)return null}}},Ap.prototype.computeMinDistancePoints=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<n._minDistance&&(n._minDistance=u,r[0]=new Np(o,0,o.getCoordinate()),r[1]=new Np(a,0,a.getCoordinate())),n._minDistance<=n._terminateDistance)return null}},Ap.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new rl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ap.prototype.computeMinDistanceLines=function(t,e,r){for(var n=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(n.computeMinDistance(o,a,r),n._minDistance<=n._terminateDistance)return null}},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.distance=function(t,e){return new Ap(t,e).distance()},Ap.isWithinDistance=function(t,e,r){return new Ap(t,e,r).distance()<=r},Ap.nearestPoints=function(t,e){return new Ap(t,e).nearestPoints()};var Fp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};Fp.prototype.getCoordinates=function(){return this._pt},Fp.prototype.getCoordinate=function(t){return this._pt[t]},Fp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Fp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Fp.prototype.toString=function(){return kl.toLineString(this._pt[0],this._pt[1])},Fp.prototype.getDistance=function(){return this._distance},Fp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp};var Dp=function(){};Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.computeDistance=function(){if(arguments[2]instanceof Fp&&arguments[0]instanceof Jc&&arguments[1]instanceof ll)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new _f,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof eh&&arguments[1]instanceof ll){var a=arguments[0],u=arguments[1],l=arguments[2];Dp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Dp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof Zl&&arguments[1]instanceof ll){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Jc)Dp.computeDistance(h,f,p);else if(h instanceof eh)Dp.computeDistance(h,f,p);else if(h instanceof jc)for(var d=h,y=0;y<d.getNumGeometries();y++){var v=d.getGeometryN(y);Dp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Fp&&arguments[0]instanceof _f&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],x=g.closestPoint(m);_.setMinimum(x,m)}};var kp=function(){this._g0=null,this._g1=null,this._ptDist=new Fp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new rl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kp.prototype.computeOrientedDistance=function(t,e,r){var n=new Bp(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Gp(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},kp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new kp(t,e);return r.distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new kp(n,i);return s.setDensifyFraction(o),s.distance()}},jp.MaxPointDistanceFilter.get=function(){return Bp},jp.MaxDensifiedByFractionDistanceFilter.get=function(){return Gp},Object.defineProperties(kp,jp);var Bp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._euclideanDist=new Dp,this._geom=null;var t=arguments[0];this._geom=t};Bp.prototype.filter=function(t){this._minPtDist.initialize(),Dp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bp.prototype.interfaces_=function(){return[Kl]},Bp.prototype.getClass=function(){return Bp};var Gp=function(){this._maxPtDist=new Fp,this._minPtDist=new Fp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Gp.prototype.filter=function(t,e){var r=this;if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-n.x)/this._numSubSegs,s=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=n.x+a*o,l=n.y+a*s,c=new ll(u,l);r._minPtDist.initialize(),Dp.computeDistance(r._geom,c,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}},Gp.prototype.isDone=function(){return!1},Gp.prototype.isGeometryChanged=function(){return!1},Gp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gp.prototype.interfaces_=function(){return[kc]},Gp.prototype.getClass=function(){return Gp};var Up=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Up.prototype.checkMaximumDistance=function(t,e,r){var n=new kp(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+kl.toLineString(i[0],i[1])+")"}},Up.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Up.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Up.VERBOSE&&Ll.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Up.prototype.checkNegativeValid=function(){if(!(this._input instanceof eh||this._input instanceof ih||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.checkMinimumDistance=function(t,e,r){var n=new Ap(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+kl.toLineString(i[0],i[1])+" )"}},Up.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.getPolygonLines=function(t){for(var e=new cc,r=new Mp(e),n=Ep.getPolygons(t).iterator();n.hasNext();){n.next().apply(r)}return t.getFactory().buildGeometry(e)},Up.prototype.getErrorMessage=function(){return this._errMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,qp);var zp=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},Vp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Tl(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new Tl(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},zp.prototype.checkDistance=function(){var t=new Up(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zp.prototype.checkPolygonal=function(){this._result instanceof eh||this._result instanceof ih||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zp.prototype.report=function(t){if(!zp.VERBOSE)return null;Ll.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zp.prototype.getErrorMessage=function(){return this._errorMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.isValidMsg=function(t,e,r){var n=new zp(t,e,r);return n.isValid()?null:n.getErrorMessage()},zp.isValid=function(t,e,r){return!!new zp(t,e,r).isValid()},Vp.VERBOSE.get=function(){return!1},Vp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Vp);var Wp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Wp.prototype.getCoordinates=function(){return this._pts},Wp.prototype.size=function(){return this._pts.length},Wp.prototype.getCoordinate=function(t){return this._pts[t]},Wp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Wp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:yf.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Wp.prototype.setData=function(t){this._data=t},Wp.prototype.getData=function(){return this._data},Wp.prototype.toString=function(){return kl.toLineString(new ch(this._pts))},Wp.prototype.interfaces_=function(){return[vf]},Wp.prototype.getClass=function(){return Wp};var Xp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Xp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Xp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Xp.prototype.getIntersectionSegments=function(){return this._intSegments},Xp.prototype.count=function(){return this._intersectionCount},Xp.prototype.getIntersections=function(){return this._intersections},Xp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Xp.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(r,n)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Xp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Xp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Xp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Xp.prototype.interfaces_=function(){return[Kf]},Xp.prototype.getClass=function(){return Xp},Xp.createAllIntersectionsFinder=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e},Xp.createAnyIntersectionFinder=function(t){return new Xp(t)},Xp.createIntersectionCounter=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hp=function(){this._li=new zl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hp.prototype.isValid=function(){return this.execute(),this._isValid},Hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Xp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Pf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+kl.toLineString(t[0],t[1])+" and "+kl.toLineString(t[2],t[3])},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.computeIntersections=function(t){var e=new Hp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Yp=function t(){this._nv=null;var e=arguments[0];this._nv=new Hp(t.toSegmentStrings(e))};Yp.prototype.checkValid=function(){this._nv.checkValid()},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.toSegmentStrings=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Wp(n.getCoordinates(),n))}return e},Yp.checkValid=function(t){new Yp(t).checkValid()};var Zp=function(t){this._mapOp=t};Zp.prototype.map=function(t){for(var e=new cc,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(_h.toGeometryArray(e))},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.map=function(t,e){return new Zp(e).map(t)};var Qp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cc,this._resultLineList=new cc;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};Qp.prototype.collectLines=function(t){for(var e=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var n=r.next();e.collectLineEdge(n,t,e._lineEdgesList),e.collectBoundaryTouchEdge(n,t,e._lineEdgesList)}},Qp.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},Qp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Qp.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},Qp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Qp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Qp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Qp.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Gl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(n,e)&&e===Nd.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var Jp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Jp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Jp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!r.isInResult()&&(!r.isIncidentEdgeInResult()&&(0===r.getEdges().getDegree()||t===Nd.INTERSECTION))){var n=r.getLabel();Nd.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Jp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof nh&&!n.isEmpty()||(r=!1);for(var i=new cc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nh||(r=!1),i.add(s))}if(r)return this._factory.createPolygon(n,i.toArray([]));var a=new cc;return null!==n&&a.add(n),a.addAll(i),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformMultiPolygon=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var r=new cc,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_h.toGeometryArray(r)):this._factory.buildGeometry(r)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof $c)return this.transformPoint(t,null);if(t instanceof rh)return this.transformMultiPoint(t,null);if(t instanceof nh)return this.transformLinearRing(t,null);if(t instanceof Jc)return this.transformLineString(t,null);if(t instanceof Bc)return this.transformMultiLineString(t,null);if(t instanceof eh)return this.transformPolygon(t,null);if(t instanceof ih)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new rl("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var $p=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _f,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jc&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};$p.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new ll(o)),0===n&&this._isClosed&&t.set(t.size()-1,new ll(o)))}},$p.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},$p.prototype.snapTo=function(t){var e=new fc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$p.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ll(i),!1)}},$p.prototype.findSegmentIndexToSnap=function(t,e){for(var r=this,n=nl.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(r._seg.p0=e.get(o),r._seg.p1=e.get(o+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var s=r._seg.distance(t);s<r._snapTolerance&&s<n&&(n=s,i=o)}return i},$p.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var td=function(t){this._srcGeom=t||null},ed={SNAP_PRECISION_FACTOR:{configurable:!0}};td.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new rd(e,r).transform(this._srcGeom)},td.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new rd(t,r,!0).transform(this._srcGeom),i=n;return e&&yl(i,th)&&(i=n.buffer(0)),i},td.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},td.prototype.extractTargetCoordinates=function(t){for(var e=new Tc,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},td.prototype.computeMinimumSegmentLength=function(t){for(var e=nl.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.snap=function(t,e,r){var n=new Array(2).fill(null),i=new td(t);n[0]=i.snapTo(e,r);var o=new td(e);return n[1]=o.snapTo(n[0],r),n},td.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=td.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===yh.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(td.computeOverlaySnapTolerance(i),td.computeOverlaySnapTolerance(o))}},td.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*td.SNAP_PRECISION_FACTOR},td.snapToSelf=function(t,e,r){return new td(t).snapToSelf(e,r)},ed.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(td,ed);var rd=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new $p(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nl.longBitsToDouble(t),r=nl.toBinaryString(t),n="0000000000000000000000000000000000000000000000000000000000000000"+r,i=n.substring(n.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if(nd.getBit(t,n)!==nd.getBit(e,n))return r;r++}return 52};var id=function(){this._commonCoord=null,this._ccFilter=new sd},od={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};id.prototype.addCommonBits=function(t){var e=new ad(this._commonCoord);t.apply(e),t.geometryChanged()},id.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ll(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new ad(e);return t.apply(r),t.geometryChanged(),t},id.prototype.getCommonCoordinate=function(){return this._commonCoord},id.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},od.CommonCoordinateFilter.get=function(){return sd},od.Translater.get=function(){return ad},Object.defineProperties(id,od);var sd=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};sd.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},sd.prototype.getCommonCoordinate=function(){return new ll(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},sd.prototype.interfaces_=function(){return[Kl]},sd.prototype.getClass=function(){return sd};var ad=function(){this.trans=null;var t=arguments[0];this.trans=t};ad.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},ad.prototype.isDone=function(){return!1},ad.prototype.isGeometryChanged=function(){return!0},ad.prototype.interfaces_=function(){return[kc]},ad.prototype.getClass=function(){return ad};var ud=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ud.prototype.selfSnap=function(t){return new td(t).snapTo(t,this._snapTolerance)},ud.prototype.removeCommonBits=function(t){this._cbr=new id,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ud.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ud.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(r)},ud.prototype.checkValid=function(t){t.isValid()||Ll.out.println("Snapped geometry is invalid")},ud.prototype.computeSnapTolerance=function(){this._snapTolerance=td.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ud.prototype.snap=function(t){var e=this.removeCommonBits(t);return td.snap(e[0],e[1],this._snapTolerance)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,r){return new ud(t,e).getResultGeometry(r)},ud.union=function(t,e){return ud.overlayOp(t,e,Nd.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Nd.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Nd.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Nd.DIFFERENCE)};var ld=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ld.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t);r=!0}catch(t){if(!(t instanceof jl))throw t;n=t}if(!r)try{e=ud.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof jl?n:t}return e},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld},ld.overlayOp=function(t,e,r){return new ld(t,e).getResultGeometry(r)},ld.union=function(t,e){return ld.overlayOp(t,e,Nd.UNION)},ld.intersection=function(t,e){return ld.overlayOp(t,e,Nd.INTERSECTION)},ld.symDifference=function(t,e){return ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},ld.difference=function(t,e){return ld.overlayOp(t,e,Nd.DIFFERENCE)};var cd=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};cd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd};var hd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},fd={INSERT:{configurable:!0},DELETE:{configurable:!0}};hd.prototype.isDelete=function(){return this._eventType===hd.DELETE},hd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},hd.prototype.getObject=function(){return this._obj},hd.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},hd.prototype.getInsertEvent=function(){return this._insertEvent},hd.prototype.isInsert=function(){return this._eventType===hd.INSERT},hd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},hd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},hd.prototype.interfaces_=function(){return[ol]},hd.prototype.getClass=function(){return hd},fd.INSERT.get=function(){return 1},fd.DELETE.get=function(){return 2},Object.defineProperties(hd,fd);var pd=function(){};pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd};var dd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};dd.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(dd.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},dd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},dd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},dd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},dd.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},dd.prototype.hasProperIntersection=function(){return this._hasProper},dd.prototype.hasIntersection=function(){return this._hasIntersection},dd.prototype.isDone=function(){return this._isDone},dd.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},dd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},dd.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yd=function(t){function e(){t.call(this),this.events=new cc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var r=0;r<this.events.size();r++){var n=t.events.get(r);if(n.isInsert()&&t.processOverlaps(r,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof dd&&yl(arguments[0],uc)&&yl(arguments[1],uc)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&yl(arguments[0],uc)&&arguments[1]instanceof dd){var a=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new cd(r,i),s=new hd(e,r.getMinX(i),o);this.events.add(s),this.events.add(new hd(r.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(i.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=e.iterator();r.hasNext();){var n=r.next();t.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pd),vd=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},gd={NodeComparator:{configurable:!0}};vd.prototype.getMin=function(){return this._min},vd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},vd.prototype.getMax=function(){return this._max},vd.prototype.toString=function(){return kl.toLineString(new ll(this._min,0),new ll(this._max,0))},vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},gd.NodeComparator.get=function(){return md},Object.defineProperties(vd,gd);var md=function(){};md.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},md.prototype.interfaces_=function(){return[al]},md.prototype.getClass=function(){return md};var _d=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),xd=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vd),bd=function(){this._leaves=new cc,this._root=null,this._level=0};bd.prototype.buildTree=function(){nf.sort(this._leaves,new vd.NodeComparator);for(var t=this._leaves,e=null,r=new cc;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},bd.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(t,e,r))},bd.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},bd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},bd.prototype.printNode=function(t){Ll.out.println(kl.toLineString(new ll(t._min,this._level),new ll(t._max,this._level)))},bd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},bd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new xd(t.get(r),t.get(r+1));e.add(i)}}},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var Sd=function(){this._items=new cc};Sd.prototype.visitItem=function(t){this._items.add(t)},Sd.prototype.getItems=function(){return this._items},Sd.prototype.interfaces_=function(){return[$h]},Sd.prototype.getClass=function(){return Sd};var Cd=function(){this._index=null;var t=arguments[0];if(!yl(t,th))throw new rl("Argument must be Polygonal");this._index=new Pd(t)},wd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Cd.prototype.locate=function(t){var e=new Wl(t),r=new Id(e);return this._index.query(t.y,t.y,r),e.getLocation()},Cd.prototype.interfaces_=function(){return[Vf]},Cd.prototype.getClass=function(){return Cd},wd.SegmentVisitor.get=function(){return Id},wd.IntervalIndexedGeometry.get=function(){return Pd},Object.defineProperties(Cd,wd);var Id=function(){this._counter=null;var t=arguments[0];this._counter=t};Id.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Id.prototype.interfaces_=function(){return[$h]},Id.prototype.getClass=function(){return Id};var Pd=function(){this._index=new bd;var t=arguments[0];this.init(t)};Pd.prototype.init=function(t){for(var e=Mp.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Pd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new _f(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Pd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Sd;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd};var Ed=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new dh,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Lp,2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;n.getLocation(t,Eh.ON)===pl.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new dd(r,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof nh||this._parentGeom instanceof eh||this._parentGeom instanceof ih,u=n||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new dd(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof $c){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,pl.INTERIOR)}else if(arguments[0]instanceof ll){var r=arguments[0];this.insertPoint(this._argIndex,r,pl.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),pl.EXTERIOR,pl.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,pl.INTERIOR,pl.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],pl.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],pl.BOUNDARY)},e.prototype.addLineString=function(t){var e=pc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new sp(e,new Dh(this._argIndex,pl.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),Gl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===pl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=pc.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;Xl.isCCW(n)&&(i=r,o=e);var s=new sp(n,new Dh(this._argIndex,pl.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],pl.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Dh(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new yd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ih&&(this._useBoundaryDeterminationRule=!1),e instanceof eh)this.addPolygon(e);else if(e instanceof Jc)this.addLineString(e);else if(e instanceof $c)this.addPoint(e);else if(e instanceof rh)this.addCollection(e);else if(e instanceof Bc)this.addCollection(e);else if(e instanceof ih)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return yl(this._parentGeom,th)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Cd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?pl.BOUNDARY:pl.INTERIOR},e}(Yh),Md=function(){if(this._li=new zl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ed(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ed(0,e,n),this._arg[1]=new Ed(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ed(0,i,s),this._arg[1]=new Ed(1,o,s)}};Md.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Md.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md};var Ld=function(){};Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld},Ld.map=function(){if(arguments[0]instanceof Zl&&yl(arguments[1],Ld.MapOp)){for(var t=arguments[0],e=arguments[1],r=new cc,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(yl(arguments[0],oc)&&yl(arguments[1],Ld.MapOp)){for(var o=arguments[0],s=arguments[1],a=new cc,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Ld.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new Lp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jf,this._resultPolyList=new cc,this._resultLineList=new cc,this._resultPointList=new cc,this._graph=new Yh(new Zf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Dh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new cc;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==pl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new cc,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new cc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Yp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Zh(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Qp(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Jp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Eh.RIGHT),i.getLocation(1,Eh.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(Gl.isTrue(!n.isNull(i,Eh.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Eh.LEFT,n.getLocation(i,Eh.LEFT)),Gl.isTrue(!n.isNull(i,Eh.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Eh.RIGHT,n.getLocation(i,Eh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Md);Nd.overlayOp=function(t,e,r){return new Nd(t,e).getResultGeometry(r)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Zp.map(t,{interfaces_:function(){return[Ld.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(n,i);break;case Nd.UNION:o=Math.max(n,i);break;case Nd.DIFFERENCE:o=n;break;case Nd.SYMDIFFERENCE:o=Math.max(n,i)}return o},Nd.createEmptyResult=function(t,e,r,n){var i=null;switch(Nd.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return Nd.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===pl.BOUNDARY&&(i=pl.INTERIOR),o===pl.BOUNDARY&&(o=pl.INTERIOR),s){case Nd.INTERSECTION:return i===pl.INTERIOR&&o===pl.INTERIOR;case Nd.UNION:return i===pl.INTERIOR||o===pl.INTERIOR;case Nd.DIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR;case Nd.SYMDIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR||i!==pl.INTERIOR&&o===pl.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var Td=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Lp,this._seg=new _f;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Td.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,r=0;r<this._linework.getNumGeometries();r++)for(var n=e._linework.getGeometryN(r).getCoordinateSequence(),i=0;i<n.size()-1;i++){if(n.getCoordinate(i,e._seg.p0),n.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0}return!1},Td.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?pl.BOUNDARY:this._ptLocator.locate(t,this._g)},Td.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var r=e.getLinework(),n=_h.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var Od=function(){this._linework=null,this._linework=new cc};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof eh){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Od.prototype.interfaces_=function(){return[Dc]},Od.prototype.getClass=function(){return Od};var Rd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Rd.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},Rd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Rd.prototype.getPoints=function(t){for(var e=new cc,r=Mp.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},Rd.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=r*i/s,u=r*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new ll(l-u,c+a);n.add(h)}if(this._doRight){var f=new ll(l+u,c-a);n.add(f)}},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd};var Ad=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new cc;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new Td(this._geom[0],this._boundaryDistanceTolerance),new Td(this._geom[1],this._boundaryDistanceTolerance),new Td(this._geom[2],this._boundaryDistanceTolerance)]},Fd={TOLERANCE:{configurable:!0}};Ad.prototype.reportResult=function(t,e,r){Ll.out.println("Overlay result invalid - A:"+pl.toLocationSymbol(e[0])+" B:"+pl.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+pl.toLocationSymbol(e[2]))},Ad.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Ad.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=0;r<this._testCoords.size();r++){var n=t._testCoords.get(r);if(!t.checkValid(e,n))return t._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Ad.hasLocation(this._location,pl.BOUNDARY)||this.isValidResult(i,this._location)}},Ad.prototype.addTestPts=function(t){var e=new Rd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ad.prototype.isValidResult=function(t,e){var r=Nd.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===pl.INTERIOR);return n||this.reportResult(t,e,r),n},Ad.prototype.getInvalidLocation=function(){return this._invalidLocation},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad},Ad.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},Ad.computeBoundaryDistanceTolerance=function(t,e){return Math.min(td.computeSizeBasedSnapTolerance(t),td.computeSizeBasedSnapTolerance(e))},Ad.isValid=function(t,e,r,n){return new Ad(t,e,n).isValid(r)},Fd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ad,Fd);var Dd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Dd.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},Dd.prototype.combine=function(){for(var t=new cc,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Dd(t);return e.combine()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Dd(Dd.createList(r,n));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Dd(Dd.createList(o,s,a));return u.combine()}},Dd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Dd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new cc;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new cc;return s.add(n),s.add(i),s.add(o),s}};var kd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new cc)},jd={STRTREE_NODE_CAPACITY:{configurable:!0}};kd.prototype.reduceToGeometries=function(t){for(var e=new cc,r=t.iterator();r.hasNext();){var n=r.next(),i=null;yl(n,uc)?i=this.unionTree(n):n instanceof Zl&&(i=n),e.add(i)}return e},kd.prototype.extractByEnvelope=function(t,e,r){for(var n=new cc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},kd.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Dd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},kd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new cf(kd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},kd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=kd.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(kd.getGeometry(e,r),kd.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},kd.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},kd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kd.prototype.unionActual=function(t,e){return kd.restrictToPolygons(t.union(e))},kd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kd.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new cc,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),s=this.unionActual(i,o);return n.add(s),Dd.combine(n)},kd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),r=e.buildGeometry(t),n=r.buffer(0);return n}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.restrictToPolygons=function(t){if(yl(t,th))return t;var e=Ep.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_h.toPolygonArray(e))},kd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kd.union=function(t){return new kd(t).union()},jd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kd,jd);var Bd=function(){};function Gd(){return new Ud}function Ud(){this.reset()}Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},Bd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ld.overlayOp(t,e,Nd.UNION)},Ud.prototype={constructor:Ud,reset:function(){this.s=this.t=0},add:function(t){zd(qd,t,this.t),zd(this,qd.s,this.s),this.s?this.t+=qd.t:this.s=qd.t},valueOf:function(){return this.s}};var qd=new Ud;function zd(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}var Vd=1e-6,Wd=Math.PI,Xd=Wd/2,Hd=Wd/4,Yd=2*Wd,Zd=180/Wd,Qd=Wd/180,Jd=Math.abs,Kd=Math.atan,$d=Math.atan2,ty=Math.cos,ey=Math.sin,ry=Math.sqrt;function ny(t){return t>1?0:t<-1?Wd:Math.acos(t)}function iy(t){return t>1?Xd:t<-1?-Xd:Math.asin(t)}function oy(){}function sy(t,e){t&&uy.hasOwnProperty(t.type)&&uy[t.type](t,e)}var ay={Feature:function(t,e){sy(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)sy(r[n].geometry,e)}},uy={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){ly(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)ly(r[n],e,0)},Polygon:function(t,e){cy(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)cy(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)sy(r[n],e)}};function ly(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function cy(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)ly(t[r],e,1);e.polygonEnd()}Gd(),Gd();function hy(t){return[$d(t[1],t[0]),iy(t[2])]}function fy(t){var e=t[0],r=t[1],n=ty(r);return[n*ty(e),n*ey(e),ey(r)]}function py(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dy(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yy(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vy(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function gy(t){var e=ry(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Gd();function my(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function _y(t,e){return[t>Wd?t-Yd:t<-Wd?t+Yd:t,e]}function xy(t){return function(e,r){return[(e+=t)>Wd?e-Yd:e<-Wd?e+Yd:e,r]}}function by(t){var e=xy(t);return e.invert=xy(-t),e}function Sy(t,e){var r=ty(t),n=ey(t),i=ty(e),o=ey(e);function s(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*r+a*n;return[$d(u*i-c*o,a*r-l*n),iy(c*i+u*o)]}return s.invert=function(t,e){var s=ty(e),a=ty(t)*s,u=ey(t)*s,l=ey(e),c=l*i-u*o;return[$d(u*i+l*o,a*r+c*n),iy(c*r-a*n)]},s}function Cy(t,e){(e=fy(e))[0]-=t,gy(e);var r=ny(-e[1]);return((-e[2]<0?-r:r)+Yd-Vd)%Yd}function wy(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:oy,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Iy(t,e){return Jd(t[0]-e[0])<Vd&&Jd(t[1]-e[1])<Vd}function Py(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Ey(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],s=t[e];if(Iy(n,s)){for(i.lineStart(),o=0;o<e;++o)i.point((n=t[o])[0],n[1]);i.lineEnd()}else a.push(r=new Py(n,t,null,!0)),u.push(r.o=new Py(n,null,r,!1)),a.push(r=new Py(s,t,null,!1)),u.push(r.o=new Py(s,null,r,!0))}}),a.length){for(u.sort(e),My(a),My(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else n(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function My(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Ly(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}_y.invert=_y;var Ny,Ty;1===(Ny=Ly).length&&(Ty=Ny,Ny=function(t,e){return Ly(Ty(t),e)});function Oy(t){for(var e,r,n,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(r=new Array(s);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--s]=n[e];return r}var Ry=1e9,Ay=-Ry;function Fy(t,e,r,n){function i(i,o){return t<=i&&i<=r&&e<=o&&o<=n}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:r,c>1?n:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(n,i){return Jd(n[0]-t)<Vd?i>0?0:3:Jd(n[0]-r)<Vd?i>0?2:1:Jd(n[1]-e)<Vd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),n=s(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,f,p,d,y,v,g,m,_=s,x=wy(),b={point:S,lineStart:function(){b.point=C,l&&l.push(c=[]);g=!0,v=!1,d=y=NaN},lineEnd:function(){u&&(C(h,f),p&&v&&x.rejoin(),u.push(x.result()));b.point=S,v&&_.lineEnd()},polygonStart:function(){_=x,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,i=l.length;r<i;++r)for(var o,s,a=l[r],u=1,c=a.length,h=a[0],f=h[0],p=h[1];u<c;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=n?p>n&&(f-o)*(n-s)>(p-s)*(t-o)&&++e:p<=n&&(f-o)*(n-s)<(p-s)*(t-o)&&--e;return e}(),r=m&&e,i=(u=Oy(u)).length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Ey(u,a,e,o,s),s.polygonEnd());_=s,u=l=c=null}};function S(t,e){i(t,e)&&_.point(t,e)}function C(o,s){var a=i(o,s);if(l&&c.push([o,s]),g)h=o,f=s,p=a,g=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var u=[d=Math.max(Ay,Math.min(Ry,d)),y=Math.max(Ay,Math.min(Ry,y))],x=[o=Math.max(Ay,Math.min(Ry,o)),s=Math.max(Ay,Math.min(Ry,s))];!function(t,e,r,n,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=r-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=n-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,r,n)?a&&(_.lineStart(),_.point(o,s),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(x[0],x[1]),a||_.lineEnd(),m=!1)}d=o,y=s,v=a}return b}}var Dy=Gd();Gd();function ky(t){return t}Gd(),Gd();var jy=1/0,By=jy,Gy=-jy,Uy=Gy,qy={point:function(t,e){t<jy&&(jy=t);t>Gy&&(Gy=t);e<By&&(By=e);e>Uy&&(Uy=e)},lineStart:oy,lineEnd:oy,polygonStart:oy,polygonEnd:oy,result:function(){var t=[[jy,By],[Gy,Uy]];return Gy=Uy=-(By=jy=1/0),t}};Gd();function zy(t,e,r,n){return function(i,o){var s,a,u,l=e(o),c=i.invert(n[0],n[1]),h=wy(),f=e(h),p=!1,d={point:y,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=x,d.lineEnd=b,a=[],s=[]},polygonEnd:function(){d.point=y,d.lineStart=g,d.lineEnd=m,a=Oy(a);var t=function(t,e){var r=e[0],n=e[1],i=[ey(r),-ty(r),0],o=0,s=0;Dy.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+Hd,d=ey(p),y=ty(p),v=0;v<c;++v,f=m,d=x,y=b,h=g){var g=l[v],m=g[0],_=g[1]/2+Hd,x=ey(_),b=ty(_),S=m-f,C=S>=0?1:-1,w=C*S,I=w>Wd,P=d*x;if(Dy.add($d(P*C*ey(w),y*b+P*ty(w))),o+=I?S+C*Yd:S,I^f>=r^m>=r){var E=dy(fy(h),fy(g));gy(E);var M=dy(i,E);gy(M);var L=(I^S>=0?-1:1)*iy(M[2]);(n>L||n===L&&(E[0]||E[1]))&&(s+=I^S>=0?1:-1)}}return(o<-1e-6||o<Vd&&Dy<-1e-6)^1&s}(s,c);a.length?(p||(o.polygonStart(),p=!0),Ey(a,Wy,t,r,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function v(t,e){var r=i(t,e);l.point(r[0],r[1])}function g(){d.point=v,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var r=i(t,e);f.point(r[0],r[1])}function x(){f.lineStart(),u=[]}function b(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,r,n,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&i){if((e=(r=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((n=r[t])[0],n[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Vy))}return d}}function Vy(t){return t.length>1}function Wy(t,e){return((t=t.x)[0]<0?t[1]-Xd-Vd:Xd-t[1])-((e=e.x)[0]<0?e[1]-Xd-Vd:Xd-e[1])}var Xy=zy(function(){return!0},function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Wd:-Wd,u=Jd(o-r);Jd(u-Wd)<Vd?(t.point(r,n=(n+s)/2>0?Xd:-Xd),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),e=0):i!==a&&u>=Wd&&(Jd(r-i)<Vd&&(r-=i*Vd),Jd(o-a)<Vd&&(o-=a*Vd),n=function(t,e,r,n){var i,o,s=ey(t-r);return Jd(s)>Vd?Kd((ey(e)*(o=ty(n))*ey(r)-ey(n)*(i=ty(e))*ey(t))/(i*o*s)):(e+n)/2}(r,n,o,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),e=0),t.point(r=o,n=s),i=a},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*Xd,n.point(-Wd,i),n.point(0,i),n.point(Wd,i),n.point(Wd,0),n.point(Wd,-i),n.point(0,-i),n.point(-Wd,-i),n.point(-Wd,0),n.point(-Wd,i);else if(Jd(t[0]-e[0])>Vd){var o=t[0]<e[0]?Wd:-Wd;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])},[-Wd,-Xd]);function Hy(t,e){var r=ty(t),n=r>0,i=Jd(r)>Vd;function o(t,e){return ty(t)*ty(e)>r}function s(t,e,n){var i=[1,0,0],o=dy(fy(t),fy(e)),s=py(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var l=r*s/u,c=-r*a/u,h=dy(i,o),f=vy(i,l);yy(f,vy(o,c));var p=h,d=py(f,p),y=py(p,p),v=d*d-y*(py(f,f)-1);if(!(v<0)){var g=ry(v),m=vy(p,(-d-g)/y);if(yy(m,f),m=hy(m),!n)return m;var _,x=t[0],b=e[0],S=t[1],C=e[1];b<x&&(_=x,x=b,b=_);var w=b-x,I=Jd(w-Wd)<Vd;if(!I&&C<S&&(_=S,S=C,C=_),I||w<Vd?I?S+C>0^m[1]<(Jd(m[0]-x)<Vd?S:C):S<=m[1]&&m[1]<=C:w>Wd^(x<=m[0]&&m[0]<=b)){var P=vy(p,(-d+g)/y);return yy(P,f),[m,hy(P)]}}}function a(e,r){var i=n?t:Wd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}return zy(o,function(t){var e,r,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],y=o(h,f),v=n?y?0:a(h,f):y?a(h+(h<0?Wd:-Wd),f):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=s(e,d))||Iy(e,p)||Iy(d,p))&&(d[0]+=Vd,d[1]+=Vd,y=o(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&n^y){var g;v&r||!(g=s(d,e,!0))||(c=0,n?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!y||e&&Iy(e,d)||t.point(d[0],d[1]),e=d,u=y,r=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(r,n,i,o){!function(t,e,r,n,i,o){if(r){var s=ty(e),a=ey(e),u=n*r;null==i?(i=e+n*Yd,o=e-u/2):(i=Cy(s,i),o=Cy(s,o),(n>0?i<o:i>o)&&(i+=n*Yd));for(var l,c=i;n>0?c>o:c<o;c-=u)l=hy([s,-a*ty(c),-a*ey(c)]),t.point(l[0],l[1])}}(o,t,e,i,r,n)},n?[0,-t]:[-Wd,t-Wd])}function Yy(t){return function(e){var r=new Zy;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Zy(){}function Qy(t,e,r){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ay.hasOwnProperty(t.type)?ay[t.type](t,e):sy(t,e)}(r,t.stream(qy));var s=qy.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Zy.prototype={constructor:Zy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jy=ty(30*Qd);function Ky(t,e){return+e?function(t,e){function r(n,i,o,s,a,u,l,c,h,f,p,d,y,v){var g=l-n,m=c-i,_=g*g+m*m;if(_>4*e&&y--){var x=s+f,b=a+p,S=u+d,C=ry(x*x+b*b+S*S),w=iy(S/=C),I=Jd(Jd(S)-1)<Vd||Jd(o-h)<Vd?(o+h)/2:$d(b,x),P=t(I,w),E=P[0],M=P[1],L=E-n,N=M-i,T=m*L-g*N;(T*T/_>e||Jd((g*L+m*N)/_-.5)>.3||s*f+a*p+u*d<Jy)&&(r(n,i,o,s,a,u,E,M,I,x/=C,b/=C,S,y,v),v.point(E,M),r(E,M,I,x,b,S,l,c,h,f,p,d,y,v))}}return function(e){var n,i,o,s,a,u,l,c,h,f,p,d,y={point:v,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=x},polygonEnd:function(){e.polygonEnd(),y.lineStart=g}};function v(r,n){r=t(r,n),e.point(r[0],r[1])}function g(){c=NaN,y.point=m,e.lineStart()}function m(n,i){var o=fy([n,i]),s=t(n,i);r(c,h,l,f,p,d,c=s[0],h=s[1],l=n,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){y.point=v,e.lineEnd()}function x(){g(),y.point=b,y.lineEnd=S}function b(t,e){m(n=t,e),i=c,o=h,s=f,a=p,u=d,y.point=m}function S(){r(c,h,l,f,p,d,i,o,n,s,a,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return Yy({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)}var $y=Yy({point:function(t,e){this.stream.point(t*Qd,e*Qd)}});function tv(t){return function(t){var e,r,n,i,o,s,a,u,l,c,h=150,f=480,p=250,d=0,y=0,v=0,g=0,m=0,_=null,x=Xy,b=null,S=ky,C=.5,w=Ky(E,C);function I(t){return[(t=o(t[0]*Qd,t[1]*Qd))[0]*h+r,n-t[1]*h]}function P(t){return(t=o.invert((t[0]-r)/h,(n-t[1])/h))&&[t[0]*Zd,t[1]*Zd]}function E(t,i){return[(t=e(t,i))[0]*h+r,n-t[1]*h]}function M(){o=my(i=function(t,e,r){return(t%=Yd)?e||r?my(by(t),Sy(e,r)):by(t):e||r?Sy(e,r):_y}(v,g,m),e);var t=e(d,y);return r=f-t[0]*h,n=p+t[1]*h,L()}function L(){return l=c=null,I}return I.stream=function(t){return l&&c===t?l:l=$y(x(i,w(S(c=t))))},I.clipAngle=function(t){return arguments.length?(x=+t?Hy(_=t*Qd,6*Qd):(_=null,Xy),L()):_*Zd},I.clipExtent=function(t){return arguments.length?(S=null==t?(b=s=a=u=null,ky):Fy(b=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==b?null:[[b,s],[a,u]]},I.scale=function(t){return arguments.length?(h=+t,M()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],M()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*Qd,y=t[1]%360*Qd,M()):[d*Zd,y*Zd]},I.rotate=function(t){return arguments.length?(v=t[0]%360*Qd,g=t[1]%360*Qd,m=t.length>2?t[2]%360*Qd:0,M()):[v*Zd,g*Zd,m*Zd]},I.precision=function(t){return arguments.length?(w=Ky(E,C=t*t),L()):ry(C)},I.fitExtent=function(t,e){return Qy(I,t,e)},I.fitSize=function(t,e){return function(t,e,r){return Qy(t,[[0,0],e],r)}(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&P,M()}}(function(){return t})()}var ev=function(t){return function(e,r){var n=ty(e),i=ty(r),o=t(n*i);return[o*i*ey(e),o*ey(r)]}}(function(t){return(t=ny(t))&&t/ey(t)});function rv(){return tv(ev).scale(79.4188).clipAngle(179.999)}function nv(t,e,n,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return G(t,function(t){var r=nv(t,e,n,i);r&&u.push(r)}),d(u)}var l=function(t){var e=xr(t).geometry.coordinates,n=[-e[0],-e[1]];return rv().rotate(n).scale(r)}(a),c={type:a.type,coordinates:ov(a.coordinates,l)},h=(new Ih).read(c),f=x(b(e,n),"meters"),p=_p.bufferOp(h,f,i);if(!iv((p=(new Ph).write(p)).coordinates))return s({type:p.type,coordinates:sv(p.coordinates,l)},o)}function iv(t){return Array.isArray(t[0])?iv(t[0]):isNaN(t[0])}function ov(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return ov(t,e)})}function sv(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return sv(t,e)})}function av(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.intersection(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)}function uv(t,e,r){void 0===r&&(r={});var n=JSON.stringify(r.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,c=2*e/xe([i,u],[s,u],r)*(s-i),h=2*e/xe([l,o],[l,a],r)*(a-o),f=c/2,p=2*f,y=Math.sqrt(3)/2*h,v=s-i,g=a-o,m=3/4*p,_=y,x=(v-p)/(p-f/2),b=Math.floor(x),S=(b*m-f/2-v)/2-f/2+m/2,C=Math.floor((g-y)/y),w=(g-C*y)/2,I=C*y-g>y/2;I&&(w-=y/4);for(var P=[],E=[],M=0;M<6;M++){var L=2*Math.PI/6*M;P.push(Math.cos(L)),E.push(Math.sin(L))}for(var N=[],T=0;T<=b;T++)for(var O=0;O<=C;O++){var R=T%2==1;if((0!==O||!R)&&(0!==O||!I)){var A=T*m+i-S,F=O*_+o+w;if(R&&(F-=y/2),!0===r.triangles)cv([A,F],c/2,h/2,JSON.parse(n),P,E).forEach(function(t){r.mask?av(r.mask,t)&&N.push(t):N.push(t)});else{var D=lv([A,F],c/2,h/2,JSON.parse(n),P,E);r.mask?av(r.mask,D)&&N.push(D):N.push(D)}}}return d(N)}function lv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+r*o[a];s.push([u,l])}return s.push(s[0].slice()),c([s],n)}function cv(t,e,r,n,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+r*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+r*o[(a+1)%6]]),u.push(t),s.push(c([u],n))}return s}function hv(t){return g(t)}function fv(t){return c(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function pv(t,e,r){return void 0===r&&(r={}),function(t,e,r,n){void 0===n&&(n={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/xe([o,s],[a,s],n)*(a-o),h=r/xe([o,s],[o,u],n)*(u-s),f=a-o,p=u-s,y=Math.floor(f/l),v=Math.floor(p/h),g=(p-v*h)/2,m=o+(f-y*l)/2,_=0;_<y;_++){for(var x=s+g,b=0;b<v;b++){var S=c([[[m,x],[m,x+h],[m+l,x+h],[m+l,x],[m,x]]],n.properties);n.mask?Ls(n.mask,S)&&i.push(S):i.push(S),x+=h}m+=l}return d(i)}(t,e,e,r)}function dv(t,e,r){void 0===r&&(r={});for(var n=[],i=e/xe([t[0],t[1]],[t[2],t[1]],r)*(t[2]-t[0]),o=e/xe([t[0],t[1]],[t[0],t[3]],r)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)):s%2==0&&u%2==1?(h=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties)):u%2==0&&s%2==1?(h=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],r.properties),f=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],r.properties)):u%2==1&&s%2==1&&(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],r.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],r.properties)),r.mask?(av(r.mask,h)&&n.push(h),av(r.mask,f)&&n.push(f)):(n.push(h),n.push(f)),l+=o,u++}s++,a+=i}return d(n)}ev.invert=function(t){return function(e,r){var n=ry(e*e+r*r),i=t(n),o=ey(i),s=ty(i);return[$d(e*o,n*s),iy(n&&r*o/n)]}}(function(t){return t}),e.along=function(t,e,r){void 0===r&&(r={});for(var n=it(t).coordinates,i=0,o=0;o<n.length&&!(e>=i&&o===n.length-1);o++){if(i>=e){var s=e-i;if(s){var a=_r(n[o],n[o-1])-180;return gr(n[o],s,a,r)}return u(n[o])}i+=xe(n[o],n[o+1],r)}return u(n[n.length-1])},e.angle=function(t,e,r,n){if(void 0===n&&(n={}),!L(n))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=t,o=e,s=r,a=C(!0!==n.mercator?_r(i,o):Ui(i,o)),u=C(!0!==n.mercator?_r(s,o):Ui(s,o)),l=Math.abs(a-u);return!0===n.explementary?360-l:l},e.applyFilter=lu,e.area=zn,e.areaFactors=o,e.bbox=J,e.bboxClip=function(t,e){var r=it(t),n=r.type,i="Feature"===t.type?t.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(o=[o]),o.forEach(function(t){!function(t,e,r){var n,i,o,s,a,u=t.length,l=Ri(t[0],e),c=[];for(r||(r=[]),n=1;n<u;n++){for(s=t[n-1],i=o=Ri(a=t[n],e);;){if(!(l|i)){c.push(s),i!==o?(c.push(a),n<u-1&&(r.push(c),c=[])):n===u-1&&c.push(a);break}if(l&i)break;l?l=Ri(s=Oi(s,a,l,e),e):i=Ri(a=Oi(s,a,i,e),e)}l=o}c.length&&r.push(c)}(t,e,s)}),1===s.length?f(s[0],i):y(s,i);case"Polygon":return c(Ai(o,e),i);case"MultiPolygon":return g(o.map(function(t){return Ai(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},e.bboxPolygon=dr,e.bearing=_r,e.bearingToAngle=C,e.bearingToAzimuth=C,e.bezier=pr,e.bezierSpline=pr,e.booleanClockwise=Hi,e.booleanContains=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type,s=r.coordinates,a=n.coordinates;switch(i){case"Point":switch(o){case"Point":return ms(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(ms(t.coordinates[r],e.coordinates)){n=!0;break}return n}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){for(var i=n[r],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(ms(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Zn(n,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Zn({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Zn({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return r}(r,n);case"MultiPoint":return function(t,e){for(var r=!1,n=0,i=e.coordinates;n<i.length;n++){var o=i[n];if(Zn(o,t,{ignoreEndVertices:!0})&&(r=!0),!Zn(o,t))return!1}if(r)return!0;return!1}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ge(n,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,n=0,i=J(t),o=J(e);if(!gs(i,o))return!1;for(;n<e.coordinates.length-1;n++){if(ge({type:"Point",coordinates:_s(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){r=!0;break}}return r}(r,n);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var r=J(t),n=J(e);if(!gs(r,n))return!1;for(var i=it(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++){if(!ge(u[a],t))return!1}return!0}(r,n);case"MultiPoint":return function(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){if(!ge(n[r],t,{ignoreBoundary:!0}))return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return xs(r,n);case"Polygon":return Ss(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return xs(n,r);case"LineString":return function(t,e){if(On(t,e).features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var n=0;n<e.coordinates.length-1;n++){var i=!0;if(0!==n&&n!==e.coordinates.length-2||(i=!1),Cs(t.coordinates[r],t.coordinates[r+1],e.coordinates[n],i))return!0}return!1}(r,n);case"Polygon":return bs(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ss(n,r);case"LineString":return bs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=ps,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new Ms({precision:6}).compare(er(t),er(e))},e.booleanIntersects=Ls,e.booleanOverlap=function(t,e){var r=it(t),n=it(e),i=r.type,o=n.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Ms({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<r.coordinates.length;a++)for(var u=0;u<n.coordinates.length;u++){var l=r.coordinates[a],c=n.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,function(t){V(e,function(e){ji(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":V(t,function(t){V(e,function(e){On(t,e).features.length&&s++})})}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Vs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Vs(e,"line2"))throw new Error("line2 must be a LineString");for(var r=Qr(er(t)).features,n=Qr(er(e)).features,i=0;i<r.length;i++){var o=r[i].geometry.coordinates;if(!n[i])break;if(!zs(o,n[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ge,e.booleanPointOnLine=Zn,e.booleanWithin=Jn,e.buffer=function(t,e,r){var n=(r=r||{}).units||"kilometers",i=r.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return G(t,function(t){var r=nv(t,e,n,i);r&&o.push(r)}),d(o);case"FeatureCollection":return k(t,function(t){var r=nv(t,e,n,i);r&&k(r,function(t){t&&o.push(t)})}),d(o)}return nv(t,e,n,i)},e.center=xr,e.centerMean=ka,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var r=e.counter||10;if(!M(r))throw new Error("counter must be a number");var n=e.weight,i=ka(t,{weight:e.weight}),o=d([]);k(t,function(t){var e;o.features.push(br(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[n]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return ja(i.geometry.coordinates,[0,0],o,s,r)},e.centerOfMass=function t(e,r){switch(void 0===r&&(r={}),ot(e)){case"Point":return u(K(e),r.properties);case"Polygon":var n=[];R(e,function(t){n.push(t)});var i,o,s,a,l,c,h,f,p=br(e,{properties:r.properties}),d=p.geometry.coordinates,y=0,v=0,g=0,m=n.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(i=0;i<n.length-1;i++)a=(o=m[i])[0],c=o[1],l=(s=m[i+1])[0],g+=f=a*(h=s[1])-l*c,y+=(a+l)*f,v+=(c+h)*f;if(0===g)return p;var _=1/(6*(.5*g));return u([d[0]+_*y,d[1]+_*v],r.properties);default:var x=ve(e);return x?t(x,{properties:r.properties}):br(e,{properties:r.properties})}},e.centroid=br,e.circle=mr,e.cleanCoords=er,e.clone=Ie,e.clusterEach=su,e.clusterReduce=au,e.clusters=fu,e.clustersDbscan=function(t,e,r){void 0===r&&(r={}),!0!==r.mutate&&(t=Ie(t)),r.minPoints=r.minPoints||3;var n=new As.DBSCAN,i=n.run(B(t),P(e,r.units),r.minPoints,xe),o=-1;return i.forEach(function(e){o++,e.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=o,r.properties.dbscan="core"})}),n.noise.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var r=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(r/2)),e.numberOfClusters>r&&(e.numberOfClusters=r),!0!==e.mutate&&(t=Ie(t));var n=B(t),i=n.slice(0,e.numberOfClusters),o=qs(n,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),k(t,function(t,e){var r=o.idxs[e];t.properties.cluster=r,t.properties.centroid=s[r]}),t},e.collect=function(t,e,r,n){var i=Pt(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[r]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=J(t),r=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];r.forEach(function(e){ge([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[n]=o}),t},e.collectionOf=nt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return k(t,function(t){var r,n,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(n=e.MultiLineString.coordinates).push.apply(n,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var r=e.maxEdge||1/0,n=be(function(t){var e=[],r={};return k(t,function(t){if(t.geometry){var n=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,n)||(e.push(t),r[n]=!0)}}),d(e)}(t));if(n.features=n.features.filter(function(t){var n=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=xe(n,i,e),a=xe(i,o,e),u=xe(n,o,e);return s<=r&&a<=r&&u<=r}),n.features.length<1)return null;var i=tr(n);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),s(i)},e.containsNumber=tt,e.convertArea=E,e.convertDistance=P,e.convertLength=P,e.convex=ve,e.coordAll=B,e.coordEach=R,e.coordReduce=A,e.createBins=uu,e.degrees2radians=I,e.degreesToRadians=I,e.destination=gr,e.difference=function(t,e){var r=it(t),n=it(e),i=t.properties||{},o=tl.difference(r.coordinates,n.coordinates);return 0===o.length?null:1===o.length?c(o[0],i):g(o,i)},e.dissolve=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.propertyName;nt(t,"Polygon","dissolve");var n=[];if(!e.propertyName)return ni(g(tl.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};k(t,function(t){Object.prototype.hasOwnProperty.call(i,t.properties[r])||(i[t.properties[r]]=[]),i[t.properties[r]].push(t)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=g(tl.union.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a.properties[r]=o[s],n.push(a)}return ni(d(n))},e.distance=xe,e.distanceToDegrees=S,e.distanceToRadians=b,e.distanceWeight=za,e.earthRadius=r,e.ellipse=Fa,e.envelope=yr,e.explode=Sr,e.factors=n,e.feature=s,e.featureCollection=d,e.featureEach=k,e.featureOf=rt,e.featureReduce=j,e.filterProperties=hu,e.findPoint=Z,e.findSegment=Y,e.flatten=ni,e.flattenEach=q,e.flattenReduce=z,e.flip=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=Ie(t)),R(t,function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e}),t},e.geojsonType=et,e.geomEach=G,e.geomReduce=U,e.geometry=a,e.geometryCollection=m,e.getCluster=ou,e.getCoord=K,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;return t=K(t),e=K(e),n=n||{},i=i||100,o=o||10,new mi({x:t[0],y:t[1]},{x:e[0],y:e[1]},n).Arc(i,{offset:o}).json()},e.helpers=O,e.hexGrid=uv,e.inside=ge,e.interpolate=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s,a=J(t);switch(n){case"point":case"points":s=ei(a,e,r);break;case"square":case"squares":s=pv(a,e,r);break;case"hex":case"hexes":s=uv(a,e,r);break;case"triangle":case"triangles":s=dv(a,e,r);break;default:throw new Error("invalid gridType")}var u=[];return k(s,function(e){var s=0,a=0;k(t,function(t){var u,l=xe("point"===n?e:br(e),t,r);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=Ie(e);l.properties[i]=s/a,u.push(l)}),d(u)},e.intersect=av,e.invariant=st,e.isNumber=M,e.isObject=L,e.isobands=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!L(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Ji(t,{zProperty:n,flip:!0}),a=function(t,e,r){for(var n=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Jo(Qo(to(t,o,s-o))),u={};u.groupedRings=a,u[r]=o+"-"+s,n.push(u)}return n}(s,e,n);return d((a=function(t,e,r){var n=J(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!L(o[e]))throw new Error("Each mappedProperty is required to be an Object");var r=ht({},i,o[e]);return r[n]=t[n],g(t.groupedRings,r)}))},e.isolines=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!L(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:n,flip:!0});return d(function(t,e,r){var n=J(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){R(t,f)}),t}(function(t,e,r,n,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ht({},n,i[s]);u[r]=a;var l=y(dt(t,a),u);o.push(l)}return o}(s,e,n,i,o),s,t))},e.kinks=function(t){var e,r,n={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)e=[r.coordinates];else if("MultiLineString"===r.type)e=r.coordinates;else if("MultiPolygon"===r.type)e=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var r=0;r<t.length-1;r++)for(var i=r;i<e.length-1;i++){if(t===e){if(1===Math.abs(r-i))continue;if(0===r&&i===t.length-2&&t[r][0]===t[t.length-1][0]&&t[r][1]===t[t.length-1][1])continue}var o=Bn(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&n.features.push(u([o[0],o[1]]))}})}),n},e.length=Hn,e.lengthToDegrees=S,e.lengthToRadians=b,e.lineArc=Ci,e.lineChunk=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return q(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,n){var i=Hn(t,{units:r});if(i<=e)return n(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){n(Yn(t,e*s,e*(s+1),{units:r}),s)}}(t,e,n,function(t){o.push(t)})}),d(o)},e.lineDistance=Hn,e.lineEach=X,e.lineIntersect=On,e.lineOffset=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return ss(t,e,n);case"MultiLineString":var s=[];return q(t,function(t){s.push(ss(t,e,n).geometry.coordinates)}),y(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=ji,e.lineReduce=H,e.lineSegment=Qr,e.lineSlice=function(t,e,r){var n=$(r);if("LineString"!==ot(r))throw new Error("line must be a LineString");for(var i,o=An(r,t),s=An(r,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(n[u]);return a.push(i[1].geometry.coordinates),f(a,r.properties)},e.lineSliceAlong=Yn,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=ot(t),n=ot(e);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var i=ri(e,{precision:7});switch(n){case"Point":return xi(t,i);case"MultiPoint":return _i(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(t,On(t,i))}},e.lineString=f,e.lineStringToPolygon=Mi,e.lineStrings=p,e.lineToPolygon=Mi,e.mask=function(t,e){var r,n=fv(e),i=null;return"FeatureCollection"===t.type?i=hv(2===(r=t).features.length?tl.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):tl.union.apply(tl,r.features.map(function(t){return t.geometry.coordinates}))):i=hv(tl.union(t.geometry.coordinates)),i.geometry.coordinates.forEach(function(t){n.geometry.coordinates.push(t[0])}),n},e.meta=Q,e.midpoint=function(t,e){return gr(t,xe(t,e)/2,_r(t,e))},e.moranIndex=function(t,e){var r=e.inputField,n=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=za(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:n}),a=[];k(t,function(t){var e=t.properties||{};a.push(e[r])});for(var u=Va(a),l=function(t){for(var e=Va(t),r=0,n=0,i=t;n<i.length;n++){var o=i[n];r+=Math.pow(o-e,2)}return r/t.length}(a),c=0,h=0,f=0,p=0,d=s.length,y=0;y<d;y++){for(var v=0,g=0;g<d;g++)c+=s[y][g]*(a[y]-u)*(a[g]-u),h+=s[y][g],f+=Math.pow(s[y][g]+s[g][y],2),v+=s[y][g]+s[g][y];p+=Math.pow(v,2)}var m=c/h/l,_=-1/(d-1),x=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,b=Math.sqrt(x);return{expectedMoranIndex:_,moranIndex:m,stdNorm:b,zNorm:(m-_)/b}},e.multiLineString=y,e.multiPoint=v,e.multiPolygon=g,e.nearest=Zr,e.nearestPoint=Zr,e.nearestPointOnLine=An,e.nearestPointToLine=function(t,e,r){void 0===r&&(r={});var n=r.units,i=r.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return G(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return k(o,function(t){var r=Dn(t,e,{units:n});r<s&&(s=r,a=t)}),a&&(a.properties=ht({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var r=K(t),n=it(e).coordinates[0];if(n.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=r[0],l=r[1],c=n[0][0],h=n[0][1],f=void 0!==o?o:n[0][2],p=n[1][0],d=n[1][1],y=void 0!==s?s:n[1][2],v=n[2][0],g=n[2][1],m=void 0!==a?a:n[2][2];return(m*(u-c)*(l-d)+f*(u-p)*(l-g)+y*(u-v)*(l-h)-y*(u-c)*(l-g)-m*(u-p)*(l-h)-f*(u-v)*(l-d))/((u-c)*(l-d)+(u-p)*(l-g)+(u-v)*(l-h)-(u-c)*(l-g)-(u-p)*(l-h)-(u-v)*(l-d))},e.point=u,e.pointGrid=ei,e.pointOnFeature=Gn,e.pointOnLine=An,e.pointOnSurface=Gn,e.pointToLineDistance=Dn,e.points=l,e.pointsWithinPolygon=_e,e.polygon=c,e.polygonSmooth=function(t,e){var r=[],n=e.iterations||1;if(!t)throw new Error("inputPolys is required");return G(t,function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<n;u++)a=[[]],s=t,u>0&&(s=c(o).geometry),Ga(s,a),o=a.slice(0);r.push(c(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<n;l++)a=[[[]]],s=t,l>0&&(s=g(o).geometry),Ua(s,a),o=a.slice(0);r.push(g(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(r)},e.polygonTangents=function(t,e){var r,n,i,o,s=$(t),a=$(e),l=J(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Zr(t,Sr(e))).properties.featureIndex),ot(e)){case"Polygon":r=a[0][c],n=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(n=a[0][c]),o=Xi(a[0][0],a[0][a[0].length-1],s);var f=Vi(a[0],s,o,i,r,n);r=f[0],n=f[1];break;case"MultiPolygon":for(var p=0,y=0,v=0,g=0;g<a[0].length;g++){p=g;for(var m=!1,_=0;_<a[0][g].length;_++){if(y=_,v===c){m=!0;break}v++}if(m)break}r=a[0][p][y],n=a[0][p][y],o=Xi(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Vi(t[0],s,o,i,r,n);r=e[0],n=e[1]})}return d([u(r),u(n)])},e.polygonToLine=Ii,e.polygonToLineString=Ii,e.polygonize=function(t){var e=fs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var r=[],n=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?r.push(t):n.push(t)}),r.forEach(function(t){hs.findEdgeRingContaining(t,n)&&n.push(t)}),d(n.map(function(t){return t.toPolygon()}))},e.polygons=h,e.projection=Qa,e.propEach=F,e.propReduce=D,e.propertiesContainsFilter=cu,e.radians2degrees=w,e.radiansToDegrees=w,e.radiansToDistance=x,e.radiansToLength=x,e.random=iu,e.randomLineString=eu,e.randomPoint=$a,e.randomPolygon=tu,e.randomPosition=Ka,e.rewind=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.reverse||!1,n=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean");!1===n&&(t=Ie(t));var i=[];switch(t.type){case"GeometryCollection":return G(t,function(t){Yi(t,r)}),t;case"FeatureCollection":return k(t,function(t){k(Yi(t,r),function(t){i.push(t)})}),d(i)}return Yi(t,r)},e.rhumbBearing=Ui,e.rhumbDestination=zi,e.rhumbDistance=Fn,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){var r,n,i=t.slice(0),o=t.length,s=o-e;for(;o-- >s;)r=i[n=Math.floor((o+1)*Math.random())],i[n]=i[o],i[o]=r;return i.slice(s)}(t.features,e))},e.sector=function(t,e,r,n,i){if(!L(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Gi(r)===Gi(n))return mr(t,e,i);var s=$(t),a=Ci(t,e,r,n,i),u=[[s]];return R(a,function(t){u[0].push(t)}),u[0].push(s),c(u,o)},e.segmentEach=V,e.segmentReduce=W,e.shortestPath=function(t,e,r){if(!L(r=r||{}))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(n&&!M(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=K(t),l=K(e);switch(t=u(a),e=u(l),ot(o)){case"FeatureCollection":if(0===o.features.length)return f([a,l]);break;case"Polygon":o=d([s(it(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=J(es(dr(J(c)),1.15));n||(n=xe([h[0],h[1]],[h[2],h[1]],r)/100),c.features.pop(),c.features.pop();for(var p=h[0],y=h[1],v=h[2],g=h[3],m=n/xe([p,y],[v,y],r)*(v-p),_=n/xe([p,y],[p,g],r)*(g-y),x=v-p,b=g-y,S=Math.floor(x/m),C=Math.floor(b/_),w=(x-S*m)/2,I=[],P=[],E=[],N=[],T=1/0,O=1/0,R=g-(b-C*_)/2,A=0;R>=y;){for(var F=[],D=[],k=p+w,j=0;k<=v;){var B=u([k,R]),G=Qs(B,o);F.push(G?0:1),D.push(k+"|"+R);var U=xe(B,t);!G&&U<T&&(T=U,E={x:j,y:A});var q=xe(B,e);!G&&q<O&&(O=q,N={x:j,y:A}),k+=m,j++}P.push(F),I.push(D),R-=_,A++}var z=new Hs(P,{diagonal:!0}),V=z.grid[E.y][E.x],W=z.grid[N.y][N.x],X=Xs.search(z,V,W),H=[a];return X.forEach(function(t){var e=I[t.x][t.y].split("|");H.push([+e[0],+e[1]])}),H.push(l),er(f(H))},e.simplify=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=void 0!==e.tolerance?e.tolerance:1,n=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ie(t)),G(t,function(t){!function(t,e,r){var n=t.type;if("Point"===n||"MultiPoint"===n)return t;er(t,!0);var i=t.coordinates;switch(n){case"LineString":t.coordinates=lr(i,e,r);break;case"MultiLineString":t.coordinates=i.map(function(t){return lr(t,e,r)});break;case"Polygon":t.coordinates=cr(i,e,r);break;case"MultiPolygon":t.coordinates=i.map(function(t){return cr(t,e,r)})}}(t,r,n)}),t},e.square=vr,e.squareGrid=pv,e.standardDeviationalEllipse=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,n=e.weight,i=e.properties||{};if(!M(r))throw new Error("steps must be a number");if(!L(i))throw new Error("properties must be a number");var o=B(t).length,s=ka(t,{weight:n}),a=0,u=0,l=0;k(t,function(t){var e=t.properties[n]||1,r=Ba($(t),$(s));a+=Math.pow(r.x,2)*e,u+=Math.pow(r.y,2)*e,l+=r.x*r.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,p=Math.atan((c+h)/f),y=180*p/Math.PI,v=0,g=0,m=0;k(t,function(t){var e=t.properties[n]||1,r=Ba($(t),$(s));v+=Math.pow(r.x*Math.cos(p)-r.y*Math.sin(p),2)*e,g+=Math.pow(r.x*Math.sin(p)+r.y*Math.cos(p),2)*e,m+=e});var _=Math.sqrt(2*v/m),x=Math.sqrt(2*g/m),b=Fa(s,_,x,{units:"degrees",angle:y,steps:r,properties:i}),S=_e(t,d([b])),C={meanCenterCoordinates:$(s),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*B(S).length/o};return b.properties.standardDeviationalEllipse=C,b},e.tag=function(t,e,r,n){return t=Ie(t),e=Ie(e),k(t,function(t){t.properties||(t.properties={}),k(e,function(e){void 0===t.properties[n]&&ge(t,e)&&(t.properties[n]=e.properties[r])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Yr(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Yr(t))}),e},e.tin=be,e.toMercator=Wa,e.toWgs84=Xa,e.transformRotate=ts,e.transformScale=es,e.transformTranslate=function(t,e,r,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return e<0&&(e=-e,r+=180),!1!==s&&void 0!==s||(t=Ie(t)),R(t,function(t){var n=$(zi(t,e,r,{units:i}));t[0]=n[0],t[1]=n[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=dv,e.truncate=ri,e.union=function(t,e,r){void 0===r&&(r={});var n=it(t),i=it(e),o=tl.union(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):g(o,r.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return q(t,function(t){"Polygon"===t.geometry.type&&k(si(t),function(r){e.push(c(r.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=N,e.validateId=T,e.voronoi=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return nt(t,"Point","points"),d(function(){var t=Ks,e=$s,r=null;function n(n){return new Ra(n.map(function(r,i){var o=[Math.round(t(r,i,n)/Na)*Na,Math.round(e(r,i,n)/Na)*Na];return o.index=i,o.data=r,o}),r)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t="function"==typeof e?e:Js(+e),n):t},n.y=function(t){return arguments.length?(e="function"==typeof t?t:Js(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map(Aa))},e.within=_e,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this,r(124))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPolyline=undefined;var n=r(2);var i=x(n);var o=r(1);var s=x(o);var a=r(3);var u=x(a);var l=r(9);var c=x(l);var h=r(4);var f=x(h);var p=r(128);var d=r(28);var y=r(129);var v=_(y);var g=r(130);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function x(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPolylinesCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){var o=[],s=e[n].geometry[i].coordinates;for(var a=0;a<s.length;a++){o.push([s[a].x,s[a].y])}r.push(o)}}return r}},{key:"getPolylinesCenter",value:function t(e){var r=[];for(var n=0;n<e.length;n++){r.push(v.lineString(e[n]))}return m.center(m.featureCollection(r))}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="LineString";(0,d.extend)(r,t);return r}return e}(p.Geometry);e.VPolyline=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VPolygon=undefined;var n=r(2);var i=x(n);var o=r(1);var s=x(o);var a=r(3);var u=x(a);var l=r(9);var c=x(l);var h=r(4);var f=x(h);var p=r(128);var d=r(28);var y=r(129);var v=_(y);var g=r(130);var m=_(g);function _(t){if(t&&t.__esModule){return t}else{var e={};if(t!=null){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}}e.default=t;return e}}function x(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,f.default)(e,t);(0,c.default)(e,null,[{key:"getPolygonsCoordinates",value:function t(e){var r=[];for(var n=0;n<e.length;n++){for(var i=0;i<e[n].geometry.length;i++){var o=[];var s=e[n].geometry[i].exterior,a=[];var u=e[n].geometry[i].interior,l=[];for(var c=0;c<s.length;c++){a.push([s[c].x,s[c].y])}for(var h=0;h<u.length;h++){var f=[];for(var p=0;p<u[h].length;p++){f.push([u[h][p].x,u[h][p].y])}l.push(f)}o.push(a);o=o.concat(l);r.push(o)}}return r}},{key:"getPolygonsCenter",value:function t(e){var r=[];for(var n=0;n<e.length;n++){r.push(v.polygon(e[n]))}return m.center(m.featureCollection(r))}}]);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.type="Polygon";r.exterior=[];r.interior=[];(0,d.extend)(r,t);if(r.exterior.length>0){r.coordinates.push(r.exterior)}if(r.interior.length>0){for(var n=0;n<r.interior.length;n++){r.coordinates.push(r.interior[n])}}return r}return e}(p.Geometry);e.VPolygon=b;Zondy.Service.VPolygon=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.idstr=r.idstr!==undefined?r.idstr:"";n.angleType=r.angleType!==undefined?r.angleType:0;n.isDissolve=r.isDissolve!==undefined?r.isDissolve:true;n.isDynPrj=r.isDynPrj!==undefined?r.isDynPrj:false;return n}return e}(f.AnalysisBase);e.ClassBufferBase=d;h.Zondy.Service.ClassBufferBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.sfGeometryXML=r.sfGeometryXML!==undefined?r.sfGeometryXML:null;n.attStrctXML=r.attStrctXML!==undefined?r.attStrctXML:null;n.attRowsXML=r.attRowsXML!==undefined?r.attRowsXML:null;n.traceRadius=r.traceRadius!==undefined?r.traceRadius:1e-4;n.resultName=r.resultName!==undefined?r.resultName:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";return n}return e}(f.AnalysisBase);e.FeatureBuffBase=d;h.Zondy.Service.FeatureBuffBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;n.isReCalculate=r.isReCalculate!==undefined?r.isReCalculate:true;n.radius=r.radius!==undefined?r.radius:.001;return n}return e}(f.AnalysisBase);e.OverlayBase=d;h.Zondy.Service.OverlayBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectBase=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(32);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.clsName=r.clsName!==undefined?r.clsName:null;n.desClsName=r.desClsName!==undefined?r.desClsName:null;n.resultName=r.resultName!==undefined?r.resultName:null;return n}return e}(f.AnalysisBase);e.ProjectBase=d;h.Zondy.Service.ProjectBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalServiceBase=undefined;var n=r(15);var i=b(n);var o=r(2);var s=b(o);var a=r(1);var u=b(a);var l=r(9);var c=b(l);var h=r(3);var f=b(h);var p=r(4);var d=b(p);var y=r(0);var v=r(44);var g=r(29);var m=r(14);var _=r(138);var x=r(139);function b(t){return t&&t.__esModule?t:{default:t}}var S=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.dots=r.dots!==undefined?r.dots:null;n.projectInfo=r.projectInfo!==undefined?r.projectInfo:null;n.projectInfoBySRSID=r.projectInfoBySRSID!==undefined?r.projectInfoBySRSID:null;return n}(0,c.default)(e,[{key:"execute",value:function t(e,r,n){if(e instanceof _.CProjectParam){this.projectInfo=e}if(e instanceof x.CProjectBySRSID){this.projectInfoBySrsID=e}var o={};o.Dots=this.dots;o.ProjectInfo=this.projectInfo;o.ProjectInfoBySrsID=this.projectInfoBySrsID;var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.CalServiceBase=S;y.Zondy.Service.CalServiceBase=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CProjectParam=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.ProjAngleUnit=r.ProjAngleUnit!==undefined?r.ProjAngleUnit:0;this.ProjLat=r.ProjLat!==undefined?r.ProjLat:0;this.ProjLat1=r.ProjLat1!==undefined?r.ProjLat1:0;this.ProjLat2=r.ProjLat2!==undefined?r.ProjLat2:0;this.ProjLon=r.ProjLon!==undefined?r.ProjLon:0;this.ProjRate=r.ProjRate!==undefined?r.ProjRate:0;this.ProjType=r.ProjType!==undefined?r.ProjType:0;this.ProjTypeID=r.ProjTypeID!==undefined?r.ProjTypeID:0;this.ProjUnit=r.ProjUnit!==undefined?r.ProjUnit:0;this.ProjZoneNO=r.ProjZoneNO!==undefined?r.ProjZoneNO:0;this.ProjZoneType=r.ProjZoneType!==undefined?r.ProjZoneType:0;this.SphereID=r.SphereID!==undefined?r.SphereID:0};e.CProjectParam=o;n.Zondy.Service.CProjectParam=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CProjectBySRSID=undefined;var n=r(0);var i=r(189);var o=function t(e,r){this.DesSrsID=e;this.GdbInfo=r};e.CProjectBySRSID=o;n.Zondy.Service.CProjectBySRSID=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FolderInfoAttribute=undefined;var n=r(0);var i=function t(e,r){this.name=e!==undefined?e:null;this.Value=r!==undefined?r:null};e.FolderInfoAttribute=i;n.Zondy.Object.Theme.FolderInfoAttribute=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CloudDiskService=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(142);var v=_(y);var g=r(27);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=e.CloudDiskService=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));var n=t.headers;r.fixParams(t);r.headers=n?n:undefined;return r}(0,c.default)(e,[{key:"setHeaders",value:function t(e){this.headers=e}},{key:"fixParams",value:function t(e){this.params=e;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function t(){var e="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,s=this.networkProtocol;if(r){e=r}else if(o){e=o}else if(s&&n&&i){e=s+"://"+n+":"+i}return e}},{key:"getFullUrl",value:function t(e,r){var n=this.getBaseUrl();var i=n+e+"?"+v.default.stringify(r);return i}},{key:"get",value:function t(e,r,n){var i=this;var o=new m.IgsServiceBase(e,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"GET",headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"post",value:function t(e,r,n,o){var s=this;var a=new m.IgsServiceBase(e,{eventListeners:{scope:s,processCompleted:n,processFailed:o}});a.processAsync({method:"POST",data:(0,i.default)(r),headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.default=x},function(t,e,r){"use strict";var n=r(428);var i=r(438);var o=r(145);t.exports={formats:o,parse:i,stringify:n}},function(t,e,r){"use strict";var n;var i=SyntaxError;var o=Function;var s=TypeError;var a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}};var u=Object.getOwnPropertyDescriptor;if(u){try{u({},"")}catch(t){u=null}}var l=function(){throw new s};var c=u?function(){try{arguments.callee;return l}catch(t){try{return u(arguments,"callee").get}catch(t){return l}}}():l;var h=r(430)();var f=Object.getPrototypeOf||function(t){return t.__proto__};var p={};var d=typeof Uint8Array==="undefined"?n:f(Uint8Array);var y={"%AggregateError%":typeof AggregateError==="undefined"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?n:Atomics,"%BigInt%":typeof BigInt==="undefined"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?n:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?n:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?n:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":typeof JSON==="object"?JSON:n,"%Map%":typeof Map==="undefined"?n:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!h?n:f((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?n:Promise,"%Proxy%":typeof Proxy==="undefined"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?n:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!h?n:f((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array==="undefined"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?n:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?n:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?n:WeakSet};var v=function t(e){var r;if(e==="%AsyncFunction%"){r=a("async function () {}")}else if(e==="%GeneratorFunction%"){r=a("function* () {}")}else if(e==="%AsyncGeneratorFunction%"){r=a("async function* () {}")}else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");if(i){r=f(i.prototype)}}y[e]=r;return r};var g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var m=r(144);var _=r(433);var x=m.call(Function.call,Array.prototype.concat);var b=m.call(Function.apply,Array.prototype.splice);var S=m.call(Function.call,String.prototype.replace);var C=m.call(Function.call,String.prototype.slice);var w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var I=/\\(\\)?/g;var P=function t(e){var r=C(e,0,1);var n=C(e,-1);if(r==="%"&&n!=="%"){throw new i("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new i("invalid intrinsic syntax, expected opening `%`")}var o=[];S(e,w,function(t,e,r,n){o[o.length]=r?S(n,I,"$1"):e||t});return o};var E=function t(e,r){var n=e;var o;if(_(g,n)){o=g[n];n="%"+o[0]+"%"}if(_(y,n)){var a=y[n];if(a===p){a=v(n)}if(typeof a==="undefined"&&!r){throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!")}return{alias:o,name:n,value:a}}throw new i("intrinsic "+e+" does not exist!")};t.exports=function t(e,r){if(typeof e!=="string"||e.length===0){throw new s("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new s('"allowMissing" argument must be a boolean')}var o=P(e);var a=o.length>0?o[0]:"";var l=E("%"+a+"%",r);var c=l.name;var h=l.value;var f=false;var p=l.alias;if(p){a=p[0];b(o,x([0,1],p))}for(var d=1,v=true;d<o.length;d+=1){var g=o[d];var m=C(g,0,1);var S=C(g,-1);if((m==='"'||m==="'"||m==="`"||(S==='"'||S==="'"||S==="`"))&&m!==S){throw new i("property names with quotes must have matching quotes")}if(g==="constructor"||!v){f=true}a+="."+g;c="%"+a+"%";if(_(y,c)){h=y[c]}else if(h!=null){if(!(g in h)){if(!r){throw new s("base intrinsic for "+e+" exists, but the property is not available.")}return void n}if(u&&d+1>=o.length){var w=u(h,g);v=!!w;if(v&&"get"in w&&!("originalValue"in w.get)){h=w.get}else{h=h[g]}}else{v=_(h,g);h=h[g]}if(v&&!f){y[c]=h}}}return h}},function(t,e,r){"use strict";var n=r(432);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";var n=String.prototype.replace;var i=/%20/g;var o={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:o.RFC3986,formatters:{RFC1738:function(t){return n.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},function(t,e,r){var n=r(147);t.exports=function(t){return Object(n(t))}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(149)("keys");var i=r(90);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(23);var i=r(38);var o="__core-js_shared__";var s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=e!==undefined?e:{})})("versions",[]).push({version:n.version,mode:r(89)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(54);var i=r(23);var o=r(68);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t];var s={};s[t]=e(r);n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(t,e,r){var n=r(56);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;if(typeof(r=t.valueOf)=="function"&&!n(i=r.call(t)))return i;if(!e&&typeof(r=t.toString)=="function"&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var r=Math.ceil;var n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){t.exports={}},function(t,e,r){var n=r(67);var i=r(456);var o=r(156);var s=r(148)("IE_PROTO");var a=function(){};var u="prototype";var l=function(){var t=r(250)("iframe");var e=o.length;var n="<";var i=">";var s;t.style.display="none";r(461).appendChild(t);t.src="javascript:";s=t.contentWindow.document;s.open();s.write(n+"script"+i+"document.F=Object"+n+"/script"+i);s.close();l=s.F;while(e--)delete l[u][o[e]];return l()};t.exports=Object.create||function t(e,r){var o;if(e!==null){a[u]=n(e);o=new a;a[u]=null;o[s]=e}else o=l();return r===undefined?o:i(o,r)}},function(t,e,r){var n=r(253);var i=r(156);t.exports=Object.keys||function t(e){return n(e,i)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(46).f;var i=r(45);var o=r(57)("toStringTag");t.exports=function(t,e,r){if(t&&!i(t=r?t:t.prototype,o))n(t,o,{configurable:true,value:e})}},function(t,e,r){e.f=r(57)},function(t,e,r){var n=r(38);var i=r(23);var o=r(89);var s=r(158);var a=r(46).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});if(t.charAt(0)!="_"&&!(t in e))a(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(160);var i=r(91);var o=r(48);var s=r(151);var a=r(45);var u=r(249);var l=Object.getOwnPropertyDescriptor;e.f=r(47)?l:function t(e,r){e=o(e);r=s(r,true);if(u)try{return l(e,r)}catch(t){}if(a(e,r))return i(!n.f.call(e,r),e[r])}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeLayer=undefined;var n=r(5);var i=h(n);var o=r(6);var s=h(o);var a=r(17);var u=h(a);var l=r(7);var c=r(258);function h(t){return t&&t.__esModule?t:{default:t}}var f=l.Common.modifyDOMElement,p=l.Common.isArray,d=l.Common.indexOf,y=l.Common.newGuid,v=l.Common.Zondy;var g=function(){function t(e,r){(0,i.default)(this,t);var n=r?r:{};this.name=e;this.id=n.id?n.id:y();this.opacity=n.opacity?n.opacity:1;this.visibility=true;this.loadWhileAnimating=n.loadWhileAnimating===undefined?true:n.loadWhileAnimating;this.map=n.map?n.map:null;this.features=[];this.TFEvents=[];if(this.map){this.map.addLayer(this)}}(0,s.default)(t,[{key:"onAdd",value:function t(e){this.map=e;this._createCanvasContainer();this.addTFEvents();this.map.on("resize",this.resizeEvent.bind(this));this.map.on("zoomstart",this.zoomStartEvent.bind(this));this.map.on("zoomend",this.zoomEndEvent.bind(this));this.map.on("rotatestart",this.rotateStartEvent.bind(this));this.map.on("rotate",this.rotateEvent.bind(this));this.map.on("rotateend",this.rotateEndEvent.bind(this));this.map.on("dragend",this.dragEndEvent.bind(this));this.map.on("movestart",this.moveStartEvent.bind(this));this.map.on("move",this.moveEvent.bind(this));this.map.on("moveend",this.moveEndEvent.bind(this));this.map.on("remove",this.removeFromMap.bind(this));this.refresh()}},{key:"refresh",value:function t(){if(this.features.length===0){return}if(this.map){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"_createCanvasContainer",value:function t(){this.movingOffset=[0,0];this.mapContainer=this.map.getCanvasContainer();this.div=document.createElement("div");this.div.id=this.id;this.div.style.position="absolute";var e=this.map.getCanvasContainer();var r=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.div.style.width=r.style.width;this.div.style.height=r.style.height;this.div.className="themeLayer";this.div.width=parseInt(r.width);this.div.height=parseInt(r.height);e.appendChild(this.div);this.setOpacity(this.opacity);this.levelRenderer=new c.LevelRenderer;this.renderer=this.levelRenderer.init(this.div);this.renderer.clear()}},{key:"destroyFeatures",value:function t(e){var r=e===undefined;if(r){e=this.features}if(e){this.removeFeatures(e);for(var n=e.length-1;n>=0;n--){e[n].destroy()}}}},{key:"setVisibility",value:function t(e){if(e!==this.visibility){this.visibility=e;this.display(e);this.redrawThematicFeatures(this.map.getBounds())}}},{key:"display",value:function t(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function t(e){if(e!==this.opacity){this.opacity=e;var r=this.div;f(r,null,null,null,null,null,null,e);if(this.map!==null){u.default.Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}}},{key:"addFeatures",value:function t(e){}},{key:"removeFeatures",value:function t(e){if(!e||e.length===0){return}if(e===this.features){return this.removeAllFeatures()}if(!p(e)){e=[e]}var r=[];for(var n=e.length-1;n>=0;n--){var i=e[n];var o=d(this.features,i);if(o===-1){r.push(i);continue}this.features.splice(o,1)}var s=[];for(var a=0,l=this.features.length;a<l;a++){i=this.features[a];s.push(i)}this.features=[];this.addFeatures(s);if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}var c=r.length===0?true:false;u.default.Evented.prototype.fire("featuresremoved",{features:r,succeed:c})}},{key:"removeAllFeatures",value:function t(){if(this.renderer){this.renderer.clear()}this.features=[];u.default.Evented.prototype.fire("featuresremoved",{features:[],succeed:true})}},{key:"getFeatures",value:function t(){var e=this.features.length;var r=new Array(e);for(var n=0;n<e;++n){r[n]=this.features[n]}return r}},{key:"getFeatureBy",value:function t(e,r){var n=null;for(var i in this.features){if(this.features[i][e]===r){n=this.features[i];break}}return n}},{key:"getFeatureById",value:function t(e){return this.getFeatureBy("FID",e)}},{key:"getFeaturesByAttribute",value:function t(e,r){var n,i=[];for(var o in this.features){n=this.features[o];if(n&&n.attributes){if(n.attributes[e]===r){i.push(n)}}}return i}},{key:"redrawThematicFeatures",value:function t(e){}},{key:"on",value:function t(e,r,n){if(this.renderer){this.renderer.on(e,r)}else{this.map.on(e,r)}return this}},{key:"off",value:function t(e,r,n){var i=this;if(i.renderer){i.renderer.off(e,r)}else{this.map.off(e,r)}return this}},{key:"addTFEvents",value:function t(){var e=this.TFEvents;var r=e.length;for(var n=0;n<r;n++){this.renderer.on(e[n][0],e[n][1])}}},{key:"WebMercator2lonLat",value:function t(e,r){var n=e/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"lonLat2WebMercator",value:function t(e,r){var n=e*20037508.34/180;var i=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);i=i*20037508.34/180;return{x:n,y:i}}},{key:"getLocalXY",value:function t(e){var r,n=this.map;var i=null;if(p(e)){e=new u.default.LngLat(e[0],e[1]);i=n.project(e);r=[i.x,i.y]}return r}},{key:"moveEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.div.style.transform="";this.redrawThematicFeatures(this.map.getBounds());this._show()}},{key:"moveStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.startPitch=this.map.getPitch();this.startBearing=this.map.getBearing();var e=this.map.project(new u.default.LngLat(0,0));this.startMoveX=e.x;this.startMoveY=e.y}},{key:"moveEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){this.redrawThematicFeatures(this.map.getBounds());return}if(this.rotating||this.zooming){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;var n=this.map.project(new u.default.LngLat(0,0));var i=n.x-this.startMoveX;var o=n.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg)"+" rotateZ("+r+"deg)"+" translate3d("+i+"px, "+o+"px, 0px)"}},{key:"zoomStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=true;this._hide()}},{key:"zoomEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=false;this._show()}},{key:"rotateStartEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=true}},{key:"rotateEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg)"+" rotateZ("+r+"deg)"}},{key:"rotateEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=false;this._show()}},{key:"dragEndEvent",value:function t(){if(this.loadWhileAnimating||!this.visibility){return}this._hide()}},{key:"resizeEvent",value:function t(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width;this.div.style.height=e.style.height;this.div.width=parseInt(e.width);this.div.height=parseInt(e.height);this.renderer.resize()}},{key:"removeFromMap",value:function t(){this.mapContainer.removeChild(this.div);this.removeAllFeatures()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.div.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"_hide",value:function t(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function t(){this.renderer.painter.root.style.display="block"}}]);return t}();e.ThemeLayer=g;v.Map.ThemeLayer=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Color=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(58);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(){(0,i.default)(this,t);this.util=new u.Util;this._ctx=null;this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"];this._palette=this.palette;this.highlightColor="rgba(0,0,255,1)";this._highlightColor=this.highlightColor;this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}(0,s.default)(t,[{key:"customPalette",value:function t(e){this.palette=e}},{key:"resetPalette",value:function t(){this.palette=this._palette}},{key:"getColor",value:function t(e,r){e=e|0;r=r||this.palette;return r[e%r.length]}},{key:"customHighlight",value:function t(e){this.highlightColor=e}},{key:"resetHighlight",value:function t(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function t(){return this.highlightColor}},{key:"getRadialGradient",value:function t(e,r,n,i,o,s,a){var u=this.util;if(!this._ctx){this._ctx=u.getContext()}var l=this._ctx.createRadialGradient(e,r,n,i,o,s);for(var c=0,h=a.length;c<h;c++){l.addColorStop(a[c][0],a[c][1])}l.__nonRecursion=true;return l}},{key:"getLinearGradient",value:function t(e,r,n,i,o){var s=this.util;if(!this._ctx){this._ctx=s.getContext()}var a=this._ctx.createLinearGradient(e,r,n,i);for(var u=0,l=o.length;u<l;u++){a.addColorStop(o[u][0],o[u][1])}a.__nonRecursion=true;return a}},{key:"getStepColors",value:function t(e,r,n){e=this.toRGBA(e);r=this.toRGBA(r);e=this.getData(e);r=this.getData(r);var i=[];var o=(r[0]-e[0])/n;var s=(r[1]-e[1])/n;var a=(r[2]-e[2])/n;var u=(r[3]-e[3])/n;for(var l=0,c=e[0],h=e[1],f=e[2],p=e[3];l<n;l++){i[l]=this.toColor([this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba");c+=o;h+=s;f+=a;p+=u}c=r[0];h=r[1];f=r[2];p=r[3];i[l]=this.toColor([c,h,f,p],"rgba");return i}},{key:"getGradientColors",value:function t(e,r){var n=[];var i=e.length;if(r===undefined){r=20}if(i===1){n=this.getStepColors(e[0],e[0],r)}else if(i>1){for(var o=0,s=i-1;o<s;o++){var a=this.getStepColors(e[o],e[o+1],r);if(o<s-1){a.pop()}n=n.concat(a)}}return n}},{key:"toColor",value:function t(e,r){r=r||"rgb";if(e&&(e.length===3||e.length===4)){e=this.map(e,function(t){return t>1?Math.ceil(t):t});if(r.indexOf("hex")>-1){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}else if(r.indexOf("hs")>-1){var n=this.map(e.slice(1,3),function(t){return t+"%"});e[1]=n[0];e[2]=n[1]}if(r.indexOf("a")>-1){if(e.length===3){e.push(1)}e[3]=this.adjust(e[3],[0,1]);return r+"("+e.slice(0,4).join(",")+")"}return r+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function t(e){e=this.trim(e);if(e.indexOf("rgba")<0){e=this.toRGBA(e)}var r=[];var n=0;e.replace(/[\d.]+/g,function(t){if(n<3){t=t|0}else{t=+t}r[n++]=t});return r}},{key:"convert",value:function t(e,r){if(!this.isCalculableColor(e)){return e}var n=this.getData(e);var i=n[3];if(typeof i==="undefined"){i=1}if(e.indexOf("hsb")>-1){n=this._HSV_2_RGB(n)}else if(e.indexOf("hsl")>-1){n=this._HSL_2_RGB(n)}if(r.indexOf("hsb")>-1||r.indexOf("hsv")>-1){n=this._RGB_2_HSB(n)}else if(r.indexOf("hsl")>-1){n=this._RGB_2_HSL(n)}n[3]=i;return this.toColor(n,r)}},{key:"toRGBA",value:function t(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function t(e){return this.convert(e,"rgb")}},{key:"toHex",value:function t(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function t(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function t(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function t(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function t(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function t(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function t(e){return this.convert(e,"hsl")}},{key:"toName",value:function t(e){for(var r in this._nameColors){if(this.toHex(this._nameColors[r])===this.toHex(e)){return r}}return null}},{key:"trim",value:function t(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function t(e){if(this._nameColors[e]){e=this._nameColors[e]}e=this.trim(e);e=e.replace(/hsv/i,"hsb");if(/^#[\da-f]{3}$/i.test(e)){e=parseInt(e.slice(1),16);var r=(e&3840)<<8;var n=(e&240)<<4;var i=e&15;e="#"+((1<<24)+(r<<4)+r+(n<<4)+n+(i<<4)+i).toString(16).slice(1)}return e}},{key:"lift",value:function t(e,r){if(!this.isCalculableColor(e)){return e}var n=r>0?1:-1;if(typeof r==="undefined"){r=0}r=Math.abs(r)>1?1:Math.abs(r);e=this.toRGB(e);var i=this.getData(e);for(var o=0;o<3;o++){if(n===1){i[o]=i[o]*(1-r)|0}else{i[o]=(255-i[o])*r+i[o]|0}}return"rgb("+i.join(",")+")"}},{key:"reverse",value:function t(e){if(!this.isCalculableColor(e)){return e}var r=this.getData(this.toRGBA(e));r=this.map(r,function(t){return 255-t});return this.toColor(r,"rgb")}},{key:"mix",value:function t(e,r,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(r)){return e}if(typeof n==="undefined"){n=.5}n=1-this.adjust(n,[0,1]);var i=n*2-1;var o=this.getData(this.toRGBA(e));var s=this.getData(this.toRGBA(r));var a=o[3]-s[3];var u=((i*a===-1?i:(i+a)/(1+i*a))+1)/2;var l=1-u;var c=[];for(var h=0;h<3;h++){c[h]=o[h]*u+s[h]*l}var f=o[3]*n+s[3]*(1-n);f=Math.max(0,Math.min(1,f));if(o[3]===1&&s[3]===1){return this.toColor(c,"rgb")}c[3]=f;return this.toColor(c,"rgba")}},{key:"random",value:function t(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function e(r){r=this.normalize(r);var n=r.match(this.colorRegExp);if(n===null){throw new Error("The color format error")}var i;var o;var s=[];var a;if(n[2]){i=n[2].replace("#","").split("");a=[i[0]+i[1],i[2]+i[3],i[4]+i[5]];s=this.map(a,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])})}else if(n[4]){var u=n[4].split(",");o=u[3];a=u.slice(0,3);s=this.map(a,function(e){e=Math.floor(e.indexOf("%")>0?parseInt(e,0)*2.55:e);return t.prototype.adjust.call(this,e,[0,255])});if(typeof o!=="undefined"){s.push(this.adjust(parseFloat(o),[0,1]))}}else if(n[5]||n[6]){var l=(n[5]||n[6]).split(",");var c=parseInt(l[0],0)/360;var h=l[1];var f=l[2];o=l[3];s=this.map([h,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])});s.unshift(c);if(typeof o!=="undefined"){s.push(this.adjust(parseFloat(o),[0,1]))}}return s}},{key:"alpha",value:function t(e,r){if(!this.isCalculableColor(e)){return e}if(r===null){r=1}var n=this.getData(this.toRGBA(e));n[3]=this.adjust(Number(r).toFixed(4),[0,1]);return this.toColor(n,"rgba")}},{key:"map",value:function t(e,r){if(typeof r!=="function"){throw new TypeError}var n=e?e.length:0;for(var i=0;i<n;i++){e[i]=r(e[i])}return e}},{key:"adjust",value:function t(e,r){if(e<=r[0]){e=r[0]}else if(e>=r[1]){e=r[1]}return e}},{key:"isCalculableColor",value:function t(e){return e instanceof Array||typeof e==="string"}},{key:"_HSV_2_RGB",value:function t(e){var r=e[0];var n=e[1];var i=e[2];var o;var s;var a;if(n===0){o=i*255;s=i*255;a=i*255}else{var u=r*6;if(u===6){u=0}var l=u|0;var c=i*(1-n);var h=i*(1-n*(u-l));var f=i*(1-n*(1-(u-l)));var p=0;var d=0;var y=0;if(l===0){p=i;d=f;y=c}else if(l===1){p=h;d=i;y=c}else if(l===2){p=c;d=i;y=f}else if(l===3){p=c;d=h;y=i}else if(l===4){p=f;d=c;y=i}else{p=i;d=c;y=h}o=p*255;s=d*255;a=y*255}return[o,s,a]}},{key:"_HSL_2_RGB",value:function t(e){var r=e[0];var n=e[1];var i=e[2];var o;var s;var a;if(n===0){o=i*255;s=i*255;a=i*255}else{var u;if(i<.5){u=i*(1+n)}else{u=i+n-n*i}var l=2*i-u;o=255*this._HUE_2_RGB(l,u,r+1/3);s=255*this._HUE_2_RGB(l,u,r);a=255*this._HUE_2_RGB(l,u,r-1/3)}return[o,s,a]}},{key:"_HUE_2_RGB",value:function t(e,r,n){if(n<0){n+=1}if(n>1){n-=1}if(6*n<1){return e+(r-e)*6*n}if(2*n<1){return r}if(3*n<2){return e+(r-e)*(2/3-n)*6}return e}},{key:"_RGB_2_HSB",value:function t(e){var r=e[0]/255;var n=e[1]/255;var i=e[2]/255;var o=Math.min(r,n,i);var s=Math.max(r,n,i);var a=s-o;var u=s;var l;var c;if(a===0){l=0;c=0}else{c=a/s;var h=((s-r)/6+a/2)/a;var f=((s-n)/6+a/2)/a;var p=((s-i)/6+a/2)/a;if(r===s){l=p-f}else if(n===s){l=1/3+h-p}else if(i===s){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;c=c*100;u=u*100;return[l,c,u]}},{key:"_RGB_2_HSL",value:function t(e){var r=e[0]/255;var n=e[1]/255;var i=e[2]/255;var o=Math.min(r,n,i);var s=Math.max(r,n,i);var a=s-o;var u=(s+o)/2;var l;var c;if(a===0){l=0;c=0}else{if(u<.5){c=a/(s+o)}else{c=a/(2-s-o)}var h=((s-r)/6+a/2)/a;var f=((s-n)/6+a/2)/a;var p=((s-i)/6+a/2)/a;if(r===s){l=p-f}else if(n===s){l=1/3+h-p}else if(i===s){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;c=c*100;u=u*100;return[l,c,u]}}]);return t}();e.Color=h;c.LevelRenderer.Tool.Color=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Config=undefined;var n=r(5);var i=s(n);var o=r(7);function s(t){return t&&t.__esModule?t:{default:t}}var a=o.Common.Zondy;var u=function t(){(0,i.default)(this,t)};u.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300};u.catchBrushException=false;u.debugMode=0;e.Config=u;a.LevelRenderer.Config=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicImage=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicimage";r._imageCache={};if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;this._imageCache=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(r,n,i){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var o=this.refOriginalPosition;var s=this.style||{};if(n){s=this.getHighlightStyle(s,this.highlightStyle||{})}var a=s.image;var u=this;if(typeof a==="string"){var l=a;if(this._imageCache[l]){a=this._imageCache[l]}else{a=new Image;a.onload=function(){a.onload=null;clearTimeout(e._refreshTimeout);e._needsRefresh.push(u);e._refreshTimeout=setTimeout(function(){i&&i(e._needsRefresh);e._needsRefresh=[]},10)};a.src=l;this._imageCache[l]=a}}if(a){if(a.nodeName.toUpperCase()==="IMG"){if(window.ActiveXObject){if(a.readyState!=="complete"){return}}else{if(!a.complete){return}}}var c=s.width||a.width;var h=s.height||a.height;var f=s.x+o[0];var p=s.y+o[1];if(!a.width||!a.height){return}r.save();this.doClip(r);this.setContext(r,s);this.setTransform(r);if(s.sWidth&&s.sHeight){var d=s.sx+o[0]||0;var y=s.sy+o[1]||0;r.drawImage(a,d,y,s.sWidth,s.sHeight,f,p,c,h)}else if(s.sx&&s.sy){var v=s.sx+o[0];var g=s.sy+o[1];var m=c-v;var _=h-g;r.drawImage(a,v,g,m,_,f,p,c,h)}else{r.drawImage(a,f,p,c,h)}if(!s.width){s.width=c}if(!s.height){s.height=h}if(!this.style.width){this.style.width=c}if(!this.style.height){this.style.height=h}this.drawText(r,s,this.style);r.restore()}}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return{x:e.x+r[0],y:e.y+r[1],width:e.width,height:e.height}}},{key:"clearCache",value:function t(){this._imageCache={}}}]);return e}(v.Shape);_._needsRefresh=[];_._refreshTimeout=null;e.SmicImage=_;m.LevelRenderer.SmicImage=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Line=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.pointList=t;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Line";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.pointList=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Line=_;m.Feature.ShapeParameters.Line=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.x=!isNaN(t)?t:0;o.y=!isNaN(r)?r:0;o.r=!isNaN(n)?n:0;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle";return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.r=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Circle=_;m.Feature.ShapeParameters.Circle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicPoint=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicpoint";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;e.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,true);return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(e.__rect){return e.__rect}var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicPoint=_;m.LevelRenderer.SmicPoint=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicBrokenLine=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(22);var g=r(98);var m=r(24);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.brushTypeOnly="stroke";r.textPosition="end";r.type="smicbroken-line";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.brushTypeOnly=null;this.textPosition=null;this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}var o=Math.min(r.pointList.length,Math.round(r.pointListLength||r.pointList.length));if(r.smooth&&r.smooth!=="spline"){var s=m.SUtil.SUtil_smoothBezier(i,r.smooth,false,r.smoothConstraint,n);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var a;var u;var l;for(var c=0;c<o-1;c++){a=s[c*2];u=s[c*2+1];l=[i[c+1][0]+n[0],i[c+1][1]+n[1]];e.bezierCurveTo(a[0],a[1],u[0],u[1],l[0],l[1])}}else{if(r.smooth==="spline"){i=m.SUtil.SUtil_smoothSpline(i,null,null,n);o=i.length}if(!r.lineType||r.lineType==="solid"){e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var h=1;h<o;h++){e.lineTo(i[h][0]+n[0],i[h][1]+n[1])}}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var f=r.lineWidth||1;var p=f;var d=f;if(r.lineType==="dashed"){p*=5;d*=5;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=f}}if(r.lineType==="dot"){d*=4;if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=f}}if(r.lineType==="dash"){p*=4;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}if(r.lineType==="longdash"){p*=8;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=f;d+=f}}e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var y=1;y<o;y++){m.SUtil.SUtil_dashedLineTo(e,i[y-1][0]+n[0],i[y-1][1]+n[1],i[y][0]+n[0],i[y][1]+n[1],f,[p,d])}}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var v=r.lineWidth||1;var g=v;var _=v;var x=v;var b=v;if(r.lineType==="dashot"){g*=4;_*=4;b*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=v;_+=v;x=1;b+=v}}if(r.lineType==="longdashdot"){g*=8;_*=4;b*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=v;_+=v;x=1;b+=v}}v=(r.lineWidth||1)*(r.lineType==="dashed"?5:1);e.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var S=1;S<o;S++){m.SUtil.SUtil_dashedLineTo(e,i[S-1][0]+n[0],i[S-1][1]+n[1],i[S][0]+n[0],i[S][1]+n[1],v,[g,_,x,b])}}}return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return g.SmicPolygon.prototype.getRect.apply(this,[e,r])}},{key:"brush",value:function t(e,r){var n=this.beforeBrush(e,r);e.beginPath();this.buildPath(e,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n);if(n.lineWidth>0){this.setCtxGlobalAlpha(e,"stroke",n);e.stroke()}this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n);n.lineWidth>0&&e.stroke();this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n);this.setCtxGlobalAlpha(e,"reset",n);break}this.drawText(e,n,this.style);this.afterBrush(e)}}]);return e}(v.Shape);e.SmicBrokenLine=b;x.LevelRenderer.SmicBrokenLine=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Theme3DLayer=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(17);var u=r(7);function l(t){return t&&t.__esModule?t:{default:t}}var c=u.Common.extend,h=u.Common.Zondy;var f=function(){function t(e,r){(0,i.default)(this,t);this.id=e;this.map=null;this.opacity=1;this.parseNumber=false;this.enableHighlight=false;this.highlight={color:"#ADA91E"};this.baseHeightField=null;this.height=null;this.heightField="height";this.themeField=this.heightField;this.showLegend=true;this.legendTitle=null;this.legendTheme="light";this.legendOrientation="horizontal";this.legendPosition="bottom-right";this.mousemoveOn=true;c(this,r)}(0,s.default)(t,[{key:"setLayerOptions",value:function t(e){c(this,e);return this}},{key:"setHighlightStyleOptions",value:function t(e){c(this.highlight,e);return this}},{key:"setData",value:function t(e,r){var n=this;n.data=e;if(r!=null){n.parseNumber=r}n.parseNumber&&n.data&&n.data.features&&n.data.features.map(function(t){if(n.baseHeightField&&t.properties[n.baseHeightField]){t.properties[n.baseHeightField]=parseFloat(t.properties[n.baseHeightField])}if(n.heightField&&t.properties[n.heightField]){t.properties[n.heightField]=parseFloat(t.properties[n.heightField])}return t});return this}},{key:"WebMercator2lonLat",value:function t(e,r){var n=e/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"convertData",value:function t(e){if(e!=null&&e.features!=null&&e.features.length>0){for(var r=0;r<e.features.length;r++){var n=e.features[r].geometry;if(n!=null&&n.coordinates!=null&&n.coordinates.length>0){if(n.type=="Polygon"){var i=n.coordinates;for(var o=0;o<i.length;o++){var s=i[o];if(s!=null&&s.length>0){for(var u=0;u<s.length;u++){var l=new a.mapboxgl.LngLat(s[u][0],s[u][1]);var c=map.project(l);e.features[r].geometry.coordinates[o][u]=[c.x,c.y]}}}}else if(n.type=="MultiPolygon"){var h=n.coordinates;for(var f=0;f<h.length;f++){var p=h[f];if(p!=null&&p.length>0){for(var o=0;o<p.length;o++){var s=p[o];if(s!=null&&s.length>0){for(var u=0;u<s.length;u++){var d=new a.mapboxgl.LngLat(s[u][0],s[u][1]);var y=map.project(d);e.features[r].geometry.coordinates[f][o][u]=[y.x,y.y]}}}}}}}}}return e}},{key:"getData",value:function t(){return this.data}},{key:"addTo",value:function t(e){this.map=e;if(!this.map){return this}this.show();return this}},{key:"show",value:function t(e){c(this,e);this._addLayer();if(this.enableHighlight){this._addHighLightLayer()}if(this.showLegend){if(!this.legend){this.legend=this._createLegendControl()}this.map.addControl(this.legend,this.legendPosition)}return this}},{key:"remove",value:function t(){if(!this.map){return this}var e=this;e.mousemoveOn=false;var r=this.id?this.id:"theme3DLayer";if(this.map.getLayer(r)){this.map.removeLayer(r)}var n="highlightLayer";if(this.map.getLayer(n)){this.map.removeLayer(n)}if(this.legend){this.map.removeControl(this.legend)}return this}},{key:"getLayerStyleOptions",value:function t(){}},{key:"getHighlightStyleOptions",value:function t(){}},{key:"_createLegendControl",value:function t(e){var r=this;function n(){}n.prototype.onAdd=function(t){this._map=t;this._container=document.createElement("div");var n="mapboxgl-ctrl legend ";var i="legend-light";if(r.legendTheme==="dark"){i="legend-dark"}var o=" legend-horizontal";if(r.legendOrientation==="vertical"){o=" legend-vertical"}this._container.className=n+i+o;if(e){this._container.innerHTML=e}else{var s=r.legendTitle||"";var a=" <div class='legend-title'>"+s+"</div>";var u=r._createLegendElement.call(r)||"";var l="<div class='legend-content'>"+u+"</div>";this._container.innerHTML=a+l}r._appendLegendCSSStyle();return this._container};n.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=undefined};return new n}},{key:"_createLegendElement",value:function t(){}},{key:"_addLayer",value:function t(){var e=this.getLayerStyleOptions();var r=this.id?this.id:"theme3DLayer";this.id=r;var n=this.sourceId=r+"Source";if(!!this.map.getSource(n)){this.map.removeSource(n)}this.map.addSource(n,{type:"geojson",data:this.data});if(!!this.map.getLayer(r)){this.map.removeLayer(r)}this.map.addLayer({id:r,type:"fill-extrusion",source:n,paint:e});this.map.moveLayer(r)}},{key:"_addHighLightLayer",value:function t(){if(!this.map){return}var e=this.map;if(e.getSource("highlight")){e.removeSource("highlight")}e.addSource("highlight",{type:"geojson",data:{type:"FeatureCollection",features:[]}});if(!!e.getLayer("highlightLayer")){e.removeLayer("highlightLayer")}e.addLayer({id:"highlightLayer",type:"fill-extrusion",source:"highlight",paint:this.getHighlightStyleOptions()});var r=this;var n;e.on("mousemove",function(t){if(!r.mousemoveOn){return}r.mousemoveOn=true;var e=document.querySelector(".mapboxgl-canvas-container.mapboxgl-interactive");e.style.cursor="auto";var i=r.map.queryRenderedFeatures(t.point,{layers:[r.id]});if(r.highlight&&r.highlight.callback){r.highlight.callback(i,t)}if(!i||i.length<1){r._clearHighlight.call(r);return}var o=i[0].properties.fid;if(n===o){return}n=o;r._clearHighlight.call(r);var s=r.map.querySourceFeatures(r.sourceId,{filter:["==","fid",o]});var a,u=s.length;var l={type:"FeatureCollection",features:[]};for(a=0;a<u;a++){l["features"].push(s[a].toJSON())}r.map.getSource("highlight").setData(l)})}},{key:"_clearHighlight",value:function t(){if(this.map){if(!!this.map.getSource("highlight")){this.map.getSource("highlight").setData({type:"FeatureCollection",features:[]})}}}},{key:"_appendLegendCSSStyle",value:function t(){var e=document.createElement("style");e.type="text/css";var r="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        ";e.innerHTML=r+this._legendCSSStyle();document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function t(){return"  \n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}}]);return t}();e.Theme3DLayer=f;h.Map.Theme3DLayer=f},function(t,e,r){var n=r(40);var i=r(41);var o=r(294)(false);var s=r(103)("IE_PROTO");t.exports=function(t,e){var r=i(t);var a=0;var u=[];var l;for(l in r)if(l!=s)n(r,l)&&u.push(l);while(e.length>a)if(n(r,l=e[a++])){~o(u,l)||u.push(l)}return u}},function(t,e,r){var n=r(62);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return n(t)=="String"?t.split(""):Object(t)}},function(t,e,r){var n=r(102);var i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){t.exports=!r(31)&&!r(49)(function(){return Object.defineProperty(r(106)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,e,r){"use strict";var n=r(18);var i=r(40);var o=r(31);var s=r(25);var a=r(176);var u=r(302).KEY;var l=r(49);var c=r(104);var h=r(80);var f=r(74);var p=r(20);var d=r(110);var y=r(111);var v=r(303);var g=r(304);var m=r(26);var _=r(36);var x=r(60);var b=r(41);var S=r(107);var C=r(77);var w=r(112);var I=r(178);var P=r(109);var E=r(81);var M=r(35);var L=r(61);var N=P.f;var T=M.f;var O=I.f;var R=n.Symbol;var A=n.JSON;var F=A&&A.stringify;var D="prototype";var k=p("_hidden");var j=p("toPrimitive");var B={}.propertyIsEnumerable;var G=c("symbol-registry");var U=c("symbols");var q=c("op-symbols");var z=Object[D];var V=typeof R=="function"&&!!E.f;var W=n.QObject;var X=!W||!W[D]||!W[D].findChild;var H=o&&l(function(){return w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(t,e,r){var n=N(z,e);if(n)delete z[e];T(t,e,r);if(n&&t!==z)T(z,e,n)}:T;var Y=function(t){var e=U[t]=w(R[D]);e._k=t;return e};var Z=V&&typeof R.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof R};var Q=function t(e,r,n){if(e===z)Q(q,r,n);m(e);r=S(r,true);m(n);if(i(U,r)){if(!n.enumerable){if(!i(e,k))T(e,k,C(1,{}));e[k][r]=true}else{if(i(e,k)&&e[k][r])e[k][r]=false;n=w(n,{enumerable:C(0,false)})}return H(e,r,n)}return T(e,r,n)};var J=function t(e,r){m(e);var n=v(r=b(r));var i=0;var o=n.length;var s;while(o>i)Q(e,s=n[i++],r[s]);return e};var K=function t(e,r){return r===undefined?w(e):J(w(e),r)};var $=function t(e){var r=B.call(this,e=S(e,true));if(this===z&&i(U,e)&&!i(q,e))return false;return r||!i(this,e)||!i(U,e)||i(this,k)&&this[k][e]?r:true};var tt=function t(e,r){e=b(e);r=S(r,true);if(e===z&&i(U,r)&&!i(q,r))return;var n=N(e,r);if(n&&i(U,r)&&!(i(e,k)&&e[k][r]))n.enumerable=true;return n};var et=function t(e){var r=O(b(e));var n=[];var o=0;var s;while(r.length>o){if(!i(U,s=r[o++])&&s!=k&&s!=u)n.push(s)}return n};var rt=function t(e){var r=e===z;var n=O(r?q:b(e));var o=[];var s=0;var a;while(n.length>s){if(i(U,a=n[s++])&&(r?i(z,a):true))o.push(U[a])}return o};if(!V){R=function t(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:undefined);var r=function(t){if(this===z)r.call(q,t);if(i(this,k)&&i(this[k],e))this[k][e]=false;H(this,e,C(1,t))};if(o&&X)H(z,e,{configurable:true,set:r});return Y(e)};a(R[D],"toString",function t(){return this._k});P.f=tt;M.f=Q;r(113).f=I.f=et;r(79).f=$;E.f=rt;if(o&&!r(63)){a(z,"propertyIsEnumerable",$,true)}d.f=function(t){return Y(p(t))}}s(s.G+s.W+s.F*!V,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)p(nt[it++]);for(var ot=L(p.store),st=0;ot.length>st;)y(ot[st++]);s(s.S+s.F*!V,"Symbol",{for:function(t){return i(G,t+="")?G[t]:G[t]=R(t)},keyFor:function t(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var r in G)if(G[r]===e)return r},useSetter:function(){X=true},useSimple:function(){X=false}});s(s.S+s.F*!V,"Object",{create:K,defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var at=l(function(){E.f(1)});s(s.S+s.F*at,"Object",{getOwnPropertySymbols:function t(e){return E.f(x(e))}});A&&s(s.S+s.F*(!V||l(function(){var t=R();return F([t])!="[null]"||F({a:t})!="{}"||F(Object(t))!="{}"})),"JSON",{stringify:function t(e){var r=[e];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!_(i)&&e===undefined||Z(e))return;if(!g(i))i=function(t,e){if(typeof o=="function")e=o.call(this,t,e);if(!Z(e))return e};r[1]=i;return F.apply(A,r)}});R[D][j]||r(42)(R[D],j,R[D].valueOf);h(R,"Symbol");h(Math,"Math",true);h(n.JSON,"JSON",true)},function(t,e,r){t.exports=r(42)},function(t,e,r){var n=r(18).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(41);var i=r(113).f;var o={}.toString;var s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function t(e){return s&&o.call(e)=="[object Window]"?a(e):i(n(e))}},function(t,e,r){"use strict";var n=r(63);var i=r(25);var o=r(176);var s=r(42);var a=r(65);var u=r(312);var l=r(80);var c=r(180);var h=r(20)("iterator");var f=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var y="values";var v=function(){return this};t.exports=function(t,e,r,g,m,_,x){u(r,e,g);var b=function(t){if(!f&&t in I)return I[t];switch(t){case d:return function e(){return new r(this,t)};case y:return function e(){return new r(this,t)}}return function e(){return new r(this,t)}};var S=e+" Iterator";var C=m==y;var w=false;var I=t.prototype;var P=I[h]||I[p]||m&&I[m];var E=P||b(m);var M=m?!C?E:b("entries"):undefined;var L=e=="Array"?I.entries||P:P;var N,T,O;if(L){O=c(L.call(new t));if(O!==Object.prototype&&O.next){l(O,S,true);if(!n&&typeof O[h]!="function")s(O,h,v)}}if(C&&P&&P.name!==y){w=true;E=function t(){return P.call(this)}}if((!n||x)&&(f||w||!I[h])){s(I,h,E)}a[e]=E;a[S]=v;if(m){N={values:C?E:b(y),keys:_?E:b(d),entries:M};if(x)for(T in N){if(!(T in I))o(I,T,N[T])}else i(i.P+i.F*(f||w),e,N)}return N}},function(t,e,r){var n=r(40);var i=r(60);var o=r(103)("IE_PROTO");var s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){t=i(t);if(n(t,o))return t[o];if(typeof t.constructor=="function"&&t instanceof t.constructor){return t.constructor.prototype}return t instanceof Object?s:null}},function(t,e){},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DynShowStyle=undefined;var n=r(0);var i=r(8);var o=r(183);var s=r(21);var a=r(83);var u=r(117);var l=r(118);var c=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Alpha=r.Alpha!==undefined?r.Alpha:0;this.BugSpare=r.BugSpare!==undefined?r.BugSpare:false;this.CustomRender=r.CustomRender!==undefined?r.CustomRender:false;this.CustomRenderPath=r.CustomRenderPath!==undefined?r.CustomRenderPath:null;this.DirectionLineClr=r.DirectionLineClr!==undefined?r.DirectionLineClr:0;this.DynNoteFlag=r.DynNoteFlag!==undefined?r.DynNoteFlag:false;this.DynNoteInfo=r.DynNoteInfo!==undefined?r.DynNoteInfo:null;this.IsShowArc=r.IsShowArc!==undefined?r.IsShowArc:0;this.ISShowLineDirection=r.ISShowLineDirection!==undefined?r.ISShowLineDirection:false;this.LineInfo=r.LineInfo!==undefined?r.LineInfo:null;this.MaxScale=r.MaxScale!==undefined?r.MaxScale:0;this.MinScale=r.MinScale!==undefined?r.MinScale:0;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.SpareLineInfo=r.SpareLineInfo!==undefined?r.SpareLineInfo:null;this.SparePointInfo=r.SparePointInfo!==undefined?r.SparePointInfo:null;this.SpareRegInfo=r.SpareRegInfo!==undefined?r.SpareRegInfo:null;this.SymbleScale=r.SymbleScale!==undefined?r.SymbleScale:0};e.DynShowStyle=c;n.Zondy.Object.DynShowStyle=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDynNoteInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=r(184);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined?r.Angle:0;this.Backclr=r.Backclr!==undefined?r.Backclr:0;this.Backexp=r.Backexp!==undefined?r.Backexp:0;this.Bold=r.Bold!==undefined?r.Bold:0;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.FontColor=r.FontColor!==undefined?r.FontColor:0;this.FontSize=r.FontSize!==undefined?r.FontSize:0;this.FontStyle=r.FontStyle!==undefined?r.FontStyle:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:o.FontShape.Positive;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:false;this.IsOvprnt=r.IsOvprnt!==undefined?r.IsOvprnt:false;this.LabelLevel=r.LabelLevel!==undefined?r.LabelLevel:0;this.LableType=r.LableType!==undefined?r.LableType:null;this.Offsetx=r.Offsetx!==undefined?r.Offsetx:0;this.Offsety=r.Offsety!==undefined?r.Offsety:0;this.Space=r.Space!==undefined?r.Space:0;this.StrikeThrough=r.StrikeThrough!==undefined?r.StrikeThrough:0;this.UnderLine=r.UnderLine!==undefined?r.UnderLine:0};e.CDynNoteInfo=a;n.Zondy.Object.CDynNoteInfo=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DynNoteLableType=undefined;var n=r(0);var i=r(8);var o=r(185);var s=r(186);var a=r(187);var u=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};e.DynNoteLableType=u;n.Zondy.Object.DynNoteLableType=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LablePntInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Ang=r.Ang!==undefined&&r.Ang!==null?r.Ang:null;this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.Distance=r.Distance!==undefined&&r.Distance!==null?r.Distance:0;this.EightDirLableType=r.EightDirLableType!==undefined&&r.EightDirLableType!==null?r.EightDirLableType:null;this.PntType=r.PntType!==undefined&&r.PntType!==null?r.PntType:0};e.LablePntInfo=s;n.Zondy.Object.LablePntInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LabelLinInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.DistFromLine=r.DistFromLine!==undefined&&r.DistFromLine!==null?r.DistFromLine:0;this.FromLineConstrain=r.FromLineConstrain!==undefined&&r.FromLineConstrain!==null?r.FromLineConstrain:0;this.Interval=r.Interval!==undefined&&r.Interval!==null?r.Interval:0;this.LinType=r.LinType!==undefined&&r.LinType!==null?r.LinType:0;this.Repeat=r.Repeat!==undefined&&r.Repeat!==null?r.Repeat:0;this.SpreadType=r.SpreadType!==undefined&&r.SpreadType!==null?r.SpreadType:null};e.LabelLinInfo=s;n.Zondy.Object.LabelLinInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LabelRegInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.LabelMiniRegion=r.LabelMiniRegion!==undefined&&r.LabelMiniRegion!==null?r.LabelMiniRegion:0;this.MayPlaceOutside=r.MayPlaceOutside!==undefined&&r.MayPlaceOutside!==null?r.MayPlaceOutside:0;this.MiniRegionArea=r.MiniRegionArea!==undefined&&r.MiniRegionArea!==null?r.MiniRegionArea:0;this.Offset=r.Offset!==undefined&&r.Offset!==null?r.Offset:0;this.RegType=r.RegType!==undefined&&r.RegType!==null?r.RegType:0};e.LabelRegInfo=s;n.Zondy.Object.LabelRegInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDisplayStyleExtend=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.Index=r.Index!==undefined?r.Index:0;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false};e.CDisplayStyleExtend=o;n.Zondy.Object.CDisplayStyleExtend=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CGDBInfo=undefined;var n=r(0);var i=function t(e){var r=e?e:{};this.GDBSvrName=r.ServerName!==undefined?r.ServerName:null;this.GDBName=r.GDBName!==undefined?r.GDBName:null;this.User=r.User!==undefined?r.User:null;this.Password=r.Password!==undefined?r.Password:null};e.CGDBInfo=i;n.Zondy.Object.CGDBInfo=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Feature=undefined;var n=r(0);var i=r(8);var o=r(191);var s=r(192);var a=r(21);var u=r(193);var l=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AttValue=r.AttValue!==undefined&&r.AttValue!==null?r.AttValue:null;this.FID=r.FID!==undefined&&r.FID!==null?r.FID:0;this.bound=r.bound!==undefined&&r.bound!==null?r.bound:null;this.fGeom=r.fGeom!==undefined&&r.fGeom!==null?r.fGeom:null;this.ftype=r.ftype!==undefined&&r.ftype!==null?r.ftype:0;this.GraphicInfo=r.GraphicInfo!==undefined&&r.GraphicInfo!==null?r.GraphicInfo:null};l.prototype.getAttValue=function(t){if(this.AttValue===null){return null}var e=this.AttValue.length;if(typeof t==="number"){if(t>=e){return null}return this.AttValue[t]}};l.prototype.getGraphicInfo=function(){if(this.GraphicInfo===null){return null}else{return new u.WebGraphicsInfo(this.GraphicInfo)}};l.prototype.getAttValueArray=function(){return this.AttValue};l.prototype.getRectBound=function(){var t=this.bound;if(t!==null){return new o.Rectangle(t)}else{return t}};l.prototype.getGeometry=function(){return this.fGeom};l.prototype.getFID=function(){return this.FID};l.prototype.setAttValues=function(t){this.AttValue=t};l.prototype.setBound=function(t){var e=null;if(typeof t==="string"){e=new o.Rectangle(t)}if(t instanceof String){e=new o.Rectangle(t)}if(t instanceof o.Rectangle){e=t}if(t instanceof ol.extent){e=new o.Rectangle;e.setByOL(t)}this.bound=e};l.prototype.setFID=function(t){this.FID=t};l.prototype.setFType=function(t){this.ftype=t};l.prototype.destroy=function(){this.AttValue=null;this.FID=null;this.bound=null;this.fGeom=null;this.ftype=null;this.GraphicInfo=null};e.Feature=l;n.Zondy.Object.Feature=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Rectangle=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(3);var c=d(l);var h=r(4);var f=d(h);var p=r(43);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,f.default)(e,t);function e(t,r,n,o,a){(0,s.default)(this,e);var u=a?a:{};var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,u));l.xmin=t;l.xmax=n;l.ymin=r;l.ymax=o;return l}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e===undefined||e===null){return}this.xmin=e[0];this.ymin=e[1];this.xmax=e[2];this.ymax=e[3]}},{key:"toString",value:function t(){return""+this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function t(){return"rect"}},{key:"convertToBound",value:function t(){var e=[this.xmin,this.ymin,this.xmax,this.ymax];return e}},{key:"intersectsBounds",value:function t(e,r){if(typeof r==="boolean"){r={inclusive:r}}r=r||{};if(r.inclusive===null){r.inclusive=true}var n=this;var i=false;var o=n.xmin===e.xmax||n.xmax===e.xmin||n.ymax===e.ymin||n.ymin===e.ymax;if(r.inclusive||!o){var s=e.ymin>=n.ymin&&e.ymin<=n.ymax||n.ymin>=e.ymin&&n.ymin<=e.ymax;var a=e.ymax>=n.ymin&&e.ymax<=n.ymax||n.ymax>e.ymin&&n.ymax<e.ymax;var u=e.xmin>=n.xmin&&e.xmin<=n.xmax||n.xmin>=e.xmin&&n.xmin<=e.xmax;var l=e.xmax>=n.xmin&&e.xmax<=n.xmax||n.xmax>=e.xmin&&n.xmax<=e.xmax;i=(s||a)&&(u||l)}return i}}]);return e}(p.Tangram);e.Rectangle=y;Zondy.Object.Rectangle=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureGeometry=undefined;var n=r(0);var i=r(8);var o=r(119);var s=r(120);var a=r(121);var u=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.PntGeom=r.PntGeom!==undefined&&r.PntGeom!==null?r.PntGeom:null;this.LinGeom=r.LinGeom!==undefined&&r.LinGeom!==null?r.LinGeom:null;this.RegGeom=r.RegGeom!==undefined&&r.RegGeom!==null?r.RegGeom:null};u.prototype.setPntGeom=function(t){this.PntGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};u.prototype.setLine=function(t){this.LinGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};u.prototype.setRegGeom=function(t){this.RegGeom=t!==undefined&&t!==null&&Array.isArray(t)?t:null};e.FeatureGeometry=u;n.Zondy.Object.FeatureGeometry=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.WebGraphicsInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=r(117);var a=r(83);var u=r(118);var l=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.InfoType=r.InfoType!==undefined&&r.InfoType!==null?r.InfoType:0;this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};e.WebGraphicsInfo=l;n.Zondy.Object.WebGraphicsInfo=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureSet=undefined;var n=r(0);var i=r(8);var o=r(82);var s=r(190);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.TotalCount=r.TotalCount!==undefined&&r.TotalCount!==null?r.TotalCount:0;this.AttStruct=r.AttStruct!==undefined&&r.AttStruct!==null?r.AttStruct:null;this.SFEleArray=r.SFEleArray!==undefined&&r.SFEleArray!==null?r.SFEleArray:new Array};a.prototype.clear=function(){this.AttStruct=null;this.SFEleArray=new Array};a.prototype.addFeature=function(t){if(t instanceof Array){this.SFEleArray.concat(t)}else{this.SFEleArray.push(t)}};a.prototype.getFeaturesLength=function(){if(this.SFEleArray instanceof Array){return this.SFEleArray.length}else{return 0}};a.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength()){return null}else{var e=this.SFEleArray[t];if(e instanceof s.Feature){return e}else{return new s.Feature(this.SFEleArray[t])}}};a.prototype.getAttType=function(t){var e;if(this.AttStruct==null){return null}if(typeof t=="number"){e=t}else{e=this.getAttIndexByAttName(t)}if(e==null){return null}else{return this.AttStruct.FldType[e]}};a.prototype.getAttIndexByAttName=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}var e=this.AttStruct.FldName.length;for(var r=0;r<e;r++){if(this.AttStruct.FldName[r]==t){return r}}return null};a.prototype.getAttNameByIndex=function(t){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}if(this.AttStruct.FldName.length<=t){return null}return this.AttStruct.FldName[t]};e.FeatureSet=a;n.Zondy.Object.FeatureSet=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Polygon=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(43);var d=r(29);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getLinearRing(0);var n=r.getCoordinates();var i=n.length;for(var o=0;o<i;o++){this.pointArr[o]=new d.Point2D(n[o][0],n[o][1])}}}},{key:"toString",value:function t(){if(this.pointArr===null||this.pointArr.length===0){return""}var e="";for(var r=0;r<this.pointArr.length;r++){e+=this.pointArr[r].x+","+this.pointArr[r].y+","}return e.substring(0,e.length-1)}},{key:"getGeometryType",value:function t(){return"polygon"}}]);return e}(p.Tangram);e.Polygon=v;Zondy.Object.Polygon=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourNoteParam=undefined;var n=r(0);var i=function t(e){var r=e!=undefined?e:{};this.IsClipLine=r.IsClipLine!=undefined?r.IsClipLine:true;this.isXYScaleOut=r.isXYScaleOut!=undefined?r.isXYScaleOut:false;this.NoteDirection=r.NoteDirection!=undefined?r.NoteDirection:1;this.LineWidth=r.LineWidth!=undefined?r.LineWidth:.05;this.MaxAngle=r.MaxAngle!=undefined?r.MaxAngle:90;this.MinDist=r.MinDist!=undefined?r.MinDist:10;this.IsAbs=r.IsAbs!=undefined?r.IsAbs:false;this.IsComma=r.IsComma!=undefined?r.IsComma:false;this.DigitNum=r.DigitNum!=undefined?r.DigitNum:0;this.FormatNo=r.FormatNo!=undefined?r.FormatNo:0;this.LogFlag=r.LogFlag!=undefined?r.LogFlag:0;this.Prefix=r.Prefix!=undefined?r.Prefix:"";this.Suffix=r.Suffix!=undefined?r.Suffix:"";this.ColorNo=r.ColorNo!=undefined?r.ColorNo:0;this.FixSize=r.FixSize!=undefined?r.FixSize:.01;this.FontNo=r.FontNo!=undefined?r.FontNo:0};e.ContourNoteParam=i;n.Zondy.Object.ContourAnalyse.ContourNoteParam=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourParam=undefined;var n=r(0);var i=r(196);var o=r(198);var s=r(199);var a=function t(e){var r=e!=undefined?e:{};this.IsSmoothLine=r.IsSmoothLine!==undefined?r.IsSmoothLine:false;this.SmoothGrade=r.SmoothGrade!==undefined?r.SmoothGrade:1;this.IsMakeReg=r.IsMakeReg!==undefined?r.IsMakeReg:false;this.IsMakeNote=r.IsMakeNote!==undefined?r.IsMakeNote:false;this.IsMakeSLin=r.IsMakeSLin!==undefined?r.IsMakeSLin:false;this.MapWay=r.MapWay!==undefined?r.MapWay:1;this.FrameWidth=r.FrameWidth!==undefined?r.FrameWidth:1;this.FrameHeight=r.FrameHeight!==undefined?r.FrameHeight:1;this.IsDrawColorScl=r.IsDrawColorScl!==undefined?r.IsDrawColorScl:false;this.IsSaveEdge=r.IsSaveEdge!==undefined?r.IsSaveEdge:false;this.NoteParam=r.NoteParam!==undefined?r.NoteParam:new n.Zondy.Object.ContourAnalyse.ContourNoteParam;this.SlopLineParam=r.SlopLineParam!==undefined?r.SlopLineParam:new n.Zondy.Object.ContourAnalyse.SlopLineParam;this.ZValues=r.ZValues!==undefined?r.ZValues:new n.Zondy.Object.ContourAnalyse.ContourZValue};e.ContourParam=a;n.Zondy.Object.ContourAnalyse.ContourParam=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SlopLineParam=undefined;var n=r(0);var i=function t(e){var r=e!==undefined?e:{};this.XScale=r.XScale!==undefined?r.XScale:2;this.YScale=r.YScale!==undefined?r.YScale:10;this.LineType=r.LineType!==undefined?r.LineType:0;this.SubLineType=r.SubLineType!==undefined?r.SubLineType:0};e.SlopLineParam=i;n.Zondy.Object.ContourAnalyse.SlopLineParam=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourZValue=undefined;var n=r(0);var i=r(83);var o=r(200);var s=function t(e){var r=e!=undefined?e:{};this.ZValue=r.ZValue!=undefined?r.ZValue:1;this.LineInfo=r.LineInfo!=undefined?r.LineInfo:null;this.RegInfo=r.RegInfo!=undefined?r.RegInfo:null;this.IsOutputNote=r.IsOutputNote!=undefined?r.IsOutputNote:false};e.ContourZValue=s;n.Zondy.Object.ContourAnalyse.ContourZValue=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourRegionInfo=undefined;var n=r(0);var i=function t(e){var r=e!=undefined?e:{};this.PatID=r.PatID!=undefined?r.PatID:0;this.FillMode=r.FillMode!=undefined?r.FillMode:0;this.FillColor=r.FillColor!=undefined?r.FillColor:1;this.PatHeight=r.PatHeight!=undefined?r.PatHeight:1;this.PatWidth=r.PatWidth!=undefined?r.PatWidth:1;this.PatAngle=r.PatAngle!=undefined?r.PatAngle:1;this.PatColor=r.PatColor!=undefined?r.PatColor:1;this.OutPenWidth=r.OutPenWidth!=undefined?r.OutPenWidth:1;this.OverMethod=r.OverMethod!=undefined?r.OverMethod:0};e.ContourRegionInfo=i;n.Zondy.Object.ContourAnalyse.ContourRegionInfo=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MeshingParam=undefined;var n=r(0);var i=function t(e){var r=e!==undefined?e:{};this.SfClsURL=r.SfClsURL!==undefined?r.SfClsURL:null;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.XCellNum=r.XCellNum!==undefined?r.XCellNum:200;this.Bound=r.Bound!==undefined?r.Bound:null;this.CalN=r.CalN!==undefined?r.CalN:null;this.CalM=r.CalM!==undefined?r.CalM:null;this.bIsCalInValidCtrlPnt=r.bIsCalInValidCtrlPnt!==undefined?r.bIsCalInValidCtrlPnt:false;this.nYCtrlNum=r.nYCtrlNum!==undefined?r.nYCtrlNum:null;this.nXCtrlNum=r.nXCtrlNum!==undefined?r.nXCtrlNum:null;this.nLayerNum=r.nLayerNum!==undefined?r.nLayerNum:null};e.MeshingParam=i;n.Zondy.Object.ContourAnalyse.MeshingParam=i},function(t,e,r){"use strict";e.__esModule=true;var n=r(2);var i=a(n);var o=r(108);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,r,n){if(e===null)e=Function.prototype;var o=(0,s.default)(e,r);if(o===undefined){var a=(0,i.default)(e);if(a===null){return undefined}else{return t(a,r,n)}}else if("value"in o){return o.value}else{var u=o.get;if(u===undefined){return undefined}return u.call(n)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CommonServiceBase=undefined;var n=r(204);var i=d(n);var o=r(1);var s=d(o);var a=r(9);var u=d(a);var l=r(0);var c=r(8);var h=r(211);var f=r(212);var p=r(213);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e,r){(0,s.default)(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"];this.events=null;this.eventListeners=null;this.url=null;this.urls=null;this.index=null;this.length=null;this.options=null;this.totalTimes=null;this.POLLING_TIMES=3;this._processSuccess=null;this._processFailed=null;this.isInTheSameDomain=null;if((0,c.isArray)(e)){n.urls=e;n.length=e.length;n.totalTimes=n.length;if(n.length===1){n.url=e[0]}else{n.index=parseInt(Math.random()*n.length);n.url=e[n.index]}}else{n.totalTimes=1;n.url=e}r=r||{};if(r){(0,c.extend)(this,r)}n.isInTheSameDomain=(0,c.isInTheSameDomain)(n.url);n.events=new h.Events(n,null,n.EVENT_TYPES,true);if(n.eventListeners instanceof Object){n.events.on(n.eventListeners)}}(0,u.default)(t,[{key:"destroy",value:function t(){var e=this;if((0,c.isArray)(e.urls)){e.urls=null;e.index=null;e.length=null;e.totalTimes=null}e.url=null;e.options=null;e._processSuccess=null;e._processFailed=null;e.isInTheSameDomain=null;e.EVENT_TYPES=null;if(e.events){e.events.destroy();e.events=null}if(e.eventListeners){e.eventListeners=null}}},{key:"request",value:function t(e){var r=this;e.url=e.url||r.url;e.isInTheSameDomain=r.isInTheSameDomain;r.calculatePollingTimes();r._processSuccess=e.success;r._processFailed=e.failure;e.scope=r;e.success=r.getUrlCompleted;e.failure=r.getUrlFailed;r.options=e;r._commit(r.options)}},{key:"getUrlCompleted",value:function t(e){var r=this;r._processSuccess(e)}},{key:"getUrlFailed",value:function t(e){var r=this;if(r.totalTimes>0){r.totalTimes--;r.ajaxPolling()}else{r._processFailed(e)}}},{key:"ajaxPolling",value:function t(){var e=this,r=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length);e.url=e.urls[e.index];r=r.replace(n,n.exec(e.url)[0]);e.options.url=r;e.options.isInTheSameDomain=(0,c.isInTheSameDomain)(r);e._commit(e.options)}},{key:"calculatePollingTimes",value:function t(){var e=this;if(e.times){if(e.totalTimes>e.POLLING_TIMES){if(e.times>e.POLLING_TIMES){e.totalTimes=e.POLLING_TIMES}else{e.totalTimes=e.times}}else{if(e.times<e.totalTimes){e.totalTimes=e.times}}}else{if(e.totalTimes>e.POLLING_TIMES){e.totalTimes=e.POLLING_TIMES}}e.totalTimes--}},{key:"serviceProcessCompleted",value:function t(e){e=(0,c.transformResult)(e);this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function t(e){e=(0,c.transformResult)(e);var r=e;this.events.triggerEvent("processFailed",{error:r})}},{key:"_commit",value:function t(e){if(e.method==="POST"||e.method==="PUT"){if(e.params){e.url=(0,c.urlAppend)(e.url,(0,c.getParameterString)(e.params||{}))}e.params=e.data}p.FetchRequest.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,timeout:e.async?0:null,proxy:e.proxy}).then(function(t){var r=void 0;if(t.text){r=function e(){return t.text()}}else{r=function e(){return t.json()}}if(t.status==200){return new i.default(function(n){r().then(function(t){if(!t)return;var r=null;if(typeof t==="string"&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){r={};if(t.toLowerCase()==="true"){r.succeed=true}else{r.succeed=false;r.error=true}}else if(typeof t==="string"){r=(new f.JSONFormat).read(t)}if(!r&&isNaN(r)||r.error){if(r&&r.error){r={error:r.error}}else{r={error:true}}}if(r.error){var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)}else{if(!isNaN(r)){r={value:r}}if(typeof r==="string"){r={value:r}}if(Object.prototype.toString.call(r)!=="[object Array]"){r.succeed=r.succeed===undefined?true:r.succeed}else{r={value:r,succeed:true}}var i=e.scope?(0,c.bind)(e.success,e.scope):e.success;i(r)}});n(t.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}else{return new i.default(function(n){r().then(function(t){if(!t)return;var r=null;if(typeof t==="string"&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){r={};r.succeed=false}else if(typeof t==="string"){r=(new f.JSONFormat).read(t)}if(!r&&isNaN(r)||!r.success){r={succeed:false}}var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)});n(t.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}}).catch(function(t){var r={error:true,value:{}};var n=e.scope?(0,c.bind)(e.failure,e.scope):e.failure;n(r)}).then(function(t,e){})}}]);return t}();e.CommonServiceBase=y;l.Zondy.Service.CommonServiceBase=y},function(t,e,r){t.exports={default:r(346),__esModule:true}},function(t,e,r){var n=r(62);var i=r(20)("toStringTag");var o=n(function(){return arguments}())=="Arguments";var s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,a;return t===undefined?"Undefined":t===null?"Null":typeof(r=s(e=Object(t),i))=="string"?r:o?n(e):(a=n(e))=="Object"&&typeof e.callee=="function"?"Arguments":a}},function(t,e,r){var n=r(205);var i=r(20)("iterator");var o=r(65);t.exports=r(16).getIteratorMethod=function(t){if(t!=undefined)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(26);var i=r(76);var o=r(20)("species");t.exports=function(t,e){var r=n(t).constructor;var s;return r===undefined||(s=n(r)[o])==undefined?e:i(s)}},function(t,e,r){var n=r(64);var i=r(352);var o=r(177);var s=r(106);var a=r(18);var u=a.process;var l=a.setImmediate;var c=a.clearImmediate;var h=a.MessageChannel;var f=a.Dispatch;var p=0;var d={};var y="onreadystatechange";var v,g,m;var _=function(){var t=+this;if(d.hasOwnProperty(t)){var e=d[t];delete d[t];e()}};var x=function(t){_.call(t.data)};if(!l||!c){l=function t(e){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);d[++p]=function(){i(typeof e=="function"?e:Function(e),r)};v(p);return p};c=function t(e){delete d[e]};if(r(62)(u)=="process"){v=function(t){u.nextTick(n(_,t,1))}}else if(f&&f.now){v=function(t){f.now(n(_,t,1))}}else if(h){g=new h;m=g.port2;g.port1.onmessage=x;v=n(m.postMessage,m,1)}else if(a.addEventListener&&typeof postMessage=="function"&&!a.importScripts){v=function(t){a.postMessage(t+"","*")};a.addEventListener("message",x,false)}else if(y in s("script")){v=function(t){o.appendChild(s("script"))[y]=function(){o.removeChild(this);_.call(t)}}}else{v=function(t){setTimeout(n(_,t,1),0)}}}t.exports={set:l,clear:c}},function(t,e){t.exports=function(t){try{return{e:false,v:t()}}catch(t){return{e:true,v:t}}}},function(t,e,r){var n=r(26);var i=r(36);var o=r(122);t.exports=function(t,e){n(t);if(i(e)&&e.constructor===t)return e;var r=o.f(t);var s=r.resolve;s(e);return r.promise}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Events=undefined;var n=r(50);var i=s(n);var o=r(8);function s(t){return t&&t.__esModule?t:{default:t}}var a=function t(e,r,n,i){this.listeners={};this.object=e;this.eventTypes=[];this.extensions={};this.extensionCount={};(0,o.extend)(this,i);if(n!=null){for(var s=0,a=n.length;s<a;s++){this.addEventType(n[s])}}};a.prototype.destroy=function(){for(var t in this.extensions){if(typeof this.extensions[t]!=="boolean"){this.extensions[t].destroy()}}this.extensions=null;this.listeners=null;this.object=null;this.eventTypes=null};a.prototype.addEventType=function(t){if(!this.listeners[t]){this.eventTypes.push(t);this.listeners[t]=[]}};a.prototype.on=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.register(e,t.scope,t[e])}}};a.prototype.register=function(t,e,r,n){if(t in a&&!this.extensions[t]){this.extensions[t]=new a[t](this)}if(r!=null&&(0,o.indexOf)(this.eventTypes,t)!==-1){if(e==null){e=this.object}var s=this.listeners[t];if(!s){s=[];this.listeners[t]=s;this.extensionCount[t]=0}var u={obj:e,func:r};if(n){s.splice(this.extensionCount[t],0,u);if((typeof n==="undefined"?"undefined":(0,i.default)(n))==="object"&&n.extension){this.extensionCount[t]++}}else{s.push(u)}}};a.prototype.registerPriority=function(t,e,r){this.register(t,e,r,true)};a.prototype.un=function(t){for(var e in t){if(e!=="scope"&&t.hasOwnProperty(e)){this.unregister(e,t.scope,t[e])}}};a.prototype.unregister=function(t,e,r){if(e==null){e=this.object}var n=this.listeners[t];if(n!=null){for(var i=0,o=n.length;i<o;i++){if(n[i].obj===e&&n[i].func===r){n.splice(i,1);break}}}};a.prototype.remove=function(t){if(this.listeners[t]!=null){this.listeners[t]=[]}};a.prototype.triggerEvent=function(t,e){var r=this.listeners[t];if(!r||r.length==0){return undefined}if(e==null){e={}}e.object=this.object;if(!e.type){e.type=t}r=r.slice();var n;for(var i=0,o=r.length;i<o;i++){var s=r[i];n=s.func.apply(s.obj,[e.result]);if(n!=undefined&&n==false){break}}return n};e.Events=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.JSONFormat=undefined;var n=r(50);var i=u(n);var o=r(15);var s=u(o);var a=r(8);function u(t){return t&&t.__esModule?t:{default:t}}var l=function t(e){this.data=null;this.keepData=false;this.indent="    ";this.space=" ";this.newline="\n";this.level=0;this.pretty=false;this.nativeJSON=function(){return!!(window.JSON&&typeof JSON.parse==="function"&&typeof s.default==="function")}();(0,a.extend)(this,e);this.options=e;this.serialize={object:function t(e){if(e==null){return"null"}if(e.constructor===Date){return this.serialize.date.apply(this,[e])}if(e.constructor===Array){return this.serialize.array.apply(this,[e])}var r=["{"];this.level+=1;var n,i,o;var s=false;for(n in e){if(e.hasOwnProperty(n)){i=this.write.apply(this,[n,this.pretty]);o=this.write.apply(this,[e[n],this.pretty]);if(i!=null&&o!=null){if(s){r.push(",")}r.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),o);s=true}}}this.level-=1;r.push(this.writeNewline(),this.writeIndent(),"}");return r.join("")},array:function t(e){var r;var n=["["];this.level+=1;for(var i=0,o=e.length;i<o;++i){r=this.write.apply(this,[e[i],this.pretty]);if(r!=null){if(i>0){n.push(",")}n.push(this.writeNewline(),this.writeIndent(),r)}}this.level-=1;n.push(this.writeNewline(),this.writeIndent(),"]");return n.join("")},string:function t(e){var r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(e)){return'"'+e.replace(/([\x00-\x1f\\"])/g,function(t,e){var n=r[e];if(n){return n}n=e.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})+'"'}return'"'+e+'"'},number:function t(e){return isFinite(e)?String(e):"null"},boolean:function t(e){return String(e)},date:function t(e){function r(t){return t<10?"0"+t:t}return'"'+e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+'"'}}};l.prototype.read=function(t,e){var r;if(this.nativeJSON){try{r=JSON.parse(t,e)}catch(t){}}if(this.keepData){this.data=r}return r};l.prototype.write=function(t,e){this.pretty=!!e;var r=null;var n=typeof t==="undefined"?"undefined":(0,i.default)(t);if(this.serialize[n]){try{r=!this.pretty&&this.nativeJSON?(0,s.default)(t):this.serialize[n].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}}return r};l.prototype.writeIndent=function(){var t=[];if(this.pretty){for(var e=0;e<this.level;++e){t.push(this.indent)}}return t.join("")};l.prototype.writeNewline=function(){return this.pretty?this.newline:""};l.prototype.writeSpace=function(){return this.pretty?this.space:""};e.JSONFormat=l;Zondy.Service.JSONFormat=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FetchRequest=e.RequestTimeout=e.CORS=undefined;var n=r(50);var i=l(n);var o=r(204);var s=l(o);var a=r(15);var u=l(a);r(360);r(362);function l(t){return t&&t.__esModule?t:{default:t}}var c=window.fetch;var h=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;var f=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3;var p=Zondy.FetchRequest={commit:function t(e,r,n,i){e=e?e.toUpperCase():e;switch(e){case"GET":return this._get(r,n,i);case"POST":return this._post(r,n,i);case"PUT":return this._put(r,n,i);case"DELETE":return this._delete(r,n,i);default:return this._get(r,n,i)}},_get:function t(e,r,n){n=n||{};var i="GET";e=this._processUrl(e,n);e=Zondy.Util.urlAppend(e,this._getParameterString(r||{}));if(!this.urlIsLong(e)){return this._fetch(e,r,n,i)}return this._postSimulatie(i,e.substring(0,e.indexOf("?")-1),r,n)},_delete:function t(e,r,n){n=n||{};var i="DELETE";e=this._processUrl(e,n);e=Zondy.Util.urlAppend(e,this._getParameterString(r||{}));if(!this.urlIsLong(e)&&h){return this._fetch(e,r,n,i)}return this._postSimulatie(i,e.substring(0,e.indexOf("?")-1),r,n)},_post:function t(e,r,n){n=n||{};return this._fetch(this._processUrl(e,n),r,n,"POST")},_put:function t(e,r,n){n=n||{};return this._fetch(this._processUrl(e,n),r,n,"PUT")},urlIsLong:function t(e){var r=0,n=null;for(var i=0,o=e.length;i<o;i++){n=e.charCodeAt(i);if(n<127){r++}else if(128<=n&&n<=2047){r+=2}else if(2048<=n&&n<=65535){r+=3}}return r<2e3?false:true},_postSimulatie:function t(e,r,n,i){var o=r.indexOf("?")>-1?"&":"?";r+=o+"_method="+e;if(typeof n!=="string"){n=(0,u.default)(n)}return this._post(r,n,i)},_processUrl:function t(e,r){if(this._isMVTRequest(e)){return e}if(r&&r.proxy){if(typeof r.proxy==="function"){e=r.proxy(e)}else{e=decodeURIComponent(e);e=r.proxy+encodeURIComponent(e)}}return e},_fetch:function t(e,r,n,i){n=n||{};n.headers=n.headers||{};if(!n.headers["Content-Type"]){n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}if(n.timeout){return this._timeout(n.timeout,c(e,{method:i,headers:n.headers,body:i==="PUT"||i==="POST"?r:undefined,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(t){return t}))}return c(e,{method:i,body:i==="PUT"||i==="POST"?r:undefined,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(t){return t}).catch(function(t){return t})},_timeout:function t(e,r){return new s.default(function(t,n){setTimeout(function(){n(new Error("timeout"))},e);r.then(t,n)})},_getParameterString:function t(e){var r=[];for(var n in e){var o=e[n];if(o!=null&&typeof o!=="function"){var s;if((typeof o==="undefined"?"undefined":(0,i.default)(o))==="object"&&o.constructor===Array){var a=[];var u;for(var l=0,c=o.length;l<c;l++){u=o[l];a.push(encodeURIComponent(u===null||u===undefined?"":u))}s="["+a.join(",")+"]"}else{s=encodeURIComponent(o)}r.push(encodeURIComponent(n)+"="+s)}}return r.join("&")},_isMVTRequest:function t(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};e.CORS=h;e.RequestTimeout=f;e.FetchRequest=p;Zondy.Service.FetchRequest=p;Zondy.Service.CORS=h;Zondy.Service.RequestTimeout=f},function(t,e,r){(function(t){var n=typeof t!=="undefined"&&t||typeof self!=="undefined"&&self||window;var i=Function.prototype.apply;e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)};e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)};e.clearTimeout=e.clearInterval=function(t){if(t){t.close()}};function o(t,e){this._id=t;this._clearFn=e}o.prototype.unref=o.prototype.ref=function(){};o.prototype.close=function(){this._clearFn.call(n,this._id)};e.enroll=function(t,e){clearTimeout(t._idleTimeoutId);t._idleTimeout=e};e.unenroll=function(t){clearTimeout(t._idleTimeoutId);t._idleTimeout=-1};e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};r(361);e.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof t!=="undefined"&&t.setImmediate||this&&this.setImmediate;e.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof t!=="undefined"&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(123))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GDBInfo=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(51);var d=r(14);var y=r(8);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.serverName=r.serverName!==undefined?r.serverName:null;n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.dsName=r.dsName!==undefined?r.dsName:null;n.rcsName=r.rcsName!==undefined?r.rcsName:null;n.User=r.User!==undefined?r.User:null;n.Password=r.Password!==undefined?r.Password:null;n.containAll=r.containAll!==undefined?r.containAll:true;return n}(0,u.default)(e,[{key:"getServerList",value:function t(e,r){var n=this;n.partUrl="datasource?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getGDBList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"?f=json"}else{n.partUrl="datasource/"+n.serverName+"?user="+n.User+"&psw="+n.Password+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRcsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getProjectList",value:function t(e,r){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getProjectInfo",value:function t(e,r,n){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?f=json";var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"AttachGDB",value:function t(e,r,n){var i=this;if(i.serverName===null||i.gdbName===null||e===null){return}i.partUrl="gdb/attach/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+e+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"DetachGDB",value:function t(e,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/detach/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"CreateGDB",value:function t(e,r,n){var i=this;if(i.serverName===null||i.gdbName===null){return}if(i.serverName.toLowerCase()==="mapgislocal"&&e===null){return}i.partUrl="gdb/creat/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+e+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"DeleteGDB",value:function t(e,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/delete/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(p.CatalogService);e.GDBInfo=g;Zondy.Catalog.GDBInfo=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VFeature=e.VPolyline=e.VPolygon=e.VPoint=e.BaseParameter=e.ObjectIdsParameter=e.RectangleParameter=e.GeometryParameter=e.SQLParameter=e.FeatureService=e.QueryUnifyParameter=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=undefined;var n=r(370);var i=r(371);var o=r(125);var s=r(372);var a=r(219);var u=r(373);var l=r(220);var c=r(221);var h=r(222);var f=r(218);var p=r(126);var d=r(374);var y=r(85);var v=r(217);var g=r(66);var m=r(375);var _=r(384);var x=r(388);var b=r(389);var S=r(390);var C=r(391);var w=r(52);var I=r(127);var P=r(132);var E=r(131);var M=r(392);e.EditDocFeature=n.EditDocFeature;e.EditLayerFeature=i.EditLayerFeature;e.EditServiceBase=o.EditServiceBase;e.MultiGeoQuery=s.MultiGeoQuery;e.MultiGeoQueryParameter=a.MultiGeoQueryParameter;e.ObjClsQuery=u.ObjClsQuery;e.ObjClsQueryParameter=l.ObjClsQueryParameter;e.QueryByLayerParameter=c.QueryByLayerParameter;e.QueryDocFeature=h.QueryDocFeature;e.QueryFeatureRule=f.QueryFeatureRule;e.QueryFeatureStruct=p.QueryFeatureStruct;e.QueryLayerFeature=d.QueryLayerFeature;e.QueryParameter=y.QueryParameter;e.QueryParameterBase=v.QueryParameterBase;e.QueryServiceBase=g.QueryServiceBase;e.QueryUnifyParameter=m.QueryUnifyParameter;e.FeatureService=_.FeatureService;e.SQLParameter=x.SQLParameter;e.GeometryParameter=b.GeometryParameter;e.RectangleParameter=S.RectangleParameter;e.ObjectIdsParameter=C.ObjectIdsParameter;e.BaseParameter=w.BaseParameter;e.VPoint=I.VPoint;e.VPolygon=P.VPolygon;e.VPolyline=E.VPolyline;e.VFeature=M.VFeature},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryParameterBase=undefined;var n=r(1);var i=l(n);var o=r(0);var s=r(8);var a=r(126);var u=r(218);function l(t){return t&&t.__esModule?t:{default:t}}var c=function t(e){(0,i.default)(this,t);var r=e?e:{};(0,s.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.where=r.where!==undefined?r.where:null;this.rule=r.rule!==undefined?r.rule:new u.QueryFeatureRule;this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.pageIndex=r.pageIndex!==undefined?r.pageIndex:0;this.recordNumber=r.recordNumber!==undefined?r.recordNumber:20;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.struct=r.struct!==undefined?r.struct:new a.QueryFeatureStruct;this.orderField=r.orderField!==undefined?r.orderField:null;this.rtnLabel=r.rtnLabel!==undefined?r.rtnLabel:false;this.fields=r.fields||"";this.coordPrecision=r.coordPrecision||r.coordPrecision===0?r.coordPrecision:2;this.isAsc=r.isAsc!==undefined?r.isAsc:false;this.cursorType=r.cursorType!==undefined?r.cursorType:"forward";this.proj=r.proj||null;this.guid=r.guid||"__readonly_user__"};e.QueryParameterBase=c;o.Zondy.Service.QueryParameterBase=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryFeatureRule=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e?e:{};(0,i.extend)(this,r);this.CompareRectOnly=r.CompareRectOnly!==undefined&&typeof r.CompareRectOnly==="boolean"?r.CompareRectOnly:false;this.EnableDisplayCondition=r.EnableDisplayCondition!==undefined&&typeof r.EnableDisplayCondition==="boolean"?r.EnableDisplayCondition:false;this.MustInside=r.MustInside!==undefined&&typeof r.MustInside==="boolean"?r.MustInside:false;this.Intersect=r.Intersect!==undefined&&typeof r.Intersect==="boolean"?r.Intersect:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};e.QueryFeatureRule=o;n.Zondy.Service.QueryFeatureRule=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiGeoQueryParameter=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.geometryType=r.geometryType!==undefined?r.geometryType:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.nearDis=r.nearDis!==undefined?r.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";t+="?f="+this.resultFormat;t+="&geometryType="+this.geometryType;t+="&nearDis="+this.nearDis;return t};e.MultiGeoQueryParameter=o;n.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjClsQueryParameter=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.where=r.where!==undefined?r.where:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";t+="&f="+this.resultFormat;if(this.objectIds!==null){t+="&objectIds="+this.objectIds}else{if(this.where!==null){t+="&where="+this.where}}return t};e.ObjClsQueryParameter=o;n.Zondy.Service.ObjClsQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryByLayerParameter=undefined;var n=r(2);var i=m(n);var o=r(1);var s=m(o);var a=r(9);var u=m(a);var l=r(3);var c=m(l);var h=r(202);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(85);var g=r(126);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.gdbp=t!==undefined?t:null;return o}(0,u.default)(e,[{key:"getParameterURL",value:function t(){var r=(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterURL",this).call(this);return r+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function t(){var r=(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterObject",this).call(this,this);r.gdbp=this.gdbp;return r}}]);return e}(v.QueryParameter);e.QueryByLayerParameter=_;y.Zondy.Service.QueryByLayerParameter=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryDocFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(66);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=o?o:{};var l=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));l.queryParam=t;l.docName=r;l.layerIndex=n==undefined?-1:n;l.mapIndex=0;l.partUrl="docs/"+l.docName+"/"+l.mapIndex.toString()+"/"+l.layerIndex.toString()+"/query";return l}return e}(f.QueryServiceBase);e.QueryDocFeature=d;h.Zondy.Service.QueryDocFeature=d},function(t,e,r){t.exports={default:r(385),__esModule:true}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAllOtherDataItemInfoSource=undefined;var n=r(0);var i={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=i;n.Zondy.Object.Theme.CAllOtherDataItemInfoSource=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAnnInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Ovprnt!==undefined?r.Ovprnt:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.Chnt=r.Chnt!==undefined?r.Chnt:0;this.Color=r.Color!==undefined?r.Color:0;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.Height=r.Height!==undefined?r.Height:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:0;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:true;this.OffsetX=r.OffsetX!==undefined?r.OffsetX:0;this.OffsetY=r.OffsetY!==undefined?r.OffsetY:0;this.Space=r.Space!==undefined?r.Space:0;this.Width=r.Width!==undefined?r.Width:0};e.CAnnInfo=o;n.Zondy.Object.Theme.CAnnInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartLabelFormat=undefined;var n=r(0);var i={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=i;n.Zondy.Object.Theme.CChartLabelFormat=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(0);var f=r(30);var p=r(228);var d=r(229);var y=r(232);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ChartType=r.ChartType!==undefined?r.ChartType:p.CChartType.Bar;n.ChartThemeInfoArr=r.ChartThemeInfoArr!==undefined?r.ChartThemeInfoArr:null;n.RepresentInfo=r.RepresentInfo!==undefined?r.RepresentInfo:null;n.Type="CChartTheme";return n}return e}(f.CTheme);e.CChartTheme=g;h.Zondy.Object.Theme.CChartTheme=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartType=undefined;var n=r(0);var i={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=i;n.Zondy.Object.Theme.CChartType=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(37);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Expression=t!==undefined?t:"";return o}return e}(f.CThemeInfo);e.CChartThemeInfo=d;h.Zondy.Object.Theme.CChartThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CLinInfo=undefined;var n=r(0);var i=r(8);var o=r(21);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.AdjustFlg=r.AdjustFlg!==undefined?r.AdjustFlg:o.CLinAdjustType.Adjust;this.HeadType=r.HeadType!==undefined?r.HeadType:o.CLinHeadType.Round;this.JointType=r.JointType!==undefined?r.JointType:o.CLinJointType.Round;this.LinStyID=r.LinStyID!==undefined?r.LinStyID:0;this.MakeMethod=r.MakeMethod!==undefined?r.MakeMethod:o.CLinStyleMakeType.Byrule;this.OutClr=r.OutClr!==undefined?r.OutClr:[46,4,3];this.XScale=r.XScale!==undefined?r.XScale:10;this.YScale=r.YScale!==undefined?r.YScale:10;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};e.CLinInfo=s;n.Zondy.Object.Theme.CLinInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRegInfo=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.EndClr=r.EndClr!==undefined?r.EndClr:0;this.FillClr=r.FillClr!==undefined?r.FillClr:46;this.FillMode=r.FillMode!==undefined?r.FillMode:0;this.FullPatFlg=r.FullPatFlg!==undefined?r.FullPatFlg:true;this.PatClr=r.PatClr!==undefined?r.PatClr:3;this.PatHeight=r.PatHeight!==undefined?r.PatHeight:5;this.PatID=r.PatID!==undefined?r.PatID:0;this.PatWidth=r.PatWidth!==undefined?r.PatWidth:5;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:1};e.CRegInfo=o;n.Zondy.Object.Theme.CRegInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CChartThemeRepresentInfo=undefined;var n=r(0);var i=r(8);var o=r(225);var s=r(226);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AnnInfoLabel=r.AnnInfoLabel!==undefined?r.AnnInfoLabel:new o.CAnnInfo;this.DigitLabel=r.DigitLabel!==undefined?r.DigitLabel:0;this.FormatLabel=r.FormatLabel!==undefined?r.FormatLabel:s.CChartLabelFormat.Unknown;this.IsDrawLabel=r.IsDrawLabel!==undefined?r.IsDrawLabel:true;this.LineColor=r.LineColor!==undefined?r.LineColor:-1;this.MaxLength=r.MaxLength!==undefined?r.MaxLength:30;this.MinRadius=r.MinRadius!==undefined?r.MinRadius:10;this.PieSizeFixFlag=r.PieSizeFixFlag!==undefined?r.PieSizeFixFlag:0;this.PieTiltedAngle=r.PieTiltedAngle!==undefined?r.PieTiltedAngle:30;this.PlotRadius=r.PlotRadius!==undefined?r.PlotRadius:1;this.ThickPersent=r.ThickPersent!==undefined?r.ThickPersent:10;this.Width=r.Width!==undefined?r.Width:3};e.CChartThemeRepresentInfo=a;n.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDotDensityTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(30);var p=r(87);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.Expression=r.Expression!==undefined?r.Expression:"";n.Info=r.Info!==undefined?r.Info:null;n.Value=r.Value!==undefined?r.Value:null;n.Type="CDotDensityTheme";return n}return e}(f.CTheme);e.CDotDensityTheme=y;h.Zondy.Object.Theme.CDotDensityTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CFourColorTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(30);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ClrInfo=r.ClrInfo!==undefined?r.ClrInfo:[25,57,89,121];n.Type="CFourColorTheme";return n}return e}(f.CTheme);e.CFourColorTheme=d;h.Zondy.Object.Theme.CFourColorTheme=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CGraduatedSymbolTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(30);var p=r(87);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.BaseValue=r.BaseValue!==undefined?r.BaseValue:141e-6;n.DispMinus=r.DispMinus!==undefined?r.DispMinus:false;n.DispZero=r.DispZero!==undefined?r.DispZero:false;n.Expression=r.Expression!==undefined?r.Expression:null;n.MinusPntInfo=r.MinusPntInfo!==undefined?r.MinusPntInfo:null;n.PlusPntInfo=r.PlusPntInfo!==undefined?r.PlusPntInfo:null;n.ZeroPntInfo=r.ZeroPntInfo!==undefined?r.ZeroPntInfo:null;n.Type="CGraduatedSymbolTheme";return n}return e}(f.CTheme);e.CGraduatedSymbolTheme=y;h.Zondy.Object.Theme.CGraduatedSymbolTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CMultiClassTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(30);var p=r(37);var d=r(237);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.ExpInfoArr=r.ExpInfoArr!==undefined?r.ExpInfoArr:null;n.MultiClassThemeInfoArr=r.MultiClassThemeInfoArr!==undefined?r.MultiClassThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CMultiClassTheme";return n}return e}(f.CTheme);e.CMultiClassTheme=v;h.Zondy.Object.Theme.CMultiClassTheme=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ExpInfo=undefined;var n=r(0);var i=r(8);var o=function t(e,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.Expression=e!==undefined?e:"";this.ItemValueArr=r!==undefined?r:null};e.ExpInfo=o;n.Zondy.Object.Theme.ExpInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRandomTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(30);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.Type="CRandomTheme";return n}return e}(f.CTheme);e.CRandomTheme=d;h.Zondy.Object.Theme.CRandomTheme=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRangeTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(0);var f=r(30);var p=r(224);var d=r(37);var y=r(240);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.AllOtherDataItemInfoSource=r.AllOtherDataItemInfoSource!==undefined?r.AllOtherDataItemInfoSource:p.CAllOtherDataItemInfoSource.DefaultThemeInfo;n.Expression=r.Expression!==undefined?r.Expression:"";n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.RangeThemeInfoArr=r.RangeThemeInfoArr!==undefined?r.RangeThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CRangeTheme";return n}return e}(f.CTheme);e.CRangeTheme=g;h.Zondy.Object.Theme.CRangeTheme=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CRangeThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(37);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.StartValue=t!==undefined?t:"";a.EndValue=r!==undefined?r:"";return a}return e}(f.CThemeInfo);e.CRangeThemeInfo=d;h.Zondy.Object.Theme.CRangeThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CSimpleTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(30);var p=r(37);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.ThemeInfo=r.ThemeInfo!==undefined?r.ThemeInfo:new p.CThemeInfo;n.Type="CSimpleTheme";return n}return e}(f.CTheme);e.CSimpleTheme=y;h.Zondy.Object.Theme.CSimpleTheme=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CUniqueTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(30);var p=r(37);var d=r(243);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.Expression=r.Expression!==undefined?r.Expression:"";n.UniqueThemeInfoArr=r.UniqueThemeInfoArr!==undefined?r.UniqueThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CUniqueTheme";return n}return e}(f.CTheme);e.CUniqueTheme=v;h.Zondy.Object.Theme.CUniqueTheme=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CUniqueThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(37);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.Value=t!==undefined?t:"";return o}return e}(f.CThemeInfo);e.CUniqueThemeInfo=d;h.Zondy.Object.Theme.CUniqueThemeInfo=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FolderInfo=undefined;var n=r(0);var i=r(140);var o=function t(e,r){this.name=e!==undefined?e:null;this.attribute=r!==undefined?r:null};e.FolderInfo=o;n.Zondy.Object.Theme.FolderInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemesInfo=undefined;var n=r(0);var i=r(30);var o=function t(e,r){this.LayerName=e!==undefined?e:null;this.ThemeArr=r!==undefined?r:null};e.ThemesInfo=o;n.Zondy.Object.Theme.ThemesInfo=o},function(t,e,r){"use strict";var n=r(145);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s=function(){var t=[];for(var e=0;e<256;++e){t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase())}return t}();var a=function t(e){while(e.length>1){var r=e.pop();var n=r.obj[r.prop];if(o(n)){var i=[];for(var s=0;s<n.length;++s){if(typeof n[s]!=="undefined"){i.push(n[s])}}r.obj[r.prop]=i}}};var u=function t(e,r){var n=r&&r.plainObjects?Object.create(null):{};for(var i=0;i<e.length;++i){if(typeof e[i]!=="undefined"){n[i]=e[i]}}return n};var l=function t(e,r,n){if(!r){return e}if(typeof r!=="object"){if(o(e)){e.push(r)}else if(e&&typeof e==="object"){if(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r)){e[r]=true}}else{return[e,r]}return e}if(!e||typeof e!=="object"){return[e].concat(r)}var s=e;if(o(e)&&!o(r)){s=u(e,n)}if(o(e)&&o(r)){r.forEach(function(r,o){if(i.call(e,o)){var s=e[o];if(s&&typeof s==="object"&&r&&typeof r==="object"){e[o]=t(s,r,n)}else{e.push(r)}}else{e[o]=r}});return e}return Object.keys(r).reduce(function(e,o){var s=r[o];if(i.call(e,o)){e[o]=t(e[o],s,n)}else{e[o]=s}return e},s)};var c=function t(e,r){return Object.keys(r).reduce(function(t,e){t[e]=r[e];return t},e)};var h=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1"){return n.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(n)}catch(t){return n}};var f=function t(e,r,i,o,a){if(e.length===0){return e}var u=e;if(typeof e==="symbol"){u=Symbol.prototype.toString.call(e)}else if(typeof e!=="string"){u=String(e)}if(i==="iso-8859-1"){return escape(u).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"})}var l="";for(var c=0;c<u.length;++c){var h=u.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===n.RFC1738&&(h===40||h===41)){l+=u.charAt(c);continue}if(h<128){l=l+s[h];continue}if(h<2048){l=l+(s[192|h>>6]+s[128|h&63]);continue}if(h<55296||h>=57344){l=l+(s[224|h>>12]+s[128|h>>6&63]+s[128|h&63]);continue}c+=1;h=65536+((h&1023)<<10|u.charCodeAt(c)&1023);l+=s[240|h>>18]+s[128|h>>12&63]+s[128|h>>6&63]+s[128|h&63]}return l};var p=function t(e){var r=[{obj:{o:e},prop:"o"}];var n=[];for(var i=0;i<r.length;++i){var o=r[i];var s=o.obj[o.prop];var u=Object.keys(s);for(var l=0;l<u.length;++l){var c=u[l];var h=s[c];if(typeof h==="object"&&h!==null&&n.indexOf(h)===-1){r.push({obj:s,prop:c});n.push(h)}}}a(r);return e};var d=function t(e){return Object.prototype.toString.call(e)==="[object RegExp]"};var y=function t(e){if(!e||typeof e!=="object"){return false}return!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};var v=function t(e,r){return[].concat(e,r)};var g=function t(e,r){if(o(e)){var n=[];for(var i=0;i<e.length;i+=1){n.push(r(e[i]))}return n}return r(e)};t.exports={arrayToObject:u,assign:c,combine:v,compact:p,decode:h,encode:f,isBuffer:y,isRegExp:d,maybeMap:g,merge:l}},function(t,e,r){var n=r(45);var i=r(146);var o=r(148)("IE_PROTO");var s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){t=i(t);if(n(t,o))return t[o];if(typeof t.constructor=="function"&&t instanceof t.constructor){return t.constructor.prototype}return t instanceof Object?s:null}},function(t,e,r){var n=r(447);t.exports=function(t,e,r){n(t);if(e===undefined)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){t.exports=!r(47)&&!r(68)(function(){return Object.defineProperty(r(250)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,e,r){var n=r(56);var i=r(38).document;var o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){"use strict";var n=r(89);var i=r(54);var o=r(252);var s=r(55);var a=r(153);var u=r(455);var l=r(157);var c=r(247);var h=r(57)("iterator");var f=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var y="values";var v=function(){return this};t.exports=function(t,e,r,g,m,_,x){u(r,e,g);var b=function(t){if(!f&&t in I)return I[t];switch(t){case d:return function e(){return new r(this,t)};case y:return function e(){return new r(this,t)}}return function e(){return new r(this,t)}};var S=e+" Iterator";var C=m==y;var w=false;var I=t.prototype;var P=I[h]||I[p]||m&&I[m];var E=P||b(m);var M=m?!C?E:b("entries"):undefined;var L=e=="Array"?I.entries||P:P;var N,T,O;if(L){O=c(L.call(new t));if(O!==Object.prototype&&O.next){l(O,S,true);if(!n&&typeof O[h]!="function")s(O,h,v)}}if(C&&P&&P.name!==y){w=true;E=function t(){return P.call(this)}}if((!n||x)&&(f||w||!I[h])){s(I,h,E)}a[e]=E;a[S]=v;if(m){N={values:C?E:b(y),keys:_?E:b(d),entries:M};if(x)for(T in N){if(!(T in I))o(I,T,N[T])}else i(i.P+i.F*(f||w),e,N)}return N}},function(t,e,r){t.exports=r(55)},function(t,e,r){var n=r(45);var i=r(48);var o=r(458)(false);var s=r(148)("IE_PROTO");t.exports=function(t,e){var r=i(t);var a=0;var u=[];var l;for(l in r)if(l!=s)n(r,l)&&u.push(l);while(e.length>a)if(n(r,l=e[a++])){~o(u,l)||u.push(l)}return u}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(48);var i=r(257).f;var o={}.toString;var s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function t(e){return s&&o.call(e)=="[object Window]"?a(e):i(n(e))}},function(t,e,r){var n=r(253);var i=r(156).concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return n(e,i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LevelRenderer=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(259);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.newGuid,h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);t._instances={};t.Tool={};this.CLASS_NAME="Zondy.LevelRenderer"}(0,s.default)(t,[{key:"destroy",value:function t(){this.dispose()}},{key:"init",value:function e(r){var n=new u.Render(c(),r);t._instances[n.id]=n;return n}},{key:"dispose",value:function e(r){if(r){r.dispose();this.delInstance(r.id)}else{for(var n in t._instances){t._instances[n].dispose()}t._instances={}}return this}},{key:"getInstance",value:function e(r){return t._instances[r]}},{key:"delInstance",value:function e(r){delete t._instances[r];return this}}]);return t}();e.LevelRenderer=f;h.LevelRenderer=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Render=undefined;var n=r(5);var i=f(n);var o=r(6);var s=f(o);var a=r(7);var u=r(260);var l=r(269);var c=r(270);var h=r(271);function f(t){return t&&t.__esModule?t:{default:t}}var p=a.Common.Zondy,d=a.Common.indexOf,y=a.Common.newGuid;var v=function(){function t(e,r){(0,i.default)(this,t);this.id=e;this.storage=new u.Storage;this.painter=new l.Painter(r,this.storage);this.handler=new c.Handler(r,this.storage,this.painter);this.animatingElements=[];this.animation=new h.Animation({stage:{update:t.getFrameCallback(this)}});this._needsRefreshNextFrame=false;this.animation.start();this.CLASS_NAME="Zondy.LevelRenderer.Render"}(0,s.default)(t,[{key:"destroy",value:function t(){this.id=null;this.storage=null;this.painter=null;this.handler=null;this.animatingElements=null;this.animation=null;this._needsRefreshNextFrame=null}},{key:"getId",value:function t(){return this.id}},{key:"addShape",value:function t(e){this.storage.addRoot(e);return this}},{key:"addGroup",value:function t(e){this.storage.addRoot(e);return this}},{key:"delShape",value:function t(e){this.storage.delRoot(e);return this}},{key:"delGroup",value:function t(e){this.storage.delRoot(e);return this}},{key:"modShape",value:function t(e,r){this.storage.mod(e,r);return this}},{key:"modGroup",value:function t(e,r){this.storage.mod(e,r);return this}},{key:"modLayer",value:function t(e,r){this.painter.modLayer(e,r);return this}},{key:"addHoverShape",value:function t(e){this.storage.addHover(e);return this}},{key:"render",value:function t(e){this.painter.render(e);this._needsRefreshNextFrame=false;return this}},{key:"refresh",value:function t(e){this.painter.refresh(e);this._needsRefreshNextFrame=false;return this}},{key:"refreshNextFrame",value:function t(){this._needsRefreshNextFrame=true;return this}},{key:"refreshHover",value:function t(e){this.painter.refreshHover(e);return this}},{key:"refreshShapes",value:function t(e,r){this.painter.refreshShapes(e,r);return this}},{key:"resize",value:function t(){this.painter.resize();return this}},{key:"animate",value:function t(e,r,n){if(typeof e==="string"){e=this.storage.get(e)}if(e){var i;if(r){var o=r.split(".");var s=e;for(var a=0,u=o.length;a<u;a++){if(!s){continue}s=s[o[a]]}if(s){i=s}}else{i=e}if(!i){return}var l=this.animatingElements;if(typeof e.__aniCount==="undefined"){e.__aniCount=0}if(e.__aniCount===0){l.push(e)}e.__aniCount++;return this.animation.animate(i,{loop:n}).done(function(){e.__aniCount--;if(e.__aniCount===0){var t=d(l,e);l.splice(t,1)}})}}},{key:"clearAnimation",value:function t(){this.animation.clear()}},{key:"getWidth",value:function t(){return this.painter.getWidth()}},{key:"getHeight",value:function t(){return this.painter.getHeight()}},{key:"toDataURL",value:function t(e,r,n){return this.painter.toDataURL(e,r,n)}},{key:"shapeToImage",value:function t(e,r,n){var i=y();return this.painter.shapeToImage(i,e,r,n)}},{key:"on",value:function t(e,r){this.handler.on(e,r);return this}},{key:"un",value:function t(e,r){this.handler.un(e,r);return this}},{key:"trigger",value:function t(e,r){this.handler.trigger(e,r);this.handler.dispatch(e,r);return this}},{key:"clear",value:function t(){this.storage.delRoot();this.painter.clear();return this}},{key:"dispose",value:function t(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=null;this.animatingElements=null;this.storage=null;this.painter=null;this.handler=null}},{key:"updateHoverShapes",value:function t(e){this.painter.updateHoverLayer(e);return this}},{key:"getAllShapes",value:function t(){return this.storage._shapeList}},{key:"clearAll",value:function t(){this.clear();this.painter.clearHover();return this}},{key:"getHoverOne",value:function t(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function t(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++){e.storage.mod(t[r].id)}if(t.length||e._needsRefreshNextFrame){e.refresh()}}}}}]);return t}();e.Render=v;p.LevelRenderer.Render=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Storage=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(261);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy,h=a.Common.indexOf,f=a.Common.merge;var p=function(){function t(){(0,i.default)(this,t);this._elements={};this._hoverElements=[];this._roots=[];this._shapeList=[];this._shapeListOffset=0;this.CLASS_NAME="Zondy.LevelRenderer.Storage"}(0,s.default)(t,[{key:"destroy",value:function t(){this.dispose();this._shapeList=null;this._shapeListOffset=null}},{key:"iterShape",value:function t(e,r){if(!r){var n={hover:false,normal:"down",update:false};r=n}if(r.hover){for(var i=0,o=this._hoverElements.length;i<o;i++){var s=this._hoverElements[i];s.updateTransform();if(e(s)){return this}}}if(r.update){this.updateShapeList()}switch(r.normal){case"down":{var a=this._shapeList.length;while(a--){if(e(this._shapeList[a])){return this}}break}default:{for(var u=0,l=this._shapeList.length;u<l;u++){if(e(this._shapeList[u])){return this}}break}}return this}},{key:"getHoverShapes",value:function e(r){var n=[],i=this._hoverElements.length;for(var o=0;o<i;o++){n.push(this._hoverElements[o]);var s=this._hoverElements[o].hoverConnect;if(s){var a;s=s instanceof Array?s:[s];for(var u=0,l=s.length;u<l;u++){a=s[u].id?s[u]:this.get(s[u]);if(a){n.push(a)}}}}n.sort(t.shapeCompareFunc);if(r){for(var c=0,h=n.length;c<h;c++){n[c].updateTransform()}}return n}},{key:"getShapeList",value:function t(e){if(e){this.updateShapeList()}return this._shapeList}},{key:"updateShapeList",value:function e(){this._shapeListOffset=0;var r=this._roots.length;for(var n=0;n<r;n++){var i=this._roots[n];this._updateAndAddShape(i)}this._shapeList.length=this._shapeListOffset;var o=this._shapeList.length;for(var s=0;s<o;s++){this._shapeList[s].__renderidx=s}this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function t(e,r){if(e.ignore){return}e.updateTransform();if(e.type==="group"){if(e.clipShape){e.clipShape.parent=e;e.clipShape.updateTransform();if(r){r=r.slice();r.push(e.clipShape)}else{r=[e.clipShape]}}for(var n=0;n<e._children.length;n++){var i=e._children[n];i.__dirty=e.__dirty||i.__dirty;this._updateAndAddShape(i,r)}e.__dirty=false}else{e.__clipShapes=r;this._shapeList[this._shapeListOffset++]=e}}},{key:"mod",value:function t(e,r){var n=this._elements[e];if(n){n.modSelf();if(r){if(r.parent||r._storage||r.__startClip){var i={};for(var o in r){if(o==="parent"||o==="_storage"||o==="__startClip"){continue}if(r.hasOwnProperty(o)){i[o]=r[o]}}f(n,i,true)}else{f(n,r,true)}}}return this}},{key:"drift",value:function t(e,r,n){var i=this._elements[e];if(i){i.needTransform=true;if(i.draggable==="horizontal"){n=0}else if(i.draggable==="vertical"){r=0}if(!i.ondrift||i.ondrift&&!i.ondrift(r,n)){i.drift(r,n)}}return this}},{key:"addHover",value:function t(e){e.updateNeedTransform();this._hoverElements.push(e);return this}},{key:"delHover",value:function t(){this._hoverElements=[];return this}},{key:"hasHoverShape",value:function t(){return this._hoverElements.length>0}},{key:"addRoot",value:function t(e){if(e instanceof u.Group){e.addChildrenToStorage(this)}this.addToMap(e);this._roots.push(e)}},{key:"delRoot",value:function t(e){if(typeof e=="undefined"){for(var r=0;r<this._roots.length;r++){var n=this._roots[r];if(n instanceof u.Group){n.delChildrenFromStorage(this)}}this._elements={};this._hoverElements=[];this._roots=[];return}if(e instanceof Array){var i=e.length;for(var o=0;o<i;o++){this.delRoot(e[o])}return}var s;if(typeof e=="string"){s=this._elements[e]}else{s=e}var a=h(this._roots,s);if(a>=0){this.delFromMap(s.id);this._roots.splice(a,1);if(s instanceof u.Group){s.delChildrenFromStorage(this)}}}},{key:"addToMap",value:function t(e){if(e instanceof u.Group){e._storage=this}e.modSelf();this._elements[e.id]=e;return this}},{key:"get",value:function t(e){return this._elements[e]}},{key:"delFromMap",value:function t(e){var r=this._elements[e];if(r){delete this._elements[e];if(r instanceof u.Group){r._storage=null}}return this}},{key:"dispose",value:function t(){this._elements=null;this._roots=null;this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function t(e,r){if(e.zlevel===r.zlevel){if(e.z===r.z){return e.__renderidx-r.__renderidx}return e.z-r.z}return e.zlevel-r.zlevel}}]);return t}();e.Storage=p;c.LevelRenderer.Storage=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Group=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(70);var g=r(92);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy,x=y.Common.mixin,b=y.Common.indexOf,S=y.Common.extend,C=y.Common.newGuid;var w=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));t=t||{};r.id=null;r.type="group";r.clipShape=null;r._children=[];r._storage=null;r.__dirty=true;r.ignore=false;S(r,t);r.id=r.id||C();r.CLASS_NAME="Zondy.LevelRenderer.Group";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.id=null;this.type=null;this.clipShape=null;this._children=null;this._storage=null;this.__dirty=null;this.ignore=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"children",value:function t(){return this._children.slice()}},{key:"childAt",value:function t(e){return this._children[e]}},{key:"addChild",value:function t(r){if(r===this){return}if(r.parent===this){return}if(r.parent){r.parent.removeChild(r)}this._children.push(r);r.parent=this;if(this._storage&&this._storage!==r._storage){this._storage.addToMap(r);if(r instanceof e){r.addChildrenToStorage(this._storage)}}}},{key:"removeChild",value:function t(r){var n=b(this._children,r);this._children.splice(n,1);r.parent=null;if(this._storage){this._storage.delFromMap(r.id);if(r instanceof e){r.delChildrenFromStorage(this._storage)}}}},{key:"eachChild",value:function t(e,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){e.call(r,o)}else{e(o)}}}},{key:"traverse",value:function t(e,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){e.call(r,o)}else{e(o)}if(o.type==="group"){o.traverse(e,r)}}}},{key:"addChildrenToStorage",value:function t(e){for(var r=0;r<this._children.length;r++){var n=this._children[r];e.addToMap(n);if(n.type==="group"){n.addChildrenToStorage(e)}}}},{key:"delChildrenFromStorage",value:function t(e){for(var r=0;r<this._children.length;r++){var n=this._children[r];e.delFromMap(n.id);if(n.type==="group"){n.delChildrenFromStorage(e)}}}},{key:"modSelf",value:function t(){this.__dirty=true}}]);return e}(x(v.Eventful,g.Transformable));e.Group=w;_.LevelRenderer.Group=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Area=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(7);var u=r(58);var l=r(93);function c(t){return t&&t.__esModule?t:{default:t}}var h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);this.util=new u.Util;this.curve=new l.Curve;this._ctx=null;this._textWidthCache={};this._textHeightCache={};this._textWidthCacheCounter=0;this._textHeightCacheCounter=0;this.TEXT_CACHE_MAX=5e3;this.PI2=Math.PI*2;this.roots=[-1,-1,-1];this.extrema=[-1,-1];this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}(0,s.default)(t,[{key:"normalizeRadian",value:function t(e){e%=this.PI2;if(e<0){e+=this.PI2}return e}},{key:"isInside",value:function t(e,r,n,i){if(!r||!e){return false}var o=e.type;this._ctx=this._ctx||this.util.getContext();var s=this._mathMethod(e,r,n,i);if(typeof s!="undefined"){return s}if(e.buildPath&&this._ctx.isPointInPath){return this._buildPathMethod(e,this._ctx,r,n,i)}switch(o){case"ellipse":case"smicellipse":return true;case"trochoid":var a=r.location==="out"?r.r1+r.r2+r.d:r.r1-r.r2+r.d;return this.isInsideCircle(r,n,i,a);case"rose":return this.isInsideCircle(r,n,i,r.maxr);default:return false}}},{key:"_mathMethod",value:function t(e,r,n,i){var o=e.type;switch(o){case"bezier-curve":if(typeof r.cpX2==="undefined"){return this.isInsideQuadraticStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.xEnd,r.yEnd,r.lineWidth,n,i)}return this.isInsideCubicStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.cpX2,r.cpY2,r.xEnd,r.yEnd,r.lineWidth,n,i);case"line":return this.isInsideLine(r.xStart,r.yStart,r.xEnd,r.yEnd,r.lineWidth,n,i);case"broken-line":return this.isInsideBrokenLine(r.pointList,r.lineWidth,n,i);case"smicbroken-line":{var s=n;var a=i;if(e.refOriginalPosition){s=n-e.refOriginalPosition[0];a=i-e.refOriginalPosition[1]}return this.isInsideBrokenLine(r.pointList,r.lineWidth,s,a)}case"ring":return this.isInsideRing(r.x,r.y,r.r0,r.r,n,i);case"smicring":{var u=r.x;var l=r.y;if(e.refOriginalPosition){u=r.x+e.refOriginalPosition[0];l=r.y+e.refOriginalPosition[1]}return this.isInsideRing(u,l,r.r0,r.r,n,i)}case"circle":return this.isInsideCircle(r.x,r.y,r.r,n,i);case"smicpoint":{var c=n;var h=i;if(e.refOriginalPosition){c=n-e.refOriginalPosition[0];h=i-e.refOriginalPosition[1]}return this.isInsideCircle(r.x,r.y,r.r,c,h)}case"sector":{var f=r.startAngle*Math.PI/180;var p=r.endAngle*Math.PI/180;if(!r.clockWise){f=-f;p=-p}return this.isInsideSector(r.x,r.y,r.r0,r.r,f,p,!r.clockWise,n,i)}case"smicsector":{var d=r.startAngle*Math.PI/180;var y=r.endAngle*Math.PI/180;if(!r.clockWise){d=-d;y=-y}var v=r.x;var g=r.y;if(e.refOriginalPosition){v=r.x+e.refOriginalPosition[0];g=r.y+e.refOriginalPosition[1]}return this.isInsideSector(v,g,r.r0,r.r,d,y,!r.clockWise,n,i)}case"path":return this.isInsidePath(r.pathArray,Math.max(r.lineWidth,5),r.brushType,n,i);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(r.pointList,n,i);case"smicpolygon":{var m=n;var _=i;if(e.refOriginalPosition){m=n-e.refOriginalPosition[0];_=i-e.refOriginalPosition[1]}if(e.holePolygonPointLists&&e.holePolygonPointLists.length>0){var x=this.isInsidePolygon(r.pointList,m,_);var b=e.holePolygonPointLists;var S=false;for(var C=0,w=b.length;C<w;C++){var I=b[C];var P=this.isInsidePolygon(I,m,_);if(P===true){S=true}}return x===true&&S===false}else{return this.isInsidePolygon(r.pointList,m,_)}}case"text":var E=r.__rect||e.getRect(r);return this.isInsideRect(E.x,E.y,E.width,E.height,n,i);case"smictext":var M=e.getTextBackground(r);return this.isInsidePolygon(M,n,i);case"rectangle":case"image":return this.isInsideRect(r.x,r.y,r.width,r.height,n,i);case"smicimage":{var L=r.x;var N=r.y;if(e.refOriginalPosition){L=r.x+e.refOriginalPosition[0];N=r.y+e.refOriginalPosition[1]}return this.isInsideRect(L,N,r.width,r.height,n,i)}}}},{key:"_buildPathMethod",value:function t(e,r,n,i,o){r.beginPath();e.buildPath(r,n);r.closePath();return r.isPointInPath(i,o)}},{key:"isOutside",value:function t(e,r,n,i){return!this.isInside(e,r,n,i)}},{key:"isInsideLine",value:function t(e,r,n,i,o,s,a){if(o===0){return false}var u=Math.max(o,5);var l=0;var c=0;if(a>r+u&&a>i+u||a<r-u&&a<i-u||s>e+u&&s>n+u||s<e-u&&s<n-u){return false}if(e!==n){l=(r-i)/(e-n);c=(e*i-n*r)/(e-n)}else{return Math.abs(s-e)<=u/2}var h=l*s-a+c;var f=h*h/(l*l+1);return f<=u/2*u/2}},{key:"isInsideCubicStroke",value:function t(e,r,n,i,o,s,a,u,l,c,h){if(l===0){return false}var f=Math.max(l,5);if(h>r+f&&h>i+f&&h>s+f&&h>u+f||h<r-f&&h<i-f&&h<s-f&&h<u-f||c>e+f&&c>n+f&&c>o+f&&c>a+f||c<e-f&&c<n-f&&c<o-f&&c<a-f){return false}var p=this.curve.cubicProjectPoint(e,r,n,i,o,s,a,u,c,h,null);return p<=f/2}},{key:"isInsideQuadraticStroke",value:function t(e,r,n,i,o,s,a,u,l){if(a===0){return false}var c=Math.max(a,5);if(l>r+c&&l>i+c&&l>s+c||l<r-c&&l<i-c&&l<s-c||u>e+c&&u>n+c&&u>o+c||u<e-c&&u<n-c&&u<o-c){return false}var h=this.curve.quadraticProjectPoint(e,r,n,i,o,s,u,l,null);return h<=c/2}},{key:"isInsideArcStroke",value:function t(e,r,n,i,o,s,a,u,l){var c=this.PI2;if(a===0){return false}var h=Math.max(a,5);u-=e;l-=r;var f=Math.sqrt(u*u+l*l);if(f-h>n||f+h<n){return false}if(Math.abs(i-o)>=c){return true}if(s){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=c}var d=Math.atan2(l,u);if(d<0){d+=c}return d>=i&&d<=o||d+c>=i&&d+c<=o}},{key:"isInsideBrokenLine",value:function t(e,r,n,i){var o=Math.max(r,10);for(var s=0,a=e.length-1;s<a;s++){var u=e[s][0];var l=e[s][1];var c=e[s+1][0];var h=e[s+1][1];if(this.isInsideLine(u,l,c,h,o,n,i)){return true}}return false}},{key:"isInsideRing",value:function t(e,r,n,i,o,s){var a=(o-e)*(o-e)+(s-r)*(s-r);return a<i*i&&a>n*n}},{key:"isInsideRect",value:function t(e,r,n,i,o,s){return o>=e&&o<=e+n&&s>=r&&s<=r+i}},{key:"isInsideCircle",value:function t(e,r,n,i,o){return(i-e)*(i-e)+(o-r)*(o-r)<n*n}},{key:"isInsideSector",value:function t(e,r,n,i,o,s,a,u,l){return this.isInsideArcStroke(e,r,(n+i)/2,o,s,a,i-n,u,l)}},{key:"isInsidePolygon",value:function t(e,r,n){var i=e.length;var o=0;for(var s=0,a=i-1;s<i;s++){var u=e[a][0];var l=e[a][1];var c=e[s][0];var h=e[s][1];o+=this.windingLine(u,l,c,h,r,n);a=s}return o!==0}},{key:"windingLine",value:function t(e,r,n,i,o,s){if(s>r&&s>i||s<r&&s<i){return 0}if(i==r){return 0}var a=i<r?1:-1;var u=(s-r)/(i-r);var l=u*(n-e)+e;return l>o?a:0}},{key:"swapExtrema",value:function t(){var e=this.extrema[0];this.extrema[0]=this.extrema[1];this.extrema[1]=e}},{key:"windingCubic",value:function t(e,r,n,i,o,s,a,u,l,c){var h=this.curve;var f=this.roots;var p=this.extrema;if(c>r&&c>i&&c>s&&c>u||c<r&&c<i&&c<s&&c<u){return 0}var d=h.cubicRootAt(r,i,s,u,c,f);if(d===0){return 0}else{var y=0;var v=-1;var g,m;for(var _=0;_<d;_++){var x=f[_];var b=h.cubicAt(e,n,o,a,x);if(b<l){continue}if(v<0){v=h.cubicExtrema(r,i,s,u,p);if(p[1]<p[0]&&v>1){this.swapExtrema()}g=h.cubicAt(r,i,s,u,p[0]);if(v>1){m=h.cubicAt(r,i,s,u,p[1])}}if(v===2){if(x<p[0]){y+=g<r?1:-1}else if(x<p[1]){y+=m<g?1:-1}else{y+=u<m?1:-1}}else{if(x<p[0]){y+=g<r?1:-1}else{y+=u<g?1:-1}}}return y}}},{key:"windingQuadratic",value:function t(e,r,n,i,o,s,a,u){var l=this.curve;var c=this.roots;if(u>r&&u>i&&u>s||u<r&&u<i&&u<s){return 0}var h=l.quadraticRootAt(r,i,s,u,c);if(h===0){return 0}else{var f=l.quadraticExtremum(r,i,s);if(f>=0&&f<=1){var p=0;var d=l.quadraticAt(r,i,s,f);for(var y=0;y<h;y++){var v=l.quadraticAt(e,n,o,c[y]);if(v>a){continue}if(c[y]<f){p+=d<r?1:-1}else{p+=s<d?1:-1}}return p}else{var g=l.quadraticAt(e,n,o,c[0]);if(g>a){return 0}return s<r?1:-1}}}},{key:"windingArc",value:function t(e,r,n,i,o,s,a,u){var l=this.roots;var c=this.PI2;u-=r;if(u>n||u<-n){return 0}var h=Math.sqrt(n*n-u*u);l[0]=-h;l[1]=h;if(Math.abs(i-o)>=c){i=0;o=c;var f=s?1:-1;if(a>=l[0]+e&&a<=l[1]+e){return f}else{return 0}}if(s){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=c}var d=0;for(var y=0;y<2;y++){var v=l[y];if(v+e>a){var g=Math.atan2(u,v);var m=s?1:-1;if(g<0){g=c+g}if(g>=i&&g<=o||g+c>=i&&g+c<=o){if(g>Math.PI/2&&g<Math.PI*1.5){m=-m}d+=m}}}return d}},{key:"isInsidePath",value:function t(e,r,n,i,o){var s=0;var a=0;var u=0;var l=0;var c=0;var h=true;var f=true;n=n||"fill";var p=n==="stroke"||n==="both";var d=n==="fill"||n==="both";for(var y=0;y<e.length;y++){var v=e[y];var g=v.points;if(h||v.command==="M"){if(y>0){if(d){s+=this.windingLine(a,u,l,c,i,o)}if(s!==0){return true}}l=g[g.length-2];c=g[g.length-1];h=false;if(f&&v.command!=="A"){f=false;a=l;u=c}}switch(v.command){case"M":a=g[0];u=g[1];break;case"L":if(p){if(this.isInsideLine(a,u,g[0],g[1],r,i,o)){return true}}if(d){s+=this.windingLine(a,u,g[0],g[1],i,o)}a=g[0];u=g[1];break;case"C":if(p){if(this.isInsideCubicStroke(a,u,g[0],g[1],g[2],g[3],g[4],g[5],r,i,o)){return true}}if(d){s+=this.windingCubic(a,u,g[0],g[1],g[2],g[3],g[4],g[5],i,o)}a=g[4];u=g[5];break;case"Q":if(p){if(this.isInsideQuadraticStroke(a,u,g[0],g[1],g[2],g[3],r,i,o)){return true}}if(d){s+=this.windingQuadratic(a,u,g[0],g[1],g[2],g[3],i,o)}a=g[2];u=g[3];break;case"A":var m=g[0];var _=g[1];var x=g[2];var b=g[3];var S=g[4];var C=g[5];var w=Math.cos(S)*x+m;var I=Math.sin(S)*b+_;if(!f){s+=this.windingLine(a,u,w,I)}else{f=false;l=w;c=I}var P=(i-m)*b/x+m;if(p){if(this.isInsideArcStroke(m,_,b,S,S+C,1-g[7],r,P,o)){return true}}if(d){s+=this.windingArc(m,_,b,S,S+C,1-g[7],P,o)}a=Math.cos(S+C)*x+m;u=Math.sin(S+C)*b+_;break;case"z":if(p){if(this.isInsideLine(a,u,l,c,r,i,o)){return true}}h=true;break}}if(d){s+=this.windingLine(a,u,l,c,i,o)}return s!==0}},{key:"getTextWidth",value:function t(e,r){var n=e+":"+r;if(this._textWidthCache[n]){return this._textWidthCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}e=(e+"").split("\n");var i=0;for(var o=0,s=e.length;o<s;o++){i=Math.max(this._ctx.measureText(e[o]).width,i)}this._ctx.restore();this._textWidthCache[n]=i;if(++this._textWidthCacheCounter>this.TEXT_CACHE_MAX){this._textWidthCacheCounter=0;this._textWidthCache={}}return i}},{key:"getTextHeight",value:function t(e,r){var n=e+":"+r;if(this._textHeightCache[n]){return this._textHeightCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}e=(e+"").split("\n");var i=(this._ctx.measureText("ZH").width+2)*e.length;this._ctx.restore();this._textHeightCache[n]=i;if(++this._textHeightCacheCounter>this.TEXT_CACHE_MAX){this._textHeightCacheCounter=0;this._textHeightCache={}}return i}}]);return t}();e.Area=f;h.LevelRenderer.Tool.Area=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ComputeBoundingBox=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(7);var u=r(93);var l=r(94);function c(t){return t&&t.__esModule?t:{default:t}}var h=a.Common.Zondy;var f=function(){function t(){(0,i.default)(this,t);if(arguments.length===3){this.computeBoundingBox(arguments)}this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}(0,s.default)(t,[{key:"computeBoundingBox",value:function t(e,r,n){if(e.length===0){return}var i=e[0][0];var o=e[0][0];var s=e[0][1];var a=e[0][1];for(var u=1;u<e.length;u++){var l=e[u];if(l[0]<i){i=l[0]}if(l[0]>o){o=l[0]}if(l[1]<s){s=l[1]}if(l[1]>a){a=l[1]}}r[0]=i;r[1]=s;n[0]=o;n[1]=a}},{key:"cubeBezier",value:function t(e,r,n,i,o,s){var a=new u.Curve;var l=[];a.cubicExtrema(e[0],r[0],n[0],i[0],l);for(var c=0;c<l.length;c++){l[c]=a.cubicAt(e[0],r[0],n[0],i[0],l[c])}var h=[];a.cubicExtrema(e[1],r[1],n[1],i[1],h);for(var f=0;f<h.length;f++){h[f]=a.cubicAt(e[1],r[1],n[1],i[1],h[f])}l.push(e[0],i[0]);h.push(e[1],i[1]);var p=Math.min.apply(null,l);var d=Math.max.apply(null,l);var y=Math.min.apply(null,h);var v=Math.max.apply(null,h);o[0]=p;o[1]=y;s[0]=d;s[1]=v}},{key:"quadraticBezier",value:function t(e,r,n,i,o){var s=new u.Curve;var a=s.quadraticExtremum(e[0],r[0],n[0]);var l=s.quadraticExtremum(e[1],r[1],n[1]);a=Math.max(Math.min(a,1),0);l=Math.max(Math.min(l,1),0);var c=1-a;var h=1-l;var f=c*c*e[0]+2*c*a*r[0]+a*a*n[0];var p=c*c*e[1]+2*c*a*r[1]+a*a*n[1];var d=h*h*e[0]+2*h*l*r[0]+l*l*n[0];var y=h*h*e[1]+2*h*l*r[1]+l*l*n[1];i[0]=Math.min(e[0],n[0],f,d);i[1]=Math.min(e[1],n[1],p,y);o[0]=Math.max(e[0],n[0],f,d);o[1]=Math.max(e[1],n[1],p,y)}},{key:"arc",value:function t(e,r,n,i,o,s,a,u){var c=new l.Vector;var h=c.create();var f=c.create();var p=c.create();h[0]=Math.cos(i)*n+e;h[1]=Math.sin(i)*n+r;f[0]=Math.cos(o)*n+e;f[1]=Math.sin(o)*n+r;c.min(a,h,f);c.max(u,h,f);i=i%(Math.PI*2);if(i<0){i=i+Math.PI*2}o=o%(Math.PI*2);if(o<0){o=o+Math.PI*2}if(i>o&&!s){o+=Math.PI*2}else if(i<o&&s){i+=Math.PI*2}if(s){var d=o;o=i;i=d}for(var y=0;y<o;y+=Math.PI/2){if(y>i){p[0]=Math.cos(y)*n+e;p[1]=Math.sin(y)*n+r;c.min(a,p,a);c.max(u,p,u)}}}}]);return t}();e.ComputeBoundingBox=f;h.LevelRenderer.Tool.ComputeBoundingBox=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Env=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;function r(t){var r=e.os={};var n=e.browser={};var i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/);var o=t.match(/(Android);?[\s\/]+([\d.]+)?/);var s=t.match(/(iPad).*OS\s([\d_]+)/);var a=t.match(/(iPod)(.*OS\s([\d_]+))?/);var u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/);var l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/);var c=l&&t.match(/TouchPad/);var h=t.match(/Kindle\/([\d.]+)/);var f=t.match(/Silk\/([\d._]+)/);var p=t.match(/(BlackBerry).*Version\/([\d.]+)/);var d=t.match(/(BB10).*Version\/([\d.]+)/);var y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/);var v=t.match(/PlayBook/);var g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/);var m=t.match(/Firefox\/([\d.]+)/);var _=t.match(/MSIE ([\d.]+)/);var x=i&&t.match(/Mobile\//)&&!g;var b=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g;if(n.webkit=!!i){n.version=i[1]}if(o){r.android=true;r.version=o[2]}if(u&&!a){r.ios=r.iphone=true;r.version=u[2].replace(/_/g,".")}if(s){r.ios=r.ipad=true;r.version=s[2].replace(/_/g,".")}if(a){r.ios=r.ipod=true;r.version=a[3]?a[3].replace(/_/g,"."):null}if(l){r.webos=true;r.version=l[2]}if(c){r.touchpad=true}if(p){r.blackberry=true;r.version=p[2]}if(d){r.bb10=true;r.version=d[2]}if(y){r.rimtabletos=true;r.version=y[2]}if(v){n.playbook=true}if(h){r.kindle=true;r.version=h[1]}if(f){n.silk=true;n.version=f[1]}if(!f&&r.android&&t.match(/Kindle Fire/)){n.silk=true}if(g){n.chrome=true;n.version=g[1]}if(m){n.firefox=true;n.version=m[1]}if(_){n.ie=true;n.version=_[1]}if(x&&(t.match(/Safari/)||!!r.ios)){n.safari=true}if(b){n.webview=true}if(_){n.ie=true;n.version=_[1]}r.tablet=!!(s||v||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/));r.phone=!!(!r.tablet&&!r.ipod&&(o||u||l||p||d||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/)));return{browser:n,os:r,canvasSupported:document.createElement("canvas").getContext?true:false}}return r(navigator.userAgent)}(0,s.default)(t,[{key:"destory",value:function t(){return true}}]);return t}();e.Env=c;l.LevelRenderer.Tool.Env=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Event=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.stop=typeof window.addEventListener==="function"?function(t){t.preventDefault();t.stopPropagation();t.cancelBubble=true}:function(t){t.returnValue=false;t.cancelBubble=true};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}(0,s.default)(t,[{key:"getX",value:function t(e){return typeof e.zrenderX!="undefined"&&e.zrenderX||typeof e.offsetX!="undefined"&&e.offsetX||typeof e.layerX!="undefined"&&e.layerX||typeof e.clientX!="undefined"&&e.clientX}},{key:"getY",value:function t(e){return typeof e.zrenderY!="undefined"&&e.zrenderY||typeof e.offsetY!="undefined"&&e.offsetY||typeof e.layerY!="undefined"&&e.layerY||typeof e.clientY!="undefined"&&e.clientY}},{key:"getDelta",value:function t(e){return typeof e.zrenderDelta!="undefined"&&e.zrenderDelta||typeof e.wheelDelta!="undefined"&&e.wheelDelta||typeof e.detail!="undefined"&&-e.detail}}]);return t}();e.Event=c;l.LevelRenderer.Tool.Event=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Http=undefined;var n=r(69);var i=c(n);var o=r(5);var s=c(o);var a=r(6);var u=c(a);var l=r(7);function c(t){return t&&t.__esModule?t:{default:t}}var h=l.Common.Zondy;var f=function(){function t(){(0,s.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}(0,u.default)(t,[{key:"get",value:function t(e,r,n){if((typeof e==="undefined"?"undefined":(0,i.default)(e))==="object"){var o=e;e=o.url;r=o.onsuccess;n=o.onerror}var s=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");s.open("GET",e,true);s.onreadystatechange=function(){if(s.readyState===4){if(s.status>=200&&s.status<300||s.status===304){r&&r(s.responseText)}else{n&&n()}s.onreadystatechange=new Function;s=null}};s.send(null)}}]);return t}();e.Http=f;h.LevelRenderer.Tool.Http=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Math=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this._radians=window.Math.PI/180;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}(0,s.default)(t,[{key:"sin",value:function t(e,r){return window.Math.sin(r?e*this._radians:e)}},{key:"cos",value:function t(e,r){return window.Math.cos(r?e*this._radians:e)}},{key:"degreeToRadian",value:function t(e){return e*this._radians}},{key:"radianToDegree",value:function t(e){return e/this._radians}}]);return t}();e.Math=c;l.LevelRenderer.Tool.Math=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Matrix=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}(0,s.default)(t,[{key:"create",value:function t(){var e=this.ArrayCtor;var r=new e(6);this.identity(r);return r}},{key:"identity",value:function t(e){e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return e}},{key:"copy",value:function t(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];return e}},{key:"mul",value:function t(e,r,n){e[0]=r[0]*n[0]+r[2]*n[1];e[1]=r[1]*n[0]+r[3]*n[1];e[2]=r[0]*n[2]+r[2]*n[3];e[3]=r[1]*n[2]+r[3]*n[3];e[4]=r[0]*n[4]+r[2]*n[5]+r[4];e[5]=r[1]*n[4]+r[3]*n[5]+r[5];return e}},{key:"translate",value:function t(e,r,n){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4]+n[0];e[5]=r[5]+n[1];return e}},{key:"rotate",value:function t(e,r,n){var i=r[0];var o=r[2];var s=r[4];var a=r[1];var u=r[3];var l=r[5];var c=Math.sin(n);var h=Math.cos(n);e[0]=i*h+a*c;e[1]=-i*c+a*h;e[2]=o*h+u*c;e[3]=-o*c+h*u;e[4]=h*s+c*l;e[5]=h*l-c*s;return e}},{key:"scale",value:function t(e,r,n){var i=n[0];var o=n[1];e[0]=r[0]*i;e[1]=r[1]*o;e[2]=r[2]*i;e[3]=r[3]*o;e[4]=r[4]*i;e[5]=r[5]*o;return e}},{key:"invert",value:function t(e,r){var n=r[0];var i=r[2];var o=r[4];var s=r[1];var a=r[3];var u=r[5];var l=n*a-s*i;if(!l){return null}l=1/l;e[0]=a*l;e[1]=-s*l;e[2]=-i*l;e[3]=n*l;e[4]=(i*u-a*o)*l;e[5]=(s*o-n*u)*l;return e}},{key:"mulVector",value:function t(e,r,n){var i=r[0];var o=r[2];var s=r[4];var a=r[1];var u=r[3];var l=r[5];e[0]=n[0]*i+n[1]*o+s;e[1]=n[0]*a+n[1]*u+l;return e}}]);return t}();e.Matrix=c;l.LevelRenderer.Tool.Matrix=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PaintLayer=e.Painter=undefined;var n=r(10);var i=_(n);var o=r(11);var s=_(o);var a=r(12);var u=_(a);var l=r(5);var c=_(l);var h=r(6);var f=_(h);var p=r(7);var d=r(58);var y=r(92);var v=r(164);var g=r(24);var m=r(165);function _(t){return t&&t.__esModule?t:{default:t}}var x=p.Common.Zondy,b=p.Common.newGuid;var S=function(){function t(e,r){(0,c.default)(this,t);this.root=e;this.storage=r;this._domRoot=null;this._layers={};this._zlevelList=[];this._layerConfig={};this._bgDom=null;this.shapeToImage=null;t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1);this.CLASS_NAME="Zondy.LevelRenderer.Painter";this.root.innerHTML="";this._width=this._getWidth();this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n;n.style.position="relative";n.style.overflow="hidden";n.style.width=this._width+"px";n.style.height=this._height+"px";this.root.appendChild(n);this.shapeToImage=this._createShapeToImageProcessor();this._bgDom=t.createDom(b(),"div",this);n.appendChild(this._bgDom);this._bgDom.onselectstart=s;this._bgDom.style["-webkit-user-select"]="none";this._bgDom.style["user-select"]="none";this._bgDom.style["-webkit-touch-callout"]="none";var i=new C(b(),this);this._layers["hover"]=i;n.appendChild(i.dom);i.initContext();i.dom.onselectstart=s;i.dom.style["-webkit-user-select"]="none";i.dom.style["user-select"]="none";i.dom.style["-webkit-touch-callout"]="none";var o=this;this.updatePainter=function(t,e){o.refreshShapes(t,e)};function s(){return false}function a(){}}(0,f.default)(t,[{key:"destroy",value:function t(){this.dispose();this._zlevelList=null;this._layerConfig=null;this._bgDom=null;this.shapeToImage=null}},{key:"render",value:function t(e){this.refresh(e,true);return this}},{key:"refresh",value:function t(e,r){var n=this.storage.getShapeList(true);this._paintList(n,r);if(typeof e=="function"){e()}return this}},{key:"_paintList",value:function t(e,r){if(typeof r=="undefined"){r=false}this._updateLayerStatus(e);var n;var i;var o;for(var s in this._layers){if(s!=="hover"){this._layers[s].unusedCount++;this._layers[s].updateTransform()}}var a=[];for(var u=0,l=e.length;u<l;u++){var c=e[u];if(i!==c.zlevel){if(n&&n.needTransform){o.restore()}n=this.getLayer(c.zlevel);o=n.ctx;i=c.zlevel;n.unusedCount=0;if(n.dirty||r){n.clear()}if(n.needTransform){o.save();n.setTransform(o)}}if(o&&c.__startClip){var h=c.__startClip;o.save();if(h.needTransform){var f=h.transform;g.SUtil.Util_matrix.invert(a,f);o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}o.beginPath();h.buildPath(o,h.style);o.clip();if(h.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((n&&n.dirty||r)&&!c.invisible){if(!c.onbrush||c.onbrush&&!c.onbrush(o,false)){if(v.Config.catchBrushException){try{c.brush(o,false,this.updatePainter)}catch(t){}}else{c.brush(o,false,this.updatePainter)}}}if(o&&c.__stopClip){o.restore()}c.__dirty=false}if(o&&n&&n.needTransform){o.restore()}for(var d in this._layers){if(d!=="hover"){var y=this._layers[d];y.dirty=false;if(y.unusedCount===1){y.clear()}}}}},{key:"getLayer",value:function t(e){var r=this._layers[e];if(!r){var n=this._zlevelList.length;var i=null;var o=-1;if(n>0&&e>this._zlevelList[0]){for(o=0;o<n-1;o++){if(this._zlevelList[o]<e&&this._zlevelList[o+1]>e){break}}i=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e);r=new C(b(),this);var s=i?i.dom:this._bgDom;if(s.nextSibling){s.parentNode.insertBefore(r.dom,s.nextSibling)}else{s.parentNode.appendChild(r.dom)}r.initContext();this._layers[e]=r;if(this._layerConfig[e]){(new d.Util).merge(r,this._layerConfig[e],true)}r.updateTransform()}return r}},{key:"getLayers",value:function t(){return this._layers}},{key:"_updateLayerStatus",value:function t(e){var r=this._layers;var n={};for(var i in r){if(i!=="hover"){n[i]=r[i].elCount;r[i].elCount=0}}for(var o=0;o<e.length;o++){var s=e[o];var a=s.zlevel;var u=r[a];if(u){u.elCount++;if(u.dirty){continue}u.dirty=s.__dirty}}for(var l in r){if(l!=="hover"){if(n[l]!==r[l].elCount){r[l].dirty=true}}}}},{key:"refreshShapes",value:function t(e,r){for(var n=0,i=e.length;n<i;n++){var o=e[n];this.storage.mod(o.id)}this.refresh(r);return this}},{key:"clear",value:function t(){for(var e in this._layers){if(e==="hover"){continue}this._layers[e].clear()}return this}},{key:"modLayer",value:function t(e,r){if(r){if(!this._layerConfig[e]){this._layerConfig[e]=r}else{(new d.Util).merge(this._layerConfig[e],r,true)}var n=this._layers[e];if(n){(new d.Util).merge(n,this._layerConfig[e],true)}}}},{key:"delLayer",value:function t(e){var r=this._layers[e];if(!r){return}this.modLayer(e,{position:r.position,rotation:r.rotation,scale:r.scale});r.dom.parentNode.removeChild(r.dom);delete this._layers[e];this._zlevelList.splice((new d.Util).indexOf(this._zlevelList,e),1)}},{key:"refreshHover",value:function t(){this.clearHover();var e=this.storage.getHoverShapes(true);for(var r=0,n=e.length;r<n;r++){this._brushHover(e[r])}this.storage.delHover();return this}},{key:"clearHover",value:function t(){var e=this._layers.hover;e&&e.clear();return this}},{key:"resize",value:function t(){var e=this._domRoot;e.style.display="none";var r=this._getWidth();var n=this._getHeight();e.style.display="";if(this._width!==r||n!==this._height){this._width=r;this._height=n;e.style.width=r+"px";e.style.height=n+"px";for(var i in this._layers){this._layers[i].resize(r,n)}this.refresh(null,true)}return this}},{key:"clearLayer",value:function t(e){var r=this._layers[e];if(r){r.clear()}}},{key:"dispose",value:function t(){this.root.innerHTML="";this.root=null;this.storage=null;this._domRoot=null;this._layers=null}},{key:"getDomHover",value:function t(){return this._layers.hover.dom}},{key:"toDataURL",value:function e(r,n,i){var o=t.createDom(b(),"canvas",this);this._bgDom.appendChild(o);var s=o.getContext("2d");t.devicePixelRatio!==1&&s.scale(t.devicePixelRatio,t.devicePixelRatio);s.fillStyle=n||"#fff";s.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio);s.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible){if(!t.onbrush||t.onbrush&&!t.onbrush(s,false)){if(v.Config.catchBrushException){try{t.brush(s,false,a.updatePainter)}catch(t){}}else{t.brush(s,false,a.updatePainter)}}}},{normal:"up",update:true});var u=o.toDataURL(r,i);s=null;this._bgDom.removeChild(o);return u}},{key:"getWidth",value:function t(){return this._width}},{key:"getHeight",value:function t(){return this._height}},{key:"_getWidth",value:function t(){var e=this.root;var r=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function t(){var e=this.root;var r=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function t(e){var r=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(r,true)){var n=this.getLayer(e.zlevel);if(n.needTransform){r.save();n.setTransform(r)}if(v.Config.catchBrushException){try{e.brush(r,true,this.updatePainter)}catch(t){}}else{e.brush(r,true,this.updatePainter)}if(n.needTransform){r.restore()}}}},{key:"_shapeToImage",value:function t(e,r,n,i,o){var s=document.createElement("canvas");var a=s.getContext("2d");var u=o||window.devicePixelRatio||1;s.style.width=n+"px";s.style.height=i+"px";s.setAttribute("width",n*u);s.setAttribute("height",i*u);a.clearRect(0,0,n*u,i*u);var l={position:r.position,rotation:r.rotation,scale:r.scale};r.position=[0,0,0];r.rotation=0;r.scale=[1,1];if(r){r.brush(a,false)}var c=new m.SmicImage({id:e,style:{x:0,y:0,image:s}});if(l.position!=null){c.position=r.position=l.position}if(l.rotation!=null){c.rotation=r.rotation=l.rotation}if(l.scale!=null){c.scale=r.scale=l.scale}return c}},{key:"_createShapeToImageProcessor",value:function e(){var r=this;return function(e,n,i,o){return r._shapeToImage(e,n,i,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function t(e){if(!(e instanceof Array)){return this}this.clearHover();this.storage.delHover();for(var r=0;r<e.length;r++){this.storage.addHover(e[r]);this._brushHover(e[r])}}}],[{key:"createDom",value:function e(r,n,i){var o=document.createElement(n);var s=i._width;var a=i._height;o.style.position="absolute";o.style.left=0;o.style.top=0;o.style.width=s+"px";o.style.height=a+"px";o.setAttribute("width",s*t.devicePixelRatio);o.setAttribute("height",a*t.devicePixelRatio);o.setAttribute("id",r);return o}}]);return t}();var C=function(t){(0,u.default)(e,t);function e(t,r){(0,c.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.dom=null;n.domBack=null;n.ctxBack=null;n.painter=r;n.unusedCount=0;n.config=null;n.dirty=true;n.elCount=0;n.clearColor=0;n.motionBlur=false;n.lastFrameAlpha=.7;n.zoomable=false;n.panable=false;n.maxZoom=Infinity;n.minZoom=0;n.ctx=null;n.dom=S.createDom(b(),"canvas",r);n.dom.onselectstart=o;n.dom.style["-webkit-user-select"]="none";n.dom.style["user-select"]="none";n.dom.style["-webkit-touch-callout"]="none";function o(){return false}n.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer";return n}(0,f.default)(e,[{key:"destroy",value:function t(){this.dom=null;this.domBack=null;this.ctxBack=null;this.painter=null;this.unusedCount=null;this.config=null;this.dirty=null;this.elCount=null;this.clearColor=null;this.motionBlur=null;this.lastFrameAlpha=null;this.zoomable=null;this.panable=null;this.maxZoom=null;this.minZoom=null;this.ctx=null;y.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function t(){this.ctx=this.dom.getContext("2d");if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"createBackBuffer",value:function t(){this.domBack=S.createDom(b(),"canvas",this.painter);this.ctxBack=this.domBack.getContext("2d");if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"resize",value:function t(e,r){this.dom.style.width=e+"px";this.dom.style.height=r+"px";this.dom.setAttribute("width",e*S.devicePixelRatio);this.dom.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}if(this.domBack){this.domBack.setAttribute("width",e*S.devicePixelRatio);this.domBack.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}}},{key:"clear",value:function t(){var e=this.dom;var r=this.ctx;var n=e.width;var i=e.height;var o=this.clearColor;var s=this.motionBlur;var a=this.lastFrameAlpha;if(s){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(e,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(o){r.save();r.fillStyle=this.config.clearColor;r.fillRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}else{r.clearRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(s){var u=this.domBack;r.save();r.globalAlpha=a;r.drawImage(u,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}}}]);return e}(y.Transformable);e.Painter=S;x.LevelRenderer.Painter=S;e.PaintLayer=C;x.LevelRenderer.PaintLayer=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Handler=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(12);var f=g(h);var p=r(7);var d=r(70);var y=r(164);var v=r(24);function g(t){return t&&t.__esModule?t:{default:t}}var m=p.Common.Zondy;var _=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.root=t;o.storage=r;o.painter=n;o._lastX=0;o._lastY=0;o._mouseX=0;o._mouseY=0;o._findHover=null;o._domHover=null;o._findHover=l(f,o);o._domHover=n.getDomHover();o.CLASS_NAME="Zondy.LevelRenderer.Handler";var a={resize:function t(e){e=e||window.event;this._lastHover=null;this._isMouseDown=0;this.dispatch(y.Config.EVENT.RESIZE,e)},click:function t(e){e=this._zrenderEventFixed(e);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<10){this._dispatchAgency(r,y.Config.EVENT.CLICK,e)}}this._mousemoveHandler(e)},dblclick:function t(e){e=e||window.event;e=this._zrenderEventFixed(e);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<5){this._dispatchAgency(r,y.Config.EVENT.DBLCLICK,e)}}this._mousemoveHandler(e)},mousewheel:function t(e){e=this._zrenderEventFixed(e);var r=e.wheelDelta||-e.detail;var n=r>0?1.1:1/1.1;var i=this.painter.getLayers();var o=false;for(var s in i){if(s!=="hover"){var a=i[s];var u=a.position;if(a.zoomable){a.__zoom=a.__zoom||1;var l=a.__zoom;l*=n;l=Math.max(Math.min(a.maxZoom,l),a.minZoom);n=l/a.__zoom;a.__zoom=l;u[0]-=(this._mouseX-u[0])*(n-1);u[1]-=(this._mouseY-u[1])*(n-1);a.scale[0]*=n;a.scale[1]*=n;a.dirty=true;o=true}}}if(o){this.painter.refresh()}this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEWHEEL,e);this._mousemoveHandler(e)},mousemove:function t(e){this._clickThreshold++;e=this._zrenderEventFixed(e);this._lastX=this._mouseX;this._lastY=this._mouseY;this._mouseX=v.SUtil.Util_event.getX(e);this._mouseY=v.SUtil.Util_event.getY(e);var r=this._mouseX-this._lastX;var n=this._mouseY-this._lastY;this._processDragStart(e);this._hasfound=0;this._event=e;this._iterateAndFindHover();if(!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget){this._processOutShape(e);this._processDragLeave(e)}this._lastHover=null;this.storage.delHover();this.painter.clearHover()}var i="";if(this._draggingTarget){this.storage.drift(this._draggingTarget.id,r,n);this._draggingTarget.modSelf();this.storage.addHover(this._draggingTarget)}else if(this._isMouseDown){var o=this.painter.getLayers();var s=false;for(var a in o){if(a!=="hover"){var u=o[a];if(u.panable){i="move";u.position[0]+=r;u.position[1]+=n;s=true;u.dirty=true}}}if(s){this.painter.refresh()}}if(this._draggingTarget||this._hasfound&&this._lastHover.draggable){i="move"}else if(this._hasfound&&this._lastHover.clickable){i="pointer"}this.root.style.cursor=i;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEMOVE,e);if(this._draggingTarget||this._hasfound||this.storage.hasHoverShape()){this.painter.refreshHover()}},mouseout:function t(e){e=this._zrenderEventFixed(e);var r=e.toElement||e.relatedTarget;if(r!==this.root){while(r&&r.nodeType!==9){if(r===this.root){this._mousemoveHandler(e);return}r=r.parentNode}}e.zrenderX=this._lastX;e.zrenderY=this._lastY;this.root.style.cursor="";this._isMouseDown=0;this._processOutShape(e);this._processDrop(e);this._processDragEnd(e);this.painter.refreshHover();this.dispatch(y.Config.EVENT.GLOBALOUT,e)},mousedown:function t(e){this._clickThreshold=0;if(this._lastDownButton===2){this._lastDownButton=e.button;this._mouseDownTarget=null;return}this._lastMouseDownMoment=new Date;e=this._zrenderEventFixed(e);this._isMouseDown=1;this._mouseDownTarget=this._lastHover;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEDOWN,e);this._lastDownButton=e.button},mouseup:function t(e){e=this._zrenderEventFixed(e);this.root.style.cursor="";this._isMouseDown=0;this._mouseDownTarget=null;this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEUP,e);this._processDrop(e);this._processDragEnd(e)},touchstart:function t(e){e=this._zrenderEventFixed(e,true);this._lastTouchMoment=new Date;this._mobildFindFixed(e);this._mousedownHandler(e)},touchmove:function t(e){e=this._zrenderEventFixed(e,true);this._mousemoveHandler(e);if(this._isDragging){v.SUtil.Util_event.stop(e)}},touchend:function t(e){e=this._zrenderEventFixed(e,true);this._mouseupHandler(e);var r=new Date;if(r-this._lastTouchMoment<y.Config.EVENT.touchClickDelay){this._mobildFindFixed(e);this._clickHandler(e);if(r-this._lastClickMoment<y.Config.EVENT.touchClickDelay/2){this._dblclickHandler(e);if(this._lastHover&&this._lastHover.clickable){v.SUtil.Util_event.stop(e)}}this._lastClickMoment=r}this.painter.clearHover()}};h(o);if(window.addEventListener){window.addEventListener("resize",o._resizeHandler);if(v.SUtil.Util_env.os.tablet||v.SUtil.Util_env.os.phone){t.addEventListener("touchstart",o._touchstartHandler);t.addEventListener("touchmove",o._touchmoveHandler);t.addEventListener("touchend",o._touchendHandler)}else{t.addEventListener("click",o._clickHandler);t.addEventListener("dblclick",o._dblclickHandler);t.addEventListener("mousewheel",o._mousewheelHandler);t.addEventListener("mousemove",o._mousemoveHandler);t.addEventListener("mousedown",o._mousedownHandler);t.addEventListener("mouseup",o._mouseupHandler)}t.addEventListener("DOMMouseScroll",o._mousewheelHandler);t.addEventListener("mouseout",o._mouseoutHandler)}else{window.attachEvent("onresize",o._resizeHandler);t.attachEvent("onclick",o._clickHandler);t.ondblclick=o._dblclickHandler;t.attachEvent("onmousewheel",o._mousewheelHandler);t.attachEvent("onmousemove",o._mousemoveHandler);t.attachEvent("onmouseout",o._mouseoutHandler);t.attachEvent("onmousedown",o._mousedownHandler);t.attachEvent("onmouseup",o._mouseupHandler)}function u(t,e){return function(r){return t.call(e,r)}}function l(t,e){return function(r,n,i){return t.call(e,r,n,i)}}function h(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"];var r=e.length;while(r--){var n=e[r];t["_"+n+"Handler"]=u(a[n],t)}}function f(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id===t.id||t.isSilent()){return false}var i=n._event;if(t.isCover(e,r)){if(t.hoverable){if(t.isHoverByRefDataID&&t.isHoverByRefDataID===true){if(t.refDataID){var o=t.refDataID;var s=null;if(t.refDataHoverGroup){s=t.refDataHoverGroup}var a=n.storage._shapeList;for(var u=0,l=a.length;u<l;u++){var c=a[u];if(c.refDataID&&o===c.refDataID){if(s){if(c.refDataHoverGroup&&s===c.refDataHoverGroup){n.storage.addHover(c)}}else{n.storage.addHover(c)}}}}}else{n.storage.addHover(t)}}var h=t.parent;while(h){if(h.clipShape&&!h.clipShape.isCover(n._mouseX,n._mouseY)){return false}h=h.parent}if(n._lastHover!==t){n._processOutShape(i);n._processDragLeave(i);n._lastHover=t;n._processDragEnter(i)}n._processOverShape(i);n._processDragOver(i);n._hasfound=1;return true}return false}return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.dispose();this._lastX=null;this._lastY=null;this._mouseX=null;this._mouseY=null;this._findHover=null;d.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function t(e,r){this.bind(e,r);return this}},{key:"un",value:function t(e,r){this.unbind(e,r);return this}},{key:"trigger",value:function t(e,r){var n=y.Config.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](r);break}}},{key:"dispose",value:function t(){var e=this.root;if(window.removeEventListener){window.removeEventListener("resize",this._resizeHandler);if(v.SUtil.Util_env.os.tablet||v.SUtil.Util_env.os.phone){e.removeEventListener("touchstart",this._touchstartHandler);e.removeEventListener("touchmove",this._touchmoveHandler);e.removeEventListener("touchend",this._touchendHandler)}else{e.removeEventListener("click",this._clickHandler);e.removeEventListener("dblclick",this._dblclickHandler);e.removeEventListener("mousewheel",this._mousewheelHandler);e.removeEventListener("mousemove",this._mousemoveHandler);e.removeEventListener("mousedown",this._mousedownHandler);e.removeEventListener("mouseup",this._mouseupHandler)}e.removeEventListener("DOMMouseScroll",this._mousewheelHandler);e.removeEventListener("mouseout",this._mouseoutHandler)}else{window.detachEvent("onresize",this._resizeHandler);e.detachEvent("onclick",this._clickHandler);e.detachEvent("dblclick",this._dblclickHandler);e.detachEvent("onmousewheel",this._mousewheelHandler);e.detachEvent("onmousemove",this._mousemoveHandler);e.detachEvent("onmouseout",this._mouseoutHandler);e.detachEvent("onmousedown",this._mousedownHandler);e.detachEvent("onmouseup",this._mouseupHandler)}this.root=null;this._domHover=null;this.storage=null;this.painter=null;this.un()}},{key:"_processDragStart",value:function t(e){var r=this._lastHover;if(this._isMouseDown&&r&&r.draggable&&!this._draggingTarget&&this._mouseDownTarget===r){if(r.dragEnableTime&&new Date-this._lastMouseDownMoment<r.dragEnableTime){return}var n=r;this._draggingTarget=n;this._isDragging=1;n.invisible=true;this.storage.mod(n.id);this._dispatchAgency(n,y.Config.EVENT.DRAGSTART,e);this.painter.refresh()}}},{key:"_processDragEnter",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGENTER,e,this._draggingTarget)}}},{key:"_processDragOver",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGOVER,e,this._draggingTarget)}}},{key:"_processDragLeave",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._lastHover,y.Config.EVENT.DRAGLEAVE,e,this._draggingTarget)}}},{key:"_processDrop",value:function t(e){if(this._draggingTarget){this._draggingTarget.invisible=false;this.storage.mod(this._draggingTarget.id);this.painter.refresh();this._dispatchAgency(this._lastHover,y.Config.EVENT.DROP,e,this._draggingTarget)}}},{key:"_processDragEnd",value:function t(e){if(this._draggingTarget){this._dispatchAgency(this._draggingTarget,y.Config.EVENT.DRAGEND,e);this._lastHover=null}this._isDragging=0;this._draggingTarget=null}},{key:"_processOverShape",value:function t(e){this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function t(e){this._dispatchAgency(this._lastHover,y.Config.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function t(e,r,n,i){var o="on"+r;var s={type:r,event:n,target:e,cancelBubble:false};var a=e;if(i){s.dragged=i}while(a){a[o]&&(s.cancelBubble=a[o](s));a.dispatch(r,s);a=a.parent;if(s.cancelBubble){break}}if(e){if(!s.cancelBubble){this.dispatch(r,s)}}else if(!i){this.dispatch(r,{type:r,event:n})}}},{key:"_iterateAndFindHover",value:function t(){var e=v.SUtil.Util_matrix.create();var r=this.storage.getShapeList();var n;var i;var o=[0,0];for(var s=r.length-1;s>=0;s--){var a=r[s];if(n!==a.zlevel){i=this.painter.getLayer(a.zlevel,i);o[0]=this._mouseX;o[1]=this._mouseY;if(i.needTransform){v.SUtil.Util_matrix.invert(e,i.transform);v.SUtil.Util_vector.applyTransform(o,o,e)}}if(this._findHover(a,o[0],o[1])){break}}}},{key:"_mobildFindFixed",value:function t(e){var r=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null;this._mouseX=e.zrenderX;this._mouseY=e.zrenderY;this._event=e;this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<r.length;n++){var i=r[n];i.x&&(this._mouseX+=i.x);i.y&&(this._mouseX+=i.y);this._iterateAndFindHover()}if(this._lastHover){e.zrenderX=this._mouseX;e.zrenderY=this._mouseY}}},{key:"_zrenderEventFixed",value:function t(e,r){if(e.zrenderFixed){return e}if(!r){e=e||window.event;var n=e.toElement||e.relatedTarget||e.srcElement||e.target;if(n&&n!==this._domHover){e.zrenderX=(typeof e.offsetX!="undefined"?e.offsetX:e.layerX)+n.offsetLeft;e.zrenderY=(typeof e.offsetY!="undefined"?e.offsetY:e.layerY)+n.offsetTop}}else{var i=e.type!=="touchend"?e.targetTouches[0]:e.changedTouches[0];if(i){var o=this.root.getBoundingClientRect();e.zrenderX=i.clientX-o.left;e.zrenderY=i.clientY-o.top}}e.zrenderFixed=1;return e}},{key:"getLastHoverOne",value:function t(){if(this._lastHover){return this._lastHover}return null}}]);return e}(d.Eventful);e.Handler=_;m.LevelRenderer.Handler=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Animator=e.Animation=undefined;var n=r(69);var i=x(n);var o=r(10);var s=x(o);var a=r(5);var u=x(a);var l=r(6);var c=x(l);var h=r(11);var f=x(h);var p=r(12);var d=x(p);var y=r(7);var v=r(58);var g=r(70);var m=r(272);var _=r(24);function x(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy,S=y.Common.extend;var C=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));t=t||{};r.stage={};r.onframe=function(){};r._clips=[];r._running=false;r._time=0;S(r,t);r.CLASS_NAME="Zondy.LevelRenderer.Animation";return r}(0,c.default)(e,[{key:"add",value:function t(e){this._clips.push(e)}},{key:"remove",value:function t(e){var r=(new v.Util).indexOf(this._clips,e);if(r>=0){this._clips.splice(r,1)}}},{key:"_update",value:function t(){var e=(new Date).getTime();var r=e-this._time;var n=this._clips;var i=n.length;var o=[];var s=[];for(var a=0;a<i;a++){var u=n[a];var l=u.step(e);if(l){o.push(l);s.push(u)}}if(this.stage.update){this.stage.update()}for(var c=0;c<i;){if(n[c]._needsRemove){n[c]=n[i-1];n.pop();i--}else{c++}}i=o.length;for(var h=0;h<i;h++){s[h].fire(o[h])}this._time=e;this.onframe(r);this.dispatch("frame",r)}},{key:"start",value:function t(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)};var r=this;this._running=true;function n(){if(r._running){r._update();e(n)}}this._time=(new Date).getTime();e(n)}},{key:"stop",value:function t(){this._running=false}},{key:"clear",value:function t(){this._clips=[]}},{key:"animate",value:function t(e,r){r=r||{};var n=new w(e,r.loop,r.getter,r.setter);n.animation=this;return n}}],[{key:"_interpolateNumber",value:function t(e,r,n){return(r-e)*n+e}},{key:"_interpolateArray",value:function t(r,n,i,o,s){var a=r.length;if(s===1){for(var u=0;u<a;u++){o[u]=e._interpolateNumber(r[u],n[u],i)}}else{var l=r[0].length;for(var c=0;c<a;c++){for(var h=0;h<l;h++){o[c][h]=e._interpolateNumber(r[c][h],n[c][h],i)}}}}},{key:"_isArrayLike",value:function t(e){switch(typeof e==="undefined"?"undefined":(0,i.default)(e)){case"undefined":case"string":return false}return typeof e.length!=="undefined"}},{key:"_catmullRomInterpolateArray",value:function t(r,n,i,o,s,a,u,l,c){var h=r.length;if(c===1){for(var f=0;f<h;f++){l[f]=e._catmullRomInterpolate(r[f],n[f],i[f],o[f],s,a,u)}}else{var p=r[0].length;for(var d=0;d<h;d++){for(var y=0;y<p;y++){l[d][y]=e._catmullRomInterpolate(r[d][y],n[d][y],i[d][y],o[d][y],s,a,u)}}}}},{key:"_catmullRomInterpolate",value:function t(e,r,n,i,o,s,a){var u=(n-e)*.5;var l=(i-r)*.5;return(2*(r-n)+u+l)*a+(-3*(r-n)-2*u-l)*s+u*o+r}},{key:"_cloneValue",value:function t(r){var n=Array.prototype.slice;if(e._isArrayLike(r)){var i=r.length;if(e._isArrayLike(r[0])){var o=[];for(var s=0;s<i;s++){o.push(n.call(r[s]))}return o}else{return n.call(r)}}else{return r}}},{key:"rgba2String",value:function t(e){e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1]);e[2]=Math.floor(e[2]);return"rgba("+e.join(",")+")"}}]);return e}(g.Eventful);var w=function(){function t(e,r,n,i){(0,u.default)(this,t);this._tracks={};this._target=e;this._loop=r||false;this._getter=n||o;this._setter=i||s;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[];this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator";function o(t,e){return t[e]}function s(t,e,r){t[e]=r}}(0,c.default)(t,[{key:"when",value:function t(e,r){for(var n in r){if(!this._tracks[n]){this._tracks[n]=[];if(e!==0){this._tracks[n].push({time:0,value:C._cloneValue(this._getter(this._target,n))})}}this._tracks[n].push({time:parseInt(e,10),value:r[n]})}return this}},{key:"during",value:function t(e){this._onframeList.push(e);return this}},{key:"start",value:function t(e){var r=this;var n=this._setter;var i=this._getter;var o=r._onframeList.length;var s=e==="spline";var a=function t(){r._clipCount--;if(r._clipCount===0){r._tracks={};var e=r._doneList.length;for(var n=0;n<e;n++){r._doneList[n].call(r)}}};var u=function t(u,l){var c=u.length;if(!c){return}var h=u[0].value;var f=C._isArrayLike(h);var p=false;var d=f&&C._isArrayLike(h[0])?2:1;u.sort(function(t,e){return t.time-e.time});var y=u[c-1].time;var v=[];var g=[];for(var x=0;x<c;x++){v.push(u[x].time/y);var b=u[x].value;if(typeof b=="string"){b=_.SUtil.Util_color.toArray(b);if(b.length===0){b[0]=b[1]=b[2]=0;b[3]=1}p=true}g.push(b)}var S=0;var w=0;var I;var P;var E;var M;var L;var N;var T;if(p){var O=[0,0,0,0]}var R=function t(e,a){if(a<w){I=Math.min(S+1,c-1);for(P=I;P>=0;P--){if(v[P]<=a){break}}P=Math.min(P,c-2)}else{for(P=S;P<c;P++){if(v[P]>a){break}}P=Math.min(P-1,c-2)}S=P;w=a;var u=v[P+1]-v[P];if(u===0){return}else{E=(a-v[P])/u}if(s){L=g[P];M=g[P===0?P:P-1];N=g[P>c-2?c-1:P+1];T=g[P>c-3?c-1:P+2];if(f){C._catmullRomInterpolateArray(M,L,N,T,E,E*E,E*E*E,i(e,l),d)}else{var h=void 0;if(p){h=C.rgba2String(O)}else{h=C._catmullRomInterpolate(M,L,N,T,E,E*E,E*E*E)}n(e,l,h)}}else{if(f){C._interpolateArray(g[P],g[P+1],E,i(e,l),d)}else{var y=void 0;if(p){C._interpolateArray(g[P],g[P+1],E,O,1);y=C.rgba2String(O)}else{y=C._interpolateNumber(g[P],g[P+1],E)}n(e,l,y)}}for(P=0;P<o;P++){r._onframeList[P](e,a)}};var A=new m.Clip({target:r._target,life:y,loop:r._loop,delay:r._delay,onframe:R,ondestroy:a});if(e&&e!=="spline"){A.easing=e}r._clipList.push(A);r._clipCount++;r.animation.add(A)};for(var l in this._tracks){u(this._tracks[l],l)}return this}},{key:"stop",value:function t(){for(var e=0;e<this._clipList.length;e++){var r=this._clipList[e];this.animation.remove(r)}this._clipList=[]}},{key:"delay",value:function t(e){this._delay=e;return this}},{key:"done",value:function t(e){if(e){this._doneList.push(e)}return this}}]);return t}();e.Animation=C;b.LevelRenderer.Animation=C;e.Animator=w;b.LevelRenderer.Animation.Animator=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Clip=undefined;var n=r(5);var i=l(n);var o=r(6);var s=l(o);var a=r(7);var u=r(273);function l(t){return t&&t.__esModule?t:{default:t}}var c=a.Common.Zondy;var h=function(){function t(e){(0,i.default)(this,t);this._targetPool=e.target||{};if(!(this._targetPool instanceof Array)){this._targetPool=[this._targetPool]}this._life=e.life||1e3;this._delay=e.delay||0;this._startTime=(new Date).getTime()+this._delay;this._endTime=this._startTime+this._life*1e3;this.loop=typeof e.loop=="undefined"?false:e.loop;this.gap=e.gap||0;this.easing=e.easing||"Linear";this.onframe=e.onframe;this.ondestroy=e.ondestroy;this.onrestart=e.onrestart;this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}(0,s.default)(t,[{key:"destroy",value:function t(){}},{key:"step",value:function t(e){var r=new u.Easing;var n=(e-this._startTime)/this._life;if(n<0){return}n=Math.min(n,1);var i=typeof this.easing=="string"?r[this.easing]:this.easing;var o=typeof i==="function"?i(n):n;this.fire("frame",o);if(n===1){if(this.loop){this.restart();return"restart"}this._needsRemove=true;return"destroy"}return null}},{key:"restart",value:function t(){var e=(new Date).getTime();var r=(e-this._startTime)%this._life;this._startTime=(new Date).getTime()-r+this.gap}},{key:"fire",value:function t(e,r){for(var n=0,i=this._targetPool.length;n<i;n++){if(this["on"+e]){this["on"+e](this._targetPool[n],r)}}}}]);return t}();e.Clip=h;c.LevelRenderer.Animation.Clip=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Easing=undefined;var n=r(5);var i=u(n);var o=r(6);var s=u(o);var a=r(7);function u(t){return t&&t.__esModule?t:{default:t}}var l=a.Common.Zondy;var c=function(){function t(){(0,i.default)(this,t);this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}(0,s.default)(t,[{key:"destroy",value:function t(){}},{key:"Linear",value:function t(e){return e}},{key:"QuadraticIn",value:function t(e){return e*e}},{key:"QuadraticOut",value:function t(e){return e*(2-e)}},{key:"QuadraticInOut",value:function t(e){if((e*=2)<1){return.5*e*e}return-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function t(e){return e*e*e}},{key:"CubicOut",value:function t(e){return--e*e*e+1}},{key:"CubicInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e}return.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function t(e){return e*e*e*e}},{key:"QuarticOut",value:function t(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e*e}return-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function t(e){return e*e*e*e*e}},{key:"QuinticOut",value:function t(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function t(e){if((e*=2)<1){return.5*e*e*e*e*e}return.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function t(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function t(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function t(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function t(e){return e===0?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function t(e){return e===1?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function t(e){if(e===0){return 0}if(e===1){return 1}if((e*=2)<1){return.5*Math.pow(1024,e-1)}return.5*(-Math.pow(2,-10*(e-1))+2)}},{key:"CircularIn",value:function t(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function t(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function t(e){if((e*=2)<1){return-.5*(Math.sqrt(1-e*e)-1)}return.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return-(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}},{key:"ElasticOut",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return n*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1}},{key:"ElasticInOut",value:function t(e){var r;var n=.1;var i=.4;if(e===0){return 0}if(e===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}if((e*=2)<1){return-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}return n*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1}},{key:"BackIn",value:function t(e){var r=1.70158;return e*e*((r+1)*e-r)}},{key:"BackOut",value:function t(e){var r=1.70158;return--e*e*((r+1)*e+r)+1}},{key:"BackInOut",value:function t(e){var r=1.70158*1.525;if((e*=2)<1){return.5*(e*e*((r+1)*e-r))}return.5*((e-=2)*e*((r+1)*e+r)+2)}},{key:"BounceIn",value:function t(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function t(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}},{key:"BounceInOut",value:function t(e){if(e<.5){return this.BounceIn(e*2)*.5}return this.BounceOut(e*2-1)*.5+.5}}]);return t}();e.Easing=c;l.LevelRenderer.Animation.Easing=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Rectangle=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o));a.x=!isNaN(t)?t:0;a.y=!isNaN(t)?r:0;a.width=!isNaN(n)?n:0;a.height=!isNaN(o)?o:0;a.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle";return a}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.width=null;this.height=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Rectangle=_;m.Feature.ShapeParameters.Rectangle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Label=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.x=t;o.y=r;o.text=n;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Label";return o}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.text=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Label=_;m.Feature.ShapeParameters.Label=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Image=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(33);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u,l,h,f){(0,s.default)(this,e);var p=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u,l,h,f));p.x=t;p.y=r;p.image=n;p.width=o;p.height=a;p.sx=u;p.sy=l;p.sWidth=h;p.sHeight=f;p.CLASS_NAME="Zondy.Feature.ShapeParameters.Image";return p}(0,u.default)(e,[{key:"destroy",value:function t(){this.x=null;this.y=null;this.image=null;this.width=null;this.height=null;this.sx=null;this.sy=null;this.sWidth=null;this.sHeight=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]);return e}(v.ShapeParameters);e.Image=_;m.Feature.ShapeParameters.Image=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicText=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(22);var g=r(24);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smictext";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicText";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=this.style;if(r){i=this.getHighlightStyle(i,this.highlightStyle||{})}if(typeof i.text=="undefined"||i.text===false){return}e.save();this.doClip(e);this.setContext(e,i);this.setTransform(e);if(i.textFont){e.font=i.textFont}e.textAlign=i.textAlign||"start";e.textBaseline=i.textBaseline||"middle";var o=(i.text+"").split("\n");var s=g.SUtil.Util_area.getTextHeight("ZH",i.textFont);var a=this.getRectNoRotation(i);var u=i.x+n[0];var l;if(i.textBaseline==="top"){l=a.y}else if(i.textBaseline==="bottom"){l=a.y+s}else{l=a.y+s/2}var c=i.x+n[0];var h=i.y+n[1];for(var f=0,p=o.length;f<p;f++){if(i.labelRect){e.fillRect(a.x-2,a.y,a.width+4,a.height);e.fillStyle=i.strokeColor;e.strokeRect(a.x-2,a.y,a.width+4,a.height);e.fillStyle=i.textColor}switch(i.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",i);if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){e.strokeText(o[f],0,s*f,i.maxWidth)}else{e.strokeText(o[f],0,s*f)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){e.strokeText(o[f],0,s*(f+1)-a.height,i.maxWidth)}else{e.strokeText(o[f],0,s*(f+1)-a.height)}}else{if(i.maxWidth){e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth)}else{e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2)}}e.restore()}else{if(i.maxWidth){e.strokeText(o[f],u,l,i.maxWidth)}else{e.strokeText(o[f],u,l)}}this.setCtxGlobalAlpha(e,"reset",i);break;case"both":if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*f,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*f,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*f);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*f);this.setCtxGlobalAlpha(e,"reset",i)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height);this.setCtxGlobalAlpha(e,"reset",i)}}else{if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],0,s*(f+1)-a.height/2-s/2);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],0,s*(f+1)-a.height/2-s/2);this.setCtxGlobalAlpha(e,"reset",i)}}e.restore()}else{if(i.maxWidth){this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],u,l,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],u,l,i.maxWidth);this.setCtxGlobalAlpha(e,"reset",i)}else{this.setCtxGlobalAlpha(e,"fill",i);e.fillText(o[f],u,l);this.setCtxGlobalAlpha(e,"reset",i);this.setCtxGlobalAlpha(e,"stroke",i);e.strokeText(o[f],u,l);this.setCtxGlobalAlpha(e,"reset",i)}}break;default:this.setCtxGlobalAlpha(e,"fill",i);if(i.textRotation&&i.textRotation!==0){e.save();e.translate(c,h);e.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){e.fillText(o[f],0,s*f,i.maxWidth)}else{e.fillText(o[f],0,s*f)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){e.fillText(o[f],0,s*(f+1)-a.height,i.maxWidth)}else{e.fillText(o[f],0,s*(f+1)-a.height)}}else{if(i.maxWidth){e.fillText(o[f],0,s*(f+1)-a.height/2-s/2,i.maxWidth)}else{e.fillText(o[f],0,s*(f+1)-a.height/2-s/2)}}e.restore()}else{if(i.maxWidth){e.fillText(o[f],u,l,i.maxWidth)}else{e.fillText(o[f],u,l)}}this.setCtxGlobalAlpha(e,"reset",i)}l+=s}e.restore();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}var r,n,i,o;var s=this.getTextBackground(e,true);for(var a=0,u=s.length;a<u;a++){var l=s[a];if(a===0){r=l[0];i=l[0];n=l[1];o=l[1]}else{if(l[0]<r){r=l[0]}if(l[0]>i){i=l[0]}if(l[1]<n){n=l[1]}if(l[1]>o){o=l[1]}}}e.__rect={x:r,y:n,width:i-r,height:o-n};return e.__rect}},{key:"getRectNoRotation",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_area.getTextHeight("ZH",e.textFont);var i=g.SUtil.Util_area.getTextWidth(e.text,e.textFont);var o=g.SUtil.Util_area.getTextHeight(e.text,e.textFont);var s=e.x+r[0];if(e.textAlign==="end"||e.textAlign==="right"){s-=i}else if(e.textAlign==="center"){s-=i/2}var a;if(e.textBaseline==="top"){a=e.y+r[1]}else if(e.textBaseline==="bottom"){a=e.y+r[1]-o}else{a=e.y+r[1]-o/2}var u=false;var l;if(e.maxWidth){var c=parseInt(e.maxWidth);if(c<i){l=i;u=true;i=c}s=e.x+r[0];if(e.textAlign==="end"||e.textAlign==="right"){s-=i}else if(e.textAlign==="center"){s-=i/2}}if(e.textFont){var h=e.textFont;var f=h.toLowerCase();if(f.indexOf("italic")>-1){if(l&&u===true){i+=n/3*(i/l)}else{i+=n/3}}}var p={x:s,y:a,width:i,height:o};return p}},{key:"getTextBackground",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if((!r||r===false)&&e.__textBackground){return e.__textBackground}var i=this.getRectNoRotation(e);var o=e.x+n[0];var s=e.y+n[1];var a=[];if(e.textRotation&&e.textRotation!==0){var u=e.textRotation;var l=this.getRotatedLocation(i.x,i.y,o,s,u);var c=this.getRotatedLocation(i.x+i.width,i.y,o,s,u);var h=this.getRotatedLocation(i.x+i.width,i.y+i.height,o,s,u);var f=this.getRotatedLocation(i.x,i.y+i.height,o,s,u);a.push(l);a.push(c);a.push(h);a.push(f)}else{var p=[i.x,i.y];var d=[i.x+i.width,i.y];var y=[i.x+i.width,i.y+i.height];var v=[i.x,i.y+i.height];a.push(p);a.push(d);a.push(y);a.push(v)}e.__textBackground=a;return e.__textBackground}},{key:"getRotatedLocation",value:function t(e,r,n,i,o){var s=new Array,a,u;r=-r;i=-i;o=-o;a=(e-n)*Math.cos(o/180*Math.PI)-(r-i)*Math.sin(o/180*Math.PI)+n;u=(e-n)*Math.sin(o/180*Math.PI)+(r-i)*Math.cos(o/180*Math.PI)+i;s[0]=a;s[1]=-u;return s}}]);return e}(v.Shape);e.SmicText=x;_.LevelRenderer.SmicText=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicCircle=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smiccircle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicCircle";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];e.moveTo(i+r.r,o);e.arc(i,o,r.r,0,Math.PI*2,true);return true}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=e.x+r[0];var i=e.y+r[1];var o=e.r;var s;if(e.brushType==="stroke"||e.brushType==="fill"){s=e.lineWidth||1}else{s=0}e.__rect={x:Math.round(n-o-s/2),y:Math.round(i-o-s/2),width:o*2+s,height:o*2+s};return e.__rect}}]);return e}(v.Shape);e.SmicCircle=_;m.LevelRenderer.SmicCircle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicRectangle=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicrectangle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var s=r.width;var a=r.height;var u=r.radius;var l;var c;var h;var f;if(typeof u==="number"){l=c=h=f=u}else if(u instanceof Array){if(u.length===1){l=c=h=f=u[0]}else if(u.length===2){l=h=u[0];c=f=u[1]}else if(u.length===3){l=u[0];c=f=u[1];h=u[2]}else{l=u[0];c=u[1];h=u[2];f=u[3]}}else{l=c=h=f=0}var p;if(l+c>s){p=l+c;l*=s/p;c*=s/p}if(h+f>s){p=h+f;h*=s/p;f*=s/p}if(c+h>a){p=c+h;c*=a/p;h*=a/p}if(l+f>a){p=l+f;l*=a/p;f*=a/p}e.moveTo(i+l,o);e.lineTo(i+s-c,o);c!==0&&e.quadraticCurveTo(i+s,o,i+s,o+c);e.lineTo(i+s,o+a-h);h!==0&&e.quadraticCurveTo(i+s,o+a,i+s-h,o+a);e.lineTo(i+f,o+a);f!==0&&e.quadraticCurveTo(i,o+a,i,o+a-f);e.lineTo(i,o+l);l!==0&&e.quadraticCurveTo(i,o,i+l,o)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if(!r.radius){e.moveTo(r.x+n[0],r.y+n[1]);e.lineTo(r.x+n[0]+r.width,r.y+n[1]);e.lineTo(r.x+n[0]+r.width,r.y+n[1]+r.height);e.lineTo(r.x+n[0],r.y+n[1]+r.height);e.lineTo(r.x+n[0],r.y+n[1])}else{this._buildRadiusPath(e,r)}e.closePath();return}},{key:"getRect",value:function t(e){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(e.__rect){return e.__rect}var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-n/2),y:Math.round(e.y+r[1]-n/2),width:e.width+n,height:e.height+n};return e.__rect}}]);return e}(v.Shape);e.SmicRectangle=_;m.LevelRenderer.SmicRectangle=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicSector=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(22);var g=r(24);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicsector";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var s=r.r0||0;var a=r.r;var u=r.startAngle;var l=r.endAngle;var c=r.clockWise||false;u=g.SUtil.Util_math.degreeToRadian(u);l=g.SUtil.Util_math.degreeToRadian(l);if(!c){u=-u;l=-l}var h=g.SUtil.Util_math.cos(u);var f=g.SUtil.Util_math.sin(u);e.moveTo(h*s+i,f*s+o);e.lineTo(h*a+i,f*a+o);e.arc(i,o,a,u,l,!c);e.lineTo(g.SUtil.Util_math.cos(l)*s+i,g.SUtil.Util_math.sin(l)*s+o);if(s!==0){e.arc(i,o,s,l,u,c)}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_vector.create();var i=g.SUtil.Util_vector.create();var o=g.SUtil.Util_vector.create();var s=g.SUtil.Util_vector.create();var a=e.x+r[0];var u=e.y+r[1];var l=e.r0||0;var c=e.r;var h=g.SUtil.Util_math.degreeToRadian(e.startAngle);var f=g.SUtil.Util_math.degreeToRadian(e.endAngle);var p=e.clockWise;if(!p){h=-h;f=-f}if(l>1){g.SUtil.Util_computeBoundingBox.arc(a,u,l,h,f,!p,n,o)}else{n[0]=o[0]=a;n[1]=o[1]=u}g.SUtil.Util_computeBoundingBox.arc(a,u,c,h,f,!p,i,s);g.SUtil.Util_vector.min(n,n,i);g.SUtil.Util_vector.max(o,o,s);e.__rect={x:n[0],y:n[1],width:o[0]-n[0],height:o[1]-n[1]};return e.__rect}}]);return e}(v.Shape);e.SmicSector=x;_.LevelRenderer.SmicSector=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rangeThemeLayer=e.RangeThemeLayer=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(12);var f=_(h);var p=r(17);var d=_(p);var y=r(7);var v=r(88);var g=r(71);var m=r(19);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.copyAttributesWithClip,b=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(e){var r={};var n=e;r=x(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var s=this.styleGroups;var a=false;var u=null;for(var l in o){if(i===l){a=true;u=o[l];break}}if(a){for(var c=0,h=s.length;c<h;c++){if(u>=s[c].start&&u<s[c].end){var f=s[c].style;r=x(r,f)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=x(n.style)}return r}}]);return e}(v.GeoFeatureThemeLayer);e.RangeThemeLayer=S;var C=e.rangeThemeLayer=function t(e,r){return new S(e,r)};b.Map.rangeThemeLayer=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.RankSymbol=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(39);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.setting=null;if(o&&o.codomain){l.setting=o;l.DVBCodomain=l.setting.codomain}l.CLASS_NAME="Zondy.Theme.RankSymbol";return l}(0,u.default)(e,[{key:"destroy",value:function t(){this.setting=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function t(){var e=true;if(!this.setting){return false}var r=this.setting;if(r.XOffset){this.XOffset=r.XOffset}if(r.YOffset){this.YOffset=r.YOffset}this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var n=this.width;var i=this.height;var o=this.location;this.origonPoint=[o[0]-n/2,o[1]-i/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+i,s[0]+n,s[1]];var a=this.chartBox;var u=this.DVBParameter;this.dataViewBox=[a[0]+u[0],a[1]-u[1],a[2]-u[2],a[3]+u[3]];var l=this.dataViewBox;if(l[0]>=l[2]||l[1]<=l[3]){return false}this.DVBOrigonPoint=[l[0],l[3]];this.DVBWidth=Math.abs(l[2]-l[0]);this.DVBHeight=Math.abs(l[1]-l[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]];return e}}]);return e}(v.Graph);e.RankSymbol=_;m.Theme.RankSymbol=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphThemeLayer=e.graphThemeLayer=undefined;var n=r(10);var i=x(n);var o=r(5);var s=x(o);var a=r(6);var u=x(a);var l=r(11);var c=x(l);var h=r(13);var f=x(h);var p=r(12);var d=x(p);var y=r(17);var v=x(y);var g=r(7);var m=r(162);var _=r(59);function x(t){return t&&t.__esModule?t:{default:t}}var b=g.Common.FeatureSet,S=g.Common.Zondy,C=g.Common.Point2D;var w=function(t){(0,d.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,n));o.chartsSetting=n.chartsSetting||{};o.themeFields=n.themeFields||null;o.overlayWeightField=n.overlayWeightField||null;o.isOverLay=n.isOverLay||true;o.charts=n.charts||[];o.cache=n.cache||{};o.chartsType=r;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(e,[{key:"setChartsType",value:function t(e){this.chartsType=e;this.redraw()}},{key:"addFeatures",value:function t(e){var r=this;v.default.Evented.prototype.fire("beforefeaturesadded",{features:e});if(e&&(true||e instanceof b)){var n=null;var i=e.LabelDots;var o=e.AttStruct;var s=e.SFEleArray;if(s!=null&&s.length>0){for(var a=0;a<s.length;a++){var u=s[a];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[a]&&(u.LabelDot=i[a]);r.features.push(u)}}}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"redrawThematicFeatures",value:function t(e){this.clearCache();this.renderer.clearAll();var r=this.features;for(var n=0,i=r.length;n<i;n++){var o=r[n];var s=this.cache;var a=o.FID;if(s[a]){continue}s[a]=a;var u=this.createThematicFeature(o);if(u&&this.overlayWeightField){if(o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])){u["__overlayWeight"]=o.attributes[this.overlayWeightField]}}if(u){this.charts.push(u)}}this.drawCharts()}},{key:"createThematicFeature",value:function t(e){var r;if(_.Theme[this.chartsType]&&this.themeFields&&this.chartsSetting){r=new _.Theme[this.chartsType](e,this,this.themeFields,this.chartsSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}},{key:"drawCharts",value:function t(){if(!this.renderer){return}var e=this.charts;if(this.overlayWeightField){e.sort(function(t,e){if(typeof t["__overlayWeight"]=="undefined"&&typeof e["__overlayWeight"]=="undefined"){return 0}else if(typeof t["__overlayWeight"]!="undefined"&&typeof e["__overlayWeight"]=="undefined"){return-1}else if(typeof t["__overlayWeight"]=="undefined"&&typeof e["__overlayWeight"]!="undefined"){return 1}else if(typeof t["__overlayWeight"]!="undefined"&&typeof e["__overlayWeight"]!="undefined"){if(parseFloat(t["__overlayWeight"])<parseFloat(e["__overlayWeight"])){return 1}else{return-1}}return 0})}if(!this.isOverLay){for(var r=0,n=e.length;r<n;r++){var i=e[r];var o=i.resetLocation();var s=i.shapes;for(var a=0,u=s.length;a<u;a++){s[a].refOriginalPosition=o;this.renderer.addShape(s[a])}}}else{var l=[];for(var c=0,h=e.length;c<h;c++){var f=e[c];var p=f.resetLocation();var d=f.chartBounds;var y=[{x:d.xmin,y:d.ymin},{x:d.xmin,y:d.ymax},{x:d.xmax,y:d.ymax},{x:d.xmax,y:d.ymin},{x:d.xmin,y:d.ymax}];var v=false;if(c!==0){for(var g=0;g<l.length;g++){if(this.isQuadrilateralOverLap(y,l[g])){v=true;break}}}if(v){continue}else{l.push(y)}var m=f.shapes;for(var _=0,x=m.length;_<x;_++){m[_].refOriginalPosition=p;this.renderer.addShape(m[_])}}}this.renderer.render()}},{key:"getShapesByFeatureID",value:function t(e){var r=[];var n=this.renderer.getAllShapes();if(!e){return n}for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.refDataID&&e===s.refDataID){r.push(s)}}return r}},{key:"isQuadrilateralOverLap",value:function t(e,r){var n=e.length,i=r.length;if(n!==5||i!==5){return null}var o=false;for(var s=0;s<n;s++){if(this.isPointInPoly(e[s],r)){o=true;break}}for(var a=0;a<i;a++){if(this.isPointInPoly(r[a],e)){o=true;break}}for(var u=0;u<n-1;u++){if(o){break}for(var l=0;l<i-1;l++){var c=this.lineIntersection(e[u],e[u+1],r[l],r[l+1]);if(c.CLASS_NAME==="Zondy.Object.Point2D"){o=true;break}}}return o}},{key:"lineIntersection",value:function t(e,r,n,i){var o=null;var s;var a;var u=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x);var l=(r.x-e.x)*(e.y-n.y)-(r.y-e.y)*(e.x-n.x);var c=(i.y-n.y)*(r.x-e.x)-(i.x-n.x)*(r.y-e.y);if(c!==0){s=u/c;a=l/c;if(s>=0&&a<=1&&s<=1&&a>=0){o=new C(e.x+s*(r.x-e.x),e.y+s*(r.y-e.y))}else{o="No Intersection"}}else{if(u===0&&l===0){var h=Math.max(e.y,r.y);var f=Math.min(e.y,r.y);var p=Math.max(e.x,r.x);var d=Math.min(e.x,r.x);if((n.y>=f&&n.y<=h||i.y>=f&&i.y<=h)&&n.x>=d&&n.x<=p||i.x>=d&&i.x<=p){o="Coincident"}else{o="Parallel"}}else{o="Parallel"}}return o}},{key:"isPointInPoly",value:function t(e,r){for(var n=false,i=-1,o=r.length,s=o-1;++i<o;s=i){(r[i].y<=e.y&&e.y<r[s].y||r[s].y<=e.y&&e.y<r[i].y)&&e.x<(r[s].x-r[i].x)*(e.y-r[i].y)/(r[s].y-r[i].y)+r[i].x&&(n=!n)}return n}},{key:"isChartInMap",value:function t(e,r){var n=e;var i=false;for(var o=0,s=r.length;o<s;o++){var a=r[o];if(a.x>=n.xmin&&a.x<=n.xmax&&a.y>=n.ymin&&a.y<=n.ymax){i=true;break}}return i}},{key:"clearCache",value:function t(){this.cache={};this.charts=[]}},{key:"removeFeatures",value:function t(r){this.clearCache();(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeFeatures",this).call(this,r)}},{key:"removeAllFeatures",value:function t(){this.clearCache();(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function t(){this.clearCache();if(this.renderer){this.redrawThematicFeatures(this.map.getBounds());return true}return false}},{key:"clear",value:function t(){if(this.renderer){this.renderer.clearAll();this.renderer.refresh()}this.removeAllFeatures();this.clearCache()}}]);return e}(m.ThemeLayer);var I=e.graphThemeLayer=function t(e,r,n){return new w(e,r,n)};e.GraphThemeLayer=w;S.Map.graphThemeLayer=I},function(t,e){t.exports=function(){try{return echarts}catch(t){return{}}}()},function(t,e,r){"use strict";r(286)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=e.MapvLayer=e.EchartsLayer=e.PostgisVectorTileService=e.PostgisTableService=e.PostgisQueryService=e.PostgisCustomQueryService=e.PostgisCatlogService=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=e.ThemesInfo=undefined;e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.mixin=e.merge=undefined;e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.CalculateModelService=e.GeoDatasetService=e.UserService=e.TDTLayer=e.ArcGISLayer=e.MapVectorLayer=e.MapWMTSLayer=e.MapWmsLayer=e.MapTileLayer=e.MapDocLayer=e.mapboxgl=e.MapExtend=undefined;var n=r(287);var i=r(288);var o=r(27);var s=r(28);var a=r(343);var u=r(363);var l=r(364);var c=r(216);var h=r(393);var f=r(408);var p=r(416);var d=r(422);var y=r(425);var v=r(444);var g=r(506);var m=r(512);e.MapExtend=n.MapExtend;e.mapboxgl=i.mapboxgl;e.MapDocLayer=i.MapDocLayer;e.MapTileLayer=i.MapTileLayer;e.MapWmsLayer=i.MapWmsLayer;e.MapWMTSLayer=i.MapWMTSLayer;e.MapVectorLayer=i.MapVectorLayer;e.ArcGISLayer=i.ArcGISLayer;e.TDTLayer=i.TDTLayer;e.UserService=y.UserService;e.GeoDatasetService=y.GeoDatasetService;e.CalculateModelService=y.CalculateModelService;e.ServiceBase=o.ServiceBase;e.AnyLine=s.AnyLine;e.Arc=s.Arc;e.Zondy=s.Zondy;e.CAttStruct=s.CAttStruct;e.CAttDataRow=s.CAttDataRow;e.CDisplayStyle=s.CDisplayStyle;e.CDisplayStyleExtend=s.CDisplayStyleExtend;e.CDynNoteInfo=s.CDynNoteInfo;e.CGDBInfo=s.CGDBInfo;e.Circle=s.Circle;e.CLineInfo=s.CLineInfo;e.CPointInfo=s.CPointInfo;e.CRegionInfo=s.CRegionInfo;e.DynNoteLableType=s.DynNoteLableType;e.DynShowStyle=s.DynShowStyle;e.XClsType=s.XClsType;e.VectClsType=s.VectClsType;e.FeatureType=s.FeatureType;e.FontShape=s.FontShape;e.LabelLinType=s.LabelLinType;e.LabelRegType=s.LabelRegType;e.LabelPntType=s.LabelPntType;e.RepeatType=s.RepeatType;e.LabelSpreadType=s.LabelSpreadType;e.LineConstrain=s.LineConstrain;e.EightDirType=s.EightDirType;e.ISShowArc=s.ISShowArc;e.NetAnalyType=s.NetAnalyType;e.NetElemType=s.NetElemType;e.CLinAdjustType=s.CLinAdjustType;e.CLinHeadType=s.CLinHeadType;e.CLinJointType=s.CLinJointType;e.CLinStyleMakeType=s.CLinStyleMakeType;e.CItemType=s.CItemType;e.MapType=s.MapType;e.LayerStatusType=s.LayerStatusType;e.Feature=s.Feature;e.FeatureGeometry=s.FeatureGeometry;e.FeatureGraphicBase=s.FeatureGraphicBase;e.FeatureSet=s.FeatureSet;e.GLine=s.GLine;e.GPoint=s.GPoint;e.GRegion=s.GRegion;e.LabelLinInfo=s.LabelLinInfo;e.LabelRegInfo=s.LabelRegInfo;e.LablePntInfo=s.LablePntInfo;e.MultiPolygon=s.MultiPolygon;e.Point2D=s.Point2D;e.Polygon=s.Polygon;e.PolyLine=s.PolyLine;e.Rectangle=s.Rectangle;e.Tangram=s.Tangram;e.VectCls=s.VectCls;e.WebGraphicsInfo=s.WebGraphicsInfo;e.extend=s.extend;e.isArray=s.isArray;e.extendDeep=s.extendDeep;e.copy=s.copy;e.copyExcluce=s.copyExcluce;e.reset=s.reset;e.getElement=s.getElement;e.isElement=s.isElement;e.removeItem=s.removeItem;e.indexOf=s.indexOf;e.modifyDOMElement=s.modifyDOMElement;e.applyDefaults=s.applyDefaults;e.getParameterString=s.getParameterString;e.getWFParameterString=s.getWFParameterString;e.urlAppend=s.urlAppend;e.getParameters=s.getParameters;e.IS_GECKO=s.IS_GECKO;e.Browser=s.Browser;e.getBrowser=s.getBrowser;e.isSupportCanvas=s.isSupportCanvas;e.supportCanvas=s.supportCanvas;e.isInTheSameDomain=s.isInTheSameDomain;e.toJSON=s.toJSON;e.transformResult=s.transformResult;e.copyAttributes=s.copyAttributes;e.copyAttributesWithClip=s.copyAttributesWithClip;e.cloneObject=s.cloneObject;e.newGuid=s.newGuid;e.bind=s.bind;e.bindAsEventListener=s.bindAsEventListener;e.getTopAnalysisResult=s.getTopAnalysisResult;e.ChineseToUtf8=s.ChineseToUtf8;e.DeepMerge=s.DeepMerge;e.merge=s.merge;e.mixin=s.mixin;e.ContourNoteParam=a.ContourNoteParam;e.ContourParam=a.ContourParam;e.ContourZValue=a.ContourZValue;e.ContourRegionInfo=a.ContourRegionInfo;e.MeshingParam=a.MeshingParam;e.NetAnalyse=a.NetAnalyse;e.NetAnalysisExtent=a.NetAnalysisExtent;e.SlopLineParam=a.SlopLineParam;e.CommonServiceBase=u.CommonServiceBase;e.Events=u.Events;e.CORS=u.CORS;e.RequestTimeout=u.RequestTimeout;e.FetchRequest=u.FetchRequest;e.IgsServiceBase=u.IgsServiceBase;e.JSONFormat=u.JSONFormat;e.ColorInfo=l.ColorInfo;e.GDBInfo=l.GDBInfo;e.MapDoc=l.MapDoc;e.CatalogService=l.CatalogService;e.TileLayer=l.TileLayer;e.VectorLayer=l.VectorLayer;e.EditDocFeature=c.EditDocFeature;e.EditLayerFeature=c.EditLayerFeature;e.EditServiceBase=c.EditServiceBase;e.MultiGeoQuery=c.MultiGeoQuery;e.MultiGeoQueryParameter=c.MultiGeoQueryParameter;e.ObjClsQuery=c.ObjClsQuery;e.ObjClsQueryParameter=c.ObjClsQueryParameter;e.QueryByLayerParameter=c.QueryByLayerParameter;e.QueryDocFeature=c.QueryDocFeature;e.QueryFeatureRule=c.QueryFeatureRule;e.QueryFeatureStruct=c.QueryFeatureStruct;e.QueryLayerFeature=c.QueryLayerFeature;e.QueryParameter=c.QueryParameter;e.QueryParameterBase=c.QueryParameterBase;e.QueryServiceBase=c.QueryServiceBase;e.AnalysisBase=h.AnalysisBase;e.ClassBufferBase=h.ClassBufferBase;e.ClassBufferByMultiplyRing=h.ClassBufferByMultiplyRing;e.ClassBufferBySingleRing=h.ClassBufferBySingleRing;e.ClipBase=h.ClipBase;e.ClipByCircle=h.ClipByCircle;e.ClipByLayer=h.ClipByLayer;e.ClipByPolygon=h.ClipByPolygon;e.ContourAnalyse=h.ContourAnalyse;e.FeatureBuffBase=h.FeatureBuffBase;e.FeatureBuffByMultiplyRing=h.FeatureBuffByMultiplyRing;e.FeatureBuffBySingleRing=h.FeatureBuffBySingleRing;e.NetAnalysis=h.NetAnalysis;e.OverlayBase=h.OverlayBase;e.OverlayByLayer=h.OverlayByLayer;e.OverlayByPolygon=h.OverlayByPolygon;e.ProjectBase=h.ProjectBase;e.ProjectByLayer=h.ProjectByLayer;e.ProjectBySRID=h.ProjectBySRID;e.CalArea=f.CalArea;e.CalPolyLineLength=f.CalPolyLineLength;e.CalServiceBase=f.CalServiceBase;e.CProjectBySRSID=f.CProjectBySRSID;e.CProjectParam=f.CProjectParam;e.GeometryAnalysisBase=f.GeometryAnalysisBase;e.ProjectDots=f.ProjectDots;e.ProjectRang=f.ProjectRang;e.Smooth=f.Smooth;e.TopAnalysis=f.TopAnalysis;e.GetDocImageService=p.GetDocImageService;e.GetLayerImageService=p.GetLayerImageService;e.GetMapImageService=p.GetMapImageService;e.GetMapInfoService=p.GetMapInfoService;e.GetTileImageService=p.GetTileImageService;e.MapServiceBase=p.MapServiceBase;e.CAllOtherDataItemInfoSource=d.CAllOtherDataItemInfoSource;e.CAnnInfo=d.CAnnInfo;e.CChartLabelFormat=d.CChartLabelFormat;e.CChartTheme=d.CChartTheme;e.CChartThemeInfo=d.CChartThemeInfo;e.CChartThemeRepresentInfo=d.CChartThemeRepresentInfo;e.CChartType=d.CChartType;e.CDotDensityTheme=d.CDotDensityTheme;e.CFourColorTheme=d.CFourColorTheme;e.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme;e.CLinInfo=d.CLinInfo;e.CMultiClassTheme=d.CMultiClassTheme;e.CPntInfo=d.CPntInfo;e.CRandomTheme=d.CRandomTheme;e.CRangeTheme=d.CRangeTheme;e.CRangeThemeInfo=d.CRangeThemeInfo;e.CRegInfo=d.CRegInfo;e.CSimpleTheme=d.CSimpleTheme;e.CTheme=d.CTheme;e.CThemeInfo=d.CThemeInfo;e.CUniqueTheme=d.CUniqueTheme;e.CUniqueThemeInfo=d.CUniqueThemeInfo;e.ExpInfo=d.ExpInfo;e.FolderInfo=d.FolderInfo;e.FolderInfoAttribute=d.FolderInfoAttribute;e.ItemValue=d.ItemValue;e.ThemeOper=d.ThemeOper;e.ThemesInfo=d.ThemesInfo;e.GeoFeatureThemeLayer=v.GeoFeatureThemeLayer;e.ThemeLayer=v.ThemeLayer;e.RangeThemeLayer=v.RangeThemeLayer;e.UniqueThemeLayer=v.UniqueThemeLayer;e.GraphThemeLayer=v.GraphThemeLayer;e.graphThemeLayer=v.graphThemeLayer;e.RandomThemeLayer=v.RandomThemeLayer;e.SimpleThemeLayer=v.SimpleThemeLayer;e.RankSymbolThemeLayer=v.RankSymbolThemeLayer;e.ThemeStyle=v.ThemeStyle;e.PostgisCatlogService=g.PostgisCatlogService;e.PostgisCustomQueryService=g.PostgisCustomQueryService;e.PostgisQueryService=g.PostgisQueryService;e.PostgisTableService=g.PostgisTableService;e.PostgisVectorTileService=g.PostgisVectorTileService;e.EchartsLayer=m.EchartsLayer;e.MapvLayer=m.MapvLayer;e.DeckglLayer=m.DeckglLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapExtend=undefined;var n=r(17);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var s=e.MapExtend=function(){i.default.Map.prototype.overlayLayersManager={};i.default.Map.prototype.addLayer=function(t,e){if(t.source||t.type==="custom"||t.type==="background"){this.addLayerBak(t,e);return this}if(this.overlayLayersManager[t.id]||this.style._layers[t.id]){this.fire("error",{error:new Error("A layer with this id already exists.")});return}this._addLayer(t,this);this.overlayLayersManager[t.id]=t;return this};i.default.Map.prototype.getLayer=function(t){if(this.overlayLayersManager[t]){return this.overlayLayersManager[t]}return this.style.getLayer(t)};i.default.Map.prototype.moveLayer=function(t,e){if(this.overlayLayersManager[t]){n(t,e);return this}if(this.style._layers[t]){this.style.moveLayer(t,e);this._update(true);return this}};i.default.Map.prototype.removeLayer=function(t){if(this.overlayLayersManager[t]){e(this.overlayLayersManager[t]);delete this.overlayLayersManager[t];return this}this.style.removeLayer(t);this._update(true);return this};i.default.Map.prototype.setLayoutProperty=function(t,e,n){if(this.overlayLayersManager[t]){if(e==="visibility"){if(n==="visible"){n=true}else{n=false}r(this.overlayLayersManager[t],n);this.style.fire("data",{dataType:"style"})}return this}this.style.setLayoutProperty(t,e,n);this._update(true);return this};i.default.Map.prototype.updateTransform=function(t,e,r,n,o,s,a){this.transform.units=t;this.transform.latRange=[this._tileExtent[1],this._tileExtent[3]];this.transform.lngRange=[this._tileExtent[0],this._tileExtent[2]];var u=this.mercatorZfromAltitude;i.default.MercatorCoordinate.fromLngLat=function(t,n){n=n||0;var o=i.default.LngLat.convert(t);return new i.default.MercatorCoordinate((o.lng-e)/s,(r-o.lat)/a,u(n,o.lat))};i.default.MercatorCoordinate.prototype.toLngLat=function(){return new i.default.LngLat(this.x*s+e,r-this.y*a)};this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+s+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))};function t(t,e){t.onAdd&&t.onAdd(e)}function e(t){t.removeFromMap&&t.removeFromMap()}function r(t,e){t.setVisibility&&t.setVisibility(e)}function n(t,e){var r=document.getElementById(t);if(e){var n=document.getElementById(e);if(!n){i.default.Evented.prototype.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this document.')})}}if(r&&n){n.parentNode.insertBefore(r,n)}else{r.parentNode.appendChild(r)}}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TDTLayer=e.ArcGISLayer=e.MapVectorLayer=e.MapWMTSLayer=e.MapWmsLayer=e.MapTileLayer=e.MapDocLayer=e.mapboxgl=undefined;var n=r(34);var i=r(289);var o=r(320);var s=r(321);var a=r(322);var u=r(323);var l=r(324);var c=r(325);e.mapboxgl=n.mapboxgl;e.MapDocLayer=i.MapDocLayer;e.MapTileLayer=o.MapTileLayer;e.MapWmsLayer=s.MapWmsLayer;e.MapWMTSLayer=a.MapWMTSLayer;e.MapVectorLayer=u.MapVectorLayer;e.ArcGISLayer=l.ArcGISLayer;e.TDTLayer=c.TDTLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapDocLayer=undefined;var n=r(73);var i=a(n);var o=r(34);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/docs/"+e)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/docs/"+e)}this.options={layers:null,filters:null,style:null,f:null,proj:null,guid:null,keepCache:true,attribution:"Zondy Map doc Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,s.extend)(this.options,r)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];var n=e.f||"png";r.push("f="+n);var o=this.options.tileSize||512;var a,u;if(typeof o==="number"){a=u=o}else{r.push("w="+o.x||512);r.push("h="+o.y||512)}r.push("w="+a);r.push("h="+u);if(e.layers){r.push("layers="+e.layers)}if(e.filters){r.push("filters="+e.filters)}if(e.style){r.push("style="+(0,i.default)(e.style))}var l=e.guid||(0,s.newGuid)();r.push("guid="+l);if(e.proj){r.push("proj="+e.proj)}if(e.cache!==undefined&&e.isAntialiasing!==null){r.push("cache="+e.cache)}if(e.update!==undefined&&e.isAntialiasing!==null){r.push("update="+e.update)}if(e.mode){r.push("mode="+e.mode)}if(e.isAntialiasing!==undefined&&e.isAntialiasing!==null){r.push("isAntialiasing="+e.isAntialiasing)}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.MapDocLayer=u;o.Zondy.Map.MapDocLayer=u},function(t,e,r){var n=r(23);var i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function t(e){return i.stringify.apply(i,arguments)}},function(t,e,r){var n=r(16);var i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function t(e){return i.stringify.apply(i,arguments)}},function(t,e,r){r(293);t.exports=r(16).Object.keys},function(t,e,r){var n=r(60);var i=r(61);r(75)("keys",function(){return function t(e){return i(n(e))}})},function(t,e,r){var n=r(41);var i=r(173);var o=r(295);t.exports=function(t){return function(e,r,s){var a=n(e);var u=i(a.length);var l=o(s,u);var c;if(t&&r!=r)while(u>l){c=a[l++];if(c!=c)return true}else for(;u>l;l++)if(t||l in a){if(a[l]===r)return t||l||0}return!t&&-1}}},function(t,e,r){var n=r(102);var i=Math.max;var o=Math.min;t.exports=function(t,e){t=n(t);return t<0?i(t+e,0):o(t,e)}},function(t,e,r){r(297);var n=r(16).Object;t.exports=function t(e,r,i){return n.defineProperty(e,r,i)}},function(t,e,r){var n=r(25);n(n.S+n.F*!r(31),"Object",{defineProperty:r(35).f})},function(t,e,r){r(299);var n=r(16).Object;t.exports=function t(e,r){return n.getOwnPropertyDescriptor(e,r)}},function(t,e,r){var n=r(41);var i=r(109).f;r(75)("getOwnPropertyDescriptor",function(){return function t(e,r){return i(n(e),r)}})},function(t,e,r){t.exports={default:r(301),__esModule:true}},function(t,e,r){r(175);t.exports=r(16).Object.getOwnPropertySymbols},function(t,e,r){var n=r(74)("meta");var i=r(36);var o=r(40);var s=r(35).f;var a=0;var u=Object.isExtensible||function(){return true};var l=!r(49)(function(){return u(Object.preventExtensions({}))});var c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})};var h=function(t,e){if(!i(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i};var f=function(t,e){if(!o(t,n)){if(!u(t))return true;if(!e)return false;c(t)}return t[n].w};var p=function(t){if(l&&d.NEED&&u(t)&&!o(t,n))c(t);return t};var d=t.exports={KEY:n,NEED:false,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,r){var n=r(61);var i=r(81);var o=r(79);t.exports=function(t){var e=n(t);var r=i.f;if(r){var s=r(t);var a=o.f;var u=0;var l;while(s.length>u)if(a.call(t,l=s[u++]))e.push(l)}return e}},function(t,e,r){var n=r(62);t.exports=Array.isArray||function t(e){return n(e)=="Array"}},function(t,e,r){var n=r(35);var i=r(26);var o=r(61);t.exports=r(31)?Object.defineProperties:function t(e,r){i(e);var s=o(r);var a=s.length;var u=0;var l;while(a>u)n.f(e,l=s[u++],r[l]);return e}},function(t,e,r){t.exports={default:r(307),__esModule:true}},function(t,e,r){r(308);var n=r(16).Object;t.exports=function t(e){return n.getOwnPropertyNames(e)}},function(t,e,r){r(75)("getOwnPropertyNames",function(){return r(178).f})},function(t,e,r){t.exports={default:r(310),__esModule:true}},function(t,e,r){r(114);r(115);t.exports=r(110).f("iterator")},function(t,e,r){var n=r(102);var i=r(101);t.exports=function(t){return function(e,r){var o=String(i(e));var s=n(r);var a=o.length;var u,l;if(s<0||s>=a)return t?"":undefined;u=o.charCodeAt(s);return u<55296||u>56319||s+1===a||(l=o.charCodeAt(s+1))<56320||l>57343?t?o.charAt(s):u:t?o.slice(s,s+2):(u-55296<<10)+(l-56320)+65536}}},function(t,e,r){"use strict";var n=r(112);var i=r(77);var o=r(80);var s={};r(42)(s,r(20)("iterator"),function(){return this});t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)});o(t,e+" Iterator")}},function(t,e,r){"use strict";var n=r(314);var i=r(315);var o=r(65);var s=r(41);t.exports=r(179)(Array,"Array",function(t,e){this._t=s(t);this._i=0;this._k=e},function(){var t=this._t;var e=this._k;var r=this._i++;if(!t||r>=t.length){this._t=undefined;return i(1)}if(e=="keys")return i(0,r);if(e=="values")return i(0,t[r]);return i(0,[r,t[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(317),__esModule:true}},function(t,e,r){r(175);r(181);r(318);r(319);t.exports=r(16).Symbol},function(t,e,r){r(111)("asyncIterator")},function(t,e,r){r(111)("observable")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapTileLayer=undefined;var n=r(34);var i=r(8);var o=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var o=r&&r.ip?r.ip:"localhost";var s=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+o+":"+s+"/igs/rest/mrms/tile/"+e)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/tile/"+e)}this.options={tileExtent:[-180,-90,180,90],zoomOffset:0,yAxis:"down",origin:[-180,90],tileSize:512,attribution:"Zondy Map Tile Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,i.extend)(this.options,r)};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.options.zoomOffset;var r=this.sourceID||"source_"+(0,i.newGuid)();var n=this.layerID||"layer_"+(0,i.newGuid)();var o={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512,mapgisOffset:e};var s={id:n,type:"raster",source:r};if(this.map.getStyle()){if(this.map.getSource(r)===undefined){this.map.addSource(r,o);this.sourceID=r}if(this.map.getLayer(n)===undefined){this.map.addLayer(s);this.layerID=n}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var a=this;a.map.on("load",function(){a.map.addSource(r,o);a.sourceID=r;a.map.addLayer(s);a.layerID=n;return a})}};o.prototype._initLayerUrl=function(){var t=this;var e=t.url+"/{z}/{y}/{x}";this._layerUrl=e};e.MapTileLayer=o;n.Zondy.Map.MapTileLayer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapWmsLayer=undefined;var n=r(73);var i=a(n);var o=r(34);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){var e=e?e:{};var r=e&&e.domain?e.domain:"";if(r===""){this.networkProtocol=e.networkProtocol!==undefined?e.networkProtocol:location.protocol.split(":")[0]||"http";var n=e&&e.ip?e.ip:"localhost";var i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/"+e.serverType+"/"+e.serverName+"/WMSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/"+e.serverType+"/"+e.serverName+"/WMSServer")}this.options={layers:null,styles:null,format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",width:"256",height:"256",srs:"EPSG:4326",crs:"EPSG:4326",guid:null,keepCache:true,attribution:"Zondy WMS Data"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;(0,s.extend)(this.options,e)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.wms_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.wms_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.wms_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];if(e.version){r.push("version="+e.version)}if(e.request){r.push("request="+e.request)}if(e.version==="1.1.1"){r.push("srs="+e.srs)}else if(e.version==="1.3.0"){r.push("crs="+e.crs)}if(e.service){r.push("service="+e.service)}if(e.layers){r.push("layers="+e.layers)}if(e.filters){r.push("filters="+e.filters)}if(e.styles){r.push("styles="+(0,i.default)(e.styles))}else{r.push("styles=")}if(e.format){r.push("format="+e.format)}else{r.push("format=image/png")}r.push("width="+e.width);r.push("height="+e.height);if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wms_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wms_source);this.map.addLayer(this.mLayer)};e.MapWmsLayer=u;o.Zondy.Map.MapWmsLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapWMTSLayer=undefined;var n=r(73);var i=a(n);var o=r(34);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){var e=e?e:{};var r=e&&e.domain?e.domain:"";if(r===""){this.networkProtocol=e.networkProtocol!==undefined?e.networkProtocol:location.protocol.split(":")[0]||"http";var n=e&&e.ip?e.ip:"localhost";var i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/WMTSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/WMTSServer")}this.options={layer:"",style:null,format:"image/png",service:"WMTS",version:"1.0.0",request:"GetTile",tileMatrixSet:null,tileMatrix:"{z}",tileRow:"{y}",tileCol:"{x}",guid:null,keepCache:true,attribution:"Zondy WMTS Data"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;(0,s.extend)(this.options,e)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();this.map.crs=this.options.crs;var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.wmts_source={type:"raster",tiles:[this._layerUrl]};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.wmts_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.wmts_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=t._initAllRequestParams().join("&");this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];if(e.version){r.push("version="+e.version)}if(e.request){r.push("request="+e.request)}if(e.service){r.push("service="+e.service)}if(e.layer){r.push("layer="+e.layer)}if(e.style){r.push("style="+(0,i.default)(e.style))}else{r.push("style=")}if(e.format){r.push("format="+e.format)}else{r.push("format=image/png")}if(e.tileMatrixSet){r.push("tileMatrixSet="+e.tileMatrixSet)}if(e.tileMatrix){r.push("tileMatrix="+e.tileMatrix)}if(e.tileRow){r.push("tileRow="+e.tileRow)}if(e.tileCol){r.push("tileCol="+e.tileCol)}if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wmts_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wmts_source);this.map.addLayer(this.mLayer)};e.MapWMTSLayer=u;o.Zondy.Map.MapWMTSLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapVectorLayer=undefined;var n=r(73);var i=a(n);var o=r(34);var s=r(8);function a(t){return t&&t.__esModule?t:{default:t}}var u=function t(e,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/layers")}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/layers")}this.options={gdbps:e,filters:null,style:null,f:null,guid:null,keepCache:true,attribution:"Zondy Map vector Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,s.extend)(this.options,r)};u.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,s.newGuid)();var r=this.layerID||"layer_"+(0,s.newGuid)();this.vector_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.getStyle()){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.vector_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.vector_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var t=this;var e=t.url+"?";e+=encodeURI(t._initAllRequestParams().join("&"));e+="&bbox={bbox}";this._layerUrl=e};u.prototype._initAllRequestParams=function(){var t=this,e=t.options||{},r=[];var n=this.options.tileSize||512;r.push("width="+n);r.push("height="+n);if(e.gdbps){r.push("gdbps="+e.gdbps)}if(e.filters){r.push("filters="+e.filters)}if(e.style){r.push("style="+(0,i.default)(e.style))}if(e.f){r.push("f="+e.style)}else{r.push("f=png")}if(e.guid){r.push("guid="+e.guid)}if(!e.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.vector_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.vector_source);this.map.addLayer(this.mLayer)};e.MapVectorLayer=u;o.Zondy.Map.MapVectorLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ArcGISLayer=undefined;var n=r(34);var i=r(8);var o=function t(e){this.options={layerType:"NGS_Topo_US_2D",url:"http://services.arcgisonline.com/ArcGIS/rest/services/{layerType}/MapServer/tile/{z}/{y}/{x}.jpg",tileSize:256,f:"image",format:"png",dpi:96,transparent:true,attribution:"ArcGIS"};this.layerID=null;this.sourceID=null;this.map=null;(0,i.extend)(this.options,e)};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._url=this.options.url;if(this.options.layerType&&this._url.indexOf("{layerType}/MapServer/tile/{z}/{y}/{x}")>0){this._url=this.options.url.replace("{layerType}",this.options.layerType)}else{this._crs=this.options.crs||this.map.options.crs}this._layerUrl=this._url};o.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.ArcGISLayer=o;n.Zondy.Map.ArcGISLayer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TDTLayer=undefined;var n=r(34);var i=r(8);var o=function t(e){this.layerLabelMap={vec:"cva",ter:"cta",img:"cia"};this.layerZoomMap={vec:18,ter:14,img:18};this.options={layerType:"vec",isLabel:false,url:"http://t"+Math.round(Math.random()*7)+".tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],version:"1.0.0",tilematrixSet:"",tileSize:256,matrixIds:null,layer:"",attribution:"天地图"};this.layerID=e.layerID?e.layerID:null;this.sourceID=e.sourceID?e.sourceID:null;this.map=null;this.initialize(e);(0,i.extend)(this.options,e)};o.prototype.initialize=function(t){t=t||{};if(this.options.baseURL){var e=this.options.baseURL.split("gov.cn/")[1];if(this.options.baseURL.indexOf("?")>0){e=e.split("?")[0]}this.options.layerType=e.substring(0,e.length-7)}this.options.layer=this.options.isLabel&&this.layerLabelMap[this.options.layerType]?this.layerLabelMap[this.options.layerType]:this.options.layerType;if(this.options.layerType==="ter"){this.options.maxZoom=14}else{this.options.maxZoom=18}this._url=this.options.url;this.options.ip=this.options.ip?this.options.ip:"localhost";this.options.port=this.options.port?this.options.port:"6163"};o.prototype.addToMap=function(t){this.map=t;this._initLayerUrl();var e=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:e};if(this.map.style){if(this.map.getSource(e)===undefined){this.map.addSource(e,this.map_source);this.sourceID=e}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(e,n.map_source);n.sourceID=e;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._crs=this.options.crs||map.crs.epsgCode;this.options.tilematrixSet=this._crs==="EPSG:4326"?"c":"w";var t=[];if(this.options.layerType.indexOf("igs")>0){var e="http://{ip}:{port}/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?";var r=this.options&&this.options.domain?this.options.domain:"";if(r===""){this.networkProtocol=this.options.networkProtocol!==undefined?this.options.networkProtocol:location.protocol.split(":")[0]||"http";e=this.networkProtocol+"://"+this.options.ip+":"+this.options.port+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}else{e=r+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}var n;switch(this.options.layerType){case"vec_igs":n="vector";break;case"img_igs":n="raster";break;case"cva_igs":n="vectorAnno";break;case"cia_igs":n="rasterAnno";break;default:n="vector";break}this._url=e.replace("{layerType}",n)}else if(this.options.baseURL){this._url=this.options.baseURL;if(this.options.baseURL.indexOf("?")<0){this._url+="?"}}else{this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet)}if(this.options.layerType.indexOf("igs")<0){t.push("request=GetTile");if(this.options.version){t.push("version="+this.options.version)}if(this.options.style){t.push("style="+this.options.style)}if(this.options.tilematrixSet){t.push("tilematrixSet="+this.options.tilematrixSet)}if(this.options.format){t.push("format="+this.options.format)}if(this.options.tileSize){t.push("width="+this.options.tileSize);t.push("height="+this.options.tileSize)}if(this.options.layer){t.push("layer="+this.options.layer)}t.push("tilematrix={z}");t.push("tilerow={y}");t.push("tilecol={x}")}if(this.options.token){t.push("tk="+this.options.token)}t.push("service=WMTS");this._url+=t.join("&");this._layerUrl=this._url};o.prototype.refreshMap=function(t){if(t){this.options.guid=t}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};e.TDTLayer=o;n.Zondy.Map.TDTLayer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Arc=undefined;var n=r(0);var i=r(8);var o=function t(e,r){this.ArcID=0;var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Dots=e!==undefined&&e!==null?e:null};e.Arc=o;n.Zondy.Object.Arc=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CAttDataRow=undefined;var n=r(0);var i=r(8);var o=function t(e,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.FID=r!==undefined?r:0;this.Values=e!==undefined?e:null};e.CAttDataRow=o;n.Zondy.Object.CAttDataRow=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CDisplayStyle=undefined;var n=r(0);var i=r(8);var o=r(182);var s=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.ShowStyle=r.ShowStyle!==undefined?r.ShowStyle:null;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false};e.CDisplayStyle=s;n.Zondy.Object.CDisplayStyle=s},function(t,e,r){"use strict";e.__esModule=true;var n=r(78);var i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,r){if(e in t){(0,i.default)(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(43);var y=r(29);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.point=t!==undefined&&t!==null?t:null;a.radious=r!==undefined&&r!==null?r:null;return a}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getCenter();var n=e.getRadius();this.point=new p.Zondy.Object.Point2D(r[0],r[1]);this.radious=n}}},{key:"toString",value:function t(){if(this.point===null||this.point.length===0||this.radious===null){return""}return this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function t(){return"Circle"}}]);return e}(d.Tangram);e.Circle=g;p.Zondy.Object.Circle=g},function(t,e,r){r(332);t.exports=r(16).Object.getPrototypeOf},function(t,e,r){var n=r(60);var i=r(180);r(75)("getPrototypeOf",function(){return function t(e){return i(n(e))}})},function(t,e,r){t.exports={default:r(334),__esModule:true}},function(t,e,r){r(335);t.exports=r(16).Object.setPrototypeOf},function(t,e,r){var n=r(25);n(n.S,"Object",{setPrototypeOf:r(336).set})},function(t,e,r){var n=r(36);var i=r(26);var o=function(t,e){i(t);if(!n(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(64)(Function.call,r(109).f(Object.prototype,"__proto__").set,2);n(t,[]);e=!(t instanceof Array)}catch(t){e=true}return function t(r,i){o(r,i);if(e)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:o}},function(t,e,r){t.exports={default:r(338),__esModule:true}},function(t,e,r){r(339);var n=r(16).Object;t.exports=function t(e,r){return n.create(e,r)}},function(t,e,r){var n=r(25);n(n.S,"Object",{create:r(112)})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiPolygon=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(43);var d=r(29);var y=r(195);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.polygonArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){this.polygonArr=[];var r=e.getLinearRingCount();var n=e.getLinearRings();for(var i=0;i<r;i++){var o=n[i].getCoordinates();var s=o.length;var a=[];for(var u=0;u<s;u++){a[u]=new d.Point2D(o[u][0],o[u][1])}this.polygonArr[i]=new y.Polygon(a)}}}},{key:"toString",value:function t(){if(this.polygonArr===undefined||this.polygonArr===null||this.polygonArr.length===0)return"";var e="";for(var r=0;r<this.polygonArr.length;r++){e+=this.polygonArr[r].toString()+";"}return e.substring(0,e.length-1)}},{key:"getGeometryType",value:function t(){return"multiPolygon"}}]);return e}(p.Tangram);e.MultiPolygon=g;Zondy.Object.MultiPolygon=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PolyLine=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(43);var d=r(29);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.nearDis=n.nearDis!==undefined&&n.nearDis!==null?parseFloat(n.nearDis):null;o.pointArr=t!==undefined&&t!==null&&Array.isArray(t)?t:new Array;return o}(0,u.default)(e,[{key:"setByOL",value:function t(e){if(e!==undefined&&e!==null){var r=e.getCoordinates();var n=r.length;for(var i=0;i<n;i++){this.pointArr[i]=new d.Point2D(r[i][0],r[i][1])}}}},{key:"toString",value:function t(){if(this.pointArr===null||this.pointArr.length===0)return"";var e=this.pointArr[0].x+","+this.pointArr[0].y;for(var r=1;r<this.pointArr.length;r++){e+=","+this.pointArr[r].x+","+this.pointArr[r].y}if(this.nearDis!==undefined&&this.nearDis!==null){e+=";"+this.nearDis}return this.Trim(e,"g")}},{key:"getGeometryType",value:function t(){return"line"}}]);return e}(p.Tangram);e.PolyLine=v;Zondy.Object.PolyLine=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VectCls=undefined;var n=r(0);var i=r(8);var o=r(21);var s=r(82);var a=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.clsType=r.clsType!==undefined?r.clsType:o.VectClsType.SFCls;this.clsName=r.clsName!==undefined?r.clsName:null;this.geoType=r.geoType!==undefined?r.geoType:1;this.srefName=r.srefName!==undefined?encodeURI(r.srefName):"";this.dsName=r.dsName!==undefined?encodeURI(r.dsName):"";this.attStruct=r.attStruct!==undefined?r.attStruct:null};e.VectCls=a;n.Zondy.Object.VectCls=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=undefined;var n=r(196);var i=r(197);var o=r(199);var s=r(200);var a=r(201);var u=r(344);var l=r(345);var c=r(198);e.ContourNoteParam=n.ContourNoteParam;e.ContourParam=i.ContourParam;e.ContourZValue=o.ContourZValue;e.ContourRegionInfo=s.ContourRegionInfo;e.MeshingParam=a.MeshingParam;e.NetAnalyse=u.NetAnalyse;e.NetAnalysisExtent=l.NetAnalysisExtent;e.SlopLineParam=c.SlopLineParam},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalyse=undefined;var n=r(0);var i=r(8);var o=function t(e){var r=e!==undefined?e:{};(0,i.extend)(this,r);this.netCls=r.netCls!==undefined?r.netCls:null;this.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;this.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;this.weight=r.weight!==undefined?r.weight:null;this.mode=r.mode!==undefined?r.mode:null;this.isTour=r.isTour!==undefined?r.isTour:false;this.isTravel=r.isTravel!==undefined?r.isTravel:false;this.usedTWgt=r.usedTWgt!==undefined?r.usedTWgt:false;this.turnWgt=r.turnWgt!==undefined?r.turnWgt:null;this.roadName=r.roadName!==undefined?r.roadName:"name"};e.NetAnalyse=o;n.Zondy.Object.NetAnalyse=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalysisExtent=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(27);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.analyTp=r.analyTp!==undefined?r.analyTp:"UserMode";n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.outFormat=r.outFormat!==undefined?r.outFormat:"JSON";n.elementType=r.elementType!==undefined?r.elementType:2;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.roadName=r.roadName!==undefined?r.roadName:"name";n.baseUrl="igs/rest/netAnaly";return n}(0,c.default)(e,[{key:"getNetInfo",value:function t(e,r,n,i){if(e==null||e==undefined){e="weight"}this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+e;var o=this;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"addNetFlag",value:function t(e,r,n,o,s){var a=null;var u={};if(o!=null&&o.toUpperCase()=="POST"){u.dotVal=e;this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis}else{this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+e+"&nearDis="+this.nearDis}var l=this;var c=l.getFullUrl();var h=new m.IgsServiceBase(c,{eventListeners:{scope:l,processCompleted:r,processFailed:n}});if(o!=null&&o.toUpperCase()=="POST"){h.processAsync({method:"POST",data:(0,i.default)(u),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{h.processAsync()}}},{key:"netAnalyse",value:function t(e,r,n,o){this.partUrl="netAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function t(e,r,n,o){this.partUrl="comNetAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function t(e,r,n,o){this.partUrl="pluNetAnalyse";var s=this;var a=s.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(g.ServiceBase);e.NetAnalysisExtent=x;y.Zondy.Service.NetAnalysisExtent=x},function(t,e,r){r(181);r(114);r(115);r(347);r(358);r(359);t.exports=r(16).Promise},function(t,e,r){"use strict";var n=r(63);var i=r(18);var o=r(64);var s=r(205);var a=r(25);var u=r(36);var l=r(76);var c=r(348);var h=r(349);var f=r(207);var p=r(208).set;var d=r(353)();var y=r(122);var v=r(209);var g=r(354);var m=r(210);var _="Promise";var x=i.TypeError;var b=i.process;var S=b&&b.versions;var C=S&&S.v8||"";var w=i[_];var I=s(b)=="process";var P=function(){};var E,M,L,N;var T=M=y.f;var O=!!function(){try{var t=w.resolve(1);var e=(t.constructor={})[r(20)("species")]=function(t){t(P,P)};return(I||typeof PromiseRejectionEvent=="function")&&t.then(P)instanceof e&&C.indexOf("6.6")!==0&&g.indexOf("Chrome/66")===-1}catch(t){}}();var R=function(t){var e;return u(t)&&typeof(e=t.then)=="function"?e:false};var A=function(t,e){if(t._n)return;t._n=true;var r=t._c;d(function(){var n=t._v;var i=t._s==1;var o=0;var s=function(e){var r=i?e.ok:e.fail;var o=e.resolve;var s=e.reject;var a=e.domain;var u,l,c;try{if(r){if(!i){if(t._h==2)k(t);t._h=1}if(r===true)u=n;else{if(a)a.enter();u=r(n);if(a){a.exit();c=true}}if(u===e.promise){s(x("Promise-chain cycle"))}else if(l=R(u)){l.call(u,o,s)}else o(u)}else s(n)}catch(t){if(a&&!c)a.exit();s(t)}};while(r.length>o)s(r[o++]);t._c=[];t._n=false;if(e&&!t._h)F(t)})};var F=function(t){p.call(i,function(){var e=t._v;var r=D(t);var n,o,s;if(r){n=v(function(){if(I){b.emit("unhandledRejection",e,t)}else if(o=i.onunhandledrejection){o({promise:t,reason:e})}else if((s=i.console)&&s.error){s.error("Unhandled promise rejection",e)}});t._h=I||D(t)?2:1}t._a=undefined;if(r&&n.e)throw n.v})};var D=function(t){return t._h!==1&&(t._a||t._c).length===0};var k=function(t){p.call(i,function(){var e;if(I){b.emit("rejectionHandled",t)}else if(e=i.onrejectionhandled){e({promise:t,reason:t._v})}})};var j=function(t){var e=this;if(e._d)return;e._d=true;e=e._w||e;e._v=t;e._s=2;if(!e._a)e._a=e._c.slice();A(e,true)};var B=function(t){var e=this;var r;if(e._d)return;e._d=true;e=e._w||e;try{if(e===t)throw x("Promise can't be resolved itself");if(r=R(t)){d(function(){var n={_w:e,_d:false};try{r.call(t,o(B,n,1),o(j,n,1))}catch(t){j.call(n,t)}})}else{e._v=t;e._s=1;A(e,false)}}catch(t){j.call({_w:e,_d:false},t)}};if(!O){w=function t(e){c(this,w,_,"_h");l(e);E.call(this);try{e(o(B,this,1),o(j,this,1))}catch(t){j.call(this,t)}};E=function t(e){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};E.prototype=r(355)(w.prototype,{then:function t(e,r){var n=T(f(this,w));n.ok=typeof e=="function"?e:true;n.fail=typeof r=="function"&&r;n.domain=I?b.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)A(this,false);return n.promise},catch:function(t){return this.then(undefined,t)}});L=function(){var t=new E;this.promise=t;this.resolve=o(B,t,1);this.reject=o(j,t,1)};y.f=T=function(t){return t===w||t===N?new L(t):M(t)}}a(a.G+a.W+a.F*!O,{Promise:w});r(80)(w,_);r(356)(_);N=r(16)[_];a(a.S+a.F*!O,_,{reject:function t(e){var r=T(this);var n=r.reject;n(e);return r.promise}});a(a.S+a.F*(n||!O),_,{resolve:function t(e){return m(n&&this===N?w:this,e)}});a(a.S+a.F*!(O&&r(357)(function(t){w.all(t)["catch"](P)})),_,{all:function t(e){var r=this;var n=T(r);var i=n.resolve;var o=n.reject;var s=v(function(){var t=[];var n=0;var s=1;h(e,false,function(e){var a=n++;var u=false;t.push(undefined);s++;r.resolve(e).then(function(e){if(u)return;u=true;t[a]=e;--s||i(t)},o)});--s||i(t)});if(s.e)o(s.v);return n.promise},race:function t(e){var r=this;var n=T(r);var i=n.reject;var o=v(function(){h(e,false,function(t){r.resolve(t).then(n.resolve,i)})});if(o.e)i(o.v);return n.promise}})},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||n!==undefined&&n in t){throw TypeError(r+": incorrect invocation!")}return t}},function(t,e,r){var n=r(64);var i=r(350);var o=r(351);var s=r(26);var a=r(173);var u=r(206);var l={};var c={};var e=t.exports=function(t,e,r,h,f){var p=f?function(){return t}:u(t);var d=n(r,h,e?2:1);var y=0;var v,g,m,_;if(typeof p!="function")throw TypeError(t+" is not iterable!");if(o(p))for(v=a(t.length);v>y;y++){_=e?d(s(g=t[y])[0],g[1]):d(t[y]);if(_===l||_===c)return _}else for(m=p.call(t);!(g=m.next()).done;){_=i(m,d,g.value,e);if(_===l||_===c)return _}};e.BREAK=l;e.RETURN=c},function(t,e,r){var n=r(26);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t["return"];if(o!==undefined)n(o.call(t));throw e}}},function(t,e,r){var n=r(65);var i=r(20)("iterator");var o=Array.prototype;t.exports=function(t){return t!==undefined&&(n.Array===t||o[i]===t)}},function(t,e){t.exports=function(t,e,r){var n=r===undefined;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(18);var i=r(208).set;var o=n.MutationObserver||n.WebKitMutationObserver;var s=n.process;var a=n.Promise;var u=r(62)(s)=="process";t.exports=function(){var t,e,r;var l=function(){var n,i;if(u&&(n=s.domain))n.exit();while(t){i=t.fn;t=t.next;try{i()}catch(n){if(t)r();else e=undefined;throw n}}e=undefined;if(n)n.enter()};if(u){r=function(){s.nextTick(l)}}else if(o&&!(n.navigator&&n.navigator.standalone)){var c=true;var h=document.createTextNode("");new o(l).observe(h,{characterData:true});r=function(){h.data=c=!c}}else if(a&&a.resolve){var f=a.resolve(undefined);r=function(){f.then(l)}}else{r=function(){i.call(n,l)}}return function(n){var i={fn:n,next:undefined};if(e)e.next=i;if(!t){t=i;r()}e=i}}},function(t,e,r){var n=r(18);var i=n.navigator;t.exports=i&&i.userAgent||""},function(t,e,r){var n=r(42);t.exports=function(t,e,r){for(var i in e){if(r&&t[i])t[i]=e[i];else n(t,i,e[i])}return t}},function(t,e,r){"use strict";var n=r(18);var i=r(16);var o=r(35);var s=r(31);var a=r(20)("species");t.exports=function(t){var e=typeof i[t]=="function"?i[t]:n[t];if(s&&e&&!e[a])o.f(e,a,{configurable:true,get:function(){return this}})}},function(t,e,r){var n=r(20)("iterator");var i=false;try{var o=[7][n]();o["return"]=function(){i=true};Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return false;var r=false;try{var o=[7];var s=o[n]();s.next=function(){return{done:r=true}};o[n]=function(){return s};t(o)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(25);var i=r(16);var o=r(18);var s=r(207);var a=r(210);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise);var r=typeof t=="function";return this.then(r?function(r){return a(e,t()).then(function(){return r})}:t,r?function(r){return a(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var n=r(25);var i=r(122);var o=r(209);n(n.S,"Promise",{try:function(t){var e=i.f(this);var r=o(t);(r.e?e.reject:e.resolve)(r.v);return e.promise}})},function(t,e,r){(function(t,e){(function(t,e){true?e():undefined})(this,function(){"use strict";function r(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function n(t){var e=this;return new e(function(e,r){if(!(t&&typeof t.length!=="undefined")){return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function o(t,r){if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(e){o(t,e)},function(r){n[t]={status:"rejected",reason:r};if(--i===0){e(n)}});return}}n[t]={status:"fulfilled",value:r};if(--i===0){e(n)}}for(var s=0;s<n.length;s++){o(s,n[s])}})}var i=setTimeout;var o=typeof t!=="undefined"?t:null;function s(t){return Boolean(t&&typeof t.length!=="undefined")}function a(){}function u(t,e){return function(){t.apply(e,arguments)}}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof t!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];y(t,this)}function c(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;l._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?h:f)(e.promise,t._value);return}var n;try{n=r(t._value)}catch(t){f(e.promise,t);return}h(e.promise,n)})}function h(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(e instanceof l){t._state=3;t._value=e;p(t);return}else if(typeof r==="function"){y(u(r,e),t);return}}t._state=1;t._value=e;p(t)}catch(e){f(t,e)}}function f(t,e){t._state=2;t._value=e;p(t)}function p(t){if(t._state===2&&t._deferreds.length===0){l._immediateFn(function(){if(!t._handled){l._unhandledRejectionFn(t._value)}})}for(var e=0,r=t._deferreds.length;e<r;e++){c(t,t._deferreds[e])}t._deferreds=null}function d(t,e,r){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=r}function y(t,e){var r=false;try{t(function(t){if(r)return;r=true;h(e,t)},function(t){if(r)return;r=true;f(e,t)})}catch(t){if(r)return;r=true;f(e,t)}}l.prototype["catch"]=function(t){return this.then(null,t)};l.prototype.then=function(t,e){var r=new this.constructor(a);c(this,new d(t,e,r));return r};l.prototype["finally"]=r;l.all=function(t){return new l(function(e,r){if(!s(t)){return r(new TypeError("Promise.all accepts an array"))}var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function o(t,s){try{if(s&&(typeof s==="object"||typeof s==="function")){var a=s.then;if(typeof a==="function"){a.call(s,function(e){o(t,e)},r);return}}n[t]=s;if(--i===0){e(n)}}catch(t){r(t)}}for(var a=0;a<n.length;a++){o(a,n[a])}})};l.allSettled=n;l.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===l){return t}return new l(function(e){e(t)})};l.reject=function(t){return new l(function(e,r){r(t)})};l.race=function(t){return new l(function(e,r){if(!s(t)){return r(new TypeError("Promise.race accepts an array"))}for(var n=0,i=t.length;n<i;n++){l.resolve(t[n]).then(e,r)}})};l._immediateFn=typeof o==="function"&&function(t){o(t)}||function(t){i(t,0)};l._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var v=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof e!=="undefined"){return e}throw new Error("unable to locate global object")}();if(typeof v["Promise"]!=="function"){v["Promise"]=l}else{if(!v.Promise.prototype["finally"]){v.Promise.prototype["finally"]=r}if(!v.Promise.allSettled){v.Promise.allSettled=n}}})}).call(this,r(214).setImmediate,r(123))},function(t,e,r){(function(t,e){(function(t,r){"use strict";if(t.setImmediate){return}var n=1;var i={};var o=false;var s=t.document;var a;function u(t){if(typeof t!=="function"){t=new Function(""+t)}var e=new Array(arguments.length-1);for(var r=0;r<e.length;r++){e[r]=arguments[r+1]}var o={callback:t,args:e};i[n]=o;a(n);return n++}function l(t){delete i[t]}function c(t){var e=t.callback;var n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n);break}}function h(t){if(o){setTimeout(h,0,t)}else{var e=i[t];if(e){o=true;try{c(e)}finally{l(t);o=false}}}}function f(){a=function(t){e.nextTick(function(){h(t)})}}function p(){if(t.postMessage&&!t.importScripts){var e=true;var r=t.onmessage;t.onmessage=function(){e=false};t.postMessage("","*");t.onmessage=r;return e}}function d(){var e="setImmediate$"+Math.random()+"$";var r=function(r){if(r.source===t&&typeof r.data==="string"&&r.data.indexOf(e)===0){h(+r.data.slice(e.length))}};if(t.addEventListener){t.addEventListener("message",r,false)}else{t.attachEvent("onmessage",r)}a=function(r){t.postMessage(e+r,"*")}}function y(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;h(e)};a=function(e){t.port2.postMessage(e)}}function v(){var t=s.documentElement;a=function(e){var r=s.createElement("script");r.onreadystatechange=function(){h(e);r.onreadystatechange=null;t.removeChild(r);r=null};t.appendChild(r)}}function g(){a=function(t){setTimeout(h,0,t)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t;if({}.toString.call(t.process)==="[object process]"){f()}else if(p()){d()}else if(t.MessageChannel){y()}else if(s&&"onreadystatechange"in s.createElement("script")){v()}else{g()}m.setImmediate=u;m.clearImmediate=l})(typeof self==="undefined"?typeof t==="undefined"?this:t:self)}).call(this,r(123),r(124))},function(t,e){(function(e){"use strict";if(!e.__disableNativeFetch&&e.fetch){return}function r(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function n(t){if(typeof t!=="string"){t=String(t)}return t}function i(t){this.map={};if(t instanceof i){t.forEach(function(t,e){this.append(e,t)},this)}else if(t){Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}}i.prototype.append=function(t,e){t=r(t);e=n(e);var i=this.map[t];if(!i){i=[];this.map[t]=i}i.push(e)};i.prototype["delete"]=function(t){delete this.map[r(t)]};i.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null};i.prototype.getAll=function(t){return this.map[r(t)]||[]};i.prototype.has=function(t){return this.map.hasOwnProperty(r(t))};i.prototype.set=function(t,e){this.map[r(t)]=[n(e)]};i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};function o(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)};t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader;e.readAsArrayBuffer(t);return s(e)}function u(t,e){var r=new FileReader;var n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"";var i=/charset\=[0-9a-zA-Z\-\_]*;?/;var o=t.type.match(i)||n.match(i);var a=[t];if(o){a.push(o[0].replace(/^charset\=/,"").replace(/;$/,""))}r.readAsText.apply(r,a);return s(r)}var l={blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function c(){this.bodyUsed=false;this._initBody=function(t,e){this._bodyInit=t;if(typeof t==="string"){this._bodyText=t}else if(l.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t;this._options=e}else if(l.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(!t){this._bodyText=""}else if(l.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(t)){}else{throw new Error("unsupported BodyInit type")}};if(l.blob){this.blob=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(a)};this.text=function(){var t=o(this);if(t){return t}if(this._bodyBlob){return u(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)}}if(l.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function f(t){var e=t.toUpperCase();return h.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var r=e.body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new i(t.headers)}this.method=t.method;this.mode=t.mode;if(!r){r=t._bodyInit;t.bodyUsed=true}}else{this.url=t}this.credentials=e.credentials||this.credentials||"omit";if(e.headers||!this.headers){this.headers=new i(e.headers)}this.method=f(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r,e)}p.prototype.clone=function(){return new p(this)};function d(t){var e=new FormData;t.trim().split("&").forEach(function(t){if(t){var r=t.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}});return e}function y(t){var e=new i;var r=t.getAllResponseHeaders().trim().split("\n");r.forEach(function(t){var r=t.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();e.append(n,i)});return e}c.call(p.prototype);function v(t,e){if(!e){e={}}this._initBody(t,e);this.type="default";this.status=e.status;this.ok=this.status>=200&&this.status<300;this.statusText=e.statusText;this.headers=e.headers instanceof i?e.headers:new i(e.headers);this.url=e.url||""}c.call(v.prototype);v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})};v.error=function(){var t=new v(null,{status:0,statusText:""});t.type="error";return t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(g.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new v(null,{status:e,headers:{location:t}})};e.Headers=i;e.Request=p;e.Response=v;e.fetch=function(t,e){return new Promise(function(r,n){var i;if(p.prototype.isPrototypeOf(t)&&!e){i=t}else{i=new p(t,e)}var o=new XMLHttpRequest;function s(){if("responseURL"in o){return o.responseURL}if(/^X-Request-URL:/m.test(o.getAllResponseHeaders())){return o.getResponseHeader("X-Request-URL")}return}var a=false;function u(){if(o.readyState!==4){return}var t=o.status===1223?204:o.status;if(t<100||t>599){if(a){return}else{a=true}n(new TypeError("Network request failed"));return}var e={status:t,statusText:o.statusText,headers:y(o),url:s()};var i="response"in o?o.response:o.responseText;if(a){return}else{a=true}r(new v(i,e))}o.onreadystatechange=u;o.onload=u;o.onerror=function(){if(a){return}else{a=true}n(new TypeError("Network request failed"))};o.open(i.method,i.url,true);try{if(i.credentials==="include"){if("withCredentials"in o){o.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}if("responseType"in o&&l.blob){o.responseType="blob"}i.headers.forEach(function(t,e){o.setRequestHeader(e,t)});o.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};e.fetch.polyfill=true;if(typeof t!=="undefined"&&t.exports){t.exports=e.fetch}})(typeof self!=="undefined"?self:this)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=undefined;var n=r(203);var i=r(211);var o=r(213);var s=r(14);var a=r(212);e.CommonServiceBase=n.CommonServiceBase;e.Events=i.Events;e.CORS=o.CORS;e.RequestTimeout=o.RequestTimeout;e.FetchRequest=o.FetchRequest;e.IgsServiceBase=s.IgsServiceBase;e.JSONFormat=a.JSONFormat;var u={Events:i.Events,CommonServiceBase:n.CommonServiceBase,CORS:o.CORS,RequestTimeout:o.RequestTimeout,FetchRequest:o.FetchRequest,IgsServiceBase:s.IgsServiceBase,JSONFormat:a.JSONFormat};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=undefined;var n=r(365);var i=r(215);var o=r(366);var s=r(51);var a=r(367);var u=r(368);var l=r(369);e.ColorInfo=n.ColorInfo;e.GDBInfo=i.GDBInfo;e.MapDoc=o.MapDoc;e.CatalogService=s.CatalogService;e.TileLayer=a.TileLayer;e.VectorLayer=u.VectorLayer;e.SystomInfo=l.SystomInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ColorInfo=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(51);var d=r(14);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.SystemLibID=r.SystemLibID!==undefined?r.SystemLibID:0;n.ColorNO=r.ColorNO!==undefined?r.ColorNO:6;n.Red=r.Red!==undefined?r.Red:0;n.Green=r.Green!==undefined?r.Green:0;n.Blue=r.Blue!==undefined?r.Blue:0;n.addNew=r.addNew!==undefined?r.addNew:false;return n}(0,u.default)(e,[{key:"getColorNO",value:function t(e,r,n){var i=this;if(e!==null&&e!==undefined){if(e.SystemLibID!==undefined){i.SystemLibID=e.SystemLibID}if(e.Red!==undefined){i.Red=e.Red}if(e.Green!==undefined){i.Green=e.Green}if(e.Blue!==undefined){i.Blue=e.Blue}if(e.addNew!==undefined){i.addNew=e.addNew}}i.partUrl="ColorLib/getColorNO?f=json&libID="+i.SystemLibID+"&r="+i.Red+"&g="+i.Green+"&b="+i.Blue+"&addNew="+i.addNew;var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getColorRGB",value:function t(e,r,n){var i=this;if(e!==null&&e!==undefined){if(e.SystemLibID!==undefined){i.SystemLibID=e.SystemLibID}if(e.ColorNO!==undefined){i.ColorNO=e.ColorNO}}i.partUrl="ColorLib/getColorRGB?f=json&libID="+i.SystemLibID+"&colorNO="+i.ColorNO;var o=i.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(p.CatalogService);e.ColorInfo=v;Zondy.Catalog.ColorInfo=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapDoc=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(8);var g=r(51);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.mapIndex=r.mapIndex!==undefined?r.mapIndex:0;n.layerID=r.layerID!==undefined?r.layerID:0;n.version=r.version!==undefined?r.version:2;n.include=r.include!==undefined?r.include:"{includeDetails:true,includeSubs:false}";n.returnFullStyle=r.returnFullStyle!==undefined?r.returnFullStyle:false;n.guid=r.guid!==undefined?r.guid:(0,v.newGuid)();return n}(0,c.default)(e,[{key:"getMapDocList",value:function t(e,r){var n=this;n.partUrl="docs?v="+this.version+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getMapDocInfo",value:function t(e,r,n,i,o){var s=this;if(typeof o==="boolean"){s.returnFullStyle=o}if(typeof r==="boolean"||typeof n==="boolean"){var a={includeDetails:typeof r==="boolean"?r:true,includeSubs:typeof n==="boolean"?n:false};s.include=(0,v.toJSON)(a)}s.partUrl="docs/"+s.docName+"?include="+s.include+"&returnFullStyle="+s.returnFullStyle+"&guid="+s.guid+"&f=json";var u=s.getFullUrl();var l=new m.IgsServiceBase(u,{eventListeners:{scope:s,processCompleted:e,processFailed:i}});l.processAsync()}},{key:"getMapInfo",value:function t(e,r,n){var i=this;if(typeof r==="boolean"){i.returnFullStyle=r}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var o=i.getFullUrl();var s=new m.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:e,processFailed:n}});s.processAsync()}},{key:"getMapDocTree",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"?tree=true&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayerInfo",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerID+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayersInfo",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers?f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"deleteLayer",value:function t(e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/delete?layerIDs="+n.layerID+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"addLayer",value:function t(e,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/add?guid="+o.guid+"&f=json";var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function t(e,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/index?guid="+o.guid+"&f=json";var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function t(e,r,n,i){var o=this;o.partUrl="legendInfo/"+o.docName+"?f=json&layerIndexes="+e+"&fields="+r;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}}]);return e}(g.CatalogService);e.MapDoc=x;y.Zondy.Catalog.MapDoc=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TileLayer=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(51);var d=r(14);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.tileName=r.tileName!==undefined?r.tileName:null;n.version=r.version!==undefined?r.version:"2.0";return n}(0,u.default)(e,[{key:"getTileList",value:function t(e,r){var n=this;n.partUrl="tiles?f=json";if(this.version){if(n.version==="2.0"){n.partUrl+="&v=2"}else{n.partUrl+="&v="+n.version}}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getTileInfo",value:function t(e,r){var n=this;n.partUrl="tiles/"+n.tileName+"?f=json";if(n.version){n.partUrl+="&v="+n.version}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(p.CatalogService);e.TileLayer=v;Zondy.Catalog.TileLayer=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VectorLayer=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(8);var v=r(215);var g=r(14);var m=r(82);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};return(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r))}(0,c.default)(e,[{key:"getSfclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?user="+n.User+"&psw="+n.Password+"&containAll="+this.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getAclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getOclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getNclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRdsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsSfclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0||n.serverName.toLowerCase()==="mapgislocalplus")n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsAclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsOclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getDsNclsList",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getRdsListInRcs",value:function t(e,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getLayerList",value:function t(e,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?containAll="+i.containAll+"&f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+e+"?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getLayerListInDS",value:function t(e,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+e+"?f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+e+"?user="+i.User+"&psw="+i.Password+"&f=json";var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getLayerInfo",value:function t(e,r,n,i){var o=this;o.partUrl="layerinfo?gdbpUrl="+e+"&f=json"+"&encryptPassword="+i+"&proj="+this.proj;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"CreateVectCls",value:function t(e,r,n){var o=this;e=e!==null?e:null;if(e===null||o.serverName===null||o.gdbName===null){return}if(o.User!==null&&o.Password!==null){o.partUrl="datasource/"+o.User+":"+o.Password+"@"}else{o.partUrl="datasource/"}if(e.clsName===null){e.clsName=(0,y.newGuid)()}o.partUrl+=o.serverName+"/"+o.gdbName+"/"+e.clsType+"/"+e.clsName+"/create?"+"geoType="+e.geoType+"&srefName="+e.srefName+"&dsName="+e.dsName+"&f=json";if(e.attStruct===null){e.attStruct=new m.CAttStruct}var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deleteXCls",value:function t(e,r,n,i){var o=this;if(o.serverName===null||o.gdbName===null||e===null||r===null){return}o.partUrl="datasource/"+o.serverName+"/"+o.gdbName+"/"+e+"/"+r+"/delete?f=json";var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}}]);return e}(v.GDBInfo);e.VectorLayer=x;Zondy.Catalog.VectorLayer=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SystomInfo=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(51);var d=r(14);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.f=r.f||"json";n.page=r.page||0;n.pageCount=r.pageCount||20;n.systemLib=r.systemLib||null;n.type=r.type||null;return n}(0,u.default)(e,[{key:"GetSystemLibrary",value:function t(e,r){var n=this;n.partUrl="systemlibraries?f="+n.f;var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"GetSymbol",value:function t(e,r){var n=this;var i="symbols?&systemLib="+n.systemLib+"&type="+n.type;if(n.f){i+="&f="+n.f}if(n.page){i+="&page="+n.page}if(n.size){i+="&size="+n.pageCount}n.partUrl=i;var o=n.getFullUrl();var s=new d.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}}]);return e}(p.CatalogService);e.SystomInfo=v;Zondy.Catalog.SystomInfo=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditDocFeature=undefined;var n=r(15);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(125);var g=r(14);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r,n){(0,u.default)(this,e);var i=n?n:{};var o=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,i));o.docName=t!==undefined?t:null;o.mapIndex=0;o.layerIndex=r!==undefined?r:0;return o}(0,c.default)(e,[{key:"add",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/addFeatures?f="+o.f+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/updateFeatures?f="+o.f+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function t(e,r,n){var i=this;if(e===undefined){return}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/deleteFeatures?f="+i.f+"&objectIds="+e+"&guid="+i.guid;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.EditServiceBase);e.EditDocFeature=_;y.Zondy.Service.EditDocFeature=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EditLayerFeature=undefined;var n=r(15);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(125);var g=r(14);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t,r){(0,u.default)(this,e);var n=r?r:{};var i=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,n));i.gdbp=t!==undefined?t:null;return i}(0,c.default)(e,[{key:"add",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="layer/addFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function t(e,r,n){var o=this;if(e===undefined){return}o.partUrl="layer/updateFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function t(e,r,n){var i=this;if(e===undefined){return}i.partUrl="layer/deleteFeatures?f="+i.f+"&objectIds="+e+"&gdbp="+i.gdbp+"&guid="+i.guid;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.EditServiceBase);e.EditLayerFeature=_;y.Zondy.Service.EditLayerFeature=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MultiGeoQuery=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(66);var g=r(219);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t,r,n,i){(0,u.default)(this,e);var o=i?i:{};var a=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,o));a.queryParam=t;a.mapName=r;a.mapIndex=0;a.layerIndex=n;a.baseUrl="igs/rest/extend/MultiGeo";a.partUrl="docs/"+a.mapName+"/"+a.mapIndex.toString()+"/"+a.layerIndex+"/Geoquery";a.partUrl+=t.getParameterURL();return a}(0,c.default)(e,[{key:"query",value:function t(e,r){if(this.queryParam===null||!(this.queryParam instanceof g.MultiGeoQueryParameter)){return}var n=null;if(this.queryParam.geometryType==="point"){n={pointArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="line"){n={lineArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="polygon"){n={PolygonObjs:this.queryParam.geometry}}var o=this;var s=o.getFullUrl();var a=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:e,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.QueryServiceBase);e.MultiGeoQuery=x;y.Zondy.Service.MultiGeoQuery=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjClsQuery=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(0);var d=r(66);var y=r(220);var v=r(14);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=n?n:{};var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));a.queryParam=t;a.gdbp=r;a.baseUrl="igs/rest/extend/dxlcz";a.partUrl="objlayer/query?gdbp="+r;a.partUrl+=t.getParameterURL();return a}(0,u.default)(e,[{key:"query",value:function t(e,r){if(this.queryParam===null||!(this.queryParam instanceof y.ObjClsQueryParameter)){return}var n=this;var i=n.getFullUrl();var o=new v.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}}]);return e}(d.QueryServiceBase);e.ObjClsQuery=m;p.Zondy.Service.ObjClsQuery=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryLayerFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(66);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.queryParam=t;o.partUrl="layer/query";return o}return e}(f.QueryServiceBase);e.QueryLayerFeature=d;h.Zondy.Service.QueryLayerFeature=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.QueryUnifyParameter=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(221);var f=r(85);var p=r(222);var d=r(376);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.QueryUnifyParameter=function(t){(0,c.default)(e,t);function e(){(0,s.default)(this,e);return(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this))}return e}((0,d.mix)(h.QueryByLayerParameter,f.QueryParameter,p.QueryDocFeature));e.default=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=r(78);var i=p(n);var o=r(108);var s=p(o);var a=r(377);var u=p(a);var l=r(381);var c=p(l);var h=r(1);var f=p(h);e.mix=d;e.copyProperties=y;function p(t){return t&&t.__esModule?t:{default:t}}function d(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++){e[r]=arguments[r]}var n=function t(){(0,f.default)(this,t);var r=true;var n=false;var i=undefined;try{for(var o=(0,c.default)(e),s;!(r=(s=o.next()).done);r=true){var a=s.value;a&&y(this,new a)}}catch(t){n=true;i=t}finally{try{if(!r&&o.return){o.return()}}finally{if(n){throw i}}}};var i=true;var o=false;var s=undefined;try{for(var a=(0,c.default)(e),u;!(i=(u=a.next()).done);i=true){var l=u.value;l&&y(n,l);l&&y(n.prototype,l.prototype)}}catch(t){o=true;s=t}finally{try{if(!i&&a.return){a.return()}}finally{if(o){throw s}}}return n}function y(t,e){var r=true;var n=false;var o=undefined;try{for(var a=(0,c.default)((0,u.default)(e)),l;!(r=(l=a.next()).done);r=true){var h=l.value;if(h!=="constructor"&&h!=="prototype"&&h!=="name"){var f=(0,s.default)(e,h);(0,i.default)(t,h,f)}}}catch(t){n=true;o=t}finally{try{if(!r&&a.return){a.return()}}finally{if(n){throw o}}}}e.default=d},function(t,e,r){t.exports={default:r(378),__esModule:true}},function(t,e,r){r(379);t.exports=r(16).Reflect.ownKeys},function(t,e,r){var n=r(25);n(n.S,"Reflect",{ownKeys:r(380)})},function(t,e,r){var n=r(113);var i=r(81);var o=r(26);var s=r(18).Reflect;t.exports=s&&s.ownKeys||function t(e){var r=n.f(o(e));var s=i.f;return s?r.concat(s(e)):r}},function(t,e,r){t.exports={default:r(382),__esModule:true}},function(t,e,r){r(115);r(114);t.exports=r(383)},function(t,e,r){var n=r(26);var i=r(206);t.exports=r(16).getIterator=function(t){var e=i(t);if(typeof e!="function")throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureService=undefined;var n=r(100);var i=d(n);var o=r(223);var s=d(o);var a=r(1);var u=d(a);var l=r(9);var c=d(l);var h=r(52);var f=r(216);var p=r(28);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(){(0,c.default)(t,null,[{key:"get",value:function t(e,r,n,i){var o=new XMLHttpRequest;o.open("GET",e,true);o.onreadystatechange=function(){if(o.readyState==4&&o.status==200||o.status==304){r.call(this,o.responseText,i)}else if(o.readyState===4&&o.status!==200&&o.status!==304){n.call(this,o.responseText,i)}};o.send()}}]);function t(e){(0,u.default)(this,t);this.url=e.url;var r=this.url.split("http://");this._ip=r[1].split(":")[0];var n=r[1].split(":")[1].split("/");this._port=n[0];if(this.url.indexOf("igs/rest/mrfs/docs")>-1){this._mapId=n[n.length-1]}}return t}();y.prototype.query=function(t,e,r){t=h.BaseParameter.formatParam(t);var n=(0,s.default)({},t);var o=void 0,a=void 0,u=void 0,l=void 0,c=void 0,d=void 0,y=void 0;c=n.layers;if(typeof c==="string"){c=c.split(",")}d=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"];(0,i.default)(n).forEach(function(t){switch(t){case"pagination":n["recordNumber"]=n.pagination;break;case"orderBy":n["orderField"]=n.orderBy;break;case"spatialRelationType":n["MustInside"]=n.spatialRelationType==="MustInside";n["Intersect"]=n.spatialRelationType==="Intersect";break;case"objectIds":n.objectIds=n.objectIds.join(",")}});if(n.hasOwnProperty("geometry")&&n.geometry||n.hasOwnProperty("rectangle")&&n.rectangle.length>0){o=new f.QueryFeatureRule({EnableDisplayCondition:n.enableDisplayCondition,MustInside:n.MustInside,CompareRectOnly:n.compareRectOnly,Intersect:n.Intersect});if(!n.hasOwnProperty("geometry")&&n.rectangle.length>0){l=new p.Rectangle(n.rectangle[0],n.rectangle[1],n.rectangle[2],n.rectangle[3]);delete n.rectangle}else if(n.geometry.type==="Point"){l=new p.Point2D(n.geometry.coordinates[0],n.geometry.coordinates[1],{nearDis:"0.001"});delete n.geometry}else if(n.geometry.type==="LineString"||n.geometry.type==="Polygon"){var v=[];for(var g=0;g<n.geometry.coordinates.length;g++){v.push(new p.Point2D(n.geometry.coordinates[g][0],n.geometry.coordinates[g][1]))}switch(n.geometry.type){case"LineString":l=new p.PolyLine(v);break;case"Polygon":l=new p.Polygon(v);break}delete n.geometry}else if(n.geometry.type==="MultiPolygon"){var m=[];for(var _=0;_<n.geometry.coordinates.length;_++){var x=[],b=n.geometry.coordinates[_];for(var S=0;S<b.length;S++){x.push(new p.Point2D(b[S][0],b[S][1]))}m.push(new p.Polygon(x))}l=new p.MultiPolygon(m);delete n.geometry}}u=new f.QueryFeatureStruct({IncludeGeometry:n.IncludeGeometry,IncludeAttribute:n.IncludeAttribute,IncludeWebGraphic:n.IncludeWebGraphic});var C=new RegExp("^[0-9]+$");if(c.length<=0){throw new Error("请填写您要查询的图层")}else if(C.test(c[0])){a=new f.QueryParameter;y=new f.QueryDocFeature(a,this._mapId,c.join(","),{ip:this._ip,port:this._port})}else if(typeof c[0]==="string"&&c[0].indexOf("gdbp")>-1){a=new f.QueryByLayerParameter(c);y=new f.QueryLayerFeature(a,{ip:this._ip,port:this._port})}else{throw new Error("请填写正确的图层Id或gdbp地址")}if(l){a.geometry=l;a.rule=o}a.struct=u;var w=(0,s.default)({},n);for(var I=0;I<d.length;I++){if(w.hasOwnProperty(d[I])){delete w[d[I]]}}(0,p.extend)(a,w);y.query(function(t){if(e){e(t)}},function(t){if(r){r(t)}})};y.prototype.add=function(t,e,r,n){var i=this,o=void 0;this.getFieldAtt(e,function(s){var a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.add(a,r,n)})};y.prototype.update=function(t,e,r,n){var i=this,o=void 0;this.getFieldAtt(e,function(s){var a=i.getFeatureSet(s,t);o=i.getFeatureService(e);o.update(a,r,n)})};y.prototype.delete=function(t,e,r,n){t=t.join(",");var i=this.getFeatureService(e);i.deletes(t,r,n)};y.prototype.getFeatureSet=function(t,e){var r=[];var n=t.FieldAtt.FldType;for(var i=0;i<n.length;i++){r.push(n[i].substr(3,n[i].length).toLowerCase())}t.FieldAtt.FldType=r;var o=new p.FeatureSet({AttStruct:new p.CAttStruct(t.FieldAtt)});for(var s=0;s<e.length;s++){var a=e[s].hasOwnProperty("geometry")&&e[s].geometry,u=void 0,l=void 0,c=void 0;var h=[];for(var f=0;f<t.FieldAtt.FldName.length;f++){if(e[s].attributes.hasOwnProperty(t.FieldAtt.FldName[f])){h.push(e[s].attributes[t.FieldAtt.FldName[f]])}else{h.push(null)}}var d=new p.Feature({AttValue:h}),y=void 0;if(a){var v=e[s].geometryType,g=void 0,m=void 0,_=void 0,x=void 0,b=void 0,S=void 0,C=void 0,w=void 0;u=e[s].geometry;switch(v){case"Point":l=[];for(var I=0;I<u.length;I++){b=new p.GPoint(u[I].coordinates[0],u[I].coordinates[1]);l.push(b)}g=new p.FeatureGeometry({PntGeom:l});y=1;if(e[s].style){_=new p.CPointInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:1,PntInfo:_})}break;case"LineString":l=[];for(var P=0;P<u.length;P++){S=[];for(var E=0;E<u[P].coordinates.length;E++){S.push(new p.Point2D(u[P].coordinates[E].x,u[P].coordinates[E].y))}C=new Arc(S);x=new p.AnyLine([C]);c=new p.GLine(x);l.push(c)}g=new p.FeatureGeometry({LinGeom:l});y=2;if(e[s].style){_=new p.CLineInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:2,LinInfo:_})}break;case"Polygon":l=[];for(var M=0;M<u.length;M++){x=[];var L=[];for(var N=0;N<u[M].exterior.length;N++){L.push(new p.Point2D(u[M].exterior[N].x,u[M].exterior[N].y))}x.push(new p.AnyLine([new Arc(L)]));for(var T=0;T<u[M].interior.length;T++){var O=[];for(var R=0;R<u[M].interior[T].length;R++){O.push(new p.Point2D(u[M].interior[T][R].x,u[M].interior[T][R].y))}x.push(new p.AnyLine([new Arc(O)]))}w=new p.GRegion(x);l.push(w)}g=new p.FeatureGeometry({RegGeom:l});y=3;if(e[s].style){_=new p.CRegionInfo(e[s].style);m=new p.WebGraphicsInfo({InfoType:3,RegInfo:_})}break}d.fGeom=g;d.GraphicInfo=m;d.ftype=y}if(e[s].FID){d.setFID(e[s].FID)}o.addFeature(d)}return o};y.prototype.getFeatureService=function(t){var e=void 0;if(t.indexOf("gdbp")>=0){e=new f.EditLayerFeature(t)}else{e=new f.EditDocFeature(this._mapId,t,{ip:this._ip,port:this._port})}return e};y.prototype.getFieldAtt=function(t,e){var r=this;if(t.indexOf("gdbp")>=0){this.getGDBPInfo(t,e)}else{this.getLayerInfo(t,function(t){r.getGDBPInfo(t,e)})}};y.prototype.getGDBPInfo=function(t,e){y.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t);e(t)})};y.prototype.getLayerInfo=function(t,e){y.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){t=JSON.parse(t);var r=t.URL;e(r)})};e.FeatureService=y;p.Zondy.Service.FeatureService=y},function(t,e,r){r(386);t.exports=r(16).Object.assign},function(t,e,r){var n=r(25);n(n.S+n.F,"Object",{assign:r(387)})},function(t,e,r){"use strict";var n=r(31);var i=r(61);var o=r(81);var s=r(79);var a=r(60);var u=r(172);var l=Object.assign;t.exports=!l||r(49)(function(){var t={};var e={};var r=Symbol();var n="abcdefghijklmnopqrst";t[r]=7;n.split("").forEach(function(t){e[t]=t});return l({},t)[r]!=7||Object.keys(l({},e)).join("")!=n})?function t(e,r){var l=a(e);var c=arguments.length;var h=1;var f=o.f;var p=s.f;while(c>h){var d=u(arguments[h++]);var y=f?i(d).concat(f(d)):i(d);var v=y.length;var g=0;var m;while(v>g){m=y[g++];if(!n||p.call(d,m))l[m]=d[m]}}return l}:l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SQLParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(52);var f=r(28);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.where=undefined;(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.SQLParameter=d;f.Zondy.Service.SQLParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeometryParameter=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(3);var u=v(a);var l=r(4);var c=v(l);var h=r(52);var f=r(28);var p=r(127);var d=r(131);var y=r(132);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.geometry=undefined;r.where=undefined;r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersect";(0,f.extend)(r,t);return r}return e}(h.BaseParameter);g.prototype.fromGeoJSON=function(t){if(t){var e=this;switch(t.geometry.type){case"Point":e.geometry=new p.VPoint({coordinates:t.geometry.coordinates});break;case"LineString":e.geometry=new d.VPolyline({coordinates:t.geometry.coordinates});break;case"Polygon":e.geometry=new y.VPolygon({coordinates:t.geometry.coordinates[0]});break}}};e.GeometryParameter=g;f.Zondy.Service.GeometryParameter=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.RectangleParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(52);var f=r(28);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.where=undefined;r.rectangle=[];r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersects";(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.RectangleParameter=d;f.Zondy.Service.RectangleParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ObjectIdsParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(52);var f=r(28);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this));r.objectIds=[];(0,f.extend)(r,t);return r}return e}(h.BaseParameter);e.ObjectIdsParameter=d;f.Zondy.Service.ObjectIdsParameter=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VFeature=undefined;var n=r(15);var i=y(n);var o=r(223);var s=y(o);var a=r(1);var u=y(a);var l=r(9);var c=y(l);var h=r(28);var f=r(127);var p=r(131);var d=r(132);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(){(0,c.default)(t,null,[{key:"fromQueryResult",value:function e(r){if(!r.hasOwnProperty("SFEleArray")||!r.hasOwnProperty("AttStruct")||r.hasOwnProperty("SFEleArray")&&!r.SFEleArray||r.hasOwnProperty("AttStruct")&&!r.AttStruct){return[]}var n=r.SFEleArray;var i=r.AttStruct;var o=[],s=void 0;for(var a=0;a<n.length;a++){var u={},l=[],c=void 0;for(var h=0;h<n[a].AttValue.length;h++){if(n[a].AttValue[h]!==""){u[i.FldName[h]]=n[a].AttValue[h]}}if(n[a].fGeom){switch(n[a].ftype){case 1:var y=n[a].fGeom.PntGeom;for(var v=0;v<y.length;v++){var g=new f.VPoint({coordinates:[y[v].Dot.x,y[v].Dot.y]});l.push(g);c="Point"}break;case 2:var m=n[a].fGeom.LinGeom;for(var _=0;_<m.length;_++){var x=new p.VPolyline({coordinates:m[_].Line.Arcs[0].Dots});l.push(x);c="LineString"}break;case 3:var b=n[a].fGeom.RegGeom;for(var S=0;S<b.length;S++){var C=new d.VPolygon;C.exterior=b[S].Rings[0].Arcs[0].Dots;for(var w=1;w<b[S].Rings.length;w++){C.interior.push(b[S].Rings[w].Arcs[0].Dots)}l.push(C);c="Polygon"}break}}var I=void 0;if(n[a].GraphicInfo){var P=n[a].GraphicInfo;switch(P.InfoType){case 1:I=P.PntInfo;break;case 2:I=P.LinInfo;break;case 3:I=P.RegInfo;break}}s=new t({attributes:u,FID:n[a].FID,geometry:l,geometryType:c,style:I});o.push(s)}return o}},{key:"fromGeoJSON",value:function e(r){var n=void 0,i=[];if(!r.hasOwnProperty("type")){throw new Error("请输入正确的geoJSON")}if(r.type==="Feature"){n=new t({geometry:t.geometry,attributes:r.properties});return n}else if(r.type==="FeatureCollection"){var o=r.features,s=void 0,a=void 0,u=void 0;for(var l=0;l<o.length;l++){s=[];u=o[l].geometry.coordinates;switch(o[l].geometry.type){case"Point":s.push(o[l].geometry);break;case"LineString":a=[];for(var c=0;c<u.length;c++){a.push({x:Number(u[c][0]),y:Number(u[c][1])})}o[l].geometry.coordinates=a;s.push(o[l].geometry);break;case"Polygon":var h=new d.VPolygon;for(var f=0;f<u[0].length;f++){h.exterior.push({x:Number(u[0][f][0]),y:Number(u[0][f][1])})}for(var p=1;p<u.length;p++){var y=[];for(var v=0;v<u[p].length;v++){y.push({x:Number(u[p][v][0]),y:Number(u[p][v][1])})}h.exterior.push(y)}s.push(h);break}n=new t({geometry:s,attributes:o[l].properties,geometryType:o[l].geometry.type});i.push(n)}return i}else{throw new Error("不支持的geoJSON类型")}}},{key:"toAntTableData",value:function e(r){var n=[];var i=t.fromQueryResult(r);for(var o=0;o<i.length;o++){n.push((0,s.default)(i[o].attributes,{key:i[o].FID?i[o].FID:o}))}return n}},{key:"resultToGeojson",value:function e(r){var n=t.fromQueryResult(r);var o=[];n=JSON.parse((0,i.default)(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));var s=void 0;for(var a=0;a<n.length;a++){s=t.polygonToGeojson(n[a]);o=o.concat(s)}var u={type:"FeatureCollection",features:o};return u}},{key:"polygonToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Polygon"){i[s].coordinates=[i[s].coordinates.concat(i[s].exterior,i[s].interior)]}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}},{key:"featureToGeojson",value:function t(e){var r={type:"FeatureCollection",features:[]};var n=[];var i=e.geometryType;if(i=="Polygon"){n=this.polyToGeojson(e)}else if(i=="LineString"){n=this.lineToGeojson(e)}else if(i=="Point"){n=this.pointToGeojson(e)}r.features=n;return r}},{key:"polyToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Polygon"){var a=i[s].exterior.map(function(t){return[t.x,t.y]});var u=i[s].interior.map(function(t){return[t.x,t.y]});i[s].coordinates=[i[s].coordinates.concat(a,u)]}r.geometry=i[s];r.properties=o;r.type="Feature";delete r.geometry.exterior;delete r.geometry.interior;n.push(r)}return n}},{key:"lineToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="LineString"){var a=i[s].coordinates.map(function(t){return[t.x,t.y]});i[s].coordinates=a}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}},{key:"pointToGeojson",value:function t(e){var r=void 0,n=[];var i=e.geometry;var o=e.properties;for(var s=0;s<i.length;s++){r={};if(i[s].type==="Point"){i[s].coordinates=i[s].coordinates}r.geometry=i[s];r.properties=o;r.type="Feature";n.push(r)}return n}}]);function t(e){(0,u.default)(this,t);this.geometry=undefined;this.geometryType=undefined;this.attributes=undefined;this.style=undefined;this.FID=undefined;(0,h.extend)(this,e)}return t}();e.VFeature=v;h.Zondy.Service.VFeature=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=undefined;var n=r(32);var i=r(133);var o=r(394);var s=r(395);var a=r(86);var u=r(396);var l=r(397);var c=r(398);var h=r(399);var f=r(134);var p=r(400);var d=r(401);var y=r(402);var v=r(135);var g=r(403);var m=r(404);var _=r(136);var x=r(405);var b=r(406);var S=r(407);e.AnalysisBase=n.AnalysisBase;e.ClassBufferBase=i.ClassBufferBase;e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing;e.ClassBufferBySingleRing=s.ClassBufferBySingleRing;e.ClipBase=a.ClipBase;e.ClipByCircle=u.ClipByCircle;e.ClipByLayer=l.ClipByLayer;e.ClipByPolygon=c.ClipByPolygon;e.ContourAnalyse=h.ContourAnalyse;e.FeatureBuffBase=f.FeatureBuffBase;e.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing;e.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing;e.NetAnalysis=y.NetAnalysis;e.OverlayBase=v.OverlayBase;e.OverlayByLayer=g.OverlayByLayer;e.OverlayByPolygon=m.OverlayByPolygon;e.ProjectBase=_.ProjectBase;e.ProjectByLayer=x.ProjectByLayer;e.ProjectBySRID=b.ProjectBySRID;e.FunctionWareService=S.FunctionWareService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(133);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.flowID="600232";n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"2,4,8,10";return n}return e}(f.ClassBufferBase);e.ClassBufferByMultiplyRing=d;h.Zondy.Service.ClassBufferByMultiplyRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClassBufferBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(133);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.isByAtt=r.isByAtt!==undefined?r.isByAtt:true;n.fldName=r.fldName!==undefined?r.fldName:null;n.dynPrjRad=r.dynPrjRad!==undefined?r.dynPrjRad:0;n.flowID="600231";return n}return e}(f.ClassBufferBase);e.ClassBufferBySingleRing=d;h.Zondy.Service.ClassBufferBySingleRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByCircle=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(86);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.center=r.center!==undefined?r.center:null;n.radius=r.radius!==undefined?r.radius:null;n.step=r.step!==undefined?r.step:.001;n.flowID="600229";return n}return e}(f.ClipBase);e.ClipByCircle=d;h.Zondy.Service.ClipByCircle=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(86);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600230";return n}return e}(f.ClipBase);e.ClipByLayer=d;h.Zondy.Service.ClipByLayer=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClipByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(86);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.strPos=r.strPos!==undefined?r.strPos:null;n.flowID="600228";return n}return e}(f.ClipBase);e.ClipByPolygon=d;h.Zondy.Service.ClipByPolygon=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ContourAnalyse=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(3);var u=g(a);var l=r(4);var c=g(l);var h=r(0);var f=r(8);var p=r(32);var d=r(14);var y=r(201);var v=r(197);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.flowID="600320";n.linSfclsURL=r.linSfclsURL!==undefined?r.linSfclsURL:null;n.regSfclsURL=r.regSfclsURL!==undefined?r.regSfclsURL:null;n.annoClsURL=r.annoClsURL!==undefined?r.annoClsURL:null;n.meshingParam=r.meshingParam!==undefined?r.meshingParam:null;n.contourParam=r.contourParam!==undefined?r.contourParam:null;return n}return e}(p.AnalysisBase);e.ContourAnalyse=m;h.Zondy.Service.ContourAnalyse=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(134);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"0.003,0.002,0.001";n.flowID="600239";return n}return e}(f.FeatureBuffBase);e.FeatureBuffByMultiplyRing=d;h.Zondy.Service.FeatureBuffByMultiplyRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureBuffBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(134);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.flowID="600238";return n}return e}(f.FeatureBuffBase);e.FeatureBuffBySingleRing=d;h.Zondy.Service.FeatureBuffBySingleRing=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NetAnalysis=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(32);var p=r(21);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.analyType=r.analyType!==undefined?r.analyType:p.NetAnalyType.UserMode;n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.elementType=r.elementType!==undefined?r.elementType:p.NetElemType.Edge;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.outFormat=r.outFormat!==undefined?r.outFormat:"json";n.flowID="600233";return n}return e}(f.AnalysisBase);e.NetAnalysis=y;h.Zondy.Service.NetAnalysis=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(135);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600227";return n}return e}(f.OverlayBase);e.OverlayByLayer=d;h.Zondy.Service.OverlayByLayer=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OverlayByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var s=p(o);var a=r(3);var u=p(a);var l=r(4);var c=p(l);var h=r(0);var f=r(135);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){(0,c.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.strGRegionXML=r.strGRegionXML!==undefined?r.strGRegionXML:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";n.flowID="600237";return n}return e}(f.OverlayBase);e.OverlayByPolygon=d;h.Zondy.Service.OverlayByPolygon=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectByLayer=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(136);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r||{};(0,p.extend)(n,t);var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.flowID="600235";return o}return e}(f.ProjectBase);e.ProjectByLayer=y;h.Zondy.Service.ProjectByLayer=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectBySRID=undefined;var n=r(2);var i=d(n);var o=r(1);var s=d(o);var a=r(3);var u=d(a);var l=r(4);var c=d(l);var h=r(0);var f=r(136);var p=r(8);function d(t){return t&&t.__esModule?t:{default:t}}var y=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r||{};(0,p.extend)(n,t);var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.flowID="600234";o.srID=n.srID!==undefined?n.srID:32;return o}return e}(f.ProjectBase);e.ProjectBySRID=y;h.Zondy.Service.ProjectBySRID=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FunctionWareService=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(32);var g=r(14);var m=r(8);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.guid=r.guid?r.guid:(0,m.newGuid)();n.f=r.f!==undefined?r.f:"json";return n}(0,c.default)(e,[{key:"executeWorkFlow",value:function t(e,r,n,o,s,a){if(!n){n=false}var u={};if(a!==null&&a.toUpperCase()==="POST"){u.paraValues=r;this.partUrl="execute/"+e+"?f="+this.f+"&isAsy="+n+"&guid="+this.guid}else{this.partUrl="execute/"+e+"?paraValues="+r+"&f="+this.f+"&isAsy="+n+"&guid="+this.guid}var l=this;var c=l.getFullUrl();var h=new g.IgsServiceBase(c,{eventListeners:{scope:l,processCompleted:o,processFailed:s}});if(a!==null&&a.toUpperCase()==="POST"){h.processAsync({method:"POST",data:(0,i.default)(u)})}else{h.processAsync()}}},{key:"getInstanceMessage",value:function t(e,r,n){this.partUrl="instanceLogs/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getInstanceOutPutValue",value:function t(e,r,n,i){this.partUrl="outputvalues/"+e+"?name="+r+"&f="+this.f+"&guid="+this.guid;var o=this;var s=o.getFullUrl();var a=new g.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});a.processAsync()}},{key:"getInstanceResult",value:function t(e,r,n){this.partUrl="results/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getInstanceStatus",value:function t(e,r,n){this.partUrl="status/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getWorkFlowGroups",value:function t(e,r){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfoByID",value:function t(e,r,n){this.partUrl="workflows/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getWorkFlowInfos",value:function t(e,r){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfosByGroup",value:function t(e,r,n){this.partUrl="workflowsbygroup/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"getFolder1",value:function t(e,r){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getFolder2",value:function t(e,r){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});o.processAsync()}},{key:"getFolder3",value:function t(e,r,n){this.partUrl="folderInfos/workflow/"+e+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var s=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});s.processAsync()}}]);return e}(v.AnalysisBase);e.FunctionWareService=x;y.Zondy.Service.FunctionWareService=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=undefined;var n=r(409);var i=r(410);var o=r(137);var s=r(139);var a=r(138);var u=r(44);var l=r(411);var c=r(412);var h=r(413);var f=r(414);var p=r(415);e.CalArea=n.CalArea;e.CalPolyLineLength=i.CalPolyLineLength;e.CalServiceBase=o.CalServiceBase;e.CProjectBySRSID=s.CProjectBySRSID;e.CProjectParam=a.CProjectParam;e.GeometryAnalysisBase=u.GeometryAnalysisBase;e.ProjectDots=l.ProjectDots;e.ProjectRang=c.ProjectRang;e.Smooth=h.Smooth;e.TopAnalysis=f.TopAnalysis;e.CoordinateElpTrans=p.CoordinateElpTrans},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalArea=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(137);var p=r(8);var d=r(29);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};(0,p.extend)(n,{dots:t});var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.partUrl="geomservice/calArea?f=json";return o}return e}(f.CalServiceBase);e.CalArea=v;h.Zondy.Service.CalArea=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalPolyLineLength=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(3);var u=y(a);var l=r(4);var c=y(l);var h=r(0);var f=r(137);var p=r(8);var d=r(29);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,c.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=r?r:{};(0,p.extend)(n,{dots:t});var o=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,n));o.partUrl="geomservice/calLength?f=json";return o}return e}(f.CalServiceBase);e.CalPolyLineLength=v;h.Zondy.Service.CalPolyLineLength=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectDots=undefined;var n=r(15);var i=x(n);var o=r(2);var s=x(o);var a=r(1);var u=x(a);var l=r(9);var c=x(l);var h=r(3);var f=x(h);var p=r(4);var d=x(p);var y=r(0);var v=r(44);var g=r(29);var m=r(138);var _=r(14);function x(t){return t&&t.__esModule?t:{default:t}}var b=function(t){(0,d.default)(e,t);function e(t,r,n,i){(0,u.default)(this,e);var o=i?i:{};var a=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,o));a.InputDots=t;a.SrcProjParam=r;a.DesProjParm=n;return a}(0,c.default)(e,[{key:"execute",value:function t(e,r){this.partUrl="geomservice/projectdots?f=json";var n={};n["InputDots"]=this.InputDots;n["SrcProjParam"]=this.SrcProjParam;n["DesProjParm"]=this.DesProjParm;var o=this.getFullUrl();var s=this;var a=new _.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:e,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.ProjectDots=b;y.Zondy.Service.ProjectDots=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProjectRang=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(44);var y=r(14);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t?t:{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.gdbsvrName=r.gdbsvrName!==undefined?r.gdbsvrName:"MapGISLocal";n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.srefID=r.srefID!==undefined?r.srefID:0;n.desfID=r.desfID!==undefined?r.desfID:0;n.userName=r.userName!==undefined?r.userName:null;n.password=r.password!==undefined?r.password:null;return n}(0,u.default)(e,[{key:"execute",value:function t(e,r,n){var i="";if(e){i=e.xmin+"$"+e.ymin+"$"+e.xmax+"$"+e.ymax}if(this.userName===null||this.password===null){this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i}else{this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i+"&userName="+this.userName+"&password="+this.password}var o=this.getFullUrl();var s=this;var a=new y.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});a.processAsync()}}]);return e}(d.GeometryAnalysisBase);e.ProjectRang=g;p.Zondy.Service.ProjectRang=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Smooth=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(44);var g=r(29);var m=r(14);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.type=r.type!==undefined?r.type:0;n.step=r.step!==undefined?r.step:1;return n}(0,c.default)(e,[{key:"setType",value:function t(e){this.type=e}},{key:"setStep",value:function t(e){this.step=e}},{key:"execute",value:function t(e,r,n){if(this.type==2){if(e.length<4){alert("当前选中的为三次Beizer样条，最少需四个点");return}}else{if(e.length<3){alert("当前选中的类型最少需三个点");return}}this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var o=this.getFullUrl();var s=this;var a=new m.IgsServiceBase(o,{eventListeners:{scope:s,processCompleted:r,processFailed:n}});a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.Smooth=x;y.Zondy.Service.Smooth=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TopAnalysis=undefined;var n=r(15);var i=S(n);var o=r(2);var s=S(o);var a=r(1);var u=S(a);var l=r(9);var c=S(l);var h=r(3);var f=S(h);var p=r(4);var d=S(p);var y=r(0);var v=r(44);var g=r(14);var m=r(119);var _=r(120);var x=r(121);var b=r(8);function S(t){return t&&t.__esModule?t:{default:t}}var C=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.pnt=r.pnt!==undefined?r.pnt:null;n.line=r.line!==undefined?r.line:null;n.reg=r.reg!==undefined?r.reg:null;n.nearDis=r.nearDis!==undefined?r.nearDis:.01;n.relativeObj=r.relativeObj!==undefined?r.relativeObj:null;n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,c.default)(e,[{key:"setPnt",value:function t(e){this.pnt=e}},{key:"setLine",value:function t(e){this.line=e}},{key:"setReg",value:function t(e){this.reg=e}},{key:"setRelativeObj",value:function t(e){this.relativeObj=e}},{key:"onGetRltSuccess",value:function t(e){var r=(0,b.getTopAnalysisResult)(e);this.p_onSuccess(r)}},{key:"execute",value:function t(e,r){var n=this;n.p_onSuccess=e;var o={};o.NearDis=this.nearDis;o.Pnt=this.pnt;o.Line=this.line;o.Reg=this.reg;o.RelativeObj=this.relativeObj;n.partUrl="geomservice/topanalysis?f=json";var s=n.getFullUrl();var n=this;var a=new g.IgsServiceBase(s,{eventListeners:{scope:n,processCompleted:n.onGetRltSuccess,processFailed:r}});a.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.GeometryAnalysisBase);e.TopAnalysis=C;y.Zondy.Service.TopAnalysis=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CoordinateElpTrans=undefined;var n=r(15);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(44);var g=r(14);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t?t:{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.points=r.points!==undefined?r.points:"";n.dx=r.dx!==undefined?r.dx:"";n.dy=r.dy!==undefined?r.dy:"";n.dz=r.dz!==undefined?r.dz:"";n.m=r.m!==undefined?r.m:"";n.wx=r.wx!==undefined?r.wx:"";n.wy=r.wy!==undefined?r.wy:"";n.wz=r.wz!==undefined?r.wz:"";n.srcsrsname=r.srcsrsname!==undefined?r.srcsrsname:"";n.dessrsname=r.dessrsname!==undefined?r.dessrsname:"";return n}(0,c.default)(e,[{key:"coordinateTrans",value:function t(e,r,n){var o={};if(n!==null&&n.toUpperCase()==="POST"){o.paraValues="";this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname}else{o=this;this.partUrl="geomservice/transcoordinate"}var s=this.getFullUrl();var a=this;var u=new g.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:e,processFailed:r}});if(n!==null&&n.toUpperCase()==="POST"){u.processAsync({method:"POST",data:(0,i.default)(o)})}else{u.processAsync()}}}]);return e}(v.GeometryAnalysisBase);e.CoordinateElpTrans=_;y.Zondy.Service.CoordinateTransform=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=undefined;var n=r(417);var i=r(418);var o=r(419);var s=r(420);var a=r(421);var u=r(53);e.GetDocImageService=n.GetDocImageService;e.GetLayerImageService=i.GetLayerImageService;e.GetMapImageService=o.GetMapImageService;e.GetMapInfoService=s.GetMapInfoService;e.GetTileImageService=a.GetTileImageService;e.MapServiceBase=u.MapServiceBase},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetDocImageService=undefined;var n=r(15);var i=_(n);var o=r(2);var s=_(o);var a=r(1);var u=_(a);var l=r(9);var c=_(l);var h=r(3);var f=_(h);var p=r(4);var d=_(p);var y=r(0);var v=r(53);var g=r(139);var m=r(8);function _(t){return t&&t.__esModule?t:{default:t}}var x=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.cache=r.cache!==undefined?r.cache:false;if(n.cache){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;n.update=r.update!==undefined?r.update:false}else{n.layers=r.layers!==undefined?r.layers:null;n.style=r.style!==undefined?r.style:null;n.picType=r.picType!==undefined?r.picType:"gif";n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.proj=r.proj!==undefined?r.proj:null;n.guid=r.guid!==undefined?r.guid:(0,m.newGuid)()}return n}(0,c.default)(e,[{key:"GetMapImage",value:function t(){if(this.docName){if(this.cache===true){this.partUrl="docs/"+this.docName+"?"+"cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString()}else{this.partUrl="docs/"+this.docName+"?";if(this.bbox!==null){this.partUrl+="bbox="+this.bbox}if(this.picWidth!==null){this.partUrl+="&w="+this.picWidth}if(this.picHeight!==null){this.partUrl+="&h="+this.picHeight}if(this.layers!==null){this.partUrl+="&layers="+this.layers}if(this.filters!==null){this.partUrl+="&filters="+encodeURI(this.filters)}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.proj!==null){this.partUrl+="&proj="+(0,i.default)(this.proj)}if(this.picType!==null){this.partUrl+="&f="+this.picType}if(this.guid!==null){this.partUrl+="&guid="+this.guid}}var e=this.getFullUrl();return e}return null}}]);return e}(v.MapServiceBase);e.GetDocImageService=x;y.Zondy.Service.GetDocImageService=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetLayerImageService=undefined;var n=r(15);var i=m(n);var o=r(2);var s=m(o);var a=r(1);var u=m(a);var l=r(9);var c=m(l);var h=r(3);var f=m(h);var p=r(4);var d=m(p);var y=r(0);var v=r(53);var g=r(188);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(t){(0,d.default)(e,t);function e(t){(0,u.default)(this,e);var r=t||{};var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));n.gdbps=r.gdbps!==undefined?r.gdbps:null;n.picType=r.picType!==undefined?r.picType:"gif";n.style=r.style!==undefined?r.style:null;n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;return n}(0,c.default)(e,[{key:"GetLayerImage",value:function t(){if(this.gdbps!==null&&this.picWidth!==null&&this.picHeight!==null){this.partUrl="layers?"+"f="+this.picType;this.partUrl+="&gdbps=";this.gdbps.split(",");var e=this.gdbps.split(",");for(var r=0;r<e.length;r++){this.partUrl+=e[r];if(r<e.length-1){this.partUrl+=","}}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.filters!==null){this.partUrl+="&filters="+this.filters}if(this.bbox!==null){this.partUrl+="&bbox="+this.bbox}this.partUrl+="&w="+this.picWidth;this.partUrl+="&h="+this.picHeight;var n=this.getFullUrl();return n}return null}}]);return e}(v.MapServiceBase);e.GetLayerImageService=_;y.Zondy.Service.GetLayerImageService=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetMapImageService=undefined;var n=r(2);var i=v(n);var o=r(1);var s=v(o);var a=r(9);var u=v(a);var l=r(3);var c=v(l);var h=r(4);var f=v(h);var p=r(0);var d=r(53);var y=r(21);function v(t){return t&&t.__esModule?t:{default:t}}var g=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.mapType=r.mapType!==undefined?r.mapType:y.MapType.Doc;if(n.mapType===y.MapType.Tile){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0}else{n.picType=r.picType!==undefined?r.picType:"gif";n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.xmin=r.xmin!==undefined?r.xmin:null;n.xmax=r.xmax!==undefined?r.xmax:null;n.ymin=r.ymin!==undefined?r.ymin:null;n.ymax=r.ymax!==undefined?r.ymax:null}return n}(0,u.default)(e,[{key:"GetImage",value:function t(){if(this.mapName){if(this.mapType===y.MapType.Tile){this.partUrl="tile/"+this.mapName+"?"+"lvl="+this.level+"&row="+this.row+"&col="+this.col}else{this.partUrl="map/"+this.mapName+"?"+"width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType;if(this.xmin!==null&&this.xmax!==null&&this.ymin!==null&&this.ymax!==null){this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax}}var e=this.getFullUrl();return e}return null}}]);return e}(d.MapServiceBase);e.GetMapImageService=g;p.Zondy.Service.GetMapImageService=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetMapInfoService=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(0);var d=r(53);var y=r(14);var v=r(8);function g(t){return t&&t.__esModule?t:{default:t}}var m=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.guid=r.guid!==undefined?r.guid:(0,v.newGuid)();n.token=r.token;n.type=r.type;return n}(0,u.default)(e,[{key:"GetMapInfo",value:function t(e,r){var n=this;if(n.mapName){n.partUrl="info/"+this.mapName;var i=[];if(n.guid){i.push("guid="+n.guid)}if(this.token){i.push("token="+n.token)}if(this.type){i.push("type="+n.type)}if(i.length>0){n.partUrl+="?"+i.join("&")}var o=n.getFullUrl();var s=new y.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}});s.processAsync()}}}]);return e}(d.MapServiceBase);e.GetMapInfoService=m;p.Zondy.Service.GetMapInfoService=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GetTileImageService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(53);function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=t||{};var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));n.hdfName=r.hdfName!==undefined?r.hdfName:null;n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;return n}(0,u.default)(e,[{key:"GetTileImage",value:function t(){if(this.hdfName!==undefined){this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col;var e=this.getFullUrl();return e}return null}}]);return e}(d.MapServiceBase);e.GetTileImageService=v;p.Zondy.Service.GetTileImageService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=undefined;var n=r(224);var i=r(225);var o=r(226);var s=r(227);var a=r(229);var u=r(232);var l=r(228);var c=r(233);var h=r(234);var f=r(235);var p=r(230);var d=r(236);var y=r(87);var v=r(238);var g=r(239);var m=r(240);var _=r(231);var x=r(241);var b=r(30);var S=r(37);var C=r(242);var w=r(243);var I=r(237);var P=r(244);var E=r(140);var M=r(423);var L=r(424);var N=r(245);e.CAllOtherDataItemInfoSource=n.CAllOtherDataItemInfoSource;e.CAnnInfo=i.CAnnInfo;e.CChartLabelFormat=o.CChartLabelFormat;e.CChartTheme=s.CChartTheme;e.CChartThemeInfo=a.CChartThemeInfo;e.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo;e.CChartType=l.CChartType;e.CDotDensityTheme=c.CDotDensityTheme;e.CFourColorTheme=h.CFourColorTheme;e.CGraduatedSymbolTheme=f.CGraduatedSymbolTheme;e.CLinInfo=p.CLinInfo;e.CMultiClassTheme=d.CMultiClassTheme;e.CPntInfo=y.CPntInfo;e.CRandomTheme=v.CRandomTheme;e.CRangeTheme=g.CRangeTheme;e.CRangeThemeInfo=m.CRangeThemeInfo;e.CRegInfo=_.CRegInfo;e.CSimpleTheme=x.CSimpleTheme;e.CTheme=b.CTheme;e.CThemeInfo=S.CThemeInfo;e.CUniqueTheme=C.CUniqueTheme;e.CUniqueThemeInfo=w.CUniqueThemeInfo;e.ExpInfo=I.ExpInfo;e.FolderInfo=P.FolderInfo;e.FolderInfoAttribute=E.FolderInfoAttribute;e.ItemValue=M.ItemValue;e.ThemeOper=L.ThemeOper;e.ThemesInfo=N.ThemesInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ItemValue=undefined;var n=r(0);var i=r(8);var o=r(21);var s=function t(e,r,n,s){var a=s!==undefined?s:{};(0,i.extend)(this,a);this.StartValue=e!==undefined?e:"";this.EndValue=r!==undefined?r:"";this.ClassItemType=n!==undefined?n:o.CItemType.RangeTheme};e.ItemValue=s;n.Zondy.Object.Theme.ItemValue=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeOper=undefined;var n=r(15);var i=T(n);var o=r(2);var s=T(o);var a=r(1);var u=T(a);var l=r(9);var c=T(l);var h=r(3);var f=T(h);var p=r(4);var d=T(p);var y=r(0);var v=r(27);var g=r(8);var m=r(14);var _=r(236);var x=r(241);var b=r(227);var S=r(235);var C=r(233);var w=r(238);var I=r(234);var P=r(242);var E=r(239);var M=r(140);var L=r(244);var N=r(245);function T(t){return t&&t.__esModule?t:{default:t}}var O=function(t){(0,d.default)(e,t);function e(t,r){(0,u.default)(this,e);var r=r||{};r.baseUrl="igs/rest/theme";var n=(0,f.default)(this,(e.__proto__||(0,s.default)(e)).call(this,r));if(t!==null){n.guid=t}else{n.guid=(0,g.newGuid)()}n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,c.default)(e,[{key:"onGetThemesInfoSuccess",value:function t(e){var r=new L.FolderInfo;(0,g.extendDeep)(r,e.result||e);if(r!==null&&r.attribute!==null&&r.attribute.length>0){var n=[];var i=null;for(var o=0;o<r.attribute.length;o++){n[o]=new N.ThemesInfo;if(r.attribute[o]!==null){n[o].LayerName=r.attribute[o].name;i=JSON.parse(r.attribute[o].value);if(i!==null&&i.length>0){n[o].ThemeArr=[];for(var s=0;s<i.length;s++){switch(i[s].name){case"CMultiClassTheme":n[o].ThemeArr[s]=new _.CMultiClassTheme;break;case"CSimpleTheme":n[o].ThemeArr[s]=new x.CSimpleTheme;break;case"CChartTheme":n[o].ThemeArr[s]=new b.CChartTheme;break;case"CGraduatedSymbolTheme":n[o].ThemeArr[s]=new S.CGraduatedSymbolTheme;break;case"CDotDensityTheme":n[o].ThemeArr[s]=new C.CDotDensityTheme;break;case"CRandomTheme":n[o].ThemeArr[s]=new w.CRandomTheme;break;case"CFourColorTheme":n[o].ThemeArr[s]=new I.CFourColorTheme;break;case"CUniqueTheme":n[o].ThemeArr[s]=new P.CUniqueTheme;break;case"CRangeTheme":n[o].ThemeArr[s]=new E.CRangeTheme;break}(0,g.extendDeep)(n[o].ThemeArr[s],JSON.parse(i[s].value))}}}}if(this.p_onSuccess!==null&&typeof this.p_onSuccess==="function"){this.p_onSuccess(n)}}}},{key:"getThemesInfo",value:function t(e,r,n,i){var o=this;o.p_onSuccess=n;var s=Math.random();o.partUrl=e+"/get?idxArr="+r+"&r="+s+"&guid="+o.guid;var a=o.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:o.onGetThemesInfoSuccess,processFailed:i}});u.processAsync()}},{key:"removeThemesInfo",value:function t(e,r,n,i){var o=this;var s=Math.random();o.partUrl=e+"/remove?idxArr="+r+"&r="+s+"&guid="+o.guid;var a=o.getFullUrl();var u=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});u.processAsync()}},{key:"updateThemesInfo",value:function t(e,r,n,o,s){var a=this;var u=Math.random();a.partUrl=e+"/update?idxArr="+r+"&guid="+this.guid;var l=a.getFullUrl();var c=new L.FolderInfo;if(n!==null&&n.length>0){c.name="ThemeInfo";c.attribute=[];for(var h=0;h<n.length;h++){c.attribute[h]=new M.FolderInfoAttribute;c.attribute[h].name=n[h].LayerName;if(n[h].ThemeArr!==null&&n[h].ThemeArr.length>0){var f=[];for(var p=0;p<n[h].ThemeArr.length;p++){if(n[h].ThemeArr[p]!==null)f[p]=new M.FolderInfoAttribute(n[h].ThemeArr[p].Type,(0,i.default)(n[h].ThemeArr[p]))}c.attribute[h].value=(0,i.default)(f)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:a,processCompleted:o,processFailed:s}});d.processAsync({method:"POST",data:(0,i.default)(c),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function t(e,r,n,o,s){var a=this;var u=Math.random();a.partUrl=e+"/add?idxArr="+r+"&guid="+this.guid;var l=a.getFullUrl();var c=new L.FolderInfo;if(n!==null&&n.length>0){c.name="ThemeInfo";c.attribute=[];for(var h=0;h<n.length;h++){c.attribute[h]=new M.FolderInfoAttribute;c.attribute[h].name=n[h].LayerName;if(n[h].ThemeArr!==null&&n[h].ThemeArr.length>0){var f=[];for(var p=0;p<n[h].ThemeArr.length;p++){if(n[h].ThemeArr[p]!==null)f[p]=new M.FolderInfoAttribute(n[h].ThemeArr[p].Type,(0,i.default)(n[h].ThemeArr[p]))}c.attribute[h].value=(0,i.default)(f)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:a,processCompleted:o,processFailed:s}});d.processAsync({method:"POST",data:(0,i.default)(c),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return e}(v.ServiceBase);e.ThemeOper=O;y.Zondy.Service.ThemeOper=O},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=e.GeoDatasetService=e.UserService=undefined;var n=r(426);var i=r(439);var o=r(442);e.UserService=n.UserService;e.GeoDatasetService=i.GeoDatasetService;e.CalculateModelService=o.CalculateModelService;var s={UserService:n.UserService,GeoDatasetService:i.GeoDatasetService,CalculateModelService:o.CalculateModelService};e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.UserService=undefined;var n=r(427);e.UserService=n.UserService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.UserService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(141);function y(t){return t&&t.__esModule?t:{default:t}}var v="login";var g=e.UserService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/clouddisk/rest/users/";return r}(0,u.default)(e,[{key:"login",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+v;this.post(s,e,r,n)}}]);return e}(d.CloudDiskService);e.default=g;p.Zondy.CloudDisk.UserService=g},function(t,e,r){"use strict";var n=r(429);var i=r(246);var o=r(145);var s=Object.prototype.hasOwnProperty;var a={brackets:function t(e){return e+"[]"},comma:"comma",indices:function t(e,r){return e+"["+r+"]"},repeat:function t(e){return e}};var u=Array.isArray;var l=String.prototype.split;var c=Array.prototype.push;var h=function(t,e){c.apply(t,u(e)?e:[e])};var f=Date.prototype.toISOString;var p=o["default"];var d={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:i.encode,encodeValuesOnly:false,format:p,formatter:o.formatters[p],indices:false,serializeDate:function t(e){return f.call(e)},skipNulls:false,strictNullHandling:false};var y=function t(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"||typeof e==="symbol"||typeof e==="bigint"};var v={};var g=function t(e,r,o,s,a,c,f,p,g,m,_,x,b,S,C){var w=e;var I=C;var P=0;var E=false;while((I=I.get(v))!==undefined&&!E){var M=I.get(e);P+=1;if(typeof M!=="undefined"){if(M===P){throw new RangeError("Cyclic object value")}else{E=true}}if(typeof I.get(v)==="undefined"){P=0}}if(typeof f==="function"){w=f(r,w)}else if(w instanceof Date){w=m(w)}else if(o==="comma"&&u(w)){w=i.maybeMap(w,function(t){if(t instanceof Date){return m(t)}return t})}if(w===null){if(s){return c&&!b?c(r,d.encoder,S,"key",_):r}w=""}if(y(w)||i.isBuffer(w)){if(c){var L=b?r:c(r,d.encoder,S,"key",_);if(o==="comma"&&b){var N=l.call(String(w),",");var T="";for(var O=0;O<N.length;++O){T+=(O===0?"":",")+x(c(N[O],d.encoder,S,"value",_))}return[x(L)+"="+T]}return[x(L)+"="+x(c(w,d.encoder,S,"value",_))]}return[x(r)+"="+x(String(w))]}var R=[];if(typeof w==="undefined"){return R}var A;if(o==="comma"&&u(w)){A=[{value:w.length>0?w.join(",")||null:undefined}]}else if(u(f)){A=f}else{var F=Object.keys(w);A=p?F.sort(p):F}for(var D=0;D<A.length;++D){var k=A[D];var j=typeof k==="object"&&k.value!==undefined?k.value:w[k];if(a&&j===null){continue}var B=u(w)?typeof o==="function"?o(r,k):r:r+(g?"."+k:"["+k+"]");C.set(e,P);var G=n();G.set(v,C);h(R,t(j,B,o,s,a,c,f,p,g,m,_,x,b,S,G))}return R};var m=function t(e){if(!e){return d}if(e.encoder!==null&&e.encoder!==undefined&&typeof e.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var r=e.charset||d.charset;if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=o["default"];if(typeof e.format!=="undefined"){if(!s.call(o.formatters,e.format)){throw new TypeError("Unknown format option provided.")}n=e.format}var i=o.formatters[n];var a=d.filter;if(typeof e.filter==="function"||u(e.filter)){a=e.filter}return{addQueryPrefix:typeof e.addQueryPrefix==="boolean"?e.addQueryPrefix:d.addQueryPrefix,allowDots:typeof e.allowDots==="undefined"?d.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:d.charsetSentinel,delimiter:typeof e.delimiter==="undefined"?d.delimiter:e.delimiter,encode:typeof e.encode==="boolean"?e.encode:d.encode,encoder:typeof e.encoder==="function"?e.encoder:d.encoder,encodeValuesOnly:typeof e.encodeValuesOnly==="boolean"?e.encodeValuesOnly:d.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof e.serializeDate==="function"?e.serializeDate:d.serializeDate,skipNulls:typeof e.skipNulls==="boolean"?e.skipNulls:d.skipNulls,sort:typeof e.sort==="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:d.strictNullHandling}};t.exports=function(t,e){var r=t;var i=m(e);var o;var s;if(typeof i.filter==="function"){s=i.filter;r=s("",r)}else if(u(i.filter)){s=i.filter;o=s}var l=[];if(typeof r!=="object"||r===null){return""}var c;if(e&&e.arrayFormat in a){c=e.arrayFormat}else if(e&&"indices"in e){c=e.indices?"indices":"repeat"}else{c="indices"}var f=a[c];if(!o){o=Object.keys(r)}if(i.sort){o.sort(i.sort)}var p=n();for(var d=0;d<o.length;++d){var y=o[d];if(i.skipNulls&&r[y]===null){continue}h(l,g(r[y],y,f,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,p))}var v=l.join(i.delimiter);var _=i.addQueryPrefix===true?"?":"";if(i.charsetSentinel){if(i.charset==="iso-8859-1"){_+="utf8=%26%2310003%3B&"}else{_+="utf8=%E2%9C%93&"}}return v.length>0?_+v:""}},function(t,e,r){"use strict";var n=r(143);var i=r(434);var o=r(436);var s=n("%TypeError%");var a=n("%WeakMap%",true);var u=n("%Map%",true);var l=i("WeakMap.prototype.get",true);var c=i("WeakMap.prototype.set",true);var h=i("WeakMap.prototype.has",true);var f=i("Map.prototype.get",true);var p=i("Map.prototype.set",true);var d=i("Map.prototype.has",true);var y=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n){if(n.key===e){r.next=n.next;n.next=t.next;t.next=n;return n}}};var v=function(t,e){var r=y(t,e);return r&&r.value};var g=function(t,e,r){var n=y(t,e);if(n){n.value=r}else{t.next={key:e,next:t.next,value:r}}};var m=function(t,e){return!!y(t,e)};t.exports=function t(){var e;var r;var n;var i={assert:function(t){if(!i.has(t)){throw new s("Side channel does not contain "+o(t))}},get:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return l(e,t)}}else if(u){if(r){return f(r,t)}}else{if(n){return v(n,t)}}},has:function(t){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(e){return h(e,t)}}else if(u){if(r){return d(r,t)}}else{if(n){return m(n,t)}}return false},set:function(t,i){if(a&&t&&(typeof t==="object"||typeof t==="function")){if(!e){e=new a}c(e,t,i)}else if(u){if(!r){r=new u}p(r,t,i)}else{if(!n){n={key:{},next:null}}g(n,t,i)}}};return i}},function(t,e,r){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var i=r(431);t.exports=function t(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return i()}},function(t,e,r){"use strict";t.exports=function t(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var e={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;e[r]=i;for(r in e){return false}if(typeof Object.keys==="function"&&Object.keys(e).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(e).length!==0){return false}var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(e,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==true){return false}}return true}},function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var o=Object.prototype.toString;var s="[object Function]";t.exports=function t(e){var r=this;if(typeof r!=="function"||o.call(r)!==s){throw new TypeError(n+r)}var a=i.call(arguments,1);var u;var l=function(){if(this instanceof u){var t=r.apply(this,a.concat(i.call(arguments)));if(Object(t)===t){return t}return this}else{return r.apply(e,a.concat(i.call(arguments)))}};var c=Math.max(0,r.length-a.length);var h=[];for(var f=0;f<c;f++){h.push("$"+f)}u=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(l);if(r.prototype){var p=function t(){};p.prototype=r.prototype;u.prototype=new p;p.prototype=null}return u}},function(t,e,r){"use strict";var n=r(144);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=r(143);var i=r(435);var o=i(n("String.prototype.indexOf"));t.exports=function t(e,r){var s=n(e,!!r);if(typeof s==="function"&&o(e,".prototype.")>-1){return i(s)}return s}},function(t,e,r){"use strict";var n=r(144);var i=r(143);var o=i("%Function.prototype.apply%");var s=i("%Function.prototype.call%");var a=i("%Reflect.apply%",true)||n.call(s,o);var u=i("%Object.getOwnPropertyDescriptor%",true);var l=i("%Object.defineProperty%",true);var c=i("%Math.max%");if(l){try{l({},"a",{value:1})}catch(t){l=null}}t.exports=function t(e){var r=a(n,s,arguments);if(u&&l){var i=u(r,"length");if(i.configurable){l(r,"length",{value:1+c(0,e.length-(arguments.length-1))})}}return r};var h=function t(){return a(n,o,arguments)};if(l){l(t.exports,"apply",{value:h})}else{t.exports.apply=h}},function(t,e,r){var n=typeof Map==="function"&&Map.prototype;var i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var o=n&&i&&typeof i.get==="function"?i.get:null;var s=n&&Map.prototype.forEach;var a=typeof Set==="function"&&Set.prototype;var u=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var l=a&&u&&typeof u.get==="function"?u.get:null;var c=a&&Set.prototype.forEach;var h=typeof WeakMap==="function"&&WeakMap.prototype;var f=h?WeakMap.prototype.has:null;var p=typeof WeakSet==="function"&&WeakSet.prototype;var d=p?WeakSet.prototype.has:null;var y=typeof WeakRef==="function"&&WeakRef.prototype;var v=y?WeakRef.prototype.deref:null;var g=Boolean.prototype.valueOf;var m=Object.prototype.toString;var _=Function.prototype.toString;var x=String.prototype.match;var b=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var S=Object.getOwnPropertySymbols;var C=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var w=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var I=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w?"object":"symbol")?Symbol.toStringTag:null;var P=Object.prototype.propertyIsEnumerable;var E=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);var M=r(437).custom;var L=M&&B(M)?M:null;t.exports=function t(e,r,n,i){var a=r||{};if(q(a,"quoteStyle")&&(a.quoteStyle!=="single"&&a.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if(q(a,"maxStringLength")&&(typeof a.maxStringLength==="number"?a.maxStringLength<0&&a.maxStringLength!==Infinity:a.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var u=q(a,"customInspect")?a.customInspect:true;if(typeof u!=="boolean"&&u!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if(q(a,"indent")&&a.indent!==null&&a.indent!=="\t"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0)){throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`')}if(typeof e==="undefined"){return"undefined"}if(e===null){return"null"}if(typeof e==="boolean"){return e?"true":"false"}if(typeof e==="string"){return K(e,a)}if(typeof e==="number"){if(e===0){return Infinity/e>0?"0":"-0"}return String(e)}if(typeof e==="bigint"){return String(e)+"n"}var h=typeof a.depth==="undefined"?5:a.depth;if(typeof n==="undefined"){n=0}if(n>=h&&h>0&&typeof e==="object"){return O(e)?"[Array]":"[Object]"}var f=it(a,n);if(typeof i==="undefined"){i=[]}else if(W(i,e)>=0){return"[Circular]"}function p(e,r,o){if(r){i=i.slice();i.push(r)}if(o){var s={depth:a.depth};if(q(a,"quoteStyle")){s.quoteStyle=a.quoteStyle}return t(e,s,n+1,i)}return t(e,a,n+1,i)}if(typeof e==="function"){var d=V(e);var y=st(e,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(y.length>0?" { "+y.join(", ")+" }":"")}if(B(e)){var v=w?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(e);return typeof e==="object"&&!w?tt(v):v}if(J(e)){var m="<"+String(e.nodeName).toLowerCase();var _=e.attributes||[];for(var x=0;x<_.length;x++){m+=" "+_[x].name+"="+N(T(_[x].value),"double",a)}m+=">";if(e.childNodes&&e.childNodes.length){m+="..."}m+="</"+String(e.nodeName).toLowerCase()+">";return m}if(O(e)){if(e.length===0){return"[]"}var S=st(e,p);if(f&&!nt(S)){return"["+ot(S,f)+"]"}return"[ "+S.join(", ")+" ]"}if(F(e)){var P=st(e,p);if(P.length===0){return"["+String(e)+"]"}return"{ ["+String(e)+"] "+P.join(", ")+" }"}if(typeof e==="object"&&u){if(L&&typeof e[L]==="function"){return e[L]()}else if(u!=="symbol"&&typeof e.inspect==="function"){return e.inspect()}}if(X(e)){var M=[];s.call(e,function(t,r){M.push(p(r,e,true)+" => "+p(t,e))});return rt("Map",o.call(e),M,f)}if(Z(e)){var U=[];c.call(e,function(t){U.push(p(t,e))});return rt("Set",l.call(e),U,f)}if(H(e)){return et("WeakMap")}if(Q(e)){return et("WeakSet")}if(Y(e)){return et("WeakRef")}if(k(e)){return tt(p(Number(e)))}if(G(e)){return tt(p(b.call(e)))}if(j(e)){return tt(g.call(e))}if(D(e)){return tt(p(String(e)))}if(!R(e)&&!A(e)){var $=st(e,p);var at=E?E(e)===Object.prototype:e instanceof Object||e.constructor===Object;var ut=e instanceof Object?"":"null prototype";var lt=!at&&I&&Object(e)===e&&I in e?z(e).slice(8,-1):ut?"Object":"";var ct=at||typeof e.constructor!=="function"?"":e.constructor.name?e.constructor.name+" ":"";var ht=ct+(lt||ut?"["+[].concat(lt||[],ut||[]).join(": ")+"] ":"");if($.length===0){return ht+"{}"}if(f){return ht+"{"+ot($,f)+"}"}return ht+"{ "+$.join(", ")+" }"}return String(e)};function N(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function T(t){return String(t).replace(/"/g,"&quot;")}function O(t){return z(t)==="[object Array]"&&(!I||!(typeof t==="object"&&I in t))}function R(t){return z(t)==="[object Date]"&&(!I||!(typeof t==="object"&&I in t))}function A(t){return z(t)==="[object RegExp]"&&(!I||!(typeof t==="object"&&I in t))}function F(t){return z(t)==="[object Error]"&&(!I||!(typeof t==="object"&&I in t))}function D(t){return z(t)==="[object String]"&&(!I||!(typeof t==="object"&&I in t))}function k(t){return z(t)==="[object Number]"&&(!I||!(typeof t==="object"&&I in t))}function j(t){return z(t)==="[object Boolean]"&&(!I||!(typeof t==="object"&&I in t))}function B(t){if(w){return t&&typeof t==="object"&&t instanceof Symbol}if(typeof t==="symbol"){return true}if(!t||typeof t!=="object"||!C){return false}try{C.call(t);return true}catch(t){}return false}function G(t){if(!t||typeof t!=="object"||!b){return false}try{b.call(t);return true}catch(t){}return false}var U=Object.prototype.hasOwnProperty||function(t){return t in this};function q(t,e){return U.call(t,e)}function z(t){return m.call(t)}function V(t){if(t.name){return t.name}var e=x.call(_.call(t),/^function\s*([\w$]+)/);if(e){return e[1]}return null}function W(t,e){if(t.indexOf){return t.indexOf(e)}for(var r=0,n=t.length;r<n;r++){if(t[r]===e){return r}}return-1}function X(t){if(!o||!t||typeof t!=="object"){return false}try{o.call(t);try{l.call(t)}catch(t){return true}return t instanceof Map}catch(t){}return false}function H(t){if(!f||!t||typeof t!=="object"){return false}try{f.call(t,f);try{d.call(t,d)}catch(t){return true}return t instanceof WeakMap}catch(t){}return false}function Y(t){if(!v||!t||typeof t!=="object"){return false}try{v.call(t);return true}catch(t){}return false}function Z(t){if(!l||!t||typeof t!=="object"){return false}try{l.call(t);try{o.call(t)}catch(t){return true}return t instanceof Set}catch(t){}return false}function Q(t){if(!d||!t||typeof t!=="object"){return false}try{d.call(t,d);try{f.call(t,f)}catch(t){return true}return t instanceof WeakSet}catch(t){}return false}function J(t){if(!t||typeof t!=="object"){return false}if(typeof HTMLElement!=="undefined"&&t instanceof HTMLElement){return true}return typeof t.nodeName==="string"&&typeof t.getAttribute==="function"}function K(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength;var n="... "+r+" more character"+(r>1?"s":"");return K(t.slice(0,e.maxStringLength),e)+n}var i=t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,$);return N(i,"single",e)}function $(t){var e=t.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];if(r){return"\\"+r}return"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function tt(t){return"Object("+t+")"}function et(t){return t+" { ? }"}function rt(t,e,r,n){var i=n?ot(r,n):r.join(", ");return t+" ("+e+") {"+i+"}"}function nt(t){for(var e=0;e<t.length;e++){if(W(t[e],"\n")>=0){return false}}return true}function it(t,e){var r;if(t.indent==="\t"){r="\t"}else if(typeof t.indent==="number"&&t.indent>0){r=Array(t.indent+1).join(" ")}else{return null}return{base:r,prev:Array(e+1).join(r)}}function ot(t,e){if(t.length===0){return""}var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function st(t,e){var r=O(t);var n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++){n[i]=q(t,i)?e(t[i],t):""}}var o=typeof S==="function"?S(t):[];var s;if(w){s={};for(var a=0;a<o.length;a++){s["$"+o[a]]=o[a]}}for(var u in t){if(!q(t,u)){continue}if(r&&String(Number(u))===u&&u<t.length){continue}if(w&&s["$"+u]instanceof Symbol){continue}else if(/[^\w$]/.test(u)){n.push(e(u,t)+": "+e(t[u],t))}else{n.push(u+": "+e(t[u],t))}}if(typeof S==="function"){for(var l=0;l<o.length;l++){if(P.call(t,o[l])){n.push("["+e(o[l])+"]: "+e(t[o[l]],t))}}}return n}},function(t,e){},function(t,e,r){"use strict";var n=r(246);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var s={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})};var u=function(t,e){if(t&&typeof t==="string"&&e.comma&&t.indexOf(",")>-1){return t.split(",")}return t};var l="utf8=%26%2310003%3B";var c="utf8=%E2%9C%93";var h=function t(e,r){var h={};var f=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;var p=r.parameterLimit===Infinity?undefined:r.parameterLimit;var d=f.split(r.delimiter,p);var y=-1;var v;var g=r.charset;if(r.charsetSentinel){for(v=0;v<d.length;++v){if(d[v].indexOf("utf8=")===0){if(d[v]===c){g="utf-8"}else if(d[v]===l){g="iso-8859-1"}y=v;v=d.length}}}for(v=0;v<d.length;++v){if(v===y){continue}var m=d[v];var _=m.indexOf("]=");var x=_===-1?m.indexOf("="):_+1;var b,S;if(x===-1){b=r.decoder(m,s.decoder,g,"key");S=r.strictNullHandling?null:""}else{b=r.decoder(m.slice(0,x),s.decoder,g,"key");S=n.maybeMap(u(m.slice(x+1),r),function(t){return r.decoder(t,s.decoder,g,"value")})}if(S&&r.interpretNumericEntities&&g==="iso-8859-1"){S=a(S)}if(m.indexOf("[]=")>-1){S=o(S)?[S]:S}if(i.call(h,b)){h[b]=n.combine(h[b],S)}else{h[b]=S}}return h};var f=function(t,e,r,n){var i=n?e:u(e,r);for(var o=t.length-1;o>=0;--o){var s;var a=t[o];if(a==="[]"&&r.parseArrays){s=[].concat(i)}else{s=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a;var c=parseInt(l,10);if(!r.parseArrays&&l===""){s={0:i}}else if(!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&(r.parseArrays&&c<=r.arrayLimit)){s=[];s[c]=i}else{s[l]=i}}i=s}return i};var p=function t(e,r,n,o){if(!e){return}var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;var a=/(\[[^[\]]*])/;var u=/(\[[^[\]]*])/g;var l=n.depth>0&&a.exec(s);var c=l?s.slice(0,l.index):s;var h=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)){if(!n.allowPrototypes){return}}h.push(c)}var p=0;while(n.depth>0&&(l=u.exec(s))!==null&&p<n.depth){p+=1;if(!n.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))){if(!n.allowPrototypes){return}}h.push(l[1])}if(l){h.push("["+s.slice(l.index)+"]")}return f(h,r,n,o)};var d=function t(e){if(!e){return s}if(e.decoder!==null&&e.decoder!==undefined&&typeof e.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof e.charset!=="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=typeof e.charset==="undefined"?s.charset:e.charset;return{allowDots:typeof e.allowDots==="undefined"?s.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes==="boolean"?e.allowPrototypes:s.allowPrototypes,allowSparse:typeof e.allowSparse==="boolean"?e.allowSparse:s.allowSparse,arrayLimit:typeof e.arrayLimit==="number"?e.arrayLimit:s.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel==="boolean"?e.charsetSentinel:s.charsetSentinel,comma:typeof e.comma==="boolean"?e.comma:s.comma,decoder:typeof e.decoder==="function"?e.decoder:s.decoder,delimiter:typeof e.delimiter==="string"||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:typeof e.depth==="number"||e.depth===false?+e.depth:s.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===true,interpretNumericEntities:typeof e.interpretNumericEntities==="boolean"?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof e.parameterLimit==="number"?e.parameterLimit:s.parameterLimit,parseArrays:e.parseArrays!==false,plainObjects:typeof e.plainObjects==="boolean"?e.plainObjects:s.plainObjects,strictNullHandling:typeof e.strictNullHandling==="boolean"?e.strictNullHandling:s.strictNullHandling}};t.exports=function(t,e){var r=d(e);if(t===""||t===null||typeof t==="undefined"){return r.plainObjects?Object.create(null):{}}var i=typeof t==="string"?h(t,r):t;var o=r.plainObjects?Object.create(null):{};var s=Object.keys(i);for(var a=0;a<s.length;++a){var u=s[a];var l=p(u,i[u],r,typeof t==="string");o=n.merge(o,l,r)}if(r.allowSparse===true){return o}return n.compact(o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(440);e.GeoDatasetService=n.GeoDatasetService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(441);e.GeoDatasetService=n.GeoDatasetService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GeoDatasetService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(141);function y(t){return t&&t.__esModule?t:{default:t}}var v="schema";var g="featureclass/metadata";var m="raster/metadata";var _="featureclass/statistics";var x=e.GeoDatasetService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/giscore/dataconvert/rest/geodataset/";return r}(0,u.default)(e,[{key:"schema",value:function t(e,r,n){var i=this.serviceUrl;i+=v;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"featuremetadata",value:function t(e,r,n){var i=this.serviceUrl;i+=g;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"rastermetadata",value:function t(e,r,n){var i=this.serviceUrl;i+=m;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"statistics",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"query",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}}]);return e}(d.CloudDiskService);e.default=x;p.Zondy.CloudDisk.GisCore.GeoDatasetService=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=undefined;var n=r(443);e.CalculateModelService=n.CalculateModelService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CalculateModelService=undefined;var n=r(2);var i=g(n);var o=r(1);var s=g(o);var a=r(9);var u=g(a);var l=r(3);var c=g(l);var h=r(4);var f=g(h);var p=r(142);var d=g(p);var y=r(0);var v=r(141);function g(t){return t&&t.__esModule?t:{default:t}}var m="";var _="/catalog";var x="/catalog/{type}?";var b="/execute/{type}/{modelID}?";var S="/node";var C="/node/{id}?";var w="/node/root";var I="/nodes";var P="/nodes/{nodeId}?";var E=e.CalculateModelService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/clouddisk/rest/CalculateModel";return r}(0,u.default)(e,[{key:"add",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+m+"?nodeId="+e.nodeId;delete e.nodeId;this.post(s,e,r,n)}},{key:"catalog",value:function t(e,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"catalogtype",value:function t(e,r,n){var i=e.type;var o=this.serviceUrl;var s=this.getBaseUrl();var a=""+s+o+x;a=a.replace("{type}",i);delete e.type;a=a+d.default.stringify(e);this.get(a,r,n)}},{key:"execute",value:function t(e,r,n){var i=this.serviceUrl;var o=e.type,s=e.modelID;var a=this.getBaseUrl();var u=""+a+i+b;u=u.replace("{type}",o);u=u.replace("{modelID}",s);this.post(u,undefined,r,n)}},{key:"node",value:function t(e,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var s=""+o+i+S;this.post(s,e,r,n)}},{key:"nodeid",value:function t(e,r,n){var i=e.id;var o=this.serviceUrl;var s=""+baseurl+o+C;s=s.replace("{id}",i);this.get(s,r,n)}},{key:"noderoot",value:function t(e,r,n){e={};var i=this.serviceUrl;i+=w;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"nodes",value:function t(e,r,n){e={};var i=this.serviceUrl;i+=I;var o=this.getFullUrl(i,e);this.get(o,r,n)}},{key:"nodesid",value:function t(e,r,n){var i=e.nodeId;var o=this.serviceUrl;var s=""+baseurl+o+P;s=s.replace("{nodeId}",i);delete e.nodeId;s=s+d.default.stringify(e);this.get(s,r,n)}}]);return e}(v.CloudDiskService);e.default=E;y.Zondy.CloudDisk.Model.CalculateModelService=E},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueTheme3DLayer=e.UniqueTheme3DLayer=e.rangeTheme3DLayer=e.RangeTheme3DLayer=e.Theme3DLayer=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.rangeThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=undefined;var n=r(88);var i=r(162);var o=r(281);var s=r(485);var a=r(283);var u=r(500);var l=r(501);var c=r(502);var h=r(503);var f=r(170);var p=r(504);var d=r(505);e.GeoFeatureThemeLayer=n.GeoFeatureThemeLayer;e.ThemeLayer=i.ThemeLayer;e.RangeThemeLayer=o.RangeThemeLayer;e.rangeThemeLayer=o.rangeThemeLayer;e.UniqueThemeLayer=s.UniqueThemeLayer;e.GraphThemeLayer=a.GraphThemeLayer;e.graphThemeLayer=a.graphThemeLayer;e.RandomThemeLayer=u.RandomThemeLayer;e.SimpleThemeLayer=l.SimpleThemeLayer;e.RankSymbolThemeLayer=c.RankSymbolThemeLayer;e.ThemeStyle=h.ThemeStyle;e.Theme3DLayer=f.Theme3DLayer;e.RangeTheme3DLayer=p.RangeTheme3DLayer;e.rangeTheme3DLayer=p.rangeTheme3DLayer;e.UniqueTheme3DLayer=d.UniqueTheme3DLayer;e.uniqueTheme3DLayer=d.uniqueTheme3DLayer},function(t,e,r){r(446);t.exports=r(23).Object.getPrototypeOf},function(t,e,r){var n=r(146);var i=r(247);r(150)("getPrototypeOf",function(){return function t(e){return i(n(e))}})},function(t,e){t.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},function(t,e,r){t.exports={default:r(449),__esModule:true}},function(t,e,r){r(450);var n=r(23).Object;t.exports=function t(e,r,i){return n.defineProperty(e,r,i)}},function(t,e,r){var n=r(54);n(n.S+n.F*!r(47),"Object",{defineProperty:r(46).f})},function(t,e,r){t.exports={default:r(452),__esModule:true}},function(t,e,r){r(453);r(462);t.exports=r(158).f("iterator")},function(t,e,r){"use strict";var n=r(454)(true);r(251)(String,"String",function(t){this._t=String(t);this._i=0},function(){var t=this._t;var e=this._i;var r;if(e>=t.length)return{value:undefined,done:true};r=n(t,e);this._i+=r.length;return{value:r,done:false}})},function(t,e,r){var n=r(152);var i=r(147);t.exports=function(t){return function(e,r){var o=String(i(e));var s=n(r);var a=o.length;var u,l;if(s<0||s>=a)return t?"":undefined;u=o.charCodeAt(s);return u<55296||u>56319||s+1===a||(l=o.charCodeAt(s+1))<56320||l>57343?t?o.charAt(s):u:t?o.slice(s,s+2):(u-55296<<10)+(l-56320)+65536}}},function(t,e,r){"use strict";var n=r(154);var i=r(91);var o=r(157);var s={};r(55)(s,r(57)("iterator"),function(){return this});t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)});o(t,e+" Iterator")}},function(t,e,r){var n=r(46);var i=r(67);var o=r(155);t.exports=r(47)?Object.defineProperties:function t(e,r){i(e);var s=o(r);var a=s.length;var u=0;var l;while(a>u)n.f(e,l=s[u++],r[l]);return e}},function(t,e,r){var n=r(254);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return n(t)=="String"?t.split(""):Object(t)}},function(t,e,r){var n=r(48);var i=r(459);var o=r(460);t.exports=function(t){return function(e,r,s){var a=n(e);var u=i(a.length);var l=o(s,u);var c;if(t&&r!=r)while(u>l){c=a[l++];if(c!=c)return true}else for(;u>l;l++)if(t||l in a){if(a[l]===r)return t||l||0}return!t&&-1}}},function(t,e,r){var n=r(152);var i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(152);var i=Math.max;var o=Math.min;t.exports=function(t,e){t=n(t);return t<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(38).document;t.exports=n&&n.documentElement},function(t,e,r){r(463);var n=r(38);var i=r(55);var o=r(153);var s=r(57)("toStringTag");var a=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var u=0;u<a.length;u++){var l=a[u];var c=n[l];var h=c&&c.prototype;if(h&&!h[s])i(h,s,l);o[l]=o.Array}},function(t,e,r){"use strict";var n=r(464);var i=r(465);var o=r(153);var s=r(48);t.exports=r(251)(Array,"Array",function(t,e){this._t=s(t);this._i=0;this._k=e},function(){var t=this._t;var e=this._k;var r=this._i++;if(!t||r>=t.length){this._t=undefined;return i(1)}if(e=="keys")return i(0,r);if(e=="values")return i(0,t[r]);return i(0,[r,t[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(467),__esModule:true}},function(t,e,r){r(468);r(472);r(473);r(474);t.exports=r(23).Symbol},function(t,e,r){"use strict";var n=r(38);var i=r(45);var o=r(47);var s=r(54);var a=r(252);var u=r(469).KEY;var l=r(68);var c=r(149);var h=r(157);var f=r(90);var p=r(57);var d=r(158);var y=r(159);var v=r(470);var g=r(471);var m=r(67);var _=r(56);var x=r(146);var b=r(48);var S=r(151);var C=r(91);var w=r(154);var I=r(256);var P=r(161);var E=r(255);var M=r(46);var L=r(155);var N=P.f;var T=M.f;var O=I.f;var R=n.Symbol;var A=n.JSON;var F=A&&A.stringify;var D="prototype";var k=p("_hidden");var j=p("toPrimitive");var B={}.propertyIsEnumerable;var G=c("symbol-registry");var U=c("symbols");var q=c("op-symbols");var z=Object[D];var V=typeof R=="function"&&!!E.f;var W=n.QObject;var X=!W||!W[D]||!W[D].findChild;var H=o&&l(function(){return w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(t,e,r){var n=N(z,e);if(n)delete z[e];T(t,e,r);if(n&&t!==z)T(z,e,n)}:T;var Y=function(t){var e=U[t]=w(R[D]);e._k=t;return e};var Z=V&&typeof R.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof R};var Q=function t(e,r,n){if(e===z)Q(q,r,n);m(e);r=S(r,true);m(n);if(i(U,r)){if(!n.enumerable){if(!i(e,k))T(e,k,C(1,{}));e[k][r]=true}else{if(i(e,k)&&e[k][r])e[k][r]=false;n=w(n,{enumerable:C(0,false)})}return H(e,r,n)}return T(e,r,n)};var J=function t(e,r){m(e);var n=v(r=b(r));var i=0;var o=n.length;var s;while(o>i)Q(e,s=n[i++],r[s]);return e};var K=function t(e,r){return r===undefined?w(e):J(w(e),r)};var $=function t(e){var r=B.call(this,e=S(e,true));if(this===z&&i(U,e)&&!i(q,e))return false;return r||!i(this,e)||!i(U,e)||i(this,k)&&this[k][e]?r:true};var tt=function t(e,r){e=b(e);r=S(r,true);if(e===z&&i(U,r)&&!i(q,r))return;var n=N(e,r);if(n&&i(U,r)&&!(i(e,k)&&e[k][r]))n.enumerable=true;return n};var et=function t(e){var r=O(b(e));var n=[];var o=0;var s;while(r.length>o){if(!i(U,s=r[o++])&&s!=k&&s!=u)n.push(s)}return n};var rt=function t(e){var r=e===z;var n=O(r?q:b(e));var o=[];var s=0;var a;while(n.length>s){if(i(U,a=n[s++])&&(r?i(z,a):true))o.push(U[a])}return o};if(!V){R=function t(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:undefined);var r=function(t){if(this===z)r.call(q,t);if(i(this,k)&&i(this[k],e))this[k][e]=false;H(this,e,C(1,t))};if(o&&X)H(z,e,{configurable:true,set:r});return Y(e)};a(R[D],"toString",function t(){return this._k});P.f=tt;M.f=Q;r(257).f=I.f=et;r(160).f=$;E.f=rt;if(o&&!r(89)){a(z,"propertyIsEnumerable",$,true)}d.f=function(t){return Y(p(t))}}s(s.G+s.W+s.F*!V,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)p(nt[it++]);for(var ot=L(p.store),st=0;ot.length>st;)y(ot[st++]);s(s.S+s.F*!V,"Symbol",{for:function(t){return i(G,t+="")?G[t]:G[t]=R(t)},keyFor:function t(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var r in G)if(G[r]===e)return r},useSetter:function(){X=true},useSimple:function(){X=false}});s(s.S+s.F*!V,"Object",{create:K,defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var at=l(function(){E.f(1)});s(s.S+s.F*at,"Object",{getOwnPropertySymbols:function t(e){return E.f(x(e))}});A&&s(s.S+s.F*(!V||l(function(){var t=R();return F([t])!="[null]"||F({a:t})!="{}"||F(Object(t))!="{}"})),"JSON",{stringify:function t(e){var r=[e];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!_(i)&&e===undefined||Z(e))return;if(!g(i))i=function(t,e){if(typeof o=="function")e=o.call(this,t,e);if(!Z(e))return e};r[1]=i;return F.apply(A,r)}});R[D][j]||r(55)(R[D],j,R[D].valueOf);h(R,"Symbol");h(Math,"Math",true);h(n.JSON,"JSON",true)},function(t,e,r){var n=r(90)("meta");var i=r(56);var o=r(45);var s=r(46).f;var a=0;var u=Object.isExtensible||function(){return true};var l=!r(68)(function(){return u(Object.preventExtensions({}))});var c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})};var h=function(t,e){if(!i(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i};var f=function(t,e){if(!o(t,n)){if(!u(t))return true;if(!e)return false;c(t)}return t[n].w};var p=function(t){if(l&&d.NEED&&u(t)&&!o(t,n))c(t);return t};var d=t.exports={KEY:n,NEED:false,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,r){var n=r(155);var i=r(255);var o=r(160);t.exports=function(t){var e=n(t);var r=i.f;if(r){var s=r(t);var a=o.f;var u=0;var l;while(s.length>u)if(a.call(t,l=s[u++]))e.push(l)}return e}},function(t,e,r){var n=r(254);t.exports=Array.isArray||function t(e){return n(e)=="Array"}},function(t,e){},function(t,e,r){r(159)("asyncIterator")},function(t,e,r){r(159)("observable")},function(t,e,r){t.exports={default:r(476),__esModule:true}},function(t,e,r){r(477);t.exports=r(23).Object.setPrototypeOf},function(t,e,r){var n=r(54);n(n.S,"Object",{setPrototypeOf:r(478).set})},function(t,e,r){var n=r(56);var i=r(67);var o=function(t,e){i(t);if(!n(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(248)(Function.call,r(161).f(Object.prototype,"__proto__").set,2);n(t,[]);e=!(t instanceof Array)}catch(t){e=true}return function t(r,i){o(r,i);if(e)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:o}},function(t,e,r){t.exports={default:r(480),__esModule:true}},function(t,e,r){r(481);var n=r(23).Object;t.exports=function t(e,r){return n.create(e,r)}},function(t,e,r){var n=r(54);n(n.S,"Object",{create:r(154)})},function(t,e,r){t.exports={default:r(483),__esModule:true}},function(t,e,r){r(484);var n=r(23).Object;t.exports=function t(e,r){return n.getOwnPropertyDescriptor(e,r)}},function(t,e,r){var n=r(48);var i=r(161).f;r(150)("getOwnPropertyDescriptor",function(){return function t(e,r){return i(n(e),r)}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueThemeLayer=e.UniqueThemeLayer=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(12);var f=_(h);var p=r(17);var d=_(p);var y=r(7);var v=r(281);var g=r(19);var m=r(486);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.copyAttributesWithClip,b=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.themeField=r.themeField;n.style=r.style;n.styleGroups=r.styleGroups;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;return n}(0,u.default)(e,[{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=g.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(e,this,g.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(e){var r={};var n=e;r=x(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var s=this.styleGroups;var a=false;var u=null;for(var l in o){if(i===l){a=true;u=o[l];break}}if(a){for(var c=0,h=s.length;c<h;c++){if(u.toString()===s[c].value.toString()){var f=s[c].style;r=x(r,f)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=x(n.style)}return r}}]);return e}(v.RangeThemeLayer);e.UniqueThemeLayer=S;var C=e.uniqueThemeLayer=function t(e,r){return new S(e,r)};b.Map.uniqueThemeLayer=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=undefined;var n=r(487);var i=r(488);var o=r(489);var s=r(39);var a=r(490);var u=r(491);var l=r(492);var c=r(282);var h=r(493);var f=r(71);var p=r(494);var d=r(495);e.Bar=n.Bar;e.Bar3D=i.Bar3D;e.OverlayCircle=o.Circle;e.Graph=s.Graph;e.Line=a.Line;e.Pie=u.Pie;e.OverlayPoint=l.Point;e.RankSymbol=c.RankSymbol;e.Ring=h.Ring;e.ThemeVector=f.ThemeVector;e.ShapeFactory=p.ShapeFactory;e.ShapeParameters=p.ShapeParameters;e.FeatureCircle=p.FeatureCircle;e.Image=p.Image;e.Label=p.Label;e.FeatureLine=p.FeatureLine;e.Point=p.Point;e.FeaturePolygon=p.FeaturePolygon;e.FeatureRectangle=p.FeatureRectangle;e.Sector=p.Sector;e.FeatureTheme=p.FeatureTheme;e.LevelRenderer=d.LevelRenderer;e.Render=d.Render;e.Animation=d.Animation;e.Animator=d.Animator;e.Area=d.Area;e.Clip=d.Clip;e.Color=d.Color;e.ComputeBoundingBox=d.ComputeBoundingBox;e.Config=d.Config;e.LevelRendererCurve=d.LevelRendererCurve;e.Easing=d.Easing;e.Env=d.Env;e.LevelRendererEvent=d.LevelRendererEvent;e.Eventful=d.Eventful;e.Group=d.Group;e.Handler=d.Handler;e.Http=d.Http;e.Math=d.Math;e.Matrix=d.Matrix;e.Painter=d.Painter;e.PaintLayer=d.PaintLayer;e.Shape=d.Shape;e.SmicBrokenLine=d.SmicBrokenLine;e.SmicCircle=d.SmicCircle;e.SmicEllipse=d.SmicEllipse;e.SmicImage=d.SmicImage;e.SmicIsogon=d.SmicIsogon;e.SmicPoint=d.SmicPoint;e.SmicPolygon=d.SmicPolygon;e.SmicRectangle=d.SmicRectangle;e.SmicRing=d.SmicRing;e.SmicSector=d.SmicSector;e.SmicStar=d.SmicStar;e.SmicText=d.SmicText;e.Storage=d.Storage;e.Transformable=d.Transformable;e.Util=d.Util;e.LevelRendererVector=d.LevelRendererVector;e.SUtil=d.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bar=undefined;var n=r(10);var i=x(n);var o=r(5);var s=x(o);var a=r(6);var u=x(a);var l=r(11);var c=x(l);var h=r(13);var f=x(h);var p=r(12);var d=x(p);var y=r(7);var v=r(19);var g=r(96);var m=r(163);var _=r(39);function x(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy,S=y.Common.copyAttributesWithClip;var C=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Bar";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]];var r={showShadow:true,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2};var n=this.setting;if(!n.barLinearGradient){n.barLinearGradient=e}if(!n.dataViewBoxParameter){if(typeof n.useAxis==="undefined"||n.useAxis){n.dataViewBoxParameter=[45,15,15,15]}else{n.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var o=this.dataViewBox;var s=this.dataValues;if(s.length<1){return}for(var a=0,u=s.length;a<u;a++){if(s[a]<i[0]||s[a]>i[1]){return}}var l=this.calculateXShapeInfo();if(!l){return}var c=l.xPositions;var h=l.width;if(typeof n.useBackground==="undefined"||n.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,n))}if(typeof n.useAxis==="undefined"||n.useAxis){this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,o,n,l))}for(var f=0;f<s.length;f++){var p=o[1]-(s[f]-i[0])/this.DVBUnitValue;var d=[[c[f]-h/2,o[1]-1],[c[f]+h/2,o[1]-1],[c[f]+h/2,p],[c[f]-h/2,p]];var y=new g.Polygon(d);if(typeof n.showShadow==="undefined"||n.showShadow){if(n.barShadowStyle){var m=n.barShadowStyle;if(m.shadowBlur){r.shadowBlur=m.shadowBlur}if(m.shadowColor){r.shadowColor=m.shadowColor}if(m.shadowOffsetX){r.shadowOffsetX=m.shadowOffsetX}if(m.shadowOffsetY){r.shadowOffsetY=m.shadowOffsetY}}y.style={};S(y.style,r)}y.refDataID=this.data.FID;y.dataInfo={field:this.fields[f],value:s[f]};if(typeof n.barHoverAble!=="undefined"){y.hoverable=n.barHoverAble}if(typeof n.barClickAble!=="undefined"){y.clickable=n.barClickAble}this.shapes.push(this.shapeFactory.createShape(y))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=a-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}s=u/n}else{s=a/(2*n+1);i=[s,s,s]}var l=0;for(var c=0;c<n;c++){if(c===0){l=i[0]+s/2}else{l+=s+i[1]}o.push(e[0]+l)}return{xPositions:o,width:s}}},{key:"resetLinearGradient",value:function t(){if(this.RelativeCoordinate){var e=this.shapes.length;var r=this.setting.barLinearGradient;var n=-1;for(var i=0;i<e;i++){var o=this.shapes[i];if(o.CLASS_NAME==="Zondy.LevelRenderer.Shape.SmicPolygon"){var s=o.style;var a=this.location[0]+s.pointList[0][0];var u=this.location[0]+s.pointList[1][0];n++;if(n>=r.length){n=n%r.length}var l=r[n][0];var c=r[n][1];var h=new m.Color;var f=h.getLinearGradient(a,0,u,0,[[0,l],[1,c]]);o.style.color=f}}}}}]);return e}(_.Graph);e.Bar=C;b.Theme.Bar=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bar3D=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(19);var g=r(96);var m=r(39);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy,b=y.Common.newGuid;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Bar3D";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,25,20,20]}else{e.dataViewBoxParameter=[5,5,5,5]}}e.axisUseArrow=typeof e.axisUseArrow!=="undefined"?e.axisUseArrow:true;e.axisXLabelsOffset=typeof e.axisXLabelsOffset!=="undefined"?e.axisXLabelsOffset:[-10,10];if(!this.initBaseParameter()){return}var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox;var i=this.dataValues;if(i.length<1){return}for(var o=0,s=i.length;o<s;o++){if(i[o]<r[0]||i[o]>r[1]){return}}var a=this.calculateXShapeInfo();if(!a){return}var u=a.xPositions;var l=a.width;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}if(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15){e.axis3DParameter=20}if(typeof e.useAxis==="undefined"||e.useAxis){this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,n,e,a))}var c=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10;for(var h=0;h<i.length;h++){var f=n[1]-(i[h]-r[0])/this.DVBUnitValue;var p=u[h]-l/2;var d=u[h]+l/2;var y=[[p,f],[d,f],[d-c,f+c],[p-c,f+c]];var m=[[d,f],[d-c,f+c],[d-c,n[1]+c],[d,n[1]]];var _=[[p-c,n[1]+c],[d-c,n[1]+c],[d-c,f+c],[p-c,f+c]];if(c<=0){_=[[p,n[1]],[d,n[1]],[d,f],[p,f]]}var x=new g.Polygon(y);var S=new g.Polygon(m);var C=new g.Polygon(_);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle;e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields;e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain;e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle;e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields;e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain;C.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,h,i[h]);S.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,h,i[h]);x.style=v.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,h,i[h]);e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle;e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle;C.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barFaceHoverStyle);S.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barSideHoverStyle);x.highlightStyle=v.ShapeFactory.ShapeStyleTool({stroke:true},e.barTopHoverStyle);x.refDataID=S.refDataID=C.refDataID=this.data.FID;x.isHoverByRefDataID=S.isHoverByRefDataID=C.isHoverByRefDataID=true;x.refDataHoverGroup=S.refDataHoverGroup=C.refDataHoverGroup=b();x.dataInfo=S.dataInfo=C.dataInfo={field:this.fields[h],value:i[h]};if(typeof e.barHoverAble!=="undefined"){x.hoverable=S.hoverable=C.hoverable=e.barHoverAble}if(typeof e.barClickAble!=="undefined"){x.clickable=S.clickable=C.clickable=e.barClickAble}this.shapes.push(this.shapeFactory.createShape(S));this.shapes.push(this.shapeFactory.createShape(x));this.shapes.push(this.shapeFactory.createShape(C))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=a-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}s=u/n}else{s=a/(2*n+1);i=[s,s,s]}var l=0;for(var c=0;c<n;c++){if(c===0){l=i[0]+s/2}else{l+=s+i[1]}o.push(e[0]+l)}return{xPositions:o,width:s}}}]);return e}(m.Graph);e.Bar3D=S;x.Theme.Bar3D=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Circle=undefined;var n=r(10);var i=x(n);var o=r(5);var s=x(o);var a=r(6);var u=x(a);var l=r(11);var c=x(l);var h=r(13);var f=x(h);var p=r(12);var d=x(p);var y=r(7);var v=r(59);var g=r(167);var m=r(19);var _=r(282);function x(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Circle";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e="#ff9277";if(!this.setting){return false}var r=this.setting;if(!r.codomain){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=v.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];var o=this.dataValues;if(!r.maxR){r.maxR=100}if(!r.minR){r.minR=0}var s=this.DVBCodomain;if(s&&s[1]-s[0]>0){this.DVBUnitValue=r.maxR/(s[1]-s[0])}else{this.DVBUnitValue=r.maxR}var a=this.DVBUnitValue;var u=o[0]*a+r.minR;this.width=2*u;this.height=2*u;if(!this.initBaseParameter()){return}if(s){if(o[0]<s[0]||o[0]>s[1]){return}}var l=this.DVBCenterPoint;var c=new g.Circle(l[0],l[1],u);c.style=m.ShapeFactory.ShapeStyleTool(null,r.circleStyle,null,null,0);if(typeof r.fillColor!=="undefined"){c.style.fillColor=r.fillColor}else{c.style.fillColor=e}c.highlightStyle=m.ShapeFactory.ShapeStyleTool(null,r.circleHoverStyle);if(typeof r.circleHoverAble!=="undefined"){c.hoverable=r.circleHoverAble}if(typeof r.circleClickAble!=="undefined"){c.clickable=r.circleClickAble}c.refDataID=this.data.FID;c.dataInfo={field:this.fields[0],r:u,value:o[0]};this.shapes.push(this.shapeFactory.createShape(c));this.shapesConvertToRelativeCoordinate()}}]);return e}(_.RankSymbol);e.Circle=S;b.Theme.Circle=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Line=undefined;var n=r(10);var i=x(n);var o=r(5);var s=x(o);var a=r(6);var u=x(a);var l=r(11);var c=x(l);var h=r(13);var f=x(h);var p=r(12);var d=x(p);var y=r(7);var v=r(19);var g=r(95);var m=r(166);var _=r(39);function x(t){return t&&t.__esModule?t:{default:t}}var b=y.Common.Zondy;var S=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Line";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,15,15,15]}else{e.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;if(o.length<1){return}var s=this.calculateXShapeInfo();if(!s){return}var a=s.xPositions;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,r,e,s));var u;var l;var c=[];var h=[];for(var f=0,p=o.length;f<p;f++){if(o[f]<n[0]||o[f]>n[1]){return null}u=a[f];l=r[1]-(o[f]-n[0])/i;var d=new g.Point(u,l);d.style=v.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]);d.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle);if(typeof e.pointHoverAble!=="undefined"){d.hoverable=e.pointHoverAble}if(typeof e.pointClickAble!=="undefined"){d.clickable=e.pointClickAble}d.refDataID=this.data.FID;d.dataInfo={field:this.fields[f],value:o[f]};h.push(this.shapeFactory.createShape(d));var y=[u,l];c.push(y)}var _=new m.Line(c);_.style=v.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle);_.clickable=false;_.hoverable=false;var x=this.shapeFactory.createShape(_);this.shapes.push(x);this.shapes=this.shapes.concat(h);this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=a-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=a/(n+1);i=[u,u,u]}var c=0;for(var h=0;h<n;h++){if(h===0){c=i[0]}else{c+=u}o.push(e[0]+c)}return{xPositions:o,width:s}}}]);return e}(_.Graph);e.Line=S;b.Theme.Line=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Pie=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(19);var g=r(97);var m=r(39);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Pie";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;var r=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(!this.initBaseParameter()){return}if(e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var s=0;for(var a=0;a<n.length;a++){s+=Math.abs(n[a])}this.DVBUnitValue=360/s;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var c=0;var h=0;var f=c;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;for(var d=0;d<n.length;d++){var y=Math.abs(n[d]);if(d===0){h=c+y*u}else if(d===y.length-1){h=f}else{h=c+y*u}if(h-c>=360){h=359.9999999}var m=new g.Sector(l[0],l[1],p,c,h);if(typeof e.sectorStyleByFields==="undefined"){var _=d%r.length;m.style=v.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,r,null,_)}else{m.style=v.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,n[d])}m.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle);if(typeof e.sectorHoverAble!=="undefined"){m.hoverable=e.sectorHoverAble}if(typeof e.sectorClickAble!=="undefined"){m.clickable=e.sectorClickAble}m.refDataID=this.data.FID;m.dataInfo={field:this.fields[d],value:n[d]};this.shapes.push(this.shapeFactory.createShape(m));c=h}this.shapesConvertToRelativeCoordinate()}}]);return e}(m.Graph);e.Pie=b;x.Theme.Pie=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Point=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(19);var g=r(95);var m=r(39);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Point";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){var e=this.setting;if(!e.dataViewBoxParameter){if(typeof e.useAxis==="undefined"||e.useAxis){e.dataViewBoxParameter=[45,15,15,15]}else{e.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;var s=this.calculateXShapeInfo();if(!s){return}var a=s.xPositions;if(typeof e.useBackground==="undefined"||e.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,e))}this.shapes=this.shapes.concat(v.ShapeFactory.GraphAxis(this.shapeFactory,r,e,s));var u;var l;for(var c=0,h=o.length;c<h;c++){if(o[c]<n[0]||o[c]>n[1]){return null}u=a[c];l=r[1]-(o[c]-n[0])/i;var f=new g.Point(u,l);f.style=v.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,c,o[c]);f.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle);if(typeof e.pointHoverAble!=="undefined"){f.hoverable=e.pointHoverAble}if(typeof e.pointClickAble!=="undefined"){f.clickable=e.pointClickAble}f.refDataID=this.data.FID;f.dataInfo={field:this.fields[c],value:o[c]};this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function t(){var e=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var s=0;var a=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=a-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=a/(n+1);i=[u,u,u]}var c=0;for(var h=0;h<n;h++){if(h===0){c=i[0]}else{c+=u}o.push(e[0]+c)}return{xPositions:o,width:s}}}]);return e}(m.Graph);e.Point=b;x.Theme.Point=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Ring=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(13);var f=_(h);var p=r(12);var d=_(p);var y=r(7);var v=r(19);var g=r(97);var m=r(39);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.Zondy;var b=function(t){(0,d.default)(e,t);function e(t,r,n,o,a,u){(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,o,a,u));l.CLASS_NAME="Zondy.Theme.Ring";return l}(0,u.default)(e,[{key:"destroy",value:function t(){(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function t(){if(!this.initBaseParameter()){return}var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];var r=this.setting;if(r.useBackground){this.shapes.push(v.ShapeFactory.Background(this.shapeFactory,this.chartBox,r))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var s=0;for(var a=0;a<n.length;a++){s+=Math.abs(n[a])}this.DVBUnitValue=360/s;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var c=0;var h=0;var f=c;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;var d=r.innerRingRadius>=0&&r.innerRingRadius<p;var y=typeof r.innerRingRadius!=="undefined"&&!isNaN(r.innerRingRadius)&&d?r.innerRingRadius:0;for(var m=0;m<n.length;m++){var _=Math.abs(n[m]);if(m===0){h=c+_*u}else if(m===_.length-1){h=f}else{h=c+_*u}var x=new g.Sector(l[0],l[1],p,c,h,y);if(typeof r.sectorStyleByFields==="undefined"){var b=m%e.length;x.style=v.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,e,null,b)}else{x.style=v.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,r.sectorStyleByFields,r.sectorStyleByCodomain,m,n[m])}x.highlightStyle=v.ShapeFactory.ShapeStyleTool(null,r.sectorHoverStyle);if(typeof r.sectorHoverAble!=="undefined"){x.hoverable=r.sectorHoverAble}if(typeof r.sectorClickAble!=="undefined"){x.clickable=r.sectorClickAble}x.refDataID=this.data.FID;x.dataInfo={field:this.fields[m],value:n[m]};this.shapes.push(this.shapeFactory.createShape(x));c=h}this.shapesConvertToRelativeCoordinate()}}]);return e}(m.Graph);e.Ring=b;x.Theme.Ring=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=undefined;var n=r(19);var i=r(33);var o=r(167);var s=r(276);var a=r(275);var u=r(166);var l=r(95);var c=r(96);var h=r(274);var f=r(97);var p=r(59);e.ShapeFactory=n.ShapeFactory;e.ShapeParameters=i.ShapeParameters;e.FeatureCircle=o.Circle;e.Image=s.Image;e.Label=a.Label;e.FeatureLine=u.Line;e.Point=l.Point;e.FeaturePolygon=c.Polygon;e.FeatureRectangle=h.Rectangle;e.Sector=f.Sector;e.FeatureTheme=p.Theme},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=undefined;var n=r(258);var i=r(259);var o=r(271);var s=r(262);var a=r(272);var u=r(163);var l=r(263);var c=r(164);var h=r(93);var f=r(273);var p=r(264);var d=r(265);var y=r(70);var v=r(261);var g=r(270);var m=r(266);var _=r(267);var x=r(268);var b=r(269);var S=r(22);var C=r(169);var w=r(278);var I=r(496);var P=r(165);var E=r(497);var M=r(168);var L=r(98);var N=r(279);var T=r(498);var O=r(280);var R=r(499);var A=r(277);var F=r(260);var D=r(92);var k=r(58);var j=r(94);var B=r(24);e.LevelRenderer=n.LevelRenderer;e.Render=i.Render;e.Animation=o.Animation;e.Animator=o.Animator;e.Area=s.Area;e.Clip=a.Clip;e.Color=u.Color;e.ComputeBoundingBox=l.ComputeBoundingBox;e.Config=c.Config;e.LevelRendererCurve=h.Curve;e.Easing=f.Easing;e.Env=p.Env;e.LevelRendererEvent=d.Event;e.Eventful=y.Eventful;e.Group=v.Group;e.Handler=g.Handler;e.Http=m.Http;e.Math=_.Math;e.Matrix=x.Matrix;e.Painter=b.Painter;e.PaintLayer=b.PaintLayer;e.Shape=S.Shape;e.SmicBrokenLine=C.SmicBrokenLine;e.SmicCircle=w.SmicCircle;e.SmicEllipse=I.SmicEllipse;e.SmicImage=P.SmicImage;e.SmicIsogon=E.SmicIsogon;e.SmicPoint=M.SmicPoint;e.SmicPolygon=L.SmicPolygon;e.SmicRectangle=N.SmicRectangle;e.SmicRing=T.SmicRing;e.SmicSector=O.SmicSector;e.SmicStar=R.SmicStar;e.SmicText=A.SmicText;e.Storage=F.Storage;e.Transformable=D.Transformable;e.Util=k.Util;e.LevelRendererVector=j.Vector;e.SUtil=B.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicEllipse=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicellipse";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=.5522848;var o=r.x+n[0];var s=r.y+n[1];var a=r.a;var u=r.b;var l=a*i;var c=u*i;e.moveTo(o-a,s);e.bezierCurveTo(o-a,s-c,o-l,s-u,o,s-u);e.bezierCurveTo(o+l,s-u,o+a,s-c,o+a,s);e.bezierCurveTo(o+a,s+c,o+l,s+u,o,s+u);e.bezierCurveTo(o-l,s+u,o-a,s+c,o-a,s);e.closePath()}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.a-n/2),y:Math.round(e.x+r[1]-e.b-n/2),width:e.a*2+n,height:e.b*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicEllipse=_;m.LevelRenderer.SmicEllipse=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicIsogon=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(22);var g=r(24);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicisogon";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=g.SUtil.Util_math.sin;var o=g.SUtil.Util_math.cos;var s=Math.PI;var a=r.n;if(!a||a<2){return}var u=r.x+n[0];var l=r.y+n[1];var c=r.r;var h=2*s/a;var f=-s/2;var p=u+c*o(f);var d=l+c*i(f);f+=h;var y=r.pointList=[];y.push([p,d]);for(var v=0,m=a-1;v<m;v++){y.push([u+c*o(f),l+c*i(f)]);f+=h}y.push([p,d]);e.moveTo(y[0][0],y[0][1]);for(var _=0;_<y.length;_++){e.lineTo(y[_][0],y[_][1])}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicIsogon=x;_.LevelRenderer.SmicIsogon=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicRing=undefined;var n=r(10);var i=g(n);var o=r(5);var s=g(o);var a=r(6);var u=g(a);var l=r(11);var c=g(l);var h=r(13);var f=g(h);var p=r(12);var d=g(p);var y=r(7);var v=r(22);function g(t){return t&&t.__esModule?t:{default:t}}var m=y.Common.Zondy;var _=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicring";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;e.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,false);e.moveTo(r.x+n[0]+r.r0,r.y+n[1]);e.arc(r.x+n[0],r.y+n[1],r.r0,0,Math.PI*2,true);return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicRing=_;m.LevelRenderer.SmicRing=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SmicStar=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(7);var v=r(22);var g=r(24);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var x=function(t){(0,d.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.type="smicstar";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar";return r}(0,u.default)(e,[{key:"destroy",value:function t(){this.type=null;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function t(e,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.n;if(!i||i<2){return}var o=g.SUtil.Util_math.sin;var s=g.SUtil.Util_math.cos;var a=Math.PI;var u=r.x+n[0];var l=r.y+n[1];var c=r.r;var h=r.r0;if(h==null){h=i>4?c*s(2*a/i)/s(a/i):c/3}var f=a/i;var p=-a/2;var d=u+c*s(p);var y=l+c*o(p);p+=f;var v=r.pointList=[];v.push([d,y]);for(var m=0,_=i*2-1,x;m<_;m++){x=m%2===0?h:c;v.push([u+x*s(p),l+x*o(p)]);p+=f}v.push([d,y]);e.moveTo(v[0][0],v[0][1]);for(var b=0;b<v.length;b++){e.lineTo(v[b][0],v[b][1])}e.closePath();return}},{key:"getRect",value:function t(e){if(e.__rect){return e.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(e.brushType==="stroke"||e.brushType==="fill"){n=e.lineWidth||1}else{n=0}e.__rect={x:Math.round(e.x+r[0]-e.r-n/2),y:Math.round(e.y+r[1]-e.r-n/2),width:e.r*2+n,height:e.r*2+n};return e.__rect}}]);return e}(v.Shape);e.SmicStar=x;_.LevelRenderer.SmicStar=x},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.randomThemeLayer=e.RandomThemeLayer=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(12);var f=_(h);var p=r(17);var d=_(p);var y=r(7);var v=r(88);var g=r(71);var m=r(19);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.copyAttributesWithClip,b=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"getColor",value:function t(){var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=e.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(){var e=this;var r=x({},e.style);r.fillColor=e.getColor();return r}}]);return e}(v.GeoFeatureThemeLayer);e.RandomThemeLayer=S;var C=e.randomThemeLayer=function t(e,r){return new S(e,r)};b.Map.randomThemeLayer=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.simpleThemeLayer=e.SimpleThemeLayer=undefined;var n=r(10);var i=_(n);var o=r(5);var s=_(o);var a=r(6);var u=_(a);var l=r(11);var c=_(l);var h=r(12);var f=_(h);var p=r(17);var d=_(p);var y=r(7);var v=r(88);var g=r(71);var m=r(19);function _(t){return t&&t.__esModule?t:{default:t}}var x=y.Common.copyAttributesWithClip,b=y.Common.Zondy;var S=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(e,[{key:"getColor",value:function t(){var e="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=e.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function t(e){var r=this.getStyleByData(e);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new g.ThemeVector(e,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function t(){var e=this;var r=x({},e.style);if(r.fillColor==null){r.fillColor=e.getColor()}e.style=r;return r}}]);return e}(v.GeoFeatureThemeLayer);e.SimpleThemeLayer=S;var C=e.simpleThemeLayer=function t(e,r){return new S(e,r)};b.Map.simpleThemeLayer=C},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rankSymbolThemeLayer=e.RankSymbolThemeLayer=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(12);var f=m(h);var p=r(17);var d=m(p);var y=r(7);var v=r(59);var g=r(283);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.Common.Zondy;var x=function(t){(0,f.default)(e,t);function e(t,r,n){(0,s.default)(this,e);var o=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));o.symbolType=r;o.symbolSetting=n.symbolSetting;o.themeField=n.themeField;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(e,[{key:"setSymbolType",value:function t(e){this.symbolType=e;this.redraw()}},{key:"createThematicFeature",value:function t(e){var r;if(v.Theme[this.symbolType]&&this.themeField&&this.symbolSetting){r=new v.Theme[this.symbolType](e,this,[this.themeField],this.symbolSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}}]);return e}(g.GraphThemeLayer);e.RankSymbolThemeLayer=x;var b=e.rankSymbolThemeLayer=function t(e,r,n){return new x(e,r,n)};_.Map.rankSymbolThemeLayer=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ThemeStyle=undefined;var n=r(5);var i=s(n);var o=r(7);function s(t){return t&&t.__esModule?t:{default:t}}var a=o.Common.extend,u=o.Common.Zondy;var l=function t(e){(0,i.default)(this,t);e=e||{};this.fill=true;this.fillColor="#000000";this.fillOpacity=1;this.stroke=false;this.strokeColor="#000000";this.strokeOpacity=1;this.strokeWidth=1;this.strokeLinecap="butt";this.strokeLineJoin="miter";this.strokeDashstyle="solid";this.pointRadius=6;this.shadowBlur=0;this.shadowColor="#000000";this.shadowOffsetX=0;this.shadowOffsetY=0;this.label="";this.labelRect=false;this.fontColor="";this.fontSize=12;this.fontStyle="normal";this.fontVariant="normal";this.fontWeight="normal";this.fontFamily="arial,sans-serif";this.labelPosition="top";this.labelAlign="center";this.labelBaseline="middle";this.labelXOffset=0;this.labelYOffset=0;a(this,e)};e.ThemeStyle=l;u.Map.ThemeStyle=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.rangeTheme3DLayer=e.RangeTheme3DLayer=undefined;var n=r(10);var i=y(n);var o=r(5);var s=y(o);var a=r(6);var u=y(a);var l=r(11);var c=y(l);var h=r(12);var f=y(h);var p=r(7);var d=r(170);function y(t){return t&&t.__esModule?t:{default:t}}var v=p.Common.extend,g=p.Common.Zondy;var m=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.heightStops=null;n.colorStops=null;n.base=null;n.legendRatio=1;v(n,r);return n}(0,u.default)(e,[{key:"getLayerStyleOptions",value:function t(){var e=this.opacity==null?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var r=/^[0-9]+.?[0-9]*$/;var n={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:r.test(this.base)?this.base:1},"fill-extrusion-opacity":e};if(this.heightStops){n["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:r.test(this.base)?this.base:1}}else if(this.height){n["fill-extrusion-height"]=this.height}else{n["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"}}if(this.baseHeightField){n["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return n}},{key:"getHighlightStyleOptions",value:function t(){var e=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";return{"fill-extrusion-color":e,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function t(){var e=this.colorStops&&this.colorStops.length||0;var r="<ul>";var n;for(n=0;n<e;n++){var i=this.colorStops[n][0];var o=this._getWrapperText(i);if(n===e-1){o="> "+o}else{var s=this._getWrapperText(this.colorStops[n+1][0]);o=o+"-"+s}var a=this.colorStops[n][1];r+="<li><span style='background-color:"+a+";'></span><span>"+o+"</span></li>"}r+="</ul>";return r}},{key:"_getWrapperText",value:function t(e){var r=e*(this.legendRatio==null?1:parseFloat(this.legendRatio));var n=parseFloat(r);if(n%1e6<=1e6){return n.toString()}return parseInt(n/1e3)+"k"}}]);return e}(d.Theme3DLayer);e.RangeTheme3DLayer=m;var _=e.rangeTheme3DLayer=function t(e,r){return new m(e,r)};g.Map.rangeTheme3DLayer=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.uniqueTheme3DLayer=e.UniqueTheme3DLayer=undefined;var n=r(10);var i=y(n);var o=r(5);var s=y(o);var a=r(6);var u=y(a);var l=r(11);var c=y(l);var h=r(12);var f=y(h);var p=r(7);var d=r(170);function y(t){return t&&t.__esModule?t:{default:t}}var v=p.Common.extend,g=p.Common.Zondy;var m=function(t){(0,f.default)(e,t);function e(t,r){(0,s.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));n.colorStops=null;n.heightStops=null;v(n,r);return n}(0,u.default)(e,[{key:"getLayerStyleOptions",value:function t(){var e=this.opacity==null?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};if(this.height!=null){r["fill-extrusion-height"]=this.height}else{r["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical",stops:this.heightStops}}if(this.baseHeightField){r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return r}},{key:"getHighlightStyleOptions",value:function t(){var e=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";var r={"fill-extrusion-color":e,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};if(this.height!=null){r["fill-extrusion-height"]=this.height||0}return r}},{key:"_createLegendElement",value:function t(){var e="<ul>";var r=this.colorStops&&this.colorStops.length||0;for(var n=0;n<r;n++){var i=this.colorStops[n][0];var o=this.colorStops[n][1];e+="<li><span style='background-color:"+o+";'></span><span>"+i+"</span></li>"}e+="</ul>";return e}}]);return e}(d.Theme3DLayer);e.UniqueTheme3DLayer=m;var _=e.uniqueTheme3DLayer=function t(e,r){return new m(e,r)};g.Map.uniqueTheme3DLayer=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisVectorTileService=e.PostgisTableService=e.PostgisQueryService=e.PostgisCustomQueryService=e.PostgisCatlogService=undefined;var n=r(507);var i=r(508);var o=r(509);var s=r(510);var a=r(511);e.PostgisCatlogService=n.PostgisCatlogService;e.PostgisCustomQueryService=i.PostgisCustomQueryService;e.PostgisQueryService=o.PostgisQueryService;e.PostgisTableService=s.PostgisTableService;e.PostgisVectorTileService=a.PostgisVectorTileService;var u={PostgisCatlogService:n.PostgisCatlogService,PostgisCustomQueryService:i.PostgisCustomQueryService,PostgisQueryService:o.PostgisQueryService,PostgisTableService:s.PostgisTableService,PostgisVectorTileService:a.PostgisVectorTileService};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisCatlogService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(72);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisCatlogService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/catalog/pg/services/";r.path=t.path;r.classify=t.classify;r.keyWords=t.keyWords;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={classify:e.classify,keyWords:e.keyWords,pageSize:e.pageSize,pageNo:e.pageNo}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisCatlogService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisCustomQueryService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(72);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisCustomQueryService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/executequery/";r.path=t.path;r.queryBody=t.queryBody;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={queryBody:e.queryBody}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisCustomQueryService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisQueryService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(72);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisQueryService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/query/";r.path=t.path;r.geometry=t.geometry;r.geoFormat=t.geoFormat;r.sref=t.sref;r.filter=t.filter;r.fields=t.fields;r.segments=t.segments;r.statisticFields=t.statisticFields;r.includeProperites=t.includeProperites;r.includeGeometry=t.includeGeometry;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={geometry:e.geometry,geoFormat:e.geoFormat,sref:e.sref,filter:e.filter,fields:e.fields,segments:e.segments,statisticFields:e.statisticFields,includeProperites:e.includeProperites,propertyNames:e.propertyNames,includeGeometry:e.includeGeometry,pageSize:e.pageSize,pageNo:e.pageNo}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option,s=this.geometry,a=this.geoFormat;n+=i;var u=this.getFullUrl(n,o);this.get(u,e,r)}},{key:"queryByWkt",value:function t(e){}},{key:"queryByGeojson",value:function t(e){}},{key:"queryByCircle",value:function t(e){}},{key:"queryByRect",value:function t(e){}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisQueryService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisTableService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(72);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisTableService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/schema/";r.path=t.path;r.tableNames=t.tableNames;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={tableNames:e.tableNames}}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisTableService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PostgisVectorTileService=undefined;var n=r(2);var i=y(n);var o=r(1);var s=y(o);var a=r(9);var u=y(a);var l=r(3);var c=y(l);var h=r(4);var f=y(h);var p=r(0);var d=r(72);function y(t){return t&&t.__esModule?t:{default:t}}var v=e.PostgisVectorTileService=function(t){(0,f.default)(e,t);function e(t){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));r.serviceUrl="/datastore/rest/dataset/pg/vectortile/";r.path=t.path;r.version=t.version;r.tileMatrix=t.tileMatrix;r.tileRow=t.tileRow;r.tileCol=t.tileCol;r.fixOption(t);return r}(0,u.default)(e,[{key:"fixOption",value:function t(e){this.option={version:e.version,tileMatrix:e.tileMatrix,tileRow:e.tileRow,tileCol:e.tileCol}}},{key:"getWmtsUrl",value:function t(){var e=this.serviceUrl,r=this.path,n=this.option;e+=r;var i=this.getFullUrl(e,n);i=decodeURI(i);return i}},{key:"query",value:function t(e,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var s=this.getFullUrl(n,o);this.get(s,e,r)}}]);return e}(d.DataStoreService);e.default=v;p.Zondy.DataStore.PostGIS.PostgisVectorTileService=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=e.MapvLayer=e.EchartsLayer=undefined;var n=r(513);var i=r(515);var o=r(518);e.EchartsLayer=n.EchartsLayer;e.MapvLayer=i.MapvLayer;e.DeckglLayer=o.DeckglLayer},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.EchartsLayer=undefined;var n=r(5);var i=f(n);var o=r(6);var s=f(o);var a=r(17);var u=f(a);var l=r(284);var c=f(l);r(99);var h=r(514);function f(t){return t&&t.__esModule?t:{default:t}}var p=e.EchartsLayer=function(){function t(e,r){(0,i.default)(this,t);this.map=e;this.options=r;this.layerId=r.layerId||"echartlayerdefaultid";this.layerClass=r.classId||"echartlayerdefaultclass";this.initDevicePixelRatio();this.mapContainer=e.getCanvasContainer();this.canvas=this._createCanvas();this.mapContainer.appendChild(this.canvas);this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.chart=c.default.init(this.canvas);this.visible=true;this.initEcharts();this._resizeCanvas();return this}(0,s.default)(t,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"initEcharts",value:function t(){c.default.mapboxglMap=this.map;c.default.registerCoordinateSystem("mapboxgl",h.MapCoordSys);c.default.extendComponentModel({type:"mapboxgl",getBMap:function t(){return this.__mapboxgl},defaultOption:{roam:false}});c.default.registerAction({type:"MapboxGLRoma",event:"MapboxGLRoma",update:"updateLayout"},function(t,e){});return this}},{key:"_createCanvas",value:function t(){var e=document.createElement("div");e.id=this.layerId;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width);e.height=parseInt(this.map.getCanvas().style.height);e.style.width=this.map.getCanvas().style.width;e.style.height=this.map.getCanvas().style.height;e.setAttribute("id",this.layerId);e.setAttribute("class",this.layerClass);return e}},{key:"_resizeCanvas",value:function t(){var e=this;window.onresize=function(){var t=e.canvas;var r=e.map;t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.width=r.getCanvas().style.width;t.style.height=r.getCanvas().style.height;t.width=parseInt(r.getCanvas().style.width);t.height=parseInt(r.getCanvas().style.height);e.chart.resize()}}},{key:"addTo",value:function t(e){var r=this;c.default.extendComponentView({type:"mapboxgl",render:function t(e,n,i){var o=true;var s=c.default.mapboxglMap;var a=i.getZr().painter.getViewportRoot();var u=e.coordinateSystem;var l=function t(n,s){if(o||!r.visible){return}var l=document.getElementsByClassName("mapboxgl-map")[0];var c=[-parseInt(l.style.left,10)||0,-parseInt(l.style.top,10)||0];a.style.left=c[0]+"px";a.style.top=c[1]+"px";u.setMapOffset(c);e.__mapOffset=c;i.dispatchAction({type:"MapboxGLRoma"})};function h(){if(o||!r.visible){return}i.dispatchAction({type:"MapboxGLRoma"})}s.off("move",this._oldMoveHandler);s.off("zoomend",this._oldZoomEndHandler);s.on("move",l);s.on("zoomend",h);this._oldMoveHandler=l;this._oldZoomEndHandler=h;var f=e.get("roam");if(f&&f!=="scale"){}else{}if(f&&f!=="move"){}else{}o=false}});this.chart.setOption(this.options);return this}},{key:"_visible",value:function t(){this.visible=true;this.canvas.style.visibility="visible"}},{key:"_unvisible",value:function t(){this.visible=false;this.canvas.style.visibility="hidden"}},{key:"show",value:function t(){this._visible()}},{key:"hide",value:function t(){this._unvisible()}},{key:"remove",value:function t(){var e=this;this.map._listeners.move.forEach(function(t){if(t.name==="moveHandler"){e.map.off("move",t)}});this.map._listeners.move.forEach(function(t){if(t.name==="zoomEndHandler"){e.map.off("zoomend",t)}});this.chart.clear();if(this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);this.map=undefined;return this}},{key:"update",value:function t(e){this.chart.setOption(e)}}]);return t}();u.default.zondy.EchartsLayer=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapCoordSys=u;var n=r(17);var i=a(n);var o=r(284);var s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){this._MapboxGLMap=t;this.dimensions=["lng","lat"];this._mapOffset=[0,0];this._api=e}u.prototype.dimensions=["lng","lat"];u.prototype.setMapOffset=function(t){this._mapOffset=t};u.prototype.getBMap=function(){return this._MapboxGLMap};u.prototype.dataToPoint=function(t){var e=this._MapboxGLMap.project(t);var r=this._mapOffset;return[e.x-r[0],e.y-r[1]]};u.prototype.pointToData=function(t){var e=this._mapOffset;var t=this._MapboxGLMap.project([t[0]+e[0],t[1]+e[1]]);return[t.lng,t.lat]};u.prototype.getViewRect=function(){var t=this._api;return new s.default.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())};u.prototype.getRoamTransform=function(){return s.default.matrix.create()};u.prototype.prepareCustoms=function(t){var e=s.default.util;var r=this.getViewRect();return{coordSys:{type:"mapboxgl",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(n,this)}};function n(t,r){r=r||[0,0];return e.map([0,1],function(e){var n=r[e];var i=t[e]/2;var o=[];var s=[];o[e]=n-i;s[e]=n+i;o[1-e]=s[1-e]=r[1-e];return Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(s)[e])},this)}};u.dimensions=u.prototype.dimensions;u.create=function(t,e){var r;t.eachComponent("mapboxgl",function(t){var n=e.getZr().painter.getViewportRoot();var i=s.default.mapboxglMap;r=new u(i,e);r.setMapOffset(t.__mapOffset||[0,0]);t.coordinateSystem=r});t.eachSeries(function(t){if(t.get("coordinateSystem")==="mapboxgl"){t.coordinateSystem=r}})};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapvLayer=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(17);var u=c(a);r(99);var l=r(516);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.MapvLayer=function(){function t(e,r,n){(0,i.default)(this,t);this.map=e;this.layerID=n.layerID;delete n["layerID"];this.mapvBaseLayer=new l.MapvBaseLayer(e,r,n,this);this.mapVOptions=n;this.initDevicePixelRatio();this.canvas=this._createCanvas();this.render=this.render.bind(this);this.bindEvent();this.mapContainer=e.getCanvasContainer();this.mapContainer.appendChild(this.canvas);this._reset()}(0,s.default)(t,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"bindEvent",value:function t(){var e=this.map;this.innerMoveStart=this.moveStartEvent.bind(this);this.innerMoveEnd=this.moveEndEvent.bind(this);this.innnerZoomStart=this.zoomStartEvent.bind(this);this.innnerZoomEnd=this.zoomEndEvent.bind(this);this.innnerRotateStart=this.rotateStartEvent.bind(this);this.innnerRotateEnd=this.rotateEndEvent.bind(this);this.innerResize=this.resizeEvent.bind(this);this.innerRemove=this.removeEvent.bind(this);e.on("resize",this.innerResize);e.on("zoomstart",this.innnerZoomStart);e.on("zoomend",this.innnerZoomEnd);e.on("rotatestart",this.innnerRotateStart);e.on("rotateend",this.innnerRotateEnd);e.on("movestart",this.innerMoveStart);e.on("moveend",this.innerMoveEnd);this.map.on("remove",this.innerRemove)}},{key:"unbindEvent",value:function t(){var e=this.map;e.off("resize",this.innerResize);e.off("zoomstart",this.innnerZoomStart);e.off("zoomend",this.innnerZoomEnd);e.off("rotatestart",this.innnerRotateStart);e.off("rotateend",this.innnerRotateEnd);e.off("movestart",this.innerMoveStart);e.off("moveend",this.innerMoveEnd)}},{key:"moveStartEvent",value:function t(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"moveEndEvent",value:function t(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"zoomStartEvent",value:function t(){this._unvisiable()}},{key:"zoomEndEvent",value:function t(){this._unvisiable()}},{key:"rotateStartEvent",value:function t(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"rotateEndEvent",value:function t(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"resizeEvent",value:function t(){this._reset();this._visiable()}},{key:"removeEvent",value:function t(){this.mapContainer.removeChild(this.canvas)}},{key:"addData",value:function t(e,r){this.mapvBaseLayer.addData(e,r)}},{key:"updateData",value:function t(e,r){this.mapvBaseLayer.updateData(e,r)}},{key:"getData",value:function t(){if(this.mapvBaseLayer){this.dataSet=this.mapvBaseLayer.getData()}return this.dataSet}},{key:"removeData",value:function t(e){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(e)}},{key:"removeAllData",value:function t(){this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function t(){this.canvas.style.display="block";return this}},{key:"_unvisiable",value:function t(){this.canvas.style.display="none";return this}},{key:"_createCanvas",value:function t(){var e=document.createElement("canvas");var r=this.devicePixelRatio;e.id=this.layerID;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width)*r;e.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){e.getContext("2d").scale(r,r)}e.style.width=this.map.getCanvas().style.width;e.style.height=this.map.getCanvas().style.height;return e}},{key:"_reset",value:function t(){if(this.canvas==null){return}this.resizeCanvas();this.fixPosition();this.onResize();this.render()}},{key:"draw",value:function t(){return this._reset()}},{key:"show",value:function t(){this._visiable()}},{key:"hide",value:function t(){this._unvisiable()}},{key:"update",value:function t(e){if(e==undefined){return}this.updateData(e.data,e.options)}},{key:"resizeCanvas",value:function t(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";if(this.canvas==undefined||this.canvas==null)return;var e=this.canvas;var r=this.devicePixelRatio;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.width=parseInt(this.map.getCanvas().style.width)*r;e.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){e.getContext("2d").scale(r,r)}}},{key:"fixPosition",value:function t(){}},{key:"onResize",value:function t(){}},{key:"originPosition",value:function t(){this.originPitch=this.map.getPitch();this.originBearing=this.map.getBearing();var e=this.map.project(new u.default.LngLat(0,0));this.originX=e.x;this.originY=e.y}},{key:"render",value:function t(){if(this.mapvBaseLayer==undefined)return;this.mapvBaseLayer._canvasUpdate()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.layerID);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"remove",value:function t(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}},{key:"destroy",value:function t(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}}]);return t}();u.default.zondy.MapvLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MapvBaseLayer=undefined;var n=r(10);var i=m(n);var o=r(5);var s=m(o);var a=r(6);var u=m(a);var l=r(11);var c=m(l);var h=r(13);var f=m(h);var p=r(12);var d=m(p);var y=r(517);var v=r(17);var g=m(v);function m(t){return t&&t.__esModule?t:{default:t}}var _=y.baiduMapLayer?y.baiduMapLayer.__proto__:Function;var x=e.MapvBaseLayer=function(t){(0,d.default)(e,t);function e(t,r,n,o){(0,s.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n));if(!_)return(0,c.default)(a);a.map=t;a.dataSet=r;var u=a;var l=null;n=n||{};u.init(n);u.argCheck(n);a.initDevicePixelRatio();a.canvasLayer=o;a.stopAniamation=false;a.animation=n.animation;a.mousemoveEvent=a.mousemoveEvent.bind(a);a.bindEvent();return a}(0,u.default)(e,[{key:"initDevicePixelRatio",value:function t(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function t(r){var n=r.point;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"clickEvent",this).call(this,n,r)}},{key:"mousemoveEvent",value:function t(r){var n=r.point;(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"mousemoveEvent",this).call(this,n,r)}},{key:"addAnimatorEvent",value:function t(){}},{key:"animatorMovestartEvent",value:function t(){var e=this.options.animation;if(this.isEnabledTime()&&this.animator){this.steps.step=e.stepsRange.start}}},{key:"animatorMoveendEvent",value:function t(){if(this.isEnabledTime()&&this.animator){}}},{key:"bindEvent",value:function t(){var e=this.map;if(this.options.methods){if(this.options.methods.click){e.on("click",this.clickEvent)}if(this.options.methods.mousemove){e.on("mousemove",this.mousemoveEvent)}}}},{key:"unbindEvent",value:function t(){var e=this.map;if(this.options.methods){if(this.options.methods.click){e.off("click",this.clickEvent)}if(this.options.methods.mousemove){e.off("mousemove",this.mousemoveEvent)}}}},{key:"getContext",value:function t(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function t(e){var r=this;r.options=e;this.initDataRange(e);this.context=r.options.context||"2d";if(r.options.zIndex){this.canvasLayer&&this.canvasLayer.setZIndex(r.options.zIndex)}this.initAnimator()}},{key:"_canvasUpdate",value:function t(e){var r=this.map;if(!this.canvasLayer||this.stopAniamation||this.canvasLayer.disposeFlag){return}var n=this;var i=n.options.animation;var o=this.getContext();if(n.isEnabledTime()){if(e===undefined){this.clear(o);return}if(this.context==="2d"){o.save();o.globalCompositeOperation="destination-out";o.fillStyle="rgba(0, 0, 0, .1)";o.fillRect(0,0,o.canvas.width,o.canvas.height);o.restore()}}else{this.clear(o)}if(this.context==="2d"){for(var s in n.options){o[s]=n.options[s]}}else{o.clear(o.COLOR_BUFFER_BIT)}if(n.options.minZoom&&r.getZoom()<n.options.minZoom||n.options.maxZoom&&r.getZoom()>n.options.maxZoom){return}var a={transferCoordinate:function t(e){var n=r.project(new g.default.LngLat(e[0],e[1]));return[n.x,n.y]}};if(e!==undefined){a.filter=function(t){var r=i.trails||10;if(e&&t.time>e-r&&t.time<e){return true}else{return false}}}var u=n.dataSet.get(a);this.processData(u);if(n.options.unit=="m"&&n.options.size){n.options._size=n.options.size}else{n.options._size=n.options.size}var l=r.project(new g.default.LngLat(0,0));this.drawContext(o,new y.DataSet(u),n.options,l);n.options.updateCallback&&n.options.updateCallback(e)}},{key:"updateData",value:function t(r,n){var o=r;if(o&&o.get){o=o.get()}if(o!=undefined){this.dataSet.set(o)}(0,f.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function t(e,r){var n=e;if(e&&e.get){n=e.get()}this.dataSet.add(n);this.update({options:r})}},{key:"getData",value:function t(){return this.dataSet}},{key:"removeData",value:function t(e){if(!this.dataSet){return}var r=this.dataSet.get({filter:function t(r){return e!=null&&typeof e==="function"?!e(r):true}});this.dataSet.set(r);this.update({options:null})}},{key:"clearData",value:function t(){this.dataSet&&this.dataSet.clear();this.update({options:null})}},{key:"draw",value:function t(){this.canvasLayer.draw()}},{key:"clear",value:function t(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}]);return e}(_)},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DeckglLayer=undefined;var n=r(5);var i=c(n);var o=r(6);var s=c(o);var a=r(17);var u=c(a);r(99);var l=r(519);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.DeckglLayer=function(){function t(e,r){(0,i.default)(this,t);this.layerTypeID=e;this.data=[].concat(r.data);this.props=r.props?r.props:{};this.callback=r.callback?r.callback:{};this.id=r.layerId?r.layerId:"graphicLayer_"+this.layerTypeID+"_";this.visibility=true}(0,s.default)(t,[{key:"onAdd",value:function t(e){this.map=e;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"addTo",value:function t(e){this.map=e;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"remove",value:function t(){this.map.off("render",this._moveEvent.bind(this));this.map.off("resize",this._resizeEvent.bind(this));this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function t(){this.remove();this.clear()}},{key:"moveTo",value:function t(e,r){var n=document.getElementById(this.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(e);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(e);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"setVisibility",value:function t(e){if(this.canvas&&e!==this.visibility){this.visibility=e;this.canvas.style.display=e?"block":"none"}}},{key:"setStyle",value:function t(e){l.Util.extend(this.props,e);this._createLayerByLayerTypeID();this.update()}},{key:"setData",value:function t(e){this.data=this.data||[];this.data.length=0;var r=!l.Util.isArray(e)?[e]:[].concat(e);if(!this.layer.props.data){this.layer.props.data=[]}this.layer.props.data.length=0;for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.data=this.layer.props.data;this.update()}},{key:"addData",value:function t(e){this.data=this.data||[];var r=!l.Util.isArray(e)?[e]:[].concat(e);if(!this.layer.props.data){this.layer.props.data=[]}for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.update()}},{key:"update",value:function t(){if(this.layer.lifecycle!=="Awaiting state"){var e={dataChanged:true,propsChanged:true,viewportChanged:true,updateTriggersChanged:true};this.layer.setChangeFlags(e)}this._draw()}},{key:"clear",value:function t(){this.removeData();this.deckGL.finalize()}},{key:"removeData",value:function t(){this.data.length=0;if(this.layer.props.data){this.layer.props.data.length=0}this.update()}},{key:"_draw",value:function t(){var e=this._getState();e.layers=[this.layer];e.canvas=this.canvas;this.deckGL.setProps(e)}},{key:"_getState",value:function t(){var e=this.map;var r=parseInt(this.canvas.style.width);var n=parseInt(this.canvas.style.height);var i=e.getCenter();var o=i.lng;var s=i.lat;var a=e.getZoom();var l=e.getMaxZoom();var c=e.getPitch();var h=e.getBearing();var f={width:r,height:n,longitude:o,latitude:s,zoom:a,maxZoom:l,pitch:c,bearing:h};var p={};for(var d in f){p[d]=f[d]}for(var y in this.props){p[y]=this.props[y]}if(e.getCRS&&e.getCRS()!==u.default.CRS.EPSG3857){p.coordinateSystem=this.coordinateSystem;p.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem}p.data=this.data;return p}},{key:"_createLayerByLayerTypeID",value:function t(){this.props.data=this.data;this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem;this.props.coordinateSystem=this.coordinateSystem;this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover);if(this.layerTypeID==="scatter-plot"){this.props.id="scatter-plot";this._createScatterPlotLayer()}else if(this.layerTypeID==="path-layer"){this.props.id="path-layer";this._createPathLayer()}else if(this.layerTypeID==="polygon-layer"){this.props.id="polygon-layer";this._createPolygonLayer()}else if(this.layerTypeID==="arc-layer"){this.props.id="arc-layer";this._createArcLineLayer()}else if(this.layerTypeID==="hexagon-layer"){this.props.id="hexagon-layer";this._createHexagonLayer()}else{throw new Error(this.layerTypeID+" does not support")}}},{key:"_createScatterPlotLayer",value:function t(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t){return[0,0,0]}var e=t.getLngLat();return e&&[e.lng,e.lat,0]};if(this.callback.getColor){this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}}if(this.callback.getRadius){this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}}if(this.props.color||this.props.radius){this.props.updateTriggers={};if(this.props.radius){this.props.updateTriggers.getRadius=[this.props.radius]}if(this.props.color){this.props.updateTriggers.getColor=[this.props.color]}}this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function t(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(t){return t.geometry.coordinates};if(this.callback.getColor){this.props.getColor=this.callback.getColor}if(this.callback.getWidth){this.props.getWidth=this.callback.getWidth}if(this.callback.getDashArray){this.props.getDashArray=this.callback.getDashArray}this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function t(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(t){return t.geometry.coordinates};if(this.callback.getElevation){this.props.getElevation=this.callback.getElevation}if(this.callback.getFillColor){this.props.getFillColor=this.callback.getFillColor}if(this.callback.getLineColor){this.props.getLineColor=this.callback.getLineColor}if(this.callback.getLineWidth){this.props.getLineWidth=this.callback.getLineWidth}this.props.updateTriggers={};this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128];this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function t(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates[0]};this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates[1]};if(this.callback.getStrokeWidth){this.props.getStrokeWidth=this.callback.getStrokeWidth}if(this.callback.getSourceColor){this.props.getSourceColor=this.callback.getSourceColor}if(this.callback.getTargetColor){this.props.getTargetColor=this.callback.getTargetColor}this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function t(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t){return[0,0,0]}return t.geometry.coordinates};if(this.callback.getColorValue){this.props.getColorValue=this.callback.getColorValue}if(this.callback.getElevationValue){this.props.getElevationValue=this.callback.getElevationValue}this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function t(){this.canvas=this._createCanvas();this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function t(){var e=document.createElement("canvas");e.id=this.id;e.style.position="absolute";e.style.top=0+"px";e.style.left=0+"px";e.style.cursor="";var r=this.map;e.width=parseInt(r.getCanvas().style.width);e.height=parseInt(r.getCanvas().style.height);e.style.width=r.getCanvas().style.width;e.style.height=r.getCanvas().style.height;return e}},{key:"_moveEvent",value:function t(){this._draw()}},{key:"_resizeEvent",value:function t(){var e=this.canvas;var r=this.map;e.width=parseInt(r.getCanvas().style.width);e.height=parseInt(r.getCanvas().style.height);e.style.width=r.getCanvas().style.width;e.style.height=r.getCanvas().style.height;this._draw()}}]);return t}();u.default.zondy.DeckglLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Util=undefined;var n=r(520);var i=h(n);var o=r(5);var s=h(o);var a=r(6);var u=h(a);var l=r(17);var c=h(l);r(99);function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Util=function(){function t(){(0,s.default)(this,t)}(0,u.default)(t,null,[{key:"isArray",value:function t(e){return Object.prototype.toString.call(e)=="[object Array]"}},{key:"toProcessingParam",value:function t(e){var r={};if(e.length<1){r=""}else{var n=[];for(var i=0;i<e.length;i++){var o={};o.x=e[i][0];o.y=e[i][1];n.push(o)}r.type="REGION";r.points=n}return r}},{key:"extend",value:function t(e){for(var r=0;r<(0,i.default)(arguments).length;r++){var n=(0,i.default)(arguments)[r];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}var o=arguments[n];if(o){for(var s=0;s<(0,i.default)(o).length;s++){var a=(0,i.default)(o)[s];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}e[a]=o[a]}}}return e}},{key:"isNumber",value:function t(e){if(e===""){return false}var r=Number(e);if(r===0){return true}return!isNaN(r)}},{key:"isString",value:function t(e){return typeof e==="string"&&e.constructor===String}},{key:"newGuid",value:function t(e){var r=e||32;var n="";for(var i=1;i<r;i++){var o=Math.floor(Math.random()*16).toString(16);n+=o}return n}},{key:"hexToRgba",value:function t(e,r){var n=[],i=[];e=e.replace(/#/,"");if(e.length==3){var o=[];for(var s=0;s<3;s++){o.push(e.charAt(s)+e.charAt(s))}e=o.join("")}for(var a=0;a<6;a+=2){n[a]="0x"+e.substr(a,2);i.push(parseInt(Number(n[a])))}i.push(r);return"rgba("+i.join(",")+")"}},{key:"isMatchAdministrativeName",value:function t(e,r){if(this.isString(r)){var n=e.substr(0,2);if(n==="张家"){n=e.substr(0,3)}return!!r.match(new RegExp(n))}return false}}]);return t}();c.default.zondy.Util=f},function(t,e,r){t.exports={default:r(521),__esModule:true}},function(t,e,r){r(522);var n=r(23).Object;t.exports=function t(e){return n.getOwnPropertyNames(e)}},function(t,e,r){r(150)("getOwnPropertyNames",function(){return r(256).f})}]);